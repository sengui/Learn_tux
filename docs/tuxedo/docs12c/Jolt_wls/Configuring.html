<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/Jolt_wls/fm/Configuring.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:15:51" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Configuring Jolt for WebLogic Server</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Using Oracle Jolt with Oracle WebLogic Server
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="Intro.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="Implementing.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
&nbsp;
<a href="../pdf/Jolt_wls.pdf" target="pdf"><img id="LongDescNotReq5" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq6" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp4901"> </a>
Configuring Jolt for WebLogic Server
</h1>
<p class="pBody"><a name="wp3596"> </a>
Configuring a Jolt Session Pool connection between Tuxedo and WebLogic Server requires two procedures:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp917"> </a>Configuring Jolt for Tuxedo </li>
<li><a name="wp3425"> </a>Configuring Jolt for WebLogic Server</li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp932"> </a>
Configuring Jolt for Tuxedo
</h2><p class="pBody"><a name="wp935"> </a>
Refer to the <em class="cEmphasis">Using Oracle Jolt </em>for instructions on setting up a Jolt Service Listener (JSL) within Tuxedo. In <em class="cEmphasis">Using Oracle Jolt</em>, it is assumed that JSL services have already been configured within the Tuxedo domain. The guide only describes how to establish a session pool connection to these services from WebLogic Server. 
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp937"> </a>
Configuring Jolt for WebLogic Server
</h2><p class="pBody"><a name="wp938"> </a>
This section describes how to set up an Oracle Jolt connection pool between the WebLogic Server and the JSL in the Tuxedo domain. Your WebLogic Server must have access to the host running the JSL. 
</p>
<h3 class="pHeading2"><a name="wp940"> </a>
Jolt Startup Class and Connection Pool
</h3>
<p class="pBody"><a name="wp941"> </a>
You must instruct WebLogic Server to invoke the <code class="cCode">PoolManagerStartUp</code> class whenever the WebLogic Server is started or restarted. This invocation establishes the pool connection to Tuxedo from the <code class="cCode">config.xml</code> file, as shown in the following example. 
</p>
<a name="wp4431"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>For WebLogic Server 6.0 or later, Jolt startup classes and connection pool attributes are configured via the configuration MBeans in the Administration Console. For more information about configuration and run-time MBeans, refer to the <em class="cEmphasis">Oracle WebLogic Server Administration Guide</em>.</td>
</tr>
</table>

<a name="wp3728"> </a><div class="pPreformatted"><pre>&lt;StartupClass<br />  ClassName=&quot;bea.jolt.pool.servlet.weblogic.PoolManagerStartUp&quot;<br />  FailureIsFatal=&quot;false&quot;<br />  Name=&quot;MyStartup Class&quot;<br />  Targets=&quot;myserver&quot;<br />/&gt;<br /><code class="cCode">&lt;JoltConnectionPool<br />   ApplicationPassword=&quot;tuxedo&quot;<br />   MaximumPoolSize=&quot;5&quot;<br />   MinimumPoolSize=&quot;3&quot;<br />   Name=&quot;MyJolt Connection Pool&quot;<br />   PrimaryAddresses=&quot;//TUXSERVER:6309&quot;<br />   RecvTimeout=&quot;300&quot;<br />   SecurityContextEnabled=&quot;true&quot;<br />   Targets=&quot;myserver&quot;<br />   UserName=&quot;joltuser&quot;<br />   UserPassword=&quot;jolttest&quot;<br />   UserRole=&quot;clt&quot;<br />/&gt;</code></pre></div><p class="pBody"><a name="wp4996"> </a>
The startup class in the preceeding example instructs WebLogic Server to invoke the <code class="cCode">PoolManagerStartUp</code> class when the WebLogic Server starts. The <code class="cCode">JoltConnectionPool</code> specifies initialization arguments that are passed to the <code class="cCode">PoolManagerStartUp</code> class. If you do not want the <code class="cCode">SessionPool</code> to try to reestablish the connection in case any of the JSL is forced to shutdown, set the JVM property <code class="cCode">jolt.sessionPoolKeepAlive=false</code> when starting up the Weblogic Server.
</p>
<h4 class="pHeading3"><a name="wp3920"> </a>
Jolt Connection Pool Attributes
</h4>
<p class="pBody"><a name="wp4165"> </a>
The Jolt connection pool attributes are defined as follows: 
</p>
<p class="pGraphic"><a name="wp5133"> </a>
</p>
<div align="left">
<table class="noborder" border="0" cellpadding="5" id="wp4116table2411">  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4116"> </a>
<span style="font-style: normal; font-weight: normal; text-decoration: none; vertical-align: baseline">Application<br />Password</span>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4118"> </a>
(Optional) Tuxedo application password. This is required only if the Tuxedo authentication level is <code class="cCode">USER_AUTH</code> or <code class="cCode">APP_PW</code>. 
</div>
</td>
</tr>
  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4096"> </a>
<code class="cCode">MininumPoolSize</code>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4098"> </a>
(Required) Specifies the initial session pool size when the session pool is created.
</div>
</td>
</tr>
  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4100"> </a>
<code class="cCode">MaximumPoolSize</code>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4102"> </a>
(Required) Specifies the maximum session pool size. Each session within a pool can handle up to 50 outstanding requests at any one time. 
</div>
</td>
</tr>
  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4031"> </a>
<code class="cCode">Name</code>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4033"> </a>
(Optional) Defines a name for this session pool that should be unique from the names of other session pools. This is an optional argument, but it is recommended that you use it to avoid ambiguity. The <code class="cCode">SessionPoolManager</code> allows only one session pool to remain unnamed. You can access this unnamed session pool from your application by supplying <code class="cCode">null</code> in place of the <code class="cCodeEmphasis">poolname</code> string argument to the <code class="cCode">getSessionPool()</code> method.
</div>
<p class="pTableNote"><a name="wp4034"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>We <span style="font-style: italic">strongly</span> recommend that you name every session pool. </td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4036"> </a>
<code class="cCode">PrimaryAdresses</code>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4038"> </a>
(Required) Defines a list of the addresses of the primary Jolt Server Listeners (JSLs) on the Tuxedo system. These are defined in the format: <br /> <code class="cCode"> </code><code class="cCodeEmphasis">//hostname:port<br /></code>where <code class="cCodeEmphasis">hostname</code> is the name of the server where the JSL is running, and <code class="cCodeEmphasis">port</code> is the port on which the JSL is configured to listen for requests. You can specify multiple addresses in a semicolon-separated (;) list. 
</div>
<p class="pTableNote"><a name="wp4039"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You must specify at least one primary JSL <code class="cCodeEmphasis">hostname:port</code> address.</td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4041"> </a>
<code class="cCode">Failover<br />Addresses</code>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4043"> </a>
(Optional) You can specify a list of failover Jolt Server Listeners in the same format used for <code class="cCodeEmphasis">appaddrlist</code> above. Jolt attempts to use these failover JSL(s) if the primary JSLs listed above fail. These JSLs need not reside on the same host as the primary JSLs.
</div>
</td>
</tr>
  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4053"> </a>
<code class="cCode">RecvTimeout</code>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4055"> </a>
(Required) Specifies the amount of time the client should wait to receive a response before timing out. 
</div>
</td>
</tr>
  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4057"> </a>
<code class="cCode">SecurityContextEnabled</code>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4059"> </a>
(Optional) Enables or disables the security context for this connection pool. This option should be enabled if you want to implement authentication propagation between WebLogic Server and Jolt. If identity propagation is desired, then the Jolt Service Handler (JSH) must be started with the <code class="cCode">-a</code> option. If this option is not set, but SecurityContext is enabled, the JSH will not accept this request. If the SecurityContext attribute is enabled, then the Jolt client will pass the username of the caller to the JSH. 
</div>
<div class="pCellBody"><a name="wp4144"> </a>
If the JSH gets a message with the caller&#8217;s identity, it calls <code class="cCode">impersonate_user()</code> to get the appkey for the user. JSH caches the appkey, so the next time the caller makes a request, the appkey is retrieved from the cache and the request is forwarded to the service. A cache is maintained by each JSH, which means that there will be a cache maintained for all the session pools connected to the same JSH. 
</div>
</td>
</tr>
  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4061"> </a>
<code class="cCode">Targets</code>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4063"> </a>
(Required) Specifies the target servers for the connection pool. 
</div>
</td>
</tr>
  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4065"> </a>
<code class="cCode">UserName</code>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4067"> </a>
(Optional) Tuxedo user name. This is required only if the Tuxedo authentication level is <code class="cCode">USER_AUTH</code>. 
</div>
</td>
</tr>
  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4069"> </a>
<code class="cCode">UserPassword</code>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4071"> </a>
(Optional) Tuxedo user password. This is required only if the Tuxedo authentication level is <code class="cCode">USER_AUTH</code>. 
</div>
</td>
</tr>
  <tr align="left">    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4073"> </a>
<code class="cCode">UserRole</code>
</div>
</td>
    <td class="noborder" scope="row"><div class="pCellBody"><a name="wp4075"> </a>
(Optional) Tuxedo user role. This is required only if the Tuxedo authentication level is <code class="cCode">USER_AUTH</code> or <code class="cCode">APP_PW</code>. 
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp991"> </a>
It is recommended that you configure one Jolt session pool for each application running on the WebLogic Server. 
</p>
<h3 class="pHeading2"><a name="wp993"> </a>
Jolt Shutdown Class
</h3>
<p class="pBody"><a name="wp994"> </a>
To configure WebLogic Server to disconnect the Jolt session pools from Tuxedo when it shuts down, add the following lines to the WebLogic Server <code class="cCode">config.xml</code> file:
</p>
<a name="wp995"> </a><div class="pPreformatted"><pre><code class="cCode">&lt;ShutdownClass<br />  ClassName=&#8221;bea.jolt.pool.servlet.weblogic.PoolManager ShutDown.&#8221;<br />/&gt;</code></pre></div><p class="pBody"><a name="wp1002"> </a>
The shutdown class instructs WebLogic Server to invoke the <code class="cCode">PoolManagerShutDown</code> class when the WebLogic Server shuts down.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1004"> </a>
Displaying Jolt in the WebLogic Administration Console
</h2><p class="pBody"><a name="wp3048"> </a>
If you are connecting to a WebLogic Server that has Jolt correctly installed and configured, when you start the Administration Console you will see a configuration MBean for the Jolt connection pool displayed in the Administration Console, as shown in <a href="Configuring.html#wp4223">Figure&#160;2-1</a>.
</p>
<div class="pFigureTitle"><a name="wp4223"> </a>
Figure&#160;2-1  WebLogic Server Console with Jolt Connection Pool
</div>

 
 <p class="pGraphic"><a name="wp4226"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/Mbean_general.gif" alt="WebLogic Server Console with Jolt Connection Pool" id="wp4279"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp4227"> </a>
For each Jolt connection pool there is an individual <code class="cCode">MBean</code> that displays the pool name, maximum connections, pool state, and statistics about the connection status.
</p>
<a name="wp4289"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>For more information about MBeans, refer to the <em class="cEmphasis">Oracle WebLogic Server Administration Guide</em>.</td>
</tr>
</table>

<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp4146"> </a>
Resetting the Jolt Connection Pool
</h2><p class="pBody"><a name="wp4149"> </a>
You can reset the Jolt connection pool without having to restart WebLogic Server. The <code class="cCode">resetConnectionPool()</code> method calls the <code class="cCode">SessionPoolManager.stopSessionPool()</code> method to shut down all the connections in the pool. It then calls the <code class="cCode">SessionPoolManager.createSessionPool()</code> method to restart the connection pool. 
</p>
<h3 class="pHeading2"><a name="wp4327"> </a>
Command-line Method
</h3>
<p class="pBody"><a name="wp4328"> </a>
The <code class="cCode">resetConnectionPool</code> method can be invoked from the Administration Console command-line interface by using the following command:
</p>
<p class="pBody"><a name="wp4150"> </a>
<code class="cCode">java weblogic.Admin -url t3://localhost:7001 -username system -password gumby1234 -invoke -mbean mydomain:Name=myserver.jolt.demojoltpool,Type=JoltConnectionPoolRuntime,Location=myserver -method resetConnectionPool</code>
</p>
<h3 class="pHeading2"><a name="wp4151"> </a>
Administration Console Method
</h3>
<p class="pBody"><a name="wp4334"> </a>
The Jolt connection pool can also be reset from the GUI console by using the following method:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp4337"> </a>Under Services in the left frame, click the Jolt service folder.</li>
<li><a name="wp4338"> </a>Click the configured Jolt Connection Pool that you would like to monitor.</li>
<li><a name="wp4339"> </a>In the right frame, click the Monitoring tab, and then click the Monitor all Active Pools link. The console lists all the connection pools that have been configured. </li>
<li><a name="wp4340"> </a>Click the Monitor all instances of... link next to the Jolt connection pool that you would like to monitor. The console displays the Active Jolt Connection Pool. </li>
<p class="pBodyRelative"><a name="wp4346"> </a>
<br />
<img src="wwimages/Reset_pool.gif" alt="WebLogic Server Console with Jolt Connection Pool" id="wp4406"/><br />

</p>
<li><a name="wp4347"> </a>Click the Reset Connection Pool icon at the end of the row to reset the connection pool. </li>
</ol></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="Configuring.html"><img id="LongDescNotReq7" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="Intro.html"><img id="LongDescNotReq8" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="Implementing.html"><img id="LongDescNotReq9" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
