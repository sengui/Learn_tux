<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="2" />
<meta name="LOC_US_CHANGE" content="41905" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux12c/add/fm/addom.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="06/26/12 10:28:46" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>About Domains</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Using the Oracle Tuxedo Domains Component
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="index.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="addomc.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/add.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1262721"> </a>
About Domains
</h1>
<p class="pBody"><a name="wp1256550"> </a>
The following sections provide an overview of the Oracle Tuxedo Domains component:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1256554"> </a><a href="addom.html#wp1256600"><span class="cHyperlink">
What Is the Oracle Tuxedo Domains Component?</span></a></li>
<li><a name="wp1256558"> </a><a href="addom.html#wp1257085"><span class="cHyperlink">
Example of a Domains Configuration</span></a></li>
<li><a name="wp1256562"> </a><a href="addom.html#wp1257109"><span class="cHyperlink">
Functionality Supported by Domain Gateways</span></a></li>
<li><a name="wp1256566"> </a><a href="addom.html#wp1257236"><span class="cHyperlink">
Oracle Tuxedo Domains Architecture</span></a></li>
<li><a name="wp1256570"> </a><a href="addom.html#wp1257365"><span class="cHyperlink">
Understanding the Domains Configuration File</span></a></li>
<li><a name="wp1256574"> </a><a href="addom.html#wp1257695"><span class="cHyperlink">
Specifying Domains Data-Dependent Routing</span></a></li>
<li><a name="wp1256578"> </a><a href="addom.html#wp1257712"><span class="cHyperlink">
Specifying Domains Transaction and Blocking Timeouts</span></a></li>
<li><a name="wp1256582"> </a><a href="addom.html#wp1257788"><span class="cHyperlink">
Specifying Domains Connection Policies</span></a></li>
<li><a name="wp1256586"> </a><a href="addom.html#wp1257878"><span class="cHyperlink">
Specifying Domains Failover and Failback</span></a></li>
<li><a name="wp1256590"> </a><a href="addom.html#wp1257904"><span class="cHyperlink">
Specifying Domains Keepalive</span></a></li>
<li><a name="wp1256594"> </a><a href="addom.html#wp1258082"><span class="cHyperlink">
Configuring a Domains Environment</span></a></li>
<li><a name="wp1256598"> </a><a href="addom.html#wp1258119">Configuring a Domains Environment for Migration</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1256600"> </a>
What Is the Oracle Tuxedo Domains Component?
</h2><p class="pBody"><a name="wp1256601"> </a>
As a company&#8217;s business grows, application engineers may need to organize the business information management into distinct applications, each having administrative autonomy, based on functionality, geographical location, or confidentiality. These distinct business applications, known as <em class="cEmphasis">domains</em>, need to share information. The Oracle Tuxedo Domains component provides the infrastructure for interoperability among the domains of a business, thereby extending the Oracle Tuxedo client/server model to multiple transaction processing (TP) domains. <a href="addom.html#wp1256611">Figure&#160;1-1</a> shows how the Oracle Tuxedo Domains component can tie multiple domains together.
</p>
<div class="pFigureTitle"><a name="wp1256611"> </a>
Figure&#160;1-1  Interdomain Communications Using the Oracle Tuxedo Domains Component
</div>

 
 <p class="pGraphic"><a name="wp1257022"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/add-1-1-1.gif" height="505" width="553" alt="Interdomain Communications Using the Oracle Tuxedo Domains Component" id="wp1256613"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1257023"> </a>
Interoperability Among Domains
</h3>
<p class="pBody"><a name="wp1257024"> </a>
By transparently making services of a remote domain available to users of the local domain, and making services of the local domain available to users of a remote domain, the Oracle Tuxedo Domains component breaks down the walls between a company&#8217;s business applications. In addition, the Domains component enables a company running an Oracle Tuxedo application to expand its business by interoperating with applications running on other transaction processing (TP) systems, such as Oracle&#8217;s WebLogic Server, IBM/Transarc&#8217;s Encina, and IBM&#8217;s CICS.
</p>
<p class="pBody"><a name="wp1257031"> </a>
Because a company often uses the nature of a business application as part of its name, applications have names like the &#8220;accounting&#8221; domain or the &#8220;order entry&#8221; domain. An Oracle Tuxedo domain is a single computer or network of computers controlled by a single configuration file known as the <code class="cCode">UBBCONFIG</code> file. (The Oracle Tuxedo configuration file may have any name as long as the content of the file conforms to the format described on reference page <code class="cCode">UBBCONFIG(5)</code> in <em class="cEmphasis">Oracle Tuxedo File Formats, Data Descriptions, MIBs, and System Processes Reference</em>.) An Oracle Tuxedo domain is administered as a single unit.
</p>
<h3 class="pHeading2"><a name="wp1257045"> </a>
Types of Domain Gateways
</h3>
<p class="pBody"><a name="wp1257049"> </a>
The Oracle Tuxedo Domains component offers different types of gateways to be able to communicate with different types of networks and domains. Specifically, the Domains component offers the following domain gateways:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257050"> </a><em class="cEmphasis">Oracle Tuxedo TDomain gateway </em>(implemented by the <code class="cCode">GWTDOMAIN</code> server process)&#8212;provides interoperability between two or more Oracle Tuxedo domains through a specially designed TP protocol that flows over network protocol TCP/IP. Working with the WebLogic Tuxedo Connector (WTC) gateway, an Oracle WebLogic Server component, the Oracle Tuxedo TDomain gateway can also provide interoperability between Tuxedo domains and WebLogic Server applications.</li>
<li><a name="wp1257061"> </a><em class="cEmphasis">Oracle TMA TCP gateway</em> (implemented by the <code class="cCode">GWIDOMAIN</code> server process) provides interoperability between Oracle Tuxedo domains and applications running under IBM OS/390 Customer Information Control System (CICS) and Information Management System (IMS) over network protocol TCP/IP. The gateway supports only non-transactional tasks.</li>
<li><a name="wp1257065"> </a><em class="cEmphasis">Oracle TMA SNA gateway </em>(implemented by the <code class="cCode">GWSNAX</code> server process)&#8212;provides interoperability between Oracle Tuxedo domains and applications running on any System Network Architecture (SNA) Advanced Program-to-Program Communications (APPC) or Common Programming Interface for Communications (CPI-C) supported platform, including IBM OS/400, OS/390 CICS and IMS systems and VSE/CICS. The gateway supports communication with multiple SNA networks.</li>
<li><a name="wp1257069"> </a><em class="cEmphasis">Oracle TMA OSI TP gateway </em>(implemented by the <code class="cCode">GWOSITP</code> server process)&#8212;provides interoperability between Oracle Tuxedo domains and other transaction processing applications that use the Open Systems Interconnection (OSI) transaction processing (TP) standard. OSI TP is a protocol for distributed transaction processing defined by the International Standards Organization (ISO). The gateway supports global transactions and various non-transactional tasks.</li>
</ul></div>
<p class="pBody"><a name="wp1257073"> </a>
The discussions that follow focus on the Oracle TDomain gateway and the communication between Oracle Tuxedo domains. For information about the WTC gateway, see:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257078"> </a><span style="font-style: italic"><a href="../overview/index.html">Oracle Tuxedo Product Overview</a></span></li>
<li><a name="wp1257080"> </a><span style="font-style: italic">WebLogic Tuxedo Connector</span><a href="http://download.oracle.com/docs/cd/E12840_01/wls/docs103/wtc.html">http://download.oracle.com/docs/cd/E12840_01/wls/docs103/wtc.html</a></li>
</ul></div>
<p class="pBody"><a name="wp1257082"> </a>
For information about Oracle TMA gateways, see <a href="http://download.oracle.com/docs/cd/E13161_01/tuxedo/tux100/interm/mainfrm.html">http://download.oracle.com/docs/cd/E13161_01/tuxedo/tux100/interm/mainfrm.html</a>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1257085"> </a>
Example of a Domains Configuration
</h2><p class="pBody"><a name="wp1257086"> </a>
<a href="addom.html#wp1257090">Figure&#160;1-2</a> shows an example Domains configuration involving four domains, three of which are Oracle Tuxedo domains.
</p>
<div class="pFigureTitle"><a name="wp1257090"> </a>
Figure&#160;1-2  A Banking Domains Configuration&#8212;Example
</div>

 
 <p class="pGraphic"><a name="wp1257094"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/graphic1.gif" alt="A Banking Domains Configuration&#8212;Example" id="wp1257092"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1257098"> </a>
The Oracle Tuxedo credit card authorization center at the bottom of the figure has two gateway groups: a TDomain gateway group named <code class="cCode">bankgw1</code> and an OSI TP gateway group named <code class="cCode">bankgw2</code>. <code class="cCode">bankgw1</code> provides access to two remote Oracle Tuxedo domains, Bank ABC and Bank CBA, using network protocol TCP/IP. <code class="cCode">bankgw2</code> provides access to one remote domain, Bank XYZ, using network protocol OSI TP.
</p>
<p class="pBody"><a name="wp1257102"> </a>
In this example, Bank ABC generates service requests to the credit card authorization center. These requests are received by a domain gateway server process named <code class="cCode">GWTDOMAIN</code> running within group <code class="cCode">bankgw1</code>. This gateway issues a service request, on behalf of the remote domain, to the credit card authorization service provided by another locally running server process. This server handles the request and sends the reply to the gateway, and the gateway forwards the reply to Bank ABC.
</p>
<p class="pBody"><a name="wp1257103"> </a>
The credit card authorization center may also issue service requests. For example, the authorization center may send balance inquiries to Bank XYZ via a domain gateway server process named <code class="cCode">GWOSITP</code>.
</p>
<p class="pBody"><a name="wp1257107"> </a>
The Oracle Tuxedo Domains component makes the interdomain communications possible through domain gateway server processes that advertises remote services&#8212;services available in other domains&#8212;as if they were local services.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1257109"> </a>
Functionality Supported by Domain Gateways
</h2><p class="pBody"><a name="wp1257110"> </a>
Domain gateways support the following functionality:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257111"> </a><em class="cEmphasis">Multinetwork support</em>&#8212;gateways can communicate with other domains via a variety of network protocols, such as TCP/IP, IPX/SPX, OSI, and others. However, a gateway is limited by the capabilities of the networking library to which it is linked. In other words, a gateway typically supports a single type of network protocol. As an example, the Oracle Tuxedo TDomain gateway supports only TCP/IP.</li>
<li><a name="wp1257115"> </a><em class="cEmphasis">Multidomain Interaction</em>&#8212;gateways can communicate with multiple domains.</li>
<li><a name="wp1257116"> </a><em class="cEmphasis">Transaction management</em>&#8212;gateways enable ATMI applications to interoperate with other domains within a transaction. The gateway coordinates the commitment or rollback of transactions running across domains.</li>
<li><a name="wp1257117"> </a><em class="cEmphasis">Multiple messaging models</em>&#8212;gateways support the following ATMI messaging models, without any need to change existing Oracle Tuxedo applications:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1257125"> </a><span style="font-style: italic">Request/response model</span>&#8212;ATMI applications using the Oracle Tuxedo system can request services from applications running in other domains.</li>
<li><a name="wp1257127"> </a><span style="font-style: italic">Conversational model</span>&#8212;ATMI applications can establish conversations with programs running in other domains.</li>
<li><a name="wp1257132"> </a><span style="font-style: italic"><a href="addom.html#wp1257189">Queuing model</a></span>&#8212;ATMI applications using the Oracle Tuxedo system can store data on queues in other domains.</li>
</ul></div>
<li><a name="wp1257134"> </a><span style="font-style: italic">Typed buffer support</span>&#8212;gateways can perform encoding and decoding operations for all the types of buffers defined by Oracle Tuxedo ATMI applications.</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1257140"> </a>
Request/Response Communication Between Local and Remote Domains
</h3>
<p class="pBody"><a name="wp1257141"> </a>
Domain gateways provide support for the request/response model of communication defined by the ATMI interface. Except for the following Oracle Tuxedo ATMI functions, which are logically limited to use within a single application and are not supported across domains, an Oracle Tuxedo application can request remote services exactly as if they were offered locally: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257151"> </a><code class="cCode">tpinit(3c)</code>/<code class="cCode">tpterm(3c)</code>&#8212;Oracle Tuxedo applications do not attach to the environment of a remote domain; they use domain gateways to access a remote domain. Therefore, an extra <code class="cCode">tpinit()</code>/<code class="cCode">tpterm()</code> sequence is not needed for remote applications.</li>
<li><a name="wp1257152"> </a><code class="cCode">tpadvertise(3c)</code> and <code class="cCode">tpunadvertise(3c)</code>&#8212;Domains does not support these functions because domain gateways do not support dynamic service advertisements across domains.</li>
<li><a name="wp1257153"> </a><code class="cCode">tpnotify(3c)</code> and <code class="cCode">tpbroadcast(3c)</code>&#8212;Domains does not support the unsolicited communication paradigm provided by these functions.</li>
<li><a name="wp1257154"> </a>Event posting (<code class="cCode">tppost(3c)</code>) and notification of events (<code class="cCode">tpsubscribe(3c)</code>)&#8212;Domains does not support these functions across domains.</li>
</ul></div>
<p class="pBody"><a name="wp1257155"> </a>
Support for <code class="cCode">tpforward(3c)</code> is provided to preserve application portability. Forwarded requests are interpreted by domain gateways as simple service requests. This process is shown in <a href="addom.html#wp1257156">Figure&#160;1-3</a>, which illustrates the simple scenario of a service using <code class="cCode">tpforward</code> to send a request to a remote service.
</p>
<div class="pFigureTitle"><a name="wp1257156"> </a>
Figure&#160;1-3  Using tpforward to Send a Request to a Remote Service
</div>

 
 <p class="pGraphic"><a name="wp1257160"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/graphic8.gif" alt="Using tpforward to Send a Request to a Remote Service" id="wp1257158"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1257164"> </a>
For more information about the Oracle Tuxedo request/response model, see <span class="cHyperlink">
&#8220;Request/Response Communication&#8221;</span> in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em>.
</p>
<h3 class="pHeading2"><a name="wp1257170"> </a>
Conversational Communication Between Local and Remote Domains
</h3>
<p class="pBody"><a name="wp1257171"> </a>
Domain gateways provide support for the conversational model of communication defined by the ATMI interface. The ATMI is a connection-oriented interface that enables clients to establish and maintain conversations with services programmed in the conversational model.
</p>
<p class="pBody"><a name="wp1257175"> </a>
Oracle Tuxedo applications use <code class="cCode">tpconnect(3c)</code> to open a conversation with a remote service, <code class="cCode">tpsend(3c)</code> and <code class="cCode">tprecv(3c)</code> to communicate with this service, and <code class="cCode">tpdiscon(3c)</code> to end the conversation. Domain gateways maintain the conversation with the remote service, and support the same semantics for returns (that is, <code class="cCode">tpreturn</code> with <code class="cCode">TPSUCCESS</code> or <code class="cCode">TPFAIL</code>) and disconnects that are defined for Oracle Tuxedo conversational services.
</p>
<a name="wp1257179"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The ATMI connection-oriented functions provide half-duplex conversations; <code class="cCode">tpforward(3c)</code> is not allowed within a conversational service.</td>
</tr>
</table>

<p class="pBody"><a name="wp1257183"> </a>
For more information about the Oracle Tuxedo conversational model, see <span class="cHyperlink">
&#8220;Conversational Commu</span><a href="../int/intatm.html"></a>nication&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em>.
</p>
<h3 class="pHeading2"><a name="wp1257189"> </a>
Queuing Messages on Remote Domains
</h3>
<p class="pBody"><a name="wp1257190"> </a>
Domain gateways provide support for the queuing model of communication defined by the ATMI interface. Any client or server can store messages or service requests in a queue in a remote domain. All stored requests are sent through the transaction protocol to ensure safe storage.
</p>
<p class="pBody"><a name="wp1257194"> </a>
The Oracle Tuxedo system enables messages to be queued to persistent storage (disk) or to non-persistent storage (memory) for later processing or retrieval. ATMI provides primitives that allow messages to be added (that is, <code class="cCode">tpenqueue</code>) or read (that is, <code class="cCode">tpdequeue</code>) from queues. Reply messages and error messages can be queued for later return to clients. An administrative command interpreter (that is, <code class="cCode">qmadmin</code>) is provided for creating, listing, and modifying queues. Servers are provided to accept requests to enqueue and dequeue messages (that is, <code class="cCode">TMQUEUE</code> server), to forward messages from the queue for processing (that is, <code class="cCode">TMQFORWARD</code> server), and to manage the transactions that involve queues (that is, <code class="cCode">TMS_QM</code> server).
</p>
<p class="pBody"><a name="wp1257199"> </a>
For more information about the Oracle Tuxedo queueing model, see <span class="cHyperlink">
&#8220;Message Queuing Commu</span><a href="../int/intatm.html"></a>nication&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em>.
</p>
<h3 class="pHeading2"><a name="wp1257204"> </a>
Encoding and Decoding Operations for Domains
</h3>
<p class="pBody"><a name="wp1257205"> </a>
Domain gateways support all predefined types of <em class="cEmphasis">typed buffers</em> supported by the release of Oracle Tuxedo system software in which the domain gateway server processes are running. Oracle Tuxedo supports 11 predefined buffer types.
</p>
<p class="pBody"><a name="wp1257215"> </a>
Each buffer type supported by an Oracle Tuxedo release has its own set of routines that can be called automatically <em class="cEmphasis">to initialize, send and receive messages, and encode and decode data</em> without programmer intervention. The set of routines is called a <em class="cEmphasis">typed buffer switch</em>.
</p>
<p class="pBody"><a name="wp1257219"> </a>
In Oracle Tuxedo ATMI applications, typed buffers are used to send data&#8212;service requests and replies&#8212;between clients and servers. Typed buffers, which by definition contain information about themselves (metadata), allow application programmers to transfer data without needing to know which data representation scheme is used by the machines on which the application&#8217;s clients and servers are running.
</p>
<p class="pBody"><a name="wp1257220"> </a>
A domain gateway can receive and process service requests sent from workstations, from local Oracle Tuxedo machines, and from remote domains. Using the appropriate typed buffer switch, a domain gateway will decode any service request that it receives encoded for the following reasons:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257224"> </a>Data-dependent routing depends upon matching specified criteria to fields within data. Therefore, a domain gateway must decode the encoded data in order to route that data to the appropriate remote domain for the service requested.</li>
<li><a name="wp1257225"> </a>Different data formats may be used within different domains, depending on the networking protocols implemented or used in a domain. Therefore, a domain gateway must decode the encoded data to determine which data format is being used.</li>
</ul></div>
<p class="pBody"><a name="wp1257226"> </a>
OSI terminology provides a useful distinction between abstract syntax (that is, the structure of the data) and transfer syntax (that is, the particular encoding used to transfer the data). Each typed buffer implicitly defines a particular data structure (that is, its abstract syntax) and the encoding rules (or typed buffer operations) required to map the data structure to a particular transfer syntax (for example, <code class="cCode">XDR</code>). For the predefined buffer types that support encoding/decoding, the Oracle Tuxedo system provides the encoding rules required to map these types to the <code class="cCode">XDR</code> transfer syntax.
</p>
<p class="pBody"><a name="wp1257230"> </a>
For more information about typed buffers and encoding and decoding operations, see <span class="cHyperlink">
&#8220;What Are Type</span><a href="../int/intatm.html"></a>d Buffers?&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1257236"> </a>
Oracle Tuxedo Domains Architecture
</h2><p class="pBody"><a name="wp1257240"> </a>
The Oracle Tuxedo Domains architecture consists of four major parts:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257241"> </a>Domains configuration file</li>
<li><a name="wp1257242"> </a>Domain gateway servers</li>
<li><a name="wp1257243"> </a>Domains administrative servers</li>
<li><a name="wp1257244"> </a>Domains administrative tools</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1257245"> </a>
Domains Configuration File
</h3>
<p class="pBody"><a name="wp1257246"> </a>
A Domains configuration is a set of two or more domains (applications) that can communicate and share services via the Oracle Tuxedo Domains component. How multiple domains are connected and which services they make accessible to one another are defined in <em class="cEmphasis">Domains configuration files</em>. Each Oracle Tuxedo domain involved in a Domains configuration requires its own Domains configuration file.
</p>
<p class="pBody"><a name="wp1257253"> </a>
The text version of the Domains configuration file is known as the <code class="cCode">DMCONFIG</code> file, although it may have any name as long as the content of the file conforms to the format described on reference page <code class="cCode">DMCONFIG(5)</code> in <em class="cEmphasis">Oracle Tuxedo File Formats, Data Descriptions, MIBs, and System Processes Reference</em>. The binary version of the Domains configuration file is known as <code class="cCode">BDMCONFIG</code>. For a detailed description of the <code class="cCode">DMCONFIG</code> file, see <a href="addom.html#wp1257365"><span class="cHyperlink">
Understanding the Domains Configuration File</span></a>.
</p>
<h3 class="pHeading2"><a name="wp1257260"> </a>
Domain Gateway Servers
</h3>
<p class="pBody"><a name="wp1257264"> </a>
The Oracle Tuxedo Domains component achieves multiple-domain interoperability through a highly asynchronous, multitasking, multithreaded domain gateway process, which is an Oracle Tuxedo supplied server that makes access to services across domains transparent to both the application programmer and the application user.
</p>
<p class="pBody"><a name="wp1257271"> </a>
<a href="addom.html#wp1257272">Figure&#160;1-4</a> illustrates how one Oracle Tuxedo domain communicates with another domain via a domain gateway.
</p>
<div class="pFigureTitle"><a name="wp1257272"> </a>
Figure&#160;1-4  Two-Way Communication Through a Gateway
</div>

 
 <p class="pGraphic"><a name="wp1257280"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/dom01a3.gif" height="363" width="508" alt="Two-Way Communication Through a Gateway" id="wp1257274"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1257281"> </a>
In the figure, the domain gateway handles outgoing credit card authorization requests to another domain. It also handles incoming authorization responses.
</p>
<h3 class="pHeading2"><a name="wp1257282"> </a>
Domains Administrative Servers
</h3>
<p class="pBody"><a name="wp1257286"> </a>
<a href="addom.html#wp1257287">Figure&#160;1-5</a> shows the Oracle Tuxedo Domains administrative servers used to administer a Domains configuration.
</p>
<div class="pFigureTitle"><a name="wp1257287"> </a>
Figure&#160;1-5  Domains Administrative Servers
</div>

 
 <p class="pGraphic"><a name="wp1257291"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/domproc_1.gif" alt="Domains Administrative Servers" id="wp1257289"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1257292"> </a>
A domain <em class="cEmphasis">gateway group</em>, as shown in the previous figure, consists of a <em class="cEmphasis">gateway administrative server</em> (<code class="cCode">GWADM</code>), a domain gateway server (for example, <code class="cCode">GWTDOMAIN</code>), and (optional) a Domains transaction log (<code class="cCode">TLOG</code>). The <code class="cCode">GWADM</code> server enables run-time administration of the domain gateway. An Oracle Tuxedo domain can communicate with one or more remote domains through a domain gateway group.
</p>
<p class="pBody"><a name="wp1257299"> </a>
Associated with all domain gateway groups running in an Oracle Tuxedo domain is a <em class="cEmphasis">Domains administrative server </em>(<code class="cCode">DMADM</code>), which enables run-time administration of the Oracle Tuxedo Domains configuration file (<code class="cCode">BDMCONFIG</code>).
</p>
<h4 class="pHeading3"><a name="wp1257303"> </a>
GWADM Server
</h4>
<p class="pBody"><a name="wp1257304"> </a>
The <code class="cCode">GWADM(5)</code> server registers with the <code class="cCode">DMADM</code> server to obtain the configuration information used by the corresponding gateway group. <code class="cCode">GWADM</code> accepts requests from the <code class="cCode">DMADMIN</code> service, which is a generic administrative service advertised by the <code class="cCode">DMADM</code> server, for run-time statistics or changes in the run-time options of the specified gateway group. Periodically, <code class="cCode">GWADM</code> sends an &#8220;I-am-alive&#8221; message to the <code class="cCode">DMADM</code> server. If no reply is received from <code class="cCode">DMADM</code>, <code class="cCode">GWADM</code> registers again. This process ensures the <code class="cCode">GWADM</code> server always has the current information about the Domains configuration for its gateway group.
</p>
<p class="pBody"><a name="wp1257308"> </a>
For more information about <code class="cCode">GWADM</code>, see <a href="addoma.html"><span class="cHyperlink">
Administering Domains</span></a>.
</p>
<h4 class="pHeading3"><a name="wp1257309"> </a>
DMADM Server
</h4>
<p class="pBody"><a name="wp1257310"> </a>
the <code class="cCode">DMADM(5)</code> server provides a registration service for gateway groups. This service is requested by <code class="cCode">GWADM</code> servers as part of their initialization procedure. The registration service downloads the configuration information required by the requesting gateway group. The <code class="cCode">DMADM</code> server maintains a list of registered gateway groups, and propagates to these groups any changes made to the Domains configuration file (<code class="cCode">BDMCONFIG</code>).
</p>
<p class="pBody"><a name="wp1257314"> </a>
For more information about <code class="cCode">DMADM</code>, see <a href="addoma.html"><span class="cHyperlink">
Administering Domains</span></a>.
</p>
<h3 class="pHeading2"><a name="wp1257315"> </a>
Domains Administrative Tools
</h3>
<p class="pBody"><a name="wp1257319"> </a>
The following Domains administrative tools are provided by the Oracle Tuxedo system for setting up and maintaining a Domains configuration:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257320"> </a><code class="cCode">dmloadcf(1)</code>&#8212;reads the <code class="cCode">DMCONFIG</code> file, checks the syntax, and loads the binary <code class="cCode">BDMCONFIG</code> configuration file.</li>
<li><a name="wp1257321"> </a><code class="cCode">dmunloadcf(1)</code>&#8212;translates the <code class="cCode">BDMCONFIG</code> configuration file from binary to text format.</li>
<li><a name="wp1257325"> </a><code class="cCode">dmadmin(1)</code>&#8212;allows an Oracle Tuxedo administrator to update the <code class="cCode">BDMCONFIG</code> file when the Tuxedo domain is running.</li>
</ul></div>
<p class="pBody"><a name="wp1257326"> </a>
<a href="addom.html#wp1257328">Figure&#160;1-6</a> shows the relationships between the Domains administrative tools and the Domains text and binary configuration files. Administration using the <code class="cCode">dmadmin</code> utility is through the <code class="cCode">DMADMIN</code> service, which is advertised by the <code class="cCode">DMADM</code> server.
</p>
<div class="pFigureTitle"><a name="wp1257328"> </a>
Figure&#160;1-6  Relationships Between Domains Administrative Tools and Files
</div>

 
 <p class="pGraphic"><a name="wp1257334"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/dom02a.gif" height="230" width="570" alt="Relationships Between Domains Administrative Tools and Files" id="wp1257330"/></div><p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1257335"> </a>
dmloadcf Command
</h4>
<p class="pBody"><a name="wp1257336"> </a>
The <code class="cCode">dmloadcf(1)</code> command parses the <code class="cCode">DMCONFIG</code> file and loads the information into <code class="cCode">BDMCONFIG</code>. The command uses the environment variable <code class="cCode">BDMCONFIG</code> to point to the device or system filename in which the configuration should be stored.
</p>
<p class="pBody"><a name="wp1257337"> </a>
The <code class="cCode">dmloadcf</code> command, through the -c option, also provides an estimate of the interprocess communications (IPC) resources needed for each local domain specified in the configuration.
</p>
<p class="pBody"><a name="wp1257338"> </a>
The dmloadcf command checks the <code class="cCode">DMTYPE</code> file (<code class="cCode">%TUXDIR%\udataobj\DMTYPE</code> for Windows or <code class="cCode">$TUXDIR/udataobj/DMTYPE</code> for UNIX) to verify that the domain gateway types specified in the Domains configuration file are valid. Each type of domain gateway has a domain type designator (<code class="cCode">TDOMAIN</code>, <code class="cCode">SNAX</code>, <code class="cCode">OSITP</code>, <code class="cCode">OSITPX</code>), which is used as a tag in the <code class="cCode">DMTYPE</code> file. Each line in this file has the following format:
</p>
<p class="pBody"><a name="wp1257339"> </a>
<code class="cCodeEmphasis">dmtype:access_module_lib:comm_libs:tm_typesw_lib:gw_typesw_lib</code>
</p>
<p class="pBody"><a name="wp1257340"> </a>
The file has the following entry for the TDomain gateway:
</p>
<a name="wp1257341"> </a><div class="pPreformatted"><pre>TDOMAIN:-lgwt:-lnwi -lnws -lnwi::</pre></div><p class="pBody"><a name="wp1257345"> </a>
For more information about <code class="cCode">dmloadcf</code>, see reference page dmloadcf<span class="cHyperlink">
<a href="../rfcm/rfcmd.html"></a>(1)</span>in <em class="cEmphasis">Oracle Tuxedo Command Reference</em>.
</p>
<h4 class="pHeading3"><a name="wp1257348"> </a>
dmunloadcf Command
</h4>
<p class="pBody"><a name="wp1257349"> </a>
The <code class="cCode">dmunloadcf(1)</code> command converts the <code class="cCode">BDMCONFIG</code> configuration file from binary to text format and prints the output to standard output. For more information about <code class="cCode">dmunloadcf</code>, see reference page dmunloadcf<span class="cHyperlink">
<a href="../rfcm/rfcmd.html"></a>(1) </span>in <em class="cEmphasis">Oracle Tuxedo Command Reference</em>.
</p>
<h4 class="pHeading3"><a name="wp1257354"> </a>
dmadmin Command
</h4>
<p class="pBody"><a name="wp1257358"> </a>
The <code class="cCode">dmadmin(1)</code> command allows an Oracle Tuxedo administrator to configure, monitor, and tune domain gateways when the Tuxedo domain is running. It acts as an administrative command interpreter that translates administrative commands and sends requests to the <code class="cCode">DMADMIN</code> service, a generic administrative service advertised by the <code class="cCode">DMADM</code> server. <code class="cCode">DMADMIN</code> invokes functions that validate, retrieve, or update information in the <code class="cCode">BDMCONFIG</code> file.
</p>
<p class="pBody"><a name="wp1257359"> </a>
You invoke <code class="cCode">dmadmin</code> with the <code class="cCode">-c</code> option to dynamically update the <code class="cCode">BDMCONFIG</code> file. Depending on the configuration being changed, some updates will take place immediately, while others will take place only for new occurrences of whatever is affected by the update.
</p>
<p class="pBody"><a name="wp1257363"> </a>
For more information about <code class="cCode">dmadmin</code>, see <a href="addoma.html"><span class="cHyperlink">
Administering Domains</span></a>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1257365"> </a>
Understanding the Domains Configuration File
</h2><p class="pBody"><a name="wp1257369"> </a>
Each Oracle Tuxedo domain involved in a Domains configuration has a configuration file in which the interdomain parameters are defined. The text version of the configuration file is referred to as <code class="cCode">DMCONFIG</code>, although the configuration file may have any name, as long as the content of the file conforms to the format described on reference page <a href="../rf5/rf5.html">DMCONFIG(5)</a> in <em class="cEmphasis">Oracle Tuxedo File Formats, Data Descriptions, MIBs, and System Processes Reference</em>. Typical configuration filenames begin with the string <code class="cCode">dm</code>, followed by a mnemonic string, such as <code class="cCode">config</code> in the filename <code class="cCode">dmconfig</code>.
</p>
<p class="pBody"><a name="wp1257374"> </a>
As the administrator for the Domains configuration, you need to create a separate <code class="cCode">DMCONFIG</code> file for each Oracle Tuxedo domain participating in the configuration. You can create and edit a <code class="cCode">DMCONFIG</code> file with any text editor.
</p>
<h3 class="pHeading2"><a name="wp1257378"> </a>
Location of DMCONFIG File
</h3>
<p class="pBody"><a name="wp1257382"> </a>
For an Oracle Tuxedo domain involved in a Domains configuration, the <code class="cCode">DMCONFIG</code> file resides on the machine on which the Domains administrative server <code class="cCode">DMADM</code> is to run, as specified in the <code class="cCode">UBBCONFIG</code> file for the Tuxedo domain. The <code class="cCode">DMADM</code> server may run on any machine (master machine, non-master machine) in a Tuxedo domain.
</p>
<a name="wp1257387"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The master machine<em class="cEmphasis"> </em>for an Oracle Tuxedo domain contains the domain&#8217;s <code class="cCode">UBBCONFIG</code> file, and is designated as the master machine in the <code class="cCode">RESOURCES</code> section of the <code class="cCode">UBBCONFIG</code> file. Starting, stopping, and administering a Tuxedo domain is done through the master machine.</td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp1257388"> </a>
Binary Version of DMCONFIG File
</h3>
<p class="pBody"><a name="wp1257389"> </a>
The <code class="cCode">BDMCONFIG</code> file is a binary version of the <code class="cCode">DMCONFIG</code> file. It is created by running the <code class="cCode">dmloadcf</code> command, which parses <code class="cCode">DMCONFIG</code> and loads the binary <code class="cCode">BDMCONFIG</code> file to the location referenced by the <code class="cCode">BDMCONFIG</code> environment variable. As with <code class="cCode">DMCONFIG</code>, the <code class="cCode">BDMCONFIG</code> file may be given any name; the actual name is the device or system filename specified in the <code class="cCode">BDMCONFIG</code> environment variable. The <code class="cCode">BDMCONFIG</code> environment variable must be set to an absolute pathname ending with the device or system filename where <code class="cCode">BDMCONFIG</code> is to be loaded.
</p>
<p class="pBody"><a name="wp1257390"> </a>
Unlike the <code class="cCode">TUXCONFIG</code> file, which is the binary version of <code class="cCode">UBBCONFIG</code>, the <code class="cCode">BDMCONFIG</code> file is <em class="cEmphasis">not</em> propagated to any other machine in a Tuxedo domain when the Tuxedo application is booted. For the <code class="cCode">BDMCONFIG</code> file to reside on any other machine in a Tuxedo domain, the administrator for that domain must manually place it there.
</p>
<h3 class="pHeading2"><a name="wp1257391"> </a>
Descriptions of Sections of the DMCONFIG File
</h3>
<p class="pBody"><a name="wp1257392"> </a>
The <code class="cCode">DMCONFIG</code> file is made up of specification sections. Lines beginning with an asterisk (*) indicate the beginning of a specification section. Each such line contains the name of the section immediately following the *. The asterisk is required when specifying a section name.
</p>
<p class="pBody"><a name="wp1257393"> </a>
Allowable section names are:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257394"> </a><code class="cCode">DM_LOCAL</code> (also known as <code class="cCode">DM_LOCAL_DOMAINS</code>)</li>
<li><a name="wp1257395"> </a><code class="cCode">DM_REMOTE</code> (also known as <code class="cCode">DM_REMOTE_DOMAINS</code>)</li>
<li><a name="wp1257396"> </a><code class="cCode">DM_EXPORT</code> (also known as <code class="cCode">DM_LOCAL_SERVICES</code>)</li>
<li><a name="wp1257397"> </a><code class="cCode">DM_IMPORT</code> (also known as <code class="cCode">DM_REMOTE_SERVICES</code>)</li>
<li><a name="wp1257398"> </a><code class="cCode">DM_RESOURCES</code></li>
<li><a name="wp1257399"> </a><code class="cCode">DM_ROUTING</code></li>
<li><a name="wp1257400"> </a><code class="cCode">DM_ACCESS_CONTROL</code></li>
<li><a name="wp1257401"> </a><code class="cCode">DM_</code><code class="cCodeEmphasis">domtype</code>, where <code class="cCodeEmphasis">domtype</code> is <code class="cCode">TDOMAIN</code>, <code class="cCode">OSITP</code>, <code class="cCode">OSITPX</code>, or <code class="cCode">SNACRM</code> + <code class="cCode">SNALINKS</code> + <code class="cCode">SNASTACKS</code></li>
</ul></div>
<a name="wp1257402"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The <code class="cCode">DM_LOCAL</code> section must precede the <code class="cCode">DM_REMOTE</code> section.</td>
</tr>
</table>

<p class="pBody"><a name="wp1257403"> </a>
As the administrator for the Domains configuration, you use these sections to:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257404"> </a>Define local domain access points through which application clients on a remote domain can access services on the local domain.</li>
<li><a name="wp1257405"> </a>Specify the local services available through each local domain access point.</li>
<li><a name="wp1257406"> </a>Define remote domain access points through which application clients on the local domain can access services on a remote domain.</li>
<li><a name="wp1257407"> </a>Specify the remote services available through each remote domain access point.</li>
<li><a name="wp1257408"> </a>Map local domain access points and remote domain access points to specific domain gateway groups (<code class="cCode">TDOMAIN</code>, ...) and network addresses.</li>
</ul></div>
<p class="pBody"><a name="wp1257409"> </a>
<a href="addom.html#wp1257410">Figure&#160;1-7</a> is a simple example of what you are trying to accomplish.
</p>
<div class="pFigureTitle"><a name="wp1257410"> </a>
Figure&#160;1-7  Establishing What Services Are Shared Between Two Oracle Tuxedo Domains&#8212;Example
</div>

 
 <p class="pGraphic"><a name="wp1257487"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/add-1-1-7.gif" height="343" width="456" alt="Establishing What Services Are Shared Between Two Oracle Tuxedo Domains&#8212;Example" id="wp1257412"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1257488"> </a>
In the example, you must also create a <code class="cCode">DMCONFIG</code> file for Domain Y that complements the <code class="cCode">DMCONFIG</code> file created for Domain X. That is, a local domain access point in the Domain X <code class="cCode">DMCONFIG</code> file would be a remote domain access point in the Domain Y <code class="cCode">DMCONFIG</code> file, and a remote domain access point in the Domain X <code class="cCode">DMCONFIG</code> file would be a local domain access point in the Domain Y <code class="cCode">DMCONFIG</code> file. The example demonstrates the use of the TDomain gateway server.
</p>
<p class="pBody"><a name="wp1257489"> </a>
<a href="addom.html#wp1257495">Table&#160;1-1</a> provides a description of each section in the <code class="cCode">DMCONFIG</code> file.
</p>
<p class="pGraphic"><a name="wp1257579"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1257495table1257490"><caption><a name="wp1257495"> </a>
Table 1-1  DMCONFIG File Sections (Sheet 1 of 4)

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1257499"> </a>
Section
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1257501"> </a>
Purpose
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257503"> </a>
<code class="cCode">DM_LOCAL</code> (also known as <code class="cCode">DM_LOCAL_DOMAINS</code>)
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257505"> </a>
Defines one or more local domain access point identifiers (also known as local domains, or <code class="cCode">LDOMs</code>). For each local domain access point (logical name) that you define, you specify a domain gateway group (<code class="cCode">TDOMAIN</code>, ...) for the access point in this section, and you specify in the <code class="cCode">DM_EXPORT</code> section the local services available through the access point. The local services available through the local domain access point will be available to clients in one or more remote domains.
</div>
<div class="pCellBody"><a name="wp1257506"> </a>
You can define multiple local domain access points in this section, one for each gateway group (<code class="cCode">TDOMAIN</code>, <code class="cCode">SNAX</code>, <code class="cCode">OSITP</code>, <code class="cCode">OSITPX</code>) used by this Oracle Tuxedo domain to communicate with a remote domain.
</div>
<div class="pCellBody"><a name="wp1257510"> </a>
One <em class="cEmphasis">and only one</em> local domain access point is allowed per gateway group. A domain gateway group consists of a <code class="cCode">GWADM</code> server process and a domain gateway server process (for example, <code class="cCode">GWTDOMAIN</code>, the TDomain gateway server).
</div>
<div class="pCellBody"><a name="wp1257511"> </a>
Example of a local domain access point entry:
</div>
<div class="pCellBody"><a name="wp1257512"> </a>
<code class="cCode">*DM_LOCAL<br />LOCAL1&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=</code>&#8220;<code class="cCode">BA.CENTRAL01&#8221;</code>
</div>
<p class="pTableNote"><a name="wp1257513"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You may substitute <code class="cCode">DOMAINID</code> for the <code class="cCode">ACCESSPOINTID</code> parameter.</td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257515"> </a>
<code class="cCode">DM_REMOTE</code> (also known as <code class="cCode">DM_REMOTE_DOMAINS</code>)
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257517"> </a>
Defines one or more remote domain access point identifiers (also known as remote domains, or <code class="cCode">RDOMs</code>). For each remote domain access point (logical name) that you define, you specify a domain gateway group (<code class="cCode">TDOMAIN</code>, ...) for the access point in this section, and you specify in the <code class="cCode">DM_IMPORT</code> section the remote services available through the access point. The remote services available through the remote domain access point will be available to clients in the local domain.
</div>
<div class="pCellBody"><a name="wp1257518"> </a>
You can define multiple remote domain access points in this section, one or more for each gateway group (<code class="cCode">TDOMAIN</code>, <code class="cCode">SNAX</code>, <code class="cCode">OSITP</code>, <code class="cCode">OSITPX</code>) used by this Oracle Tuxedo domain to communicate with a remote domain.
</div>
<div class="pCellBody"><a name="wp1257522"> </a>
Example of remote domain access point entries:
</div>
<div class="pCellBody"><a name="wp1257523"> </a>
<code class="cCode">*DM_REMOTE<br />REMOT1&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=</code>&#8220;<code class="cCode">BA.BANK01&#8221;<br />REMOT2&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=</code>&#8220;<code class="cCode">BA.BANK02&#8221;</code>
</div>
<p class="pTableNote"><a name="wp1257524"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You may substitute <code class="cCode">DOMAINID</code> for the <code class="cCode">ACCESSPOINTID</code> parameter.</td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257526"> </a>
<code class="cCode">DM_EXPORT</code> (also known as <code class="cCode">DM_LOCAL_SERVICES</code>)
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257528"> </a>
Specifies the local services exported to one or more remote domains through a local domain access point defined in the <code class="cCode">DM_LOCAL</code> section. Only the services specified for a local domain access point are available to clients on one or more remote domains, meaning that specifying services in this section is a way to restrict remote client access to local services. If the <code class="cCode">DM_EXPORT</code> section is absent, or is present but empty, all services advertised by the local domain are available to the remote domains.
</div>
<div class="pCellBody"><a name="wp1257529"> </a>
A local service made available to remote domains inherits many of its properties from the <code class="cCode">SERVICES</code> section of the local <code class="cCode">UBBCONFIG</code> file. Some of the properties that may be inherited are <code class="cCode">LOAD</code>, <code class="cCode">PRIO</code>, <code class="cCode">AUTOTRAN</code>, <code class="cCode">ROUTING</code>, <code class="cCode">BUFTYPE</code>, and <code class="cCode">TRANTIME</code>.
</div>
<div class="pCellBody"><a name="wp1257530"> </a>
Example of a local service made available to remote domains:
</div>
<div class="pCellBody"><a name="wp1257531"> </a>
<code class="cCode">*DM_EXPORT<br />LTOLOWER&#160;&#160;LACCESSPOINT=LOCAL1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONV=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RNAME=</code>&#8220;<code class="cCode">TOLOWER&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACL=branch</code>
</div>
<p class="pTableNote"><a name="wp1257532"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You may substitute <code class="cCode">LDOM</code> for the <code class="cCode">LACCESSPOINT</code> parameter.</td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257534"> </a>
<code class="cCode">DM_IMPORT</code> (also known as <code class="cCode">DM_REMOTE_SERVICES</code>)
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257536"> </a>
Specifies the remote services imported through one or more remote domain access points defined in the <code class="cCode">DM_REMOTE</code> section and made available to the local domain through one or more local domain access points. If the <code class="cCode">DM_IMPORT</code> section is absent, or is present but empty, no remote services are available to the local domain.
</div>
<div class="pCellBody"><a name="wp1257540"> </a>
A remote Oracle Tuxedo service made available to the local domain inherits many of its properties from the <code class="cCode">SERVICES</code> section of the remote <code class="cCode">UBBCONFIG</code> file. Some of the properties that may be inherited are <code class="cCode">LOAD</code>, <code class="cCode">PRIO</code>, <code class="cCode">AUTOTRAN</code>, <code class="cCode">ROUTING</code>, <code class="cCode">BUFTYPE</code>, and <code class="cCode">TRANTIME</code>.
</div>
<div class="pCellBody"><a name="wp1257541"> </a>
Example of a remote service made available to the local domain:
</div>
<div class="pCellBody"><a name="wp1257542"> </a>
<code class="cCode">*DM_IMPORT<br />RTOUPPER&#160;&#160;AUTOTRAN=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONV=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RNAME=</code>&#8220;<code class="cCode">TOUPPER&#8221;</code>
</div>
<p class="pTableNote"><a name="wp1257543"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You may substitute <code class="cCode">RDOM</code> for the <code class="cCode">RACCESSPOINT</code> parameter, and <code class="cCode">LDOM</code> for the <code class="cCode">LACCESSPOINT</code> parameter.</td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257545"> </a>
<code class="cCode">DM_RESOURCES</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257547"> </a>
Specifies global Domains configuration information, specifically a user-supplied configuration version string. The only parameter in this section is <code class="cCode">VERSION=</code><code class="cCodeEmphasis">string</code>, where <code class="cCodeEmphasis">string</code> is a field in which users can enter a version number for the current <code class="cCode">DMCONFIG</code> file. This field is not checked by the software.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257549"> </a>
<code class="cCode">DM_ROUTING</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257551"> </a>
Specifies data-dependent routing criteria for routing local service requests to one of several remote domains offering the same service. For an example, see <a href="addom.html#wp1257695"><span class="cHyperlink">
Specifying Domains Data-Dependent Routing</span></a>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263893"> </a>
<code class="cCode">DM_ACCESS_CONTROL</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263895"> </a>
Specifies one or more access control list (ACL) names and associates one or more remote domain access points with each specified ACL name. You can use the <code class="cCode">ACL</code> parameter in the <code class="cCode">DM_EXPORT</code> section by setting <code class="cCode">ACL=</code><code class="cCodeEmphasis">ACL_NAME</code> to restrict access to a local service exported through a particular local domain access point to just those remote domain access points associated with the <code class="cCodeEmphasis">ACL_NAME</code>.
</div>
<div class="pCellBody"><a name="wp1263896"> </a>
Example of an ACL entry:
</div>
<div class="pCellBody"><a name="wp1263897"> </a>
<code class="cCode">*DM_ACCESS_CONTROL<br />branch ACLIST=REMOT1</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row">&#160;</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257562"> </a>
<code class="cCode">DM_</code><code class="cCodeEmphasis">domtype</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257564"> </a>
Defines the parameters required for a particular Domains configuration. Currently, the value of <code class="cCodeEmphasis">domtype</code> can be <code class="cCode">TDOMAIN</code>, <code class="cCode">OSITP</code>, <code class="cCode">OSITPX</code>, or <code class="cCode">SNACRM</code> + <code class="cCode">SNALINKS</code> + <code class="cCode">SNASTACKS</code>. Each domain type must be specified in a separate section.
</div>
<div class="pCellBody"><a name="wp1257565"> </a>
In a <code class="cCode">DM_TDOMAIN</code> section, you define the TDomain-specific network configuration for a local or remote domain access point. You can also define the network configuration for one or more remote domain access points associated with one or more WebLogic Server applications, to combine Tuxedo ATMI servers and WebLogic Server Enterprise JavaBean (EJB) servers in an application; for details, see<span class="cHyperlink">
<a href="../interop/index.html"> </span><em class="cEmphasis">Oracle Tuxedo Interoperability</em></a>.
</div>
<div class="pCellBody"><a name="wp1257567"> </a>
The <code class="cCode">DM_TDOMAIN</code> section should have an entry per local domain access point if requests from remote domains to local services are accepted through that access point. For each local domain access point specified in this section, you must specify the network address to be used for listening for incoming connections.
</div>
<div class="pCellBody"><a name="wp1257568"> </a>
The <code class="cCode">DM_TDOMAIN</code> section should have an entry per remote domain access point if requests from the local domain to remote services are accepted through that access point. For each remote domain access point specified in this section, you must specify the destination network address to be used when connecting to that remote domain access point.
</div>
<div class="pCellBody"><a name="wp1263171"> </a>
Beginning with Tuxedo release 9.0, the <code class="cCode">DM_TDOMAIN</code> section can have an entry per TDomain session between specific local and remote domain access points. For each TDomain session specified in this section, you must specify the destination network address to use when connecting to that TDomain session.
</div>
<div class="pCellBody"><a name="wp1263137"> </a>
When Domains link-level failover is in use, you can specify more than one destination network address for a remote domain access point or TDomain session to implement the <em class="cEmphasis">mirrored</em> gateway capability. For an example of a mirrored gateway, see <a href="addom.html#wp1257891"><span class="cHyperlink">
How to Configure Domains Link-Level Failover</span></a>.
</div>
<div class="pCellBody"><a name="wp1257574"> </a>
For information about the <code class="cCode">DM_OSITP</code>, <code class="cCode">DM_OSITPX</code>, <code class="cCode">DM_SNACRM</code>, <code class="cCode">DM_SNALINKS</code>, and <code class="cCode">DM_SNASTACKS</code> sections, see <a href="http://download.oracle.com/docs/cd/E13161_01/tuxedo/tux100/interm/mainfrm.html">http://download.oracle.com/docs/cd/E13161_01/tuxedo/tux100/interm/mainfrm.html</a>.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1257581"> </a>
For a detailed description of the <code class="cCode">DMCONFIG</code> file, see reference pages DMCONFIG<span class="cHyperlink">
<a href="../rf5/rf5.html"></a>(5)</span>and DM_MIB<span class="cHyperlink">
<a href="../rf5/rf5.html"></a>(5)</span>in <em class="cEmphasis">Oracle Tuxedo File Formats, Data Descriptions, MIBs, and System Processes Reference</em>.
</p>
<h3 class="pHeading2"><a name="wp1257587"> </a>
Terminology Improvements for DMCONFIG File
</h3>
<p class="pBody"><a name="wp1257591"> </a>
For Oracle Tuxedo release 7.1 or later, the Domains MIB uses improved class and attribute terminology to describe the interaction between local and remote domains. The improved terminology has been applied to the <code class="cCode">DMCONFIG(5)</code> reference page, section names, parameter names, and error messages, and to the <code class="cCode">DM_MIB(5)</code> reference page, classes, and error messages.
</p>
<p class="pBody"><a name="wp1257592"> </a>
For backwards compatibility, aliases are provided between the <code class="cCode">DMCONFIG</code> terminology used prior to Oracle Tuxedo 7.1 and the improved Domains MIB terminology. For Oracle Tuxedo release 7.1 or later, both versions of <code class="cCode">DMCONFIG</code> terminology are accepted. <a href="addom.html#wp1266395">Table&#160;1-2</a> shows the mapping of the previous and improved terminology for the <code class="cCode">DMCONFIG</code> file.
</p>
<p class="pGraphic"><a name="wp1257688"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1266395table1257599"><caption><a name="wp1266395"> </a>
Table 1-2  Mapping of the Previous and Improved Terminology for the DMCONFIG File

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th colspan="2" rowspan="1"><div class="pCellHeading"><a name="wp1257601"> </a>
Previous Terminology
</div>
</th>
    <th colspan="2" rowspan="1"><div class="pCellHeading"><a name="wp1257605"> </a>
Improved Terminology
</div>
</th>
</tr>
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1257609"> </a>
Section Name
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1257611"> </a>
Parameter Name
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1257613"> </a>
Section Name
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1257615"> </a>
Parameter Name
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257617"> </a>
<code class="cCode">DM_LOCAL_DOMAINS</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257621"> </a>
<code class="cCode">DM_LOCAL</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257625"> </a>
<code class="cCode">DM_REMOTE_DOMAINS</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257629"> </a>
<code class="cCode">DM_REMOTE</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257635"> </a>
<code class="cCode">DOMAINID</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257639"> </a>
<code class="cCode">ACCESSPOINTID</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257643"> </a>
<code class="cCode">MAXRDOM</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257647"> </a>
<code class="cCode">MAXACCESSPOINT</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257651"> </a>
<code class="cCode">MAXRDTRAN</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257655"> </a>
<code class="cCode">MAXRAPTRAN</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257657"> </a>
<code class="cCode">DM_LOCAL_SERVICES</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257661"> </a>
<code class="cCode">DM_EXPORT</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257665"> </a>
<code class="cCode">DM_REMOTE_SERVICES</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257669"> </a>
<code class="cCode">DM_IMPORT</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257675"> </a>
<code class="cCode">LDOM</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257679"> </a>
<code class="cCode">LACCESSPOINT</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257683"> </a>
<code class="cCode">RDOM</code>
</div>
</td>
    <td class="table" scope="row">&#160;</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1257687"> </a>
<code class="cCode">RACCESSPOINT</code>
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1257692"> </a>
For Oracle Tuxedo release 7.1 or later, the <code class="cCode">dmunloadcf</code> command generates by default a <code class="cCode">DMCONFIG</code> file that uses the improved domains terminology. Use the <code class="cCode">-c</code> option to print a <code class="cCode">DMCONFIG</code> file that uses the previous domains terminology. For example:
</p>
<p class="pBody"><a name="wp1257693"> </a>
prompt&gt; <code class="cCode">dmunloadcf -c &gt; dmconfig_prev</code>
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1257695"> </a>
Specifying Domains Data-Dependent Routing
</h2><p class="pBody"><a name="wp1257696"> </a>
You can specify data-dependent routing criteria for the routing of local service requests to remote domains in the <code class="cCode">DM_ROUTING</code> section of the <code class="cCode">DMCONFIG</code> file for any of the following buffer types:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257697"> </a>FML</li>
<li><a name="wp1257698"> </a>FML32</li>
<li><a name="wp1257699"> </a>VIEW</li>
<li><a name="wp1257700"> </a>VIEW32</li>
<li><a name="wp1257701"> </a>X_C_TYPE</li>
<li><a name="wp1257702"> </a>X_COMMON</li>
<li><a name="wp1257703"> </a>XML</li>
</ul></div>
<p class="pBody"><a name="wp1257704"> </a>
In the following example, the remote service <code class="cCode">TOUPPER</code> is available through two different remote domain access points named <code class="cCode">REMOT1</code> and <code class="cCode">REMOT2</code>, and the data-dependent routing criteria for <code class="cCode">TOUPPER</code> is defined in the routing criteria table named <code class="cCode">ACCOUNT</code>. In the example, <code class="cCode">RTOUPPER1</code> and <code class="cCode">RTOUPPER2</code> are alias service names for <code class="cCode">TOUPPER</code>, which is the actual service name expected by the remote domains.
</p>
<p class="pBody"><a name="wp1257705"> </a>
<code class="cCode">*DM_IMPORT<br />RTOUPPER1&#160;&#160;AUTOTRAN=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONV=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RNAME=</code>&#8220;<code class="cCode">TOUPPER&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ROUTING=ACCOUNT<br />RTOUPPER2&#160;&#160;AUTOTRAN=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONV=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RNAME=</code>&#8220;<code class="cCode">TOUPPER&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ROUTING=ACCOUNT</code>
</p>
<p class="pBody"><a name="wp1257706"> </a>
<code class="cCode">*DM_ROUTING<br />ACCOUNT&#160;&#160;&#160;&#160;FIELD=branchid<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BUFTYPE=</code>&#8220;<code class="cCode">VIEW:account&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RANGES=</code>&#8220;<code class="cCode">MIN-1000:REMOT1,1001-3000:REMOT2&#8221;</code>
</p>
<p class="pBody"><a name="wp1257707"> </a>
For the <code class="cCode">ACCOUNT</code> routing table, <code class="cCode">VIEW</code> and <code class="cCode">account</code> are the type and subtype of data buffers for which this routing table is valid, and <code class="cCode">branchid</code> is the name of the field in the VIEW data buffer to which routing is applied. The allowed values for the <code class="cCode">branchid</code> field are as follows:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257708"> </a>For the <code class="cCode">REMOT1</code> access point, the allowed values range from the minimum value allowed on the machine associated with <code class="cCode">REMOT1</code> to less than or equal to 1000.</li>
<li><a name="wp1257709"> </a>For the <code class="cCode">REMOT2</code> access point, the allowed values range from the 1001 to less than or equal to 3000.</li>
</ul></div>
<p class="pBody"><a name="wp1257710"> </a>
If the value of the <code class="cCode">branchid</code> field for a <code class="cCode">TOUPPER</code> service request is within the range MIN-1000, the service request is routed through the <code class="cCode">REMOT1</code> access point. If the value of the <code class="cCode">branchid</code> field for a <code class="cCode">TOUPPER</code> service request is within the range 1001-3000, the service request is routed through the <code class="cCode">REMOT2</code> access point.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1257712"> </a>
Specifying Domains Transaction and Blocking Timeouts
</h2><p class="pBody"><a name="wp1257716"> </a>
The Oracle Tuxedo system provides two timeout mechanisms: a <em class="cEmphasis">transaction timeout</em> mechanism and a <em class="cEmphasis">blocking timeout</em> mechanism. The transaction timeout is used to define the duration of an ATMI transaction, which may involve several service requests. The timeout value is defined when the transaction is started. The blocking timeout is used to define the duration of individual service requests, that is, how long the ATMI application is willing to wait for a reply to a service request.
</p>
<p class="pBody"><a name="wp1257720"> </a>
If a process is <em class="cEmphasis">not</em> in transaction mode, the Oracle Tuxedo system performs blocking timeouts. If a process is in transaction mode, the Oracle Tuxedo system performs transaction timeouts but not blocking timeouts. The latter statement is true for <em class="cEmphasis">intradomain</em> transactions (that is, transactions handled within a single Oracle Tuxedo domain) but is not true for <em class="cEmphasis">interdomain</em> transactions. For <em class="cEmphasis">interdomain</em> transactions, if a process is in transaction mode, the Domains software performs both transaction timeouts and blocking timeouts.
</p>
<h3 class="pHeading2"><a name="wp1257727"> </a>
How the Domains Component Handles Transaction Timeouts
</h3>
<p class="pBody"><a name="wp1257731"> </a>
The Oracle Tuxedo transaction timeout mechanism is used unchanged in the Domains component. Use of the same transaction timeout mechanism is necessary because domain gateways implement the transaction manager server (TMS) functionality and therefore are required to handle the TMS timeout messages generated by the Oracle Tuxedo Bulletin Board Liaison (BBL) administrative process.
</p>
<p class="pBody"><a name="wp1257735"> </a>
A local service made available to remote domains in the <code class="cCode">DM_EXPORT</code> section of the <code class="cCode">DMCONFIG</code> file inherits the following transaction-related properties from the <code class="cCode">SERVICES</code> section of the local <code class="cCode">UBBCONFIG</code> file:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257736"> </a><code class="cCode">AUTOTRAN</code>&#8212;When <code class="cCode">AUTOTRAN</code> is turned on for a service and a service request is received for the service that is not already within a transaction, the local Oracle Tuxedo system automatically starts a transaction for the service.</li>
<li><a name="wp1257740"> </a><code class="cCode">TRANTIME</code>&#8212;Transaction timeout value in seconds for transactions automatically started for the service. If this timeout value is exceeded for a transaction, the Oracle Tuxedo nodes (machines) infected with the transaction generate a TMS timeout message.</li>
</ul></div>
<p class="pBody"><a name="wp1257747"> </a>
Similarly, a remote Oracle Tuxedo service made available to the local domain in the <code class="cCode">DM_IMPORT</code> section of the <code class="cCode">DMCONFIG</code> file inherits the <code class="cCode">AUTOTRAN</code> and <code class="cCode">TRANTIME</code> properties from the <code class="cCode">SERVICES</code> section of the remote <code class="cCode">UBBCONFIG</code> file. If the <code class="cCode">TRANTIME</code> timeout value is exceeded for a transaction, the Oracle Tuxedo nodes infected with the transaction generate a TMS timeout message.
</p>
<p class="pBody"><a name="wp1257754"> </a>
A service advertised on a machine running Oracle Tuxedo release 8.1 or later inherits an additional transaction-timeout property named <code class="cCode">MAXTRANTIME</code> from the <code class="cCode">RESOURCES</code> section of the <code class="cCode">UBBCONFIG</code> file. If the <code class="cCode">MAXTRANTIME</code> timeout value is less than the <code class="cCode">TRANTIME</code> timeout value or the timeout value passed in a <code class="cCode">tpbegin(3c)</code> call to start a transaction, the timeout for a transaction is reduced to the <code class="cCode">MAXTRANTIME</code> value. <code class="cCode">MAXTRANTIME</code> has no effect on a transaction started on a machine running Oracle Tuxedo 8.0 or earlier, except that when a machine running Oracle Tuxedo 8.1 or later is infected by the transaction, the transaction timeout value is capped&#8212;reduced if necessary&#8212;to the <code class="cCode">MAXTRANTIME</code> value configured for that node.
</p>
<p class="pBody"><a name="wp1257761"> </a>
For a Domains configuration, the following transaction-handling scenarios are possible:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257762"> </a>If an interdomain transaction infects a node that does not understand the <code class="cCode">MAXTRANTIME</code> parameter, or the node understands the <code class="cCode">MAXTRANTIME</code> parameter but the parameter is not set, the timeout value for the transaction is determined by <code class="cCode">TRANTIME</code> or by the timeout value passed in the <code class="cCode">tpbegin()</code> call that started the transaction. If the <code class="cCode">TRANTIME</code> or <code class="cCode">tpbegin()</code> timeout value is exceeded, all Oracle Tuxedo nodes infected with the transaction&#8212;including the node that started the transaction&#8212;generate a TMS timeout message.</li>
<li><a name="wp1257766"> </a>If an interdomain transaction infects a node that understands the <code class="cCode">MAXTRANTIME</code> parameter and the parameter is set for that node, the timeout value for the transaction is reduced to no greater than the <code class="cCode">MAXTRANTIME</code> value on that node.</li>
<p class="pBodyRelative"><a name="wp1257767"> </a>
If the <code class="cCode">TRANTIME</code> or <code class="cCode">tpbegin()</code> timeout value is less than or equal to <code class="cCode">MAXTRANTIME</code>, the transaction-handling scenario becomes the one previously described.
</p>
<p class="pBodyRelative"><a name="wp1257768"> </a>
If the <code class="cCode">TRANTIME</code> or <code class="cCode">tpbegin()</code> timeout value is greater than <code class="cCode">MAXTRANTIME</code>, the infected node reduces the timeout value for the transaction to <code class="cCode">MAXTRANTIME</code>. If the <code class="cCode">MAXTRANTIME</code> timeout value is exceeded, the infected node generates a TMS timeout message.
</p>
</ul></div>
<p class="pBody"><a name="wp1257769"> </a>
For more information about <code class="cCode">MAXTRANTIME</code>, see <code class="cCode">MAXTRANTIME</code> in the <code class="cCode">RESOURCES</code> section in <code class="cCode">UBBCONFIG(5)</code> or <code class="cCode">TA_MAXTRANTIME</code> in the <code class="cCode">T_DOMAIN</code> class in <code class="cCode">TM_MIB(5)</code>.
</p>
<h3 class="pHeading2"><a name="wp1257770"> </a>
How the Domains Component Handles Blocking Timeouts
</h3>
<p class="pBody"><a name="wp1257774"> </a>
The Oracle Tuxedo blocking timeout mechanism uses information stored in the registry slot assigned to each Oracle Tuxedo client or server process&#8212;one registry slot per process&#8212;running on the local machine. Information in the registry slot is used by the local BBL to detect requesters that have been blocked for a time greater than <code class="cCode">BLOCKTIME</code>. Because a domain gateway process is a multitasking server that can process several service requests at a time (which would require multiple registry slots), domain gateways cannot use the registry slot mechanism. When a blocking timeout condition arises in a Domains environment, a domain gateway sends an error/failure reply message to the requester and <em class="cEmphasis">cleans</em> any context associated with the service request.
</p>
<p class="pBody"><a name="wp1257778"> </a>
In the <code class="cCode">DM_LOCAL</code> section of the <code class="cCode">DMCONFIG</code> file, you can set the blocking timeout for a local domain access point using the <code class="cCode">BLOCKTIME</code> parameter. For example:
</p>
<p class="pBody"><a name="wp1257779"> </a>
<code class="cCode">*DM_LOCAL<br />LOCAL1&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=</code>&#8220;<code class="cCode">BA.CENTRAL01&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=30</code>
</p>
<p class="pBody"><a name="wp1257780"> </a>
The <code class="cCode">BLOCKTIME</code> parameter specifies the maximum wait time a blocking ATMI call will block before timing out. A blocking timeout condition implies that the affected service request has failed.
</p>
<p class="pBody"><a name="wp1257781"> </a>
The blocking timeout value is a multiplier of the <code class="cCode">SCANUNIT</code> parameter specified in the <code class="cCode">RESOURCES</code> section of the <code class="cCode">UBBCONFIG</code> file. The value <code class="cCode">SCANUNIT * BLOCKTIME</code> must be greater than or equal to <code class="cCode">SCANUNIT</code> and less than or equal to 32,767 seconds.
</p>
<p class="pBody"><a name="wp1257782"> </a>
If <code class="cCode">BLOCKTIME</code> is not specified in the <code class="cCode">DMCONFIG</code> file, the default is set to the value of the <code class="cCode">BLOCKTIME</code> parameter specified in the <code class="cCode">RESOURCES</code> section of the <code class="cCode">UBBCONFIG</code> file. If the <code class="cCode">BLOCKTIME</code> parameter is not specified in the <code class="cCode">UBBCONFIG</code> file, the default is set so that (<code class="cCode">SCANUNIT * BLOCKTIME</code>) is approximately 60 seconds.
</p>
<p class="pBody"><a name="wp1257783"> </a>
Be aware that <em class="cEmphasis">interdomain</em> transactions generate blocking timeout conditions when transaction duration exceeds <code class="cCode">BLOCKTIME</code>. That is, for an interdomain transaction, if the <code class="cCode">BLOCKTIME</code> value is less than (a) the <code class="cCode">TRANTIME</code> timeout value specified in the <code class="cCode">SERVICES</code> section of the <code class="cCode">UBBCONFIG</code> file or (b) the timeout value passed in the <code class="cCode">tpbegin()</code> call to start the transaction, the timeout for the transaction is reduced to the <code class="cCode">BLOCKTIME</code> value. In contrast, for <em class="cEmphasis">intradomain</em> transactions (that is, transactions handled within a single Oracle Tuxedo domain), the <code class="cCode">BLOCKTIME</code> value specified in the <code class="cCode">RESOURCES</code> section of the <code class="cCode">TUXCONFIG</code> file has <em class="cEmphasis">no</em> effect on the timeout of an intradomain transaction.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1257788"> </a>
Specifying Domains Connection Policies
</h2><p class="pBody"><a name="wp1257789"> </a>
You can specify the conditions under which a local domain gateway tries to establish a connection to one or more remote domains by selecting one of the following connection policies:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257790"> </a><code class="cCode">ON_DEMAND</code> (default)&#8212;Connect when requested by either (1) a client request to a remote service or (2) an administrative &#8220;connect&#8221; command. Under this connection policy, a connection can be established in any of the following ways:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1257791"> </a>Client request</li>
<li><a name="wp1257792"> </a>Manually through the <code class="cCode">dmadmin(1)</code> <code class="cCode">connect</code> command</li>
<li><a name="wp1257793"> </a>Through an incoming connection</li>
</ul></div>
<li><a name="wp1257794"> </a><code class="cCode">ON_STARTUP</code>&#8212;Connect at gateway server initialization (boot) time. Under this connection policy, a connection can be established in any of the following ways:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1257798"> </a>Automatically when the Oracle Tuxedo application boots</li>
<li><a name="wp1257799"> </a>Manual through the <code class="cCode">dmadmin(1)</code> <code class="cCode">connect</code> command</li>
<li><a name="wp1257800"> </a>Through an incoming connection</li>
</ul></div>
<li><a name="wp1257801"> </a><code class="cCode">INCOMING_ONLY</code>&#8212;Accept incoming connections but do not initiate a connection automatically. Under this connection policy, a connection can be established in any of the following ways:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1257802"> </a>Manually through the <code class="cCode">dmadmin(1)</code> <code class="cCode">connect</code> command</li>
<li><a name="wp1257803"> </a>Through an incoming connection</li>
</ul></div>
</ul></div>
<p class="pBody"><a name="wp1257804"> </a>
Connection policy applies only to TDomain gateways.
</p>
<h3 class="pHeading2"><a name="wp1257806"> </a>
How To Configure Your Connection Policy
</h3>
<p class="pBody"><a name="wp1257807"> </a>
In the <code class="cCode">DM_LOCAL</code> section of the <code class="cCode">DMCONFIG</code> file, you set the connection policy for a local domain access point using the <code class="cCode">CONNECTION_POLICY</code> parameter. For example:
</p>
<p class="pBody"><a name="wp1257808"> </a>
<code class="cCode">*DM_LOCAL<br />LOCAL1&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8220;BA.CENTRAL01&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=30<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP</code>
</p>
<p class="pBody"><a name="wp1257809"> </a>
If you do not specify a connection policy for a local domain access point, the connection policy for that access point defaults to <code class="cCode">ON_DEMAND</code>.
</p>
<h4 class="pHeading3"><a name="wp1263204"> </a>
Per Local/Remote Domain Connection Policy
</h4>
<p class="pBody"><a name="wp1257813"> </a>
For TDomain gateways running Oracle Tuxedo release 8.1 or later software, you can set the connection policy on a per local or per remote domain basis in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file. For example:
</p>
<p class="pBody"><a name="wp1257814"> </a>
<code class="cCode">*DM_LOCAL<br />LOCAL1&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8220;BA.CENTRAL01&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=30</code>
</p>
<p class="pBody"><a name="wp1263214"> </a>
<code class="cCode">*DM_REMOTE<br />REMOT1&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DOMAINID=&#8221;REMOT1&#8221;</code>
</p>
<p class="pBody"><a name="wp1263215"> </a>
<code class="cCode">REMOT2&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DOMAINID=&#8221;REMOT2&#8221;</code>
</p>
<p class="pBody"><a name="wp1257815"> </a>
<code class="cCode">*DM_TDOMAIN<br />LOCAL1&#160;&#160;NWADDR=&#8220;//albany.acme.com:4051&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />REMOT1&#160;&#160;NWADDR=&#8220;//newyork.acme.com:65431&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_DEMAND<br />REMOT2&#160;&#160;NWADDR=&#8220;//philly.acme.com:65431&#8221;</code>
</p>
<p class="pBody"><a name="wp1257816"> </a>
The connection policy specified for a remote domain access point takes precedence over the connection policy specified for a local domain access point. So, in the preceding example, the connection policy configurations will be:
</p>
<p class="pBody"><a name="wp1257817"> </a>
<code class="cCode">LOCAL1</code> to <code class="cCode">REMOT1</code> &#8212; <code class="cCode">ON_DEMAND<br />LOCAL1</code> to <code class="cCode">REMOT2</code> &#8212; <code class="cCode">ON_STARTUP</code>
</p>
<p class="pBody"><a name="wp1257821"> </a>
For Oracle Tuxedo 8.1 or later, you can specify any of the following connection policy values for a <em class="cEmphasis">local domain access point</em> in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257822"> </a><code class="cCode">ON_DEMAND</code></li>
<li><a name="wp1257823"> </a><code class="cCode">ON_STARTUP</code></li>
<li><a name="wp1257824"> </a><code class="cCode">INCOMING_ONLY</code></li>
</ul></div>
<p class="pBody"><a name="wp1257825"> </a>
Specifying no connection policy for a local domain access point defaults to the global connection policy specified in the <code class="cCode">DM_LOCAL</code> section of the <code class="cCode">DMCONFIG</code> file. Specifying a global connection policy in the <code class="cCode">DM_TDOMAIN</code> section takes precedence over the global connection policy specified in the <code class="cCode">DM_LOCAL</code> section.
</p>
<a name="wp1257826"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>If you choose to specify a global connection policy in the <code class="cCode">DM_TDOMAIN</code> section, do not specify a global connection policy in the <code class="cCode">DM_LOCAL</code> section.</td>
</tr>
</table>

<p class="pBody"><a name="wp1257830"> </a>
For Oracle Tuxedo 8.1 or later, you can also specify any of the following connection policy values for a <em class="cEmphasis">remote domain access point</em> in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257831"> </a><code class="cCode">LOCAL</code> (default)</li>
<li><a name="wp1257832"> </a><code class="cCode">ON_DEMAND</code></li>
<li><a name="wp1257833"> </a><code class="cCode">ON_STARTUP</code></li>
<li><a name="wp1257834"> </a><code class="cCode">INCOMING_ONLY</code></li>
</ul></div>
<p class="pBody"><a name="wp1257835"> </a>
Specifying <code class="cCode">LOCAL</code> or no connection policy for a remote domain access point defaults to the global connection policy.
</p>
<p class="pBody"><a name="wp1257836"> </a>
Without the remote-domain connection policy capability, a global connection policy of <code class="cCode">ON_STARTUP</code> means that the local TDomain gateway will try to connect to <em class="cEmphasis">all</em> remote domains at boot time, even if some of the remote domains will not be used initially. With a large number of remote domains, the boot time could be substantial. With the remote-domain connection policy capability, you can select which remote domain connections <em class="cEmphasis">not</em> to automatically establish at boot time for a global connection policy of <code class="cCode">ON_STARTUP</code>.
</p>
<h4 class="pHeading3"><a name="wp1263229"> </a>
Per TDomain Session Connection Policy
</h4>
<p class="pBody"><a name="wp1263233"> </a>
Beginning with Oracle Tuxedo 9.0, you can set the connection policy for TDomain gateways on a per TDomain session basis in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file.
</p>
<p class="pBody"><a name="wp1263235"> </a>
In order to initiate a per TDomain session connection policy you must do the following:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1263236"> </a>Establish a TDomain session between specific local and remote domain gateway access points. This gives you the ability to restrict session connection accessibility to one or more local and remote domain gateways. </li>
<p class="pBodyRelative"><a name="wp1264083"> </a>
You can create one or more record entries to describe the parameters and attributes you want to use per TDomain session.
</p>
<li><a name="wp1263237"> </a>Specify the <code class="cCode">connection_policy</code> parameter attributes you want to use. If you do not specify a connection policy for a TDomain session, the connection policy attribute for that session point defaults to <code class="cCode">LOCAL</code>.</li>
</ul></div>
<h5 class="pHeading4"><a name="wp1263264"> </a>
Creating A TDomain Session
</h5>
<p class="pBody"><a name="wp1263266"> </a>
Two parameters in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file are used to create a TDomain session:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1263653"> </a><code class="cCode">FAILOVERSEQ</code>: Specifies a TDomain session failover sequence and primary record.</li>
<li><a name="wp1263690"> </a><code class="cCode">LACCESSPOINT</code> <b class="cBold">(also known as </b><code class="cCodeBold">LDOM</code><b class="cBold">)</b>: Specifies the name of a local domain access point listed in the <code class="cCode">DM_LOCAL</code> section.</li>
</ul></div>
<p class="pBody"><a name="wp1263292"> </a>
You can specify other TDomain session parameters and attributes, for example <code class="cCode">SECURITY</code> and <code class="cCode">DMKEEPALIVE</code>. For more information on <code class="cCode">FAILOVERSEQ</code> and <code class="cCode">LACCESSPOINT</code>, as well as other TDomain parameters and attributes, see <span class="cHyperlink">
Optional para</span><a href="../rf5/rf5.html"></a>meters for the DM_TDOMAIN section in <em class="cEmphasis">Oracle Tuxedo File Formats, Data Descriptions, MIBs, and System Processes Reference</em>.
</p>
<h5 class="pHeading4"><a name="wp1263299"> </a>
Creating A Per TDomain Session Connection Policy
</h5>
<p class="pBody"><a name="wp1263300"> </a>
The <code class="cCode">FAILOVERSEQ</code>, <code class="cCode">LACCESSPOINT</code> and <code class="cCode">CONNECTION_POLICY</code> parameters are used to establish a per TDomain session policy and are specified in <a href="addom.html#wp1263319">Listing&#160;1-1</a>:
</p>
<div class="pCodeTitle"><a name="wp1263319"> </a>
Listing&#160;1-1	   Per TDOMAIN Session Connection Policy Example
</div> <a name="wp1264137"> </a><div class="pPreformatted"><pre>*DM_LOCAL<br />LOCAL1&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8220;BA.CENTRAL01&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=30</pre></div><p class="pBody"><a name="wp1264138"> </a>
LOCAL2&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8220;BA.CENTRAL02&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=30
</p>
<p class="pBody"><a name="wp1264139"> </a>
*DM_REMOTE<br />REMOT1&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DOMAINID=&#8221;REMOT1&#8221;
</p>
<p class="pBody"><a name="wp1264140"> </a>
REMOT2&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DOMAINID=&#8221;REMOT2&#8221;
</p>
<p class="pBody"><a name="wp1264141"> </a>
*DM_TDOMAIN<br />LOCAL1&#160;&#160;NWADDR=&#8220;//albany.acme.com:4051&#8221;<br />LOCAL2&#160;&#160;NWADDR=&#8220;//chicago.acme.com:4032&#8221;<br />LOCAL1&#160;&#160;NWADDR=&#8220;//albany.acme.com:4052&#8221;<br />REMOT1&#160;&#160;NWADDR=&#8220;//newyork.acme.com:65431&#8221; LACCESSPOINT=LOCAL1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MINENCRYPTBITS=128 MAXENCRYPTBITS=128<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=100<br />REMOT1&#160;&#160;NWADDR=&#8220;//newyork.acme.com:65432&#8221; LACCESSPOINT=LOCAL2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=INCOMING_ONLY<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=110<br />REMOT2&#160;&#160;NWADDR=&#8220;//philly.acme.com:65431&#8221; LACCESSPOINT=LOCAL2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_DEMAND<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=120<br />REMOT1&#160;&#160;NWADDR=&#8220;//detroit.acme.com:65431&#8221; LACCESSPOINT=LOCAL1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=INCOMING_ONLY<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MINENCRYPTBITS=40 MAXENCRYPTBITS=40<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=130
</p>
<p class="pBody"><a name="wp1263326"> </a>
The <code class="cCode">DM_TDOMAIN</code> section consists of seven records that include three TDomain sessions.
</p>
<p class="pGraphic"><a name="wp1263388"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1263329table1263327"><caption><a name="wp1263329"> </a>
Table 1-3  TDomain Sessions

</caption>

  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellHeading"><a name="wp1263339"> </a>
Record
</div>
</td>
    <td class="table" scope="row"><div class="pCellHeading"><a name="wp1263341"> </a>
Domain Session
</div>
</td>
    <td class="table" scope="row"><div class="pCellHeading"><a name="wp1263343"> </a>
Connection Policy
</div>
</td>
    <td class="table" scope="row"><div class="pCellHeading"><a name="wp1263345"> </a>
Connection/ Failover Sequence
</div>
</td>
    <td class="table" scope="row"><div class="pCellHeading"><a name="wp1263347"> </a>
Session Hierarchy
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263349"> </a>
4
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263351"> </a>
[<code class="cCode">LOCAL1,REMOT1</code>]
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263353"> </a>
<code class="cCode">ON_STARTUP</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263355"> </a>
1st
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263357"> </a>
Primary
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263359"> </a>
7
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263361"> </a>
[<code class="cCode">LOCAL1,REMOT1</code>]
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263363"> </a>
<code class="cCode">Ignored</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263365"> </a>
2nd
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263367"> </a>
Secondary
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263369"> </a>
5
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263371"> </a>
[<code class="cCode">LOCAL2,REMOT1</code>]
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263373"> </a>
<code class="cCode">INCOMING_ONLY</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263375"> </a>
1st
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263377"> </a>
Primary
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263379"> </a>
6
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263381"> </a>
[<code class="cCode">LOCAL2,REMOT2</code>]
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263383"> </a>
<code class="cCode">ON_DEMAND</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263385"> </a>
1st
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1263387"> </a>
Primary
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1263390"> </a>Record 4 is the primary record for TDomain session <code class="cCode">LOCAL1,REMOT1</code> since its <code class="cCode">FAILOVERSEQ</code> number is smaller than record 7. The connection policy for this TDomain session is <code class="cCode">ON_STARTUP</code>, and it requires 128 bits Link-Level Encryption security policy. If connection to this record fails, then a connection attempt is made to its secondary/backup record, which is record 7.</li>
<li><a name="wp1263391"> </a>Record 7 is the secondary or backup record for TDomain session <code class="cCode">LOCAL1,REMOT1</code> since its <code class="cCode">FAILOVERSEQ</code> number is larger than record 4. </li>
<p class="pBodyRelative"><a name="wp1264144"> </a>
The connection and security policies for record 7 are ignored because record 4 is the primary record for this session. Record 7 has no secondary/backup failover record. If connection to record 7 fails, then a connection to record 4 is retried as determined by <code class="cCode">RETRY_INTERVAL</code> until <code class="cCode">MAXRETRY</code> is exhausted. For more information about <code class="cCode">RETRY_INTERVAL</code>, see <a href="addom.html#wp1257838"><span class="cHyperlink">
How To Use Connection Retry Processing on page&#160;1-37</span></a>.
</p>
<li><a name="wp1263395"> </a>Record 5 is the primary record for TDomain session <code class="cCode">LOCAL2,REMOT1</code>. The connection policy for this TDomain session is <code class="cCode">INCOMING_ONLY</code>. There is no secondary/backup failover record for this session.</li>
<li><a name="wp1263396"> </a>Record 6 is the primary record for TDomain session <code class="cCode">LOCAL2,REMOT2</code>. The connection policy for this session is <code class="cCode">ON_DEMAND</code>. There is no secondary/backup failover record for this session. Local access point <code class="cCode">LOCAL2</code> connects with two TDomain sessions: one with <code class="cCode">REMOT1 </code>in record 5, and another with <code class="cCode">REMOT2</code>.</li>
</ul></div>
<p class="pBody"><a name="wp1263397"> </a>
If two or more records for the same TDomain session have the same <code class="cCode">FAILOVERSEQ</code> value, the first record entered will be the primary record. The failover sequence for the remaining records is determined based on record-entry order.
</p>
<p class="pBody"><a name="wp1263398"> </a>
To initiate your per TDomain session policy, perform the following steps:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1263399"> </a>Use <code class="cCode">dmloadcf -y</code> to compile and convert <code class="cCode">DMCONFIG</code> file into <code class="cCode">BDMCONFIG</code> file.</li>
<li><a name="wp1263400"> </a>Use <code class="cCode">tmboot -y </code>to boot the server</li>
</ul></div>
<h5 class="pHeading4"><a name="wp1263401"> </a>
Using Regular Expressions with TDomain Sessions
</h5>
<p class="pBody"><a name="wp1263402"> </a>
To make the <code class="cCode">DMCONFIG</code> file smaller and easier to work with, <code class="cCode">LACCESSPOINT</code> can contain regular expressions to describe multiple local domain access points.
</p>
<a name="wp1263403"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td><code class="cCode">DM_TDOMAIN</code> is the only section in the <code class="cCode">DMCONFIG</code> file that allows <code class="cCode">LACCESSPOINT</code> to contain regular expressions.</td>
</tr>
</table>

<p class="pBody"><a name="wp1263404"> </a>
When the <code class="cCode">DMCONFIG</code> file is compiled, regular expressions are expanded to their full local domain names in the output binary <code class="cCode">BDMCONFIG</code> file. The size of the <code class="cCode">BDMCONFIG</code> file is increased accordingly as shown in <a href="addom.html#wp1264210">Listing&#160;1-2</a>:
</p>
<div class="pCodeTitle"><a name="wp1264210"> </a>
Listing&#160;1-2	   DMCONFIG File with Regular Expressions
</div> <p class="pBody"><a name="wp1264195"> </a>
<code class="cCode">*DM_LOCAL<br />ALPHA1&#160;&#160; . . .<br />ALPHA2&#160;&#160; . . .<br />ALPHA3&#160;&#160; . . .<br />ALPHA10&#160;&#160; . . .<br />ALPHA11&#160;&#160; . . .<br />ALPHA24&#160;&#160; . . .<br />ALPHA36&#160;&#160; . . .<br />BETA2&#160;&#160; . . .<br />BETA3&#160;&#160; . . .<br />BETA15&#160;&#160; . . .<br />BETA20&#160;&#160; . . .<br />*DM_REMOTE<br />REMOT1&#160;&#160; . . .<br />REMOT2&#160;&#160; . . .<br />REMOT3&#160;&#160; . . .<br />*DM_TDOMAIN<br />REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65431&#8221; LACCESSPOINT=ALPHA1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=INCOMING_ONLY<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=100<br />REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65432&#8221; LACCESSPOINT=BETA2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_DEMAND<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=110<br />REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65433&#8221; LACCESSPOINT=&#8221;ALPHA[1-2][0-9]&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=120<br />REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65434&#8221; LACCESSPOINT=&#8221;BETA[1-2][0-9]*&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=130</code>
</p>
<p class="pBody"><a name="wp1263409"> </a>
TDomain session records three and four use regular expressions to define local access points. When <code class="cCode">dmloadcf</code> parses this <code class="cCode">DMCONFIG</code> file, the <code class="cCode">BDMCONFIG</code> file output is as follows in <a href="addom.html#wp1264246">Listing&#160;1-3</a>. 
</p>
<div class="pCodeTitle"><a name="wp1264246"> </a>
Listing&#160;1-3	   Compiled BDMCONFIG File for DMCONFIG File with Regular Expressions
</div> <p class="pBody"><a name="wp1264207"> </a>
<code class="cCode">REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65431&#8221; LACCESSPOINT=ALPHA1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=INCOMING_ONLY<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=100<br />REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65432&#8221; LACCESSPOINT=BETA2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_DEMAND<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=110<br />REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65433&#8221; LACCESSPOINT=&#8221;ALPHA10&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=120<br />REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65433&#8221; LACCESSPOINT=&#8221;ALPHA11&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=120<br />REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65433&#8221; LACCESSPOINT=&#8221;ALPHA24&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=120<br />REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65434&#8221; LACCESSPOINT=&#8221;BETA2&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=130<br />REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65434&#8221; LACCESSPOINT=&#8221;BETA15&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=130<br />REMOT1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65434&#8221; LACCESSPOINT=&#8221;BETA20&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=130</code>
</p>
<h5 class="pHeading4"><a name="wp1264267"> </a>
Using DM_MIB to Specify or Request TDomain Session Information
</h5>
<p class="pBody"><a name="wp1264268"> </a>
Using <code class="cCode">DM_MIB</code> to specify and request TDomain session information directly modifies the <code class="cCode">BDMCONFIG</code> file. The original <code class="cCode">DMCONFIG</code> file is unmodified. For more information about <code class="cCode">DM_MIB</code>, see <a href="../rf5/rf5.html">DM_MIB(5)</a> in <span style="font-style: italic">Section 5 - File Formats, Data Descriptions, MIBs, and System Processes Reference</span>. 
</p>
<a name="wp1264272"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You can use <code class="cCode">dmunloadcf &gt;DMCONFIG</code> to parse the <code class="cCode">BDMCONFIG</code> file to update its changes in the <code class="cCode">DMCONFIG</code> file. For more information about <code class="cCode">dmunloadcf</code>, see <a href="addom.html#wp1257315">Domains Administrative Tools</a>.</td>
</tr>
</table>

<p class="pBody"><a name="wp1264276"> </a>
<code class="cCode">DM_MIB</code> uses three T_DM_TDOMAIN Class Definition attributes to create a per TDomain session connection policy in the <code class="cCode">BDMCONFIG</code> file:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1264277"> </a><code class="cCode">TA_DMFAILOVERSEQ</code>: Specifies and requests the session connection failover sequences and primary records for a TDomain session record in the <code class="cCode">BDMCONFIG</code> file.</li>
<li><a name="wp1264278"> </a><code class="cCode">TA_DMLACCESSPOINT</code>: Specifies and requests a local domain access point found in the <code class="cCode">DM_LOCAL</code> section for a TDomain session record in the <code class="cCode">BDMCONFIG</code> file.</li>
<li><a name="wp1264279"> </a><code class="cCode">TA_DMCONNECTION_POLICY</code>: Specifies a TDomain connection policy</li>
</ul></div>
<p class="pBody"><a name="wp1264280"> </a>
You can also specify and request other T_DM_TDOMAIN Class Definition attributes, for example security and keepalive. For more T_DM_TDOMAIN Class Definition attribute information, see <span class="cHyperlink">
T_DM_TDOM</span><a href="../rf5/rf5.html"></a>AIN Class Definition in <span style="font-style: italic">Section 5 - File Formats, Data Descriptions, MIBs, and System Processes Reference</span>.
</p>
<p class="pBody"><a name="wp1264284"> </a>
You can use <code class="cCode">DM_MIB</code> to add, delete, or retrieve TDomain session records in the <code class="cCode">BDMCONFIG</code> file. All applicable T_DM_TDOMAIN Class Definition key fields must be used to add, delete, or retrieve requests for TDomain session record information.
</p>
<p class="pBody"><a name="wp1264285"> </a>
For example:
</p>
<p class="pBody"><a name="wp1264286"> </a>
Example 1: <code class="cCode">DM_MIB</code> request used to add a new TDomain session and connection policy record.
</p>
<p class="pBody"><a name="wp1264287"> </a>
<code class="cCode">TA_OPERATION&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SET<br />TA_CLASS&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;T_DM_TDOMAIN<br />TA_DMACCESSPOINT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RDOM1<br />TA_DMNWADDR&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//philly.acme.com:65431<br />TA_STATE&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NEW<br />TA_DMLACCESSPOINT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LDOM3<br />TA_DMFAILOVERSEQ&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;50<br />TA_DMCONNECTION_POLICY&#160;&#160;&#160;&#160;&#160;&#160;ON_STARTUP</code>
</p>
<p class="pBody"><a name="wp1263440"> </a>
This will add the following TDomain session record in <code class="cCode">BDMCONFIG</code> file:
</p>
<p class="pBody"><a name="wp1264291"> </a>
<code class="cCode">RDOM1&#160;&#160;NWADDR=&#8220;//philly.acme.com:65431&#8221; LACCESSPOINT=LDOM3<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;FAILOVERSEQ=50<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP</code>
</p>
<p class="pBody"><a name="wp1264292"> </a>
Example 2: <code class="cCode">DM_MIB</code> request used to delete an existing TDomain session connection policy record.
</p>
<p class="pBody"><a name="wp1264293"> </a>
The requested record is marked &#8220;invalid&#8221; in the <code class="cCode">BDMCONFIG</code> file and is not included in the TDomain session.
</p>
<p class="pBody"><a name="wp1264294"> </a>
<code class="cCode">TA_OPERATION&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SET<br />TA_CLASS&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;T_DM_TDOMAIN<br />TA_DMACCESSPOINT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RDOM1<br />TA_DMNWADDR&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//philly.acme.com:65431<br />TA_STATE&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;INV<br />TA_DMLACCESSPOINT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LDOM3<br />TA_DMFAILOVERSEQ&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;50<br />TA_DMCONNECTION_POLICY&#160;&#160;&#160;&#160;&#160;&#160;ON_STARTUP</code>
</p>
<p class="pBody"><a name="wp1264295"> </a>
Example 3: DM_MIB request used to retrieve an existing TDomain session connection policy record.
</p>
<p class="pBody"><a name="wp1264296"> </a>
<code class="cCode">TA_OPERATION&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GET<br />TA_CLASS&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;T_DM_TDOMAIN<br />TA_DMACCESSPOINT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RDOM1<br />TA_DMNWADDR&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//philly.acme.com:65431<br />TA_STATE&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;INV<br />TA_DMLACCESSPOINT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LDOM3<br />TA_DMFAILOVERSEQ&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;50<br />TA_DMCONNECTION_POLICY&#160;&#160;&#160;&#160;&#160;&#160;ON_STARTUP</code>
</p>
<h5 class="pHeading4"><a name="wp1264300"> </a>
Using DMADMIN to Specify or Request TDomain Session Information
</h5>
<p class="pBody"><a name="wp1264301"> </a>
You can use Tuxedo&#8217;s command line interface, <code class="cCode">DMADMIN</code>, to specify and request TDomain session information. For a general description of <code class="cCode">DMADMIN</code>, see<a href="addom.html#wp1257315">Domains Administrative Tools</a>.
</p>
<p class="pBody"><a name="wp1264305"> </a>
Using <code class="cCode">DMADMIN</code> to specify and request TDomain information works similarly to using <code class="cCode">DM_MIB</code>. That is to say, using <code class="cCode">DMADMIN</code> modifies the <code class="cCode">BDMCONFIG</code> file and leaves the original <code class="cCode">DMCONFIG</code> file unmodified.
</p>
<p class="pBody"><a name="wp1264306"> </a>
<code class="cCode">DMADMIN</code> uses three field indentifiers to add a per TDomain connection policy record in the <code class="cCode">BDMCONFIG</code> file:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1264307"> </a><code class="cCode">TA_DMFAILOVERSEQ</code>: Specifies and requests the session connection failover sequences and primary records for a TDomain session record in the <code class="cCode">BDMCONFIG</code> file. </li>
<li><a name="wp1264308"> </a><code class="cCode">TA_LDOM</code>: Specifies and requests a local domain access point found in the <code class="cCode">DM_LOCAL</code> section for a TDomain session record in the <code class="cCode">BDMCONFIG</code> file.</li>
<li><a name="wp1264309"> </a><code class="cCode">TA_CONNECTION_POLICY</code>: Specifies a TDomain connection policy</li>
</ul></div>
<p class="pBody"><a name="wp1264310"> </a>
For more information about <code class="cCode">TA_DMFAILOVERSEQ</code>, <code class="cCode">TA_LDOM,</code> <code class="cCode">TA_CONNECTION_POLICY</code> and other field indentifiers, see <a href="../rfcm/rfcmd.html">dmadmin(1)</a> in <em class="cEmphasis">Oracle Tuxedo Command Reference</em>.
</p>
<p class="pBody"><a name="wp1264317"> </a>
You can use <code class="cCode">DMADMIN</code> to add, delete, or retrieve TDomain session records. The following example illustrates how <code class="cCode">DMADMIN</code> is used to add a TDomain session connection policy record in the <code class="cCode">BDMCONFIG</code> file:
</p>
<p class="pBody"><a name="wp1264318"> </a>
<code class="cCode">TA_CMPLIMIT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;2147483647<br />TA_MINENCRYPTBITS&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0<br />TA_MAXENCRYPTBITS&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;128<br />TA_DMNWADDR&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//philly.acme.com:65431<br />TA_LDOM&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LDOM3<br />TA_DMFAILOVERSEQ&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;50<br />TA_RDOM&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RDOM1<br /></code>TA_CONNECTION_POLICY<code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ON_STARTUP</code>
</p>
<h5 class="pHeading4"><a name="wp1264322"> </a>
TDomain Session Interoperability with Older Tuxedo Releases
</h5>
<p class="pBody"><a name="wp1264323"> </a>
Tuxedo 9.x TDomain gateways can communicate with older Tuxedo release TDomain gateways. However, if you want to use the TDomain session feature running Tuxedo 9.x and 8.1 in a <span style="font-style: italic">mixed application environment</span>, please note the following limitations:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1264324"> </a>You must use Tuxedo 9.x <code class="cCode">DMADM</code> server and <code class="cCode">dmloadcf</code> when you want to create a TDomain session.</li>
<li><a name="wp1264325"> </a>You should not limit Tuxedo 8.1 local domain gateway access to remote domains. If you do, you run the risk of getting a routing failure error. Message routing in Tuxedo 8.1 assumes local domain gateway is capable of connecting to <span style="font-style: italic">all</span> remote domains.</li>
</ul></div>
<p class="pBody"><a name="wp1264326"> </a>
The TDomain session feature <span style="font-style: italic">does not </span>work with Tuxedo releases older than 8.1 in a <span style="font-style: italic">mixed application environment</span>.
</p>
<h3 class="pHeading2"><a name="wp1257838"> </a>
How To Use Connection Retry Processing
</h3>
<p class="pBody"><a name="wp1257839"> </a>
When <code class="cCode">CONNECTION_POLICY</code> is set to <code class="cCode">ON_STARTUP</code>, you can configure two other parameters to determine how many times the local domain gateway attempts to establish a connection to the remote domains. By default, the local domain gateway retries failed connections every 60 seconds, but you can specify a different value for this interval using parameters <code class="cCode">MAXRETRY</code> and <code class="cCode">RETRY_INTERVAL</code>.
</p>
<p class="pBody"><a name="wp1257840"> </a>
You use the <code class="cCode">MAXRETRY</code> parameter to specify the number of times that a domain gateway tries to establish connections to remote domains. The minimum value is 0, and the maximum value is 2147483647. The default setting is 2147483647. Setting this parameter to 0 turns off connection retry processing.
</p>
<p class="pBody"><a name="wp1257841"> </a>
You use the <code class="cCode">RETRY_INTERVAL</code> parameter to specify the number of seconds between automatic attempts to establish a connection to remote domains. The minimum value is 0, and the maximum value is 2147483647. The default setting is 60. If the <code class="cCode">MAXRETRY</code> parameter is set to 0, setting <code class="cCode">RETRY_INTERVAL</code> is not allowed.
</p>
<p class="pBody"><a name="wp1257842"> </a>
Example 1:
</p>
<p class="pBody"><a name="wp1257843"> </a>
<code class="cCode">*DM_LOCAL<br />LOCAL1&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=</code>&#8220;<code class="cCode">BA.CENTRAL01&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=30<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MAXRETRY=5<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RETRY_INTERVAL=100</code>
</p>
<p class="pBody"><a name="wp1257847"> </a>
Example 2 (Only possible for TDomain gateways running Oracle Tuxedo release 8.1 or later software):
</p>
<p class="pBody"><a name="wp1257848"> </a>
<code class="cCode">*DM_LOCAL<br />LOCAL1&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=</code>&#8220;<code class="cCode">BA.CENTRAL01&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=30</code>
</p>
<p class="pBody"><a name="wp1257849"> </a>
<code class="cCode">*DM_TDOMAIN<br />LOCAL1&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//albany.acme.com:4051&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MAXRETRY=5<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RETRY_INTERVAL=100<br />REMOT1&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//newyork.acme.com:65431&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MAXRETRY=10<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RETRY_INTERVAL=40</code>
</p>
<p class="pBody"><a name="wp1257850"> </a>
In the second example, the <code class="cCode">MAXRETRY</code> and <code class="cCode">RETRY_INTERVAL</code> values 10 and 40 will be the automatic connection retry criteria used by the local TDomain gateway to establish a connection to the remote domain access point named <code class="cCode">REMOT1</code>.
</p>
<h3 class="pHeading2"><a name="wp1257852"> </a>
How Connection Policy Determines Availability of Remote Services
</h3>
<p class="pBody"><a name="wp1257853"> </a>
The connection policy that you specify determines how services imported from a remote domain are advertised in the Oracle Tuxedo bulletin board by the domain gateway:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257857"> </a>For <code class="cCode">ON_DEMAND</code>, the local domain gateway continually advertises services imported from a remote domain.</li>
<li><a name="wp1257858"> </a>For <code class="cCode">ON_STARTUP</code>, the local domain gateway advertises services imported from a remote domain as long as a connection exists to the remote domain.</li>
<li><a name="wp1257859"> </a>For <code class="cCode">INCOMING_ONLY</code>, the local domain gateway advertises services imported from a remote domain when the gateway receives an incoming connection or when a <code class="cCode">dmadmin connect</code> command is issued.</li>
</ul></div>
<p class="pBody"><a name="wp1257860"> </a>
When the connection policy is <code class="cCode">ON_STARTUP</code> or <code class="cCode">INCOMING_ONLY</code> (but not <code class="cCode">ON_DEMAND</code>), <em class="cEmphasis">Dynamic Status</em>, a TDomain gateway feature, checks the status of remote services. The status of a remote service depends on the status of the network connection between the local and remote domain gateways. Remote services are advertised and available on the local domain whenever a connection is successfully established to the domain on which they reside. Remote services are suspended and unavailable whenever the connection is not established to the domain on which they reside.
</p>
<p class="pBody"><a name="wp1257861"> </a>
For each service, the domain gateway keeps track not only of the remote domains from which the service is imported, but also of which remote domains are available. In this way, the gateway provides intelligent load balancing of requests to remote domains. If all the remote domains from which a service is imported become unreachable, the domain gateway suspends the service in the Oracle Tuxedo bulletin board.
</p>
<p class="pBody"><a name="wp1257865"> </a>
For example, suppose a service named RSVC is imported from two remote domains, as specified by the following entries in the <code class="cCode">DM_IMPORT</code> section of the <code class="cCode">DMCONFIG</code> file:
</p>
<p class="pBody"><a name="wp1257866"> </a>
<code class="cCode">*DM_IMPORT<br />RSVC&#160;&#160;AUTOTRAN=N<br />&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br />RSVC&#160;&#160;AUTOTRAN=N<br />&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT2<br />&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1</code>
</p>
<p class="pBody"><a name="wp1257867"> </a>
When connections to both <code class="cCode">REMOT1</code> and <code class="cCode">REMOT2</code> are up, the domain gateway load balances requests for the <code class="cCode">RSVC</code> service. If the connection to <code class="cCode">REMOT1</code> goes down, the gateway sends all requests for <code class="cCode">RSVC</code> to <code class="cCode">REMOT2</code>. If both connections go down, the gateway suspends <code class="cCode">RSVC</code> in the bulletin board. Subsequent requests for <code class="cCode">RSVC</code> are either routed to a local service or fail with <code class="cCode">TPENOENT</code>.
</p>
<h3 class="pHeading2"><a name="wp1257868"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1263565"> </a><span class="cHyperlink">
Optional parameters for th</span><a href="../rf5/rf5.html"></a>e DM_TDOMAIN section in <em class="cEmphasis">Oracle Tuxedo File Formats, Data Descriptions, MIBs, and System Processes Reference</em></li>
<li><a name="wp1263569"> </a><span class="cHyperlink">
T_DM_TDO</span><a href="../rf5/rf5.html"></a>MAIN Class Definition in <em class="cEmphasis">Oracle Tuxedo File Formats, Data Descriptions, MIBs, and System Processes Reference</em></li>
<li><a name="wp1257872"> </a><a href="addomc.html#wp1261771"><span class="cHyperlink">
Setting Up Connections in a Domains Configuration</span></a></li>
<li><a name="wp1257876"> </a><a href="addomc.html#wp1261868"><span class="cHyperlink">
Controlling Connections in a Domains Configuration</span></a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1257878"> </a>
Specifying Domains Failover and Failback
</h2><p class="pBody"><a name="wp1257879"> </a>
In the <code class="cCode">DM_IMPORT</code> section of the <code class="cCode">DMCONFIG</code> file, you can set up the Domains-level failover and failback functionality for your Domains configuration. In the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file, you can set up the Domains link-level failover functionality for your Domains configuration.
</p>
<h3 class="pHeading2"><a name="wp1257880"> </a>
How to Configure Domains-Level Failover and Failback
</h3>
<p class="pBody"><a name="wp1257881"> </a>
Domains-level failover is a mechanism that transfers requests to alternate remote domains when a failure is detected with a primary remote domain. It also provides failback to the primary remote domain when that domain is restored.
</p>
<p class="pBody"><a name="wp1257882"> </a>
To support Domains-level failover and failback, you specify a list of the remote domain access points through which a particular service can be executed. For example:
</p>
<a name="wp1257883"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_IMPORT<br />TOUPPER RACCESSPOINT=</code>&#8220;<code class="cCode">REMOT1,REMOT2,REMOT3&#8221;</code></pre></div><p class="pBody"><a name="wp1257884"> </a>
In this example, the <code class="cCode">TOUPPER</code> service can be executed through any of three remote domain access points: <code class="cCode">REMOT1</code> (primary), <code class="cCode">REMOT2</code>, and <code class="cCode">REMOT3</code>. When <code class="cCode">REMOT1</code> is unavailable, <code class="cCode">REMOT2</code> is used for failover. When <code class="cCode">REMOT1</code> and <code class="cCode">REMOT2</code> are both unavailable, <code class="cCode">REMOT3</code> is used for failover.
</p>
<p class="pBody"><a name="wp1257885"> </a>
You must specify <code class="cCode">ON_STARTUP</code> or <code class="cCode">INCOMING_ONLY</code> as the value of the <code class="cCode">CONNECTION_POLICY</code> parameter if you want to configure alternate remote domains for a service. If you specify <code class="cCode">ON_DEMAND</code> as your connection policy, your servers cannot &#8220;fail over&#8221; to the alternate remote domains that you have specified in the <code class="cCode">RACCESSPOINT</code> parameter.
</p>
<p class="pBody"><a name="wp1257886"> </a>
Domains-level failback occurs when a network connection to the primary remote domain is re-established for any of the following reasons:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257887"> </a>Automatic connection retries (<code class="cCode">ON_STARTUP</code> only)</li>
<li><a name="wp1257888"> </a>Incoming connections</li>
<li><a name="wp1257889"> </a>Manual <code class="cCode">dmadmin</code> <code class="cCode">connect</code> command</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1257891"> </a>
How to Configure Domains Link-Level Failover
</h3>
<p class="pBody"><a name="wp1257892"> </a>
Domains link-level failover is a mechanism that ensures that a secondary network link becomes active when a primary network link fails. However, it does not provide failback to the primary link when that link is restored, meaning that when the primary link is restored, you must manually bring down the secondary link to force traffic back onto the primary link.
</p>
<p class="pBody"><a name="wp1257893"> </a>
To configure Domains link-level failover, you specify multiple entries for a remote domain access point in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file. For example:
</p>
<p class="pBody"><a name="wp1257894"> </a>
<code class="cCode">*DM_TDOMAIN<br />REMOT1&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//newyork.acme.com:65431&#8221;<br />REMOT1&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//trenton.acme.com:65431&#8221;</code>
</p>
<p class="pBody"><a name="wp1257895"> </a>
The first entry is considered to be the primary address, which means its <code class="cCode">NWADDR</code> is the first network address tried when a connection is being attempted to the remote domain access point. The second entry is considered to be the secondary address, which means its <code class="cCode">NWADDR</code> is the second network address tried when a connection cannot be established using the primary address.
</p>
<p class="pBody"><a name="wp1257896"> </a>
The second entry points to a secondary remote gateway that must reside in a different Oracle Tuxedo domain than the Oracle Tuxedo domain in which the primary remote gateway resides. The secondary and primary remote gateways must have the same <code class="cCode">ACCESSPOINTID</code> defined in the <code class="cCode">DM_LOCAL</code> section of their associated <code class="cCode">DMCONFIG</code> files; this arrangement is often referred to as a <code class="cCodeEmphasis">mirrored</code> gateway. This feature is not recommended for use with transactions or conversations. In addition, the mirrored gateway is not recommended for use when the primary remote gateway is available.
</p>
<h4 class="pHeading3"><a name="wp1263589"> </a>
How to Configure TDomain Session Link-Level Failover
</h4>
<p class="pBody"><a name="wp1263591"> </a>
The <code class="cCode">FAILOVERSEQ</code> parameter in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file is used to configure TDomain session link-level failover. For more information about specifying <code class="cCode">FAILOVERSEQ</code> in a TDomain session, see <a href="addom.html#wp1263229">Per TDomain Session Connection Policy</a>.
</p>
<p class="pBody"><a name="wp1263596"> </a>
You can also use the <code class="cCode">TA_DMFAILOVERSEQ</code> attribute in <code class="cCode">DM_MIB</code> to configure TDomain session link-level failover. For more information, see <a href="addom.html#wp1264267">Using DM_MIB to Specify or Request TDomain Session Information</a>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1257904"> </a>
Specifying Domains Keepalive
</h2><p class="pBody"><a name="wp1257908"> </a>
Domains keepalive, available for TDomain gateways running Oracle Tuxedo release 8.1 or later software, allows you to enable and configure a keepalive protocol at the TCP level and/or application level for each TDomain gateway connection. TCP-level keepalive and application-level keepalive are not mutually exclusive, meaning that you can configure a Domains connection using both options.
</p>
<p class="pBody"><a name="wp1257909"> </a>
<a href="addom.html#wp1257915">Table&#160;1-4</a> provides some key information about Domains keepalive.
</p>
<p class="pBody"><a name="wp1257968"> </a>
Most Oracle Tuxedo Domains configurations span across firewalls, and firewalls typically time out idle connections. Not only will Domains keepalive keep Oracle Tuxedo interdomain connections open during periods of inactivity, but it will also enable TDomain gateways to quickly detect Domains connection failures. Currently, a TDomain gateway learns of a Domains connection failure through the underlying TCP stack, which may report the failure 15 minutes or more (depending on the local operating system configuration) after the failure occurs.
</p>
<h3 class="pHeading2"><a name="wp1257972"> </a>
What is TCP-Level Keepalive?
</h3>
<p class="pBody"><a name="wp1257973"> </a>
Although the keepalive functionality is not part of the TCP specification, most operating systems provide a TCP keepalive timer. The TCP keepalive timer allows the server machine at one end of a TCP connection to detect whether the client machine at the other end of the connection is reachable.
</p>
<p class="pBody"><a name="wp1257974"> </a>
Every message received by the server machine over the TCP connection resets the TCP keepalive timer. If the keepalive timer detects no activity on the TCP connection for a predefined period of time (typically two hours), the timer expires, and the server machine sends a <em class="cEmphasis">probe segment</em> packet to the client machine. If the connection is still open and the client machine is still alive, the client machine responds by sending an acknowledgement to the server machine. If the server machine does not receive an acknowledgement within a fixed period of time of sending the probe segment packet, the server machine assumes that the connection is broken and releases any resources associated with the connection.
</p>
<p class="pBody"><a name="wp1257975"> </a>
Besides determining whether the connection is open and the client machine is alive, TCP-level keepalive is a way of keeping idle connections open through firewalls. Automatically sending a probe segment packet after a predefined period of connection inactivity resets the firewall&#8217;s idle-connection timer <em class="cEmphasis">before it times out</em>, which allows the connection to stay open.
</p>
<p class="pBody"><a name="wp1257976"> </a>
The interval for an operating system&#8217;s TCP keepalive timer is typically set to two hours. This interval can be changed, but changing it affects all TCP connections for a machine. An operating system&#8217;s TCP keepalive interval is a system-wide value.
</p>
<h3 class="pHeading2"><a name="wp1257977"> </a>
How to Configure TCP-Level Keepalive for Domains
</h3>
<p class="pBody"><a name="wp1257981"> </a>
The Oracle Tuxedo TCP-level keepalive option for Domains is named <code class="cCode">TCPKEEPALIVE</code>, which has been added as an optional parameter in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file. You can use this parameter to enable the Domains TCP-level keepalive option on a per local or per remote domain basis.
</p>
<p class="pBody"><a name="wp1257982"> </a>
The allowed values for <code class="cCode">TCPKEEPALIVE</code> are:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257983"> </a><code class="cCode">LOCAL</code> (relevant only to remote domain access points)</li>
<li><a name="wp1257984"> </a><code class="cCode">NO</code> (keepalive disabled)</li>
<li><a name="wp1257985"> </a><code class="cCode">YES</code> (keepalive enabled)</li>
</ul></div>
<p class="pBody"><a name="wp1257986"> </a>
By default, the Domains TCP-level keepalive option is disabled. When you enable TCP-level keepalive for a Domains connection, the keepalive interval used for the connection is the system-wide value configured for the operating system&#8217;s TCP keepalive timer.
</p>
<p class="pBody"><a name="wp1257987"> </a>
To clarify the use of <code class="cCode">TCPKEEPALIVE</code>, consider the following Domains TCP-level keepalive configuration:
</p>
<p class="pBody"><a name="wp1257988"> </a>
<code class="cCode">*DM_TDOMAIN<br />LOCAL1&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//albany.acme.com:4051&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TCPKEEPALIVE=Y<br />REMOT1&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//newyork.acme.com:65431&#8221;<br />REMOT2&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//philly.acme.com:65431&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TCPKEEPALIVE=NO</code>
</p>
<p class="pBody"><a name="wp1257989"> </a>
The TCP-level keepalive configuration specified for a remote domain access point takes precedence over the TCP-level keepalive configuration specified for the local domain access point. So, in the preceding example, the TCP-level keepalive configurations will be:
</p>
<p class="pBody"><a name="wp1257990"> </a>
<code class="cCode">LOCAL1</code> to <code class="cCode">REMOT1</code> &#8212; TCP-level keepalive enabled<br /><code class="cCode">LOCAL1</code> to <code class="cCode">REMOT2</code> &#8212; TCP-level keepalive disabled
</p>
<p class="pBody"><a name="wp1257991"> </a>
For a local domain access point, you can specify any of the following values for the <code class="cCode">TCPKEEPALIVE</code> parameter:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257992"> </a><code class="cCode">NO</code> (default)</li>
<li><a name="wp1257993"> </a><code class="cCode">YES</code></li>
</ul></div>
<p class="pBody"><a name="wp1257994"> </a>
For a remote domain access point, you can specify any of the following values for the <code class="cCode">TCPKEEPALIVE</code> parameter:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1257995"> </a><code class="cCode">LOCAL</code> (default)</li>
<li><a name="wp1257996"> </a><code class="cCode">NO</code></li>
<li><a name="wp1257997"> </a><code class="cCode">YES</code></li>
</ul></div>
<p class="pBody"><a name="wp1257998"> </a>
Specifying <code class="cCode">LOCAL</code> or no configuration for a remote domain access point defaults to the local TCP-level keepalive configuration.
</p>
<a name="wp1258002"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You can enable each of two interoperating Oracle Tuxedo domains with TCP-level keepalive, assuming that both domains are running Oracle Tuxedo 8.1 or later software.</td>
</tr>
</table>

<p class="pBody"><a name="wp1258006"> </a>
If the connection policy for a Domains connection is <code class="cCode">ON_STARTUP</code> and the TCP connection is closed due to a TCP-level keepalive failure, automatic connection retry attempts. If the connection retry is not successful, you must use the <code class="cCode">dmadmin</code> <code class="cCode">connect</code> command to re-establish the connection. For information about the <code class="cCode">dmadmin</code> <code class="cCode">connect</code> command, see <a href="addomc.html#wp1261871"><span class="cHyperlink">
How to Establish Connections Between Domains</span></a>.
</p>
<h3 class="pHeading2"><a name="wp1258010"> </a>
What is Application-Level Keepalive?
</h3>
<p class="pBody"><a name="wp1258011"> </a>
Some people argue against using the operating system&#8217;s TCP keepalive, citing that the probe segment packets consume unnecessary bandwidth and waste money on internet connections where users pay on a per packet basis. Some people also believe that keepalive belongs in the application layer or link layer, not in the transport (TCP) layer, citing that the application layer should:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1258012"> </a>Decide whether the application has been waiting an excessively long time to receive incoming messages.</li>
<li><a name="wp1258013"> </a>Decide what actions to take to determine whether the TCP connection is still open and that the machine and application at the other end of the connection are still running.</li>
</ul></div>
<p class="pBody"><a name="wp1258014"> </a>
Regardless of who thinks what, one advantage of application-level keepalive over TCP-level keepalive is that the interval for the keepalive timer can be set on a per connection basis. With TCP-level keepalive, the timer interval must be set on a per machine basis.
</p>
<p class="pBody"><a name="wp1258015"> </a>
Using application-level keepalive, the server application sends an application-specific keepalive message whenever the application keepalive timer times out. (Typically, the keepalive message consists of just header information, meaning that the message has no associated data.) The client application responds by sending an acknowledgement to the server application. If the server application does not receive an acknowledgement within a predefined period of time of sending the keepalive message, the server application assumes that the connection is broken and releases any resources associated with the connection.
</p>
<p class="pBody"><a name="wp1258016"> </a>
Besides determining whether the connection is open and the client application is running, application-level keepalive is a way of keeping idle connections open through firewalls. Automatically sending a keepalive message after a predefined period of connection inactivity resets the firewall&#8217;s idle-connection timer <em class="cEmphasis">before it times out</em>, which allows the connection to stay open.
</p>
<h3 class="pHeading2"><a name="wp1258017"> </a>
How to Configure Application-Level Keepalive for Domains
</h3>
<p class="pBody"><a name="wp1258021"> </a>
The Oracle Tuxedo application-level keepalive option for Domains is named <code class="cCode">KEEPALIVE</code>. This parameter and a companion parameter named <code class="cCode">KEEPALIVEWAIT</code> have been added as optional parameters in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file. You can use these parameters to configure the Domains application-level keepalive option on a per local or per remote domain basis.
</p>
<p class="pBody"><a name="wp1258022"> </a>
You use the <code class="cCode">DMKEEPALIVE</code> parameter to specify the maximum time that the local TDomain gateway will wait without receiving any traffic on the Domains connection; if the maximum time is exceeded, the gateway sends an application-level keepalive request message. The allowed values for <code class="cCode">DMKEEPALIVE</code> are:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1258023"> </a>-1 (relevant only to remote domain access points)</li>
<li><a name="wp1258024"> </a>0 (keepalive disabled)</li>
<li><a name="wp1258025"> </a>1 &lt;= <code class="cCodeEmphasis">value</code> &lt;= 2147483647 (keepalive enabled), in milliseconds, currently rounded up to the nearest second by the Domains software</li>
</ul></div>
<p class="pBody"><a name="wp1258026"> </a>
The <code class="cCode">DMKEEPALIVE</code> default setting is 0.
</p>
<p class="pBody"><a name="wp1258027"> </a>
You use the <code class="cCode">DMKEEPALIVEWAIT</code> parameter to specify the maximum time that the local TDomain gateway will wait without receiving an acknowledgement to a sent keepalive message. If the maximum time is exceeded, the gateway assumes that the connection to the remote TDomain gateway is broken and releases any resources associated with the connection. The minimum value for <code class="cCode">DMKEEPALIVEWAIT</code> is 0, and the maximum value is 2147483647 milliseconds, currently rounded up to the nearest second by the Domains software. The <code class="cCode">DMKEEPALIVEWAIT</code> default setting is 0.
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1258028"> </a>If <code class="cCode">DMKEEPALIVE</code> is 0 (keepalive disabled), setting <code class="cCode">DMKEEPALIVEWAIT</code> has no effect.</li>
<li><a name="wp1258029"> </a>If <code class="cCode">DMKEEPALIVE</code> is enabled and <code class="cCode">DMKEEPALIVEWAIT</code> is set to a value greater than <code class="cCode">DMKEEPALIVE</code>, the local TDomain gateway will send more than one application-level keepalive message before the <code class="cCode">DMKEEPALIVEWAIT</code> timer expires. This combination of settings is allowed.</li>
<li><a name="wp1258030"> </a>If <code class="cCode">DMKEEPALIVE</code> is enabled and <code class="cCode">DMKEEPALIVEWAIT</code> is set to 0, receiving an acknowledgement to a sent keepalive message is unimportant: any such acknowledgement is ignored by the local TDomain gateway. The local TDomain gateway continues to send keepalive messages every time the <code class="cCode">DMKEEPALIVE</code> timer times out. <em class="cEmphasis">Use this combination of settings to keep an idle connection open through a firewall.</em></li>
</ul></div>
<p class="pBody"><a name="wp1258031"> </a>
To clarify the use of <code class="cCode">DMKEEPALIVE</code> and <code class="cCode">DMKEEPALIVEWAIT</code>, consider the following Domains application-level keepalive configuration:
</p>
<p class="pBody"><a name="wp1258032"> </a>
<code class="cCode">*DM_TDOMAIN<br />LOCAL1&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//albany.acme.com:4051&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMKEEPALIVE=1010<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMKEEPALIVEWAIT=20<br />REMOT1&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//newyork.acme.com:65431&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMKEEPALIVE=4000<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMKEEPALIVEWAIT=3000<br />REMOT2&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//philly.acme.com:65431&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMKEEPALIVE=-1</code>
</p>
<p class="pBody"><a name="wp1258033"> </a>
The keepalive configuration specified for a remote domain access point takes precedence over the keepalive configuration specified for the local domain access point. So, in the preceding example, the application-level keepalive configurations will be:
</p>
<p class="pBody"><a name="wp1258034"> </a>
<code class="cCode">LOCAL1</code> to <code class="cCode">REMOT1</code> &#8212; Keepalive timer = 4 seconds, and wait timer = 3 seconds<br /><code class="cCode">LOCAL1</code> to <code class="cCode">REMOT2</code> &#8212; Keepalive timer = 2 seconds, and wait timer = 1 second
</p>
<p class="pBody"><a name="wp1258035"> </a>
For a local domain access point, you can specify any of the following values for the <code class="cCode">DMKEEPALIVE</code> parameter:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1258036"> </a>0 (default)</li>
<li><a name="wp1258037"> </a>1 &lt;= <code class="cCodeEmphasis">value</code> &lt;= 2147483647 in milliseconds, currently rounded up to the nearest second by the Domains software</li>
</ul></div>
<p class="pBody"><a name="wp1258038"> </a>
For a remote domain access point, you can specify any of the following values for the <code class="cCode">DMKEEPALIVE</code> parameter:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1258039"> </a>-1 (default)</li>
<li><a name="wp1258040"> </a>0</li>
<li><a name="wp1258041"> </a>1 &lt;= <code class="cCodeEmphasis">value</code> &lt;= 2147483647 in milliseconds, currently rounded up to the nearest second by the Domains software</li>
</ul></div>
<p class="pBody"><a name="wp1258042"> </a>
Specifying -1 or no keepalive configuration for a remote domain access point defaults to the local application-level keepalive configuration.
</p>
<a name="wp1258046"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You can configure each of two interoperating Oracle Tuxedo domains with application-level keepalive, using the same or different wait intervals, assuming that both domains are running Oracle Tuxedo 8.1 or later software.</td>
</tr>
</table>

<p class="pBody"><a name="wp1258050"> </a>
If the connection policy for a Domains connection is <code class="cCode">ON_STARTUP</code> and the connection experiences an application-level keepalive failure, automatic connection retry processing attempts to re-establish the connection. For more information about connection retry processing, see <a href="addom.html#wp1257838"><span class="cHyperlink">
How To Use Connection Retry Processing</span></a>.
</p>
<h3 class="pHeading2"><a name="wp1258054"> </a>
Keepalive Compatibility with Earlier Oracle Tuxedo Releases
</h3>
<p class="pBody"><a name="wp1258058"> </a>
Domains TCP-level keepalive is compatible with Oracle Tuxedo 8.0 or earlier software. The Oracle Tuxedo software running at the other end of the TCP connection may be any release of Oracle Tuxedo because Domains TCP-level keepalive is executed at the network transport (TCP) layer.
</p>
<p class="pBody"><a name="wp1258068"> </a>
Domains application-level keepalive is not compatible with Oracle Tuxedo 8.0 or earlier software. The Oracle Tuxedo software running at the other end of the TCP connection must be Oracle Tuxedo 8.1 or later to be able to understand an application-level keepalive message. When connected to a TDomain gateway running an earlier release of Oracle Tuxedo software, the TDomain gateway does <em class="cEmphasis">not</em> send an application-level keepalive message; instead, it logs a warning message in the local user log (ULOG) stating that the remote domain is running an earlier release of Oracle Tuxedo software and does not support Domains application-level keepalive.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1258082"> </a>
Configuring a Domains Environment
</h2><p class="pBody"><a name="wp1258083"> </a>
The following list summarizes the tasks that you must complete to configure a Domains environment for the TDomain gateway type:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1258084"> </a>Edit the <code class="cCode">UBBCONFIG</code> file with any text editor and configure the Domains administrative servers and the TDomain gateway server. For example:</li>
<p class="pBodyRelative"><a name="wp1258085"> </a>
<code class="cCode">*GROUPS<br />DMADMGRP&#160;&#160;LMID=SITE1 GRPNO=1<br />GWTGROUP&#160;&#160;LMID=SITE2 GRPNO=2</code>
</p>
<p class="pBodyRelative"><a name="wp1258086"> </a>
<code class="cCode">*SERVERS<br />DMADM&#160;&#160;&#160;&#160;&#160;SRVGRP=DMADMGRP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=1001<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0<br />GWADM&#160;&#160;&#160;&#160;&#160;SRVGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=1002<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0<br />GWTDOMAIN&#160;SRVGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=1003<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=</code>&#8220;<code class="cCode">GWTGROUP&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0</code>
</p>
<a name="wp1258087"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>In the previous example, <code class="cCode">REPLYQ=N</code> is specified for the <code class="cCode">DMADM</code>, <code class="cCode">GWADM</code>, and <code class="cCode">GWTDOMAIN</code> servers. This setting is not required: you can, if you prefer, designate a reply queue for any of these servers by specifying <code class="cCode">REPLYQ=Y</code>. When <code class="cCode">REPLYQ</code> is set to <code class="cCode">N</code>, however, performance may be improved.</td>
</tr>
</table>

<p class="pBodyRelative"><a name="wp1258088"> </a>
The TDomain gateway server and its associated <code class="cCode">GWADM</code> server must run on the same machine in an Oracle Tuxedo domain. The <code class="cCode">DMADM</code> server may run on any machine&#8212;master machine, non-master machine&#8212;in the Oracle Tuxedo domain.
</p>
<li><a name="wp1258098"> </a>Load the Oracle Tuxedo configuration by running <code class="cCode">tmloadcf(1)</code>. The <code class="cCode">tmloadcf</code> command parses <code class="cCode">UBBCONFIG</code> and loads the binary <code class="cCode">TUXCONFIG</code> file to the location referenced by the <code class="cCode">TUXCONFIG</code> variable.</li>
<li><a name="wp1258099"> </a>Edit the <code class="cCode">DMCONFIG</code> file with any text editor and configure the Domains environment for the TDomain gateway server. For example:</li>
<a name="wp1258100"> </a><div class="pPreformattedRelative"><pre>*DM_LOCAL<br /><code class="cCode">LOCAL1&#160;&#160;&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=</code>&#8220;<code class="cCode">BA.CENTRAL01&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=30<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MAXRETRY=5<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RETRY_INTERVAL=100</code></pre></div><p class="pBodyRelative"><a name="wp1258101"> </a>
<code class="cCode">*DM_REMOTE<br />REMOT1&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=</code>&#8220;<code class="cCode">BA.BANK01&#8221;<br />REMOT2&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=</code>&#8220;<code class="cCode">BA.BANK02&#8221;</code>
</p>
<p class="pBodyRelative"><a name="wp1258102"> </a>
<code class="cCode">*DM_EXPORT<br />LTOLOWER&#160;&#160;LACCESSPOINT=LOCAL1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONV=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RNAME=</code>&#8220;<code class="cCode">TOLOWER&#8221;</code>
</p>
<p class="pBodyRelative"><a name="wp1258103"> </a>
<code class="cCode">*DM_IMPORT<br />RTOUPPER&#160;&#160;AUTOTRAN=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONV=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RNAME=</code>&#8220;<code class="cCode">TOUPPER&#8221;</code>
</p>
<p class="pBodyRelative"><a name="wp1258104"> </a>
<code class="cCode">*DM_TDOMAIN<br />LOCAL1&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//albany.acme.com:4051&#8221;<br />REMOT1&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//newyork.acme.com:65431&#8221;<br />REMOT2&#160;&#160;NWADDR=</code>&#8220;<code class="cCode">//philly.acme.com:65431&#8221;</code>
</p>
<p class="pBodyRelative"><a name="wp1258105"> </a>
The <code class="cCode">DMCONFIG</code> file must reside on the same machine as the <code class="cCode">DMADM</code> server.
</p>
<li><a name="wp1258106"> </a>Load the Domains configuration by running <code class="cCode">dmloadcf(1)</code>. The <code class="cCode">dmloadcf</code> command parses <code class="cCode">DMCONFIG</code> and loads the binary <code class="cCode">BDMCONFIG</code> file to the location referenced by the <code class="cCode">BDMCONFIG</code> variable.</li>
<li><a name="wp1258110"> </a>Start the Oracle Tuxedo application servers by running <code class="cCode">tmboot(1)</code>. The <code class="cCode">tmboot</code> command executes all administrative processes and all servers listed in the <code class="cCode">SERVERS</code> section of the <code class="cCode">TUXCONFIG</code> file named by the <code class="cCode">TUXCONFIG</code> and <code class="cCode">TUXOFFSET</code> environment variables. It starts the servers in the order that they are listed in the <code class="cCode">SERVERS</code> section: <code class="cCode">DMADM</code>, then <code class="cCode">GWADM</code>, and then <code class="cCode">GWTDOMAIN</code>. <em class="cEmphasis">The Domains servers must be started in this order</em>. In addition, the Domains servers must be started before the application servers.</li>
</ol></div>
<p class="pBody"><a name="wp1258113"> </a>
For a detailed example of configuring a Domains ATMI environment, see <a href="addomc.html"><span class="cHyperlink">
Planning and Configuring ATMI Domains</span></a>. For a detailed example of configuring a Domains CORBA environment, see <a href="adcorb.html"><span class="cHyperlink">
Planning and Configuring CORBA Domains</span></a>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1258119"> </a>
Configuring a Domains Environment for Migration
</h2><p class="pBody"><a name="wp1258120"> </a>
<a href="addom.html#wp1258124">Listing&#160;1-4</a> and <a href="addom.html#wp1258128">Listing&#160;1-5</a> give you an idea of how to configure an Oracle Tuxedo application for Domains migration. The entries of particular importance to the Domains migration are highlighted in bold.
</p>
<div class="pCodeTitle"><a name="wp1258124"> </a>
Listing&#160;1-4	   Sample UBBCONFIG File Configured for Domains Migration
</div> <a name="wp1258125"> </a><div class="pPreformatted"><pre>*RESOURCES<br />IPCKEY    76666<br />MASTER &#160;&#160;&#160;SITE1,SITE2<br />OPTIONS   LAN,MIGRATE<br />MODEL     MP<br />#<br />*MACHINES<br />mach1 &#160;&#160;&#160;&#160;LMID=SITE1<br />          TUXDIR=&#8220;/home/rsmith/tuxroot&#8221;<br />          APPDIR=&#8220;/home/rsmith/bankapp&#8221;<br />          TUXCONFIG=&#8220;/home/rsmith/bankapp/tuxconfig&#8221;<br />mach2 &#160;&#160;&#160;&#160;LMID=SITE2<br />          TUXDIR=&#8220;/home/rsmith/tuxroot&#8221;<br />          APPDIR=&#8220;/home/rsmith/bankapp&#8221;<br />          TUXCONFIG=&#8220;/home/rsmith/bankapp/tuxconfig&#8221;<br />mach3 &#160;&#160;&#160;&#160;LMID=SITE3<br />          TUXDIR=&#8220;/home/rsmith/tuxroot&#8221;<br />          APPDIR=&#8220;/home/rsmith/bankapp&#8221;<br />          TUXCONFIG=&#8220;/home/rsmith/bankapp/tuxconfig&#8221;<br />#<br />*GROUPS<br />DMADMGRP&#160;&#160;LMID=&#8220;SITE1,<code class="cCodeBold">SITE3</code>&#8221; GRPNO=1<br />GWTGROUP&#160;&#160;LMID=&#8220;SITE2,<code class="cCodeBold">SITE3</code>&#8221; GRPNO=2<br />.<br />.<br />.<br />*NETWORK<br />SITE1    &#160;NADDR=&#8220;//albany.acme.com:4065&#8221;<br />         &#160;NLSADDR=&#8220;//albany.acme.com:4068&#8221;<br />SITE2    &#160;NADDR=&#8220;//auburn.acme.com:4065&#8221;<br />         &#160;NLSADDR=&#8220;//auburn.acme.com:4068&#8221;<br />SITE3    &#160;NADDR=&#8220;//boston.acme.com:4065&#8221;<br />         &#160;NLSADDR=&#8220;//boston.acme.com:4068&#8221;<br /><br /><code class="cCode">#<br /></code>*SERVERS<br />DMADM&#160;&#160;&#160;&#160;&#160;SRVGRP=DMADMGRP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=1001<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0<br />GWADM&#160;&#160;&#160;&#160;&#160;SRVGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=1002<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0<br />GWTDOMAIN&#160;SRVGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=1003<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=&#8220;GWTGROUP&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0<br />.<br />.<br />.</pre></div><a name="wp1258127"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>In the previous example, <code class="cCode">REPLYQ=N</code> is specified for the <code class="cCode">DMADM</code>, <code class="cCode">GWADM</code>, and <code class="cCode">GWTDOMAIN</code> servers. This setting is not required: you can, if you prefer, designate a reply queue for any of these servers by specifying <code class="cCode">REPLYQ=Y</code>. When <code class="cCode">REPLYQ</code> is set to <code class="cCode">N</code>, however, performance may be improved.</td>
</tr>
</table>

<div class="pCodeTitle"><a name="wp1258128"> </a>
Listing&#160;1-5	   Sample DMCONFIG File Configured for Domains Migration
</div> <a name="wp1258129"> </a><div class="pPreformatted"><pre>*DM_LOCAL<br />LOCAL1&#160;&#160;&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8220;BA.CENTRAL01&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=30<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MAXRETRY=5<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RETRY_INTERVAL=100</pre></div><a name="wp1258130"> </a><div class="pPreformatted"><pre>*DM_REMOTE<br />REMOT1&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8220;BA.BANK01&#8221;<br />REMOT2&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8220;BA.BANK02&#8221;</pre></div><a name="wp1258131"> </a><div class="pPreformatted"><pre>*DM_EXPORT<br />LTOLOWER&#160;&#160;LACCESSPOINT=LOCAL1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONV=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RNAME=&#8220;TOLOWER&#8221;</pre></div><a name="wp1258132"> </a><div class="pPreformatted"><pre>*DM_IMPORT<br />RTOUPPER&#160;&#160;AUTOTRAN=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONV=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RNAME=&#8221;TOUPPER&#8221;</pre></div><a name="wp1258133"> </a><div class="pPreformatted"><pre>*DM_TDOMAIN<br />LOCAL1&#160;&#160;NWADDR=&#8220;//albany.acme.com:4051&#8221;<br /><code class="cCodeBold">LOCAL1&#160;&#160;NWADDR=&#8220;//boston.acme.com:4051&#8221;<br /></code>REMOT1&#160;&#160;NWADDR=&#8220;//newyork.acme.com:65431&#8221;<br />REMOT2&#160;&#160;NWADDR=&#8220;//philly.acme.com:65431&#8221;</pre></div><p class="pBody"><a name="wp1258135"> </a>
In the sample configuration files, the <code class="cCode">DMADM</code> server and the TDomain gateway group servers are configured to migrate to the <code class="cCode">SITE3</code> machine. For the <code class="cCode">DMADM</code> migration, an administrator will activate a <code class="cCode">DMADM</code> server process on the <code class="cCode">SITE3</code> machine after completing the following tasks:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1258136"> </a>Setting the <code class="cCode">BDMCONFIG</code> environment variable on the <code class="cCode">SITE3</code> machine.</li>
<li><a name="wp1258137"> </a>Running the <code class="cCode">dmloadcf(1)</code> command to load the <code class="cCode">BDMCONFIG</code> file on the <code class="cCode">SITE3</code> machine.</li>
</ul></div>
<p class="pBody"><a name="wp1258138"> </a>
For the TDomain gateway group migration, an administrator will activate <code class="cCode">GWADM</code> and <code class="cCode">GWTDOMAIN</code> server processes on the <code class="cCode">SITE3</code> machine. At that point, the configurations and responsibilities associated with the <code class="cCode">LOCAL1</code> access point will be handled by the new <code class="cCode">GWTDOMAIN</code> server process listening for incoming connection requests on network address <code class="cCode">boston.acme.com:4051</code>.
</p>
<a name="wp1258139"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The <code class="cCode">DMADM</code> and domain gateway group(s) do not have to be migrated to the same machine.</td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp1258140"> </a>
How to Migrate the DMADM Server
</h3>
<p class="pBody"><a name="wp1258141"> </a>
To migrate <code class="cCode">DMADM</code> to a new machine, follow these steps.
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1258142"> </a>Copy <code class="cCode">DMCONFIG</code> to the new machine and run <code class="cCode">dmloadcf</code>.</li>
<li><a name="wp1258145"> </a>Activate the <code class="cCode">DMADM</code> server process on the new machine. For details, see <a href="addom.html#wp1258164">Methods for Activating Individual Server Processes</a>.</li>
<li><a name="wp1258150"> </a>Optional: Restart all domain gateway groups for the Oracle Tuxedo application. For details, see <a href="addom.html#wp1258164">Methods for Activating Individual Server Processes</a>.</li>
<p class="pBodyRelative"><a name="wp1258154"> </a>
If you do not restart the domain gateway groups, they will continue to function, but after <code class="cCode">DMADM</code> has been migrated, all MIB requests for them will fail.
</p>
</ol></div>
<h3 class="pHeading2"><a name="wp1258155"> </a>
How to Migrate a TDomain Gateway Group
</h3>
<p class="pBody"><a name="wp1258156"> </a>
When transactions are being used in a Domains configuration, the TDomain gateway group can be migrated only across machines of the same type.
</p>
<p class="pBody"><a name="wp1258157"> </a>
To migrate a TDomain gateway group, follow these steps.
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1258158"> </a>In the <code class="cCode">DMCONFIG</code> file, add multiple listening addresses, in the following format, to the <code class="cCode">DM_TDOMAIN</code> section:</li>
<a name="wp1258159"> </a><div class="pPreformattedRelative"><pre>*DM_TDOMAIN<br />LOCAL1 NWADDR=&#8220;//<code class="cCodeEmphasis">primary</code>:<code class="cCodeEmphasis">port</code>&#8221;<br />LOCAL1 NWADDR=&#8220;//<code class="cCodeEmphasis">backup</code>:<code class="cCodeEmphasis">port</code>&#8221;</pre></div><li><a name="wp1258160"> </a>If you are using transactions, you must copy the Domains transaction log manually to the backup machine.</li>
<li><a name="wp1258161"> </a>The <code class="cCode">DMCONFIG</code> files for the remote domains should include both network addresses specified in step 1.</li>
<li><a name="wp1258162"> </a>Activate the <code class="cCode">GWADM</code> and <code class="cCode">GWTDOMAIN</code> server processes on the new machine. For details, see the following section.</li>
</ol></div>
<h3 class="pHeading2"><a name="wp1258164"> </a>
Methods for Activating Individual Server Processes
</h3>
<p class="pBody"><a name="wp1258168"> </a>
You can use any of the following methods to activate individual Oracle Tuxedo server processes:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1258408"> </a>Oracle Tuxedo Administration Console</li>
<li><a name="wp1258169"> </a>Command <code class="cCode">tmboot(1)</code> with the -s command line option</li>
<li><a name="wp1258170"> </a>MIB (<code class="cCode">TM_MIB(5)</code>) API</li>
</ul></div>
<p class="pBody"><a name="wp1258173"> </a>
For information about performing application migration tasks, see <span class="cHyperlink">
<a href="../ada/admigt.html">&#8220;Migrating Your Application&#8221;</a></span> in <em class="cEmphasis">Administering an Oracle Tuxedo Application at Run Time</em>.
</p>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="addom.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="index.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="addomc.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
