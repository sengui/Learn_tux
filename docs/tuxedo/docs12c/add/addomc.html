<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="2" />
<meta name="LOC_US_CHANGE" content="41905" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux12c/add/fm/addomc.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="06/26/12 10:28:49" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Planning and Configuring ATMI Domains</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Using the Oracle Tuxedo Domains Component
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="addom.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="adcorb.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/add.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1264867"> </a>
Planning and Configuring ATMI Domains
</h1>
<p class="pBody"><a name="wp1261057"> </a>
The following sections explain how to plan and configure a domain for an Oracle Tuxedo ATMI Domains environment:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261061"> </a><a href="addomc.html#wp1261087">Planning to Build Domains from Multiple Oracle Tuxedo Applications</a></li>
<li><a name="wp1261065"> </a><a href="addomc.html#wp1261229">Examining the creditapp Domains Configuration</a></li>
<li><a name="wp1261069"> </a><a href="addomc.html#wp1261286">Setting Up a Domains Configuration</a></li>
<li><a name="wp1261073"> </a><a href="addomc.html#wp1261580">Setting Up Security in a Domains Configuration</a></li>
<li><a name="wp1261077"> </a><a href="addomc.html#wp1261771">Setting Up Connections in a Domains Configuration</a></li>
<li><a name="wp1261081"> </a><a href="addomc.html#wp1261868">Controlling Connections in a Domains Configuration</a></li>
<li><a name="wp1261085"> </a><a href="addomc.html#wp1261893">Configuring Domains Link-Level Failover and Keepalive</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1261087"> </a>
Planning to Build Domains from Multiple Oracle Tuxedo Applications
</h2><p class="pBody"><a name="wp1261091"> </a>
<a href="addomc.html#wp1261092">Figure&#160;2-1</a> shows two Oracle Tuxedo applications: the <code class="cCode">bankapp</code> application and a credit card authorization application.
</p>
<div class="pFigureTitle"><a name="wp1261092"> </a>
Figure&#160;2-1  Two Oracle Tuxedo Applications
</div>

 
 <p class="pGraphic"><a name="wp1261096"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/doms.gif" alt="Two Oracle Tuxedo Applications" id="wp1261094"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1261097"> </a>
The <code class="cCode">bankapp</code> application connects ATMs at various bank branches to the central bank office. The credit card authorization application processes customer requests for credit cards. Over time, the bank managers realize that their customers would be better served if the <code class="cCode">bankapp</code> application could communicate directly with the credit card authorization application. With direct communication, the bank could offer instant credit cards to anyone opening a new account.
</p>
<p class="pBody"><a name="wp1261101"> </a>
The <code class="cCode">bankapp</code> application is a sample application included with the Oracle Tuxedo distribution, and the credit card authorization application is a hypothetical extension of <code class="cCode">bankapp</code>. The <code class="cCode">bankapp</code> application files reside at the following location:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261102"> </a><code class="cCodeEmphasis">tux_prod_dir</code><code class="cCode">\samples\atmi\bankapp</code> (Windows)</li>
<li><a name="wp1261103"> </a><code class="cCodeEmphasis">tux_prod_dir</code><code class="cCode">/samples/atmi/bankapp</code> (UNIX)</li>
</ul></div>
<p class="pBody"><a name="wp1261107"> </a>
Where <code class="cCodeEmphasis">tux_prod_dir</code> represents the directory in which the Oracle Tuxedo distribution is installed.
</p>
<p class="pBody"><a name="wp1261108"> </a>
<a href="addomc.html#wp1261109">Listing&#160;2-1</a> shows the content of a file named <code class="cCode">ubbmp</code>, which is the <code class="cCode">UBBCONFIG</code> file for the multiple-machine version of the <code class="cCode">bankapp</code> application.
</p>
<div class="pCodeTitle"><a name="wp1261109"> </a>
Listing&#160;2-1	   ubbmp Configuration File for the bankapp Application
</div> <a name="wp1261110"> </a><div class="pPreformatted"><pre>.<br />.<br />.<br />*RESOURCES<br />IPCKEY&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;80952<br />UID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">&lt;user id from id(1)&gt;<br /></code>GID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">&lt;group id from id(1)&gt;<br /></code>PERM&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0660<br />MAXACCESSERS&#160;&#160;&#160;&#160;&#160;40<br />MAXSERVERS&#160;&#160;&#160;&#160;&#160;&#160;&#160;35<br />MAXSERVICES&#160;&#160;&#160;&#160;&#160;&#160;75<br />MAXCONV&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10<br />MAXGTT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;20<br />MASTER&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SITE1,SITE2<br />SCANUNIT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10<br />SANITYSCAN&#160;&#160;&#160;&#160;&#160;&#160;&#160;12<br />BBLQUERY&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;30<br />BLOCKTIME&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;30<br />DBBLWAIT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6<br />OPTIONS&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LAN,MIGRATE<br />MODEL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MP<br />LDBAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Y<br />##SECURITY&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACL<br />##AUTHSVC&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;..AUTHSVC&quot;<br />#<br />*MACHINES<br /><code class="cCodeEmphasis">&lt;SITE1&#39;s uname&gt;</code>&#160;&#160;LMID=SITE1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXDIR=&quot;<code class="cCodeEmphasis">&lt;TUXDIR1&gt;</code>&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;APPDIR=&quot;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ENVFILE=&quot;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/ENVFILE&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGDEVICE=&quot;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/TLOG&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGNAME=TLOG<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXCONFIG=&quot;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/tuxconfig&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=&quot;&lt;machine type1&gt;&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ULOGPFX=&quot;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/ULOG&quot;<br /><code class="cCodeEmphasis">&lt;SITE2&#39;s uname&gt;</code>&#160;&#160;LMID=SITE2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXDIR=&quot;<code class="cCodeEmphasis">&lt;TUXDIR2&gt;</code>&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;APPDIR=&quot;<code class="cCodeEmphasis">&lt;APPDIR2&gt;</code>&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ENVFILE=&quot;<code class="cCodeEmphasis">&lt;APPDIR2&gt;</code>/ENVFILE&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGDEVICE=&quot;<code class="cCodeEmphasis">&lt;APPDIR2&gt;</code>/TLOG&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGNAME=TLOG<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXCONFIG=&quot;<code class="cCodeEmphasis">&lt;APPDIR2&gt;</code>/tuxconfig&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=&quot;<code class="cCodeEmphasis">&lt;machine type2&gt;</code>&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ULOGPFX=&quot;<code class="cCodeEmphasis">&lt;APPDIR2&gt;</code>/ULOG&quot;<br />#<br />*GROUPS<br />#<br /># Group for Authentication Servers<br />#<br />##AUTHGRP&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE1&#160;&#160;&#160;GRPNO=101</pre></div><a name="wp1261111"> </a><div class="pPreformatted"><pre>#<br /># Group for Application Queue (/Q) Servers<br />#<br />##QGRP1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE1&#160;&#160;&#160;GRPNO=102<br />##&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TMSNAME=TMS_QM&#160;&#160;TMSCOUNT=2<br />##&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&quot;TUXEDO/QM:<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/qdevice:QSP_BANKAPP&quot;</pre></div><a name="wp1261112"> </a><div class="pPreformatted"><pre>#<br /># Group for Application Manager&#39;s Servers<br />#<br />##MGRGRP1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE1&#160;&#160;&#160;GRPNO=103</pre></div><a name="wp1261113"> </a><div class="pPreformatted"><pre>#<br /># Group for EventBroker Servers<br />#<br />##EVBGRP1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE1&#160;&#160;&#160;GRPNO=104</pre></div><a name="wp1261114"> </a><div class="pPreformatted"><pre>DEFAULT:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TMSNAME=TMS_SQL&#160;&#160;&#160;TMSCOUNT=2<br />BANKB1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE1&#160;&#160;&#160;GRPNO=1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&quot;TUXEDO/SQL:<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/bankdl1:bankdb:readwrite&quot;<br />BANKB2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE2&#160;&#160;&#160;GRPNO=2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&quot;TUXEDO/SQL:<code class="cCodeEmphasis">&lt;APPDIR2&gt;</code>/bankdl2:bankdb:readwrite&quot;</pre></div><a name="wp1261115"> </a><div class="pPreformatted"><pre>*NETWORK<br />SITE1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NADDR=&quot;<code class="cCodeEmphasis">&lt;network address of SITE1&gt;</code>&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BRIDGE=&quot;<code class="cCodeEmphasis">&lt;device of provider1&gt;</code>&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NLSADDR=&quot;<code class="cCodeEmphasis">&lt;network listener address of SITE1&gt;</code>&quot;<br />SITE2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NADDR=&quot;<code class="cCodeEmphasis">&lt;network address of SITE2&gt;</code>&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BRIDGE=&quot;<code class="cCodeEmphasis">&lt;device of provider2&gt;</code>&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NLSADDR=&quot;<code class="cCodeEmphasis">&lt;network listener address of SITE2&gt;</code>&quot;<br />*SERVERS<br />#<br /># TUXEDO System /T server providing application specific authentication.<br /># Ref. AUTHSVR(5).<br />#<br />##AUTHSVR&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=AUTHGRP&#160;&#160;SRVID=1&#160;&#160;RESTART=Y&#160;&#160;GRACE=0&#160;&#160;MAXGEN=2<br />##&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&quot;-A&quot;</pre></div><a name="wp1261116"> </a><div class="pPreformatted"><pre>#<br /># TUXEDO System /T Message Queue Manager. It is a server that enqueues and<br /># dequeues messages on behalf of programs calling tpenqueue(3) and<br /># tpdequeue(3) respectively. Ref. TMQUEUE(5).<br />#<br />##TMQUEUE&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=QGRP1&#160;&#160;&#160;&#160;SRVID=1&#160;&#160;CONV=N&#160;&#160;GRACE=0<br />##&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&quot;-s QSP_BANKAPP:TMQUEUE&quot;</pre></div><a name="wp1261117"> </a><div class="pPreformatted"><pre>#<br /># TUXEDO System /T Message Forwarding Server that forwards messages that have<br /># been stored using tpenqueue(3) for later processing. Ref. TMQFORWARD(5).<br />#<br />##TMQFORWARD&#160;&#160;&#160;&#160;&#160;SRVGRP=QGRP1&#160;&#160;&#160;&#160;SRVID=2&#160;&#160;CONV=N&#160;&#160;REPLYQ=N&#160;&#160;GRACE=0<br />##&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&quot;-- -e -n -d -q Q_OPENACCT_LOG&quot;</pre></div><a name="wp1261118"> </a><div class="pPreformatted"><pre>#<br /># TUXEDO System /T User Event Broker that manages user events by notifying<br /># subscribers when those events are posted. Ref. TMUSREVT(5).<br />#<br />##TMUSREVT&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=EVBGRP1&#160;&#160;SRVID=1&#160;&#160;GRACE=3600<br />##&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ENVFILE=&quot;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/TMUSREVT.ENV&quot;<br />##&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&quot;-e tmusrevt.out -o tmusrevt.out -A --<br />##&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-f <code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/tmusrevt.dat&quot;<br />##&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SEQUENCE=11</pre></div><a name="wp1261119"> </a><div class="pPreformatted"><pre>#<br /># TUXEDO Application Server that subscribes to certain events.<br />#<br />##ACCTMGR SRVGRP=MGRGRP1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=1<br />##&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&quot;-A -o ACCTMGR.LOG -- -w 1000.00&quot;<br />##&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SEQUENCE=12</pre></div><a name="wp1261120"> </a><div class="pPreformatted"><pre>DEFAULT:&#160;RESTART=Y&#160;&#160;&#160;&#160;MAXGEN=5&#160;&#160;&#160;REPLYQ=Y&#160;&#160;CLOPT=&quot;-A&quot;</pre></div><a name="wp1261121"> </a><div class="pPreformatted"><pre>TLR&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=1&#160;&#160;RQADDR=tlr1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&quot;-A -- -T 100 -e 1000.00&quot;<br />TLR&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=2&#160;&#160;RQADDR=tlr1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&quot;-A -- -T 200 -e 1000.00&quot;<br />TLR&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2&#160;&#160;&#160;SRVID=3&#160;&#160;RQADDR=tlr2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&quot;-A -- -T 600 -e 1000.00&quot;<br />TLR&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2&#160;&#160;&#160;SRVID=4&#160;&#160;RQADDR=tlr2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&quot;-A -- -T 700 -e 1000.00&quot;<br />XFER&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=5<br />XFER&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2&#160;&#160;&#160;SRVID=6<br />ACCT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=7<br />ACCT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2&#160;&#160;&#160;SRVID=8<br />BAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=9	<br />BAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2&#160;&#160;&#160;SRVID=10<br />BTADD&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=11<br />BTADD&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2&#160;&#160;&#160;SRVID=12<br />AUDITC&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=13&#160;&#160;CONV=Y&#160;&#160;MIN=1&#160;MAX=10&#160;RQADDR=&quot;auditc&quot;<br />BALC&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=24<br />BALC&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2&#160;&#160;&#160;SRVID=25<br />#<br />*SERVICES<br />DEFAULT:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LOAD=50&#160;&#160;AUTOTRAN=Y&#160;&#160;TRANTIME=30<br />WITHDRAWAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />DEPOSIT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />TRANSFER&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />INQUIRY&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />CLOSE_ACCT&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=40&#160;&#160;ROUTING=ACCOUNT_ID<br />OPEN_ACCT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=40&#160;&#160;ROUTING=BRANCH_ID<br />BR_ADD&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=20&#160;&#160;ROUTING=BRANCH_ID<br />TLR_ADD&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=20&#160;&#160;ROUTING=BRANCH_ID<br />ABAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />TBAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />ABAL_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />TBAL_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />ABALC_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />TBALC_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />#<br />*ROUTING<br />ACCOUNT_ID&#160;&#160;&#160;&#160;&#160;&#160;&#160;FIELD=ACCOUNT_ID<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BUFTYPE=&quot;FML&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RANGES=&quot;10000-59999:BANKB1,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;60000-109999:BANKB2&quot;<br />BRANCH_ID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FIELD=BRANCH_ID<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BUFTYPE=&quot;FML&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RANGES=&quot;1-5:BANKB1,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6-10:BANKB2&quot;<br />b_id&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FIELD=b_id<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BUFTYPE=&quot;VIEW:aud&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RANGES=&quot;1-5:BANKB1,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6-10:BANKB2&quot;</pre></div><p class="pBody"><a name="wp1261123"> </a>
The following sections demonstrate two different ways of reconfiguring the <code class="cCode">bankapp</code> application and the credit card authorization application so that they can communicate directly with one another:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261126"> </a><a href="addomc.html#wp1261133">Option 1: Reconfigure the Applications as a Single Oracle Tuxedo Domain</a></li>
<li><a name="wp1261130"> </a><a href="addomc.html#wp1261157">Option 2: Reconfigure the Applications as a Domains Configuration</a></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1261133"> </a>
Option 1: Reconfigure the Applications as a Single Oracle Tuxedo Domain
</h3>
<p class="pBody"><a name="wp1261134"> </a>
One solution is to combine the <code class="cCode">bankapp</code> application and the credit card authorization application into one Oracle Tuxedo application, or domain, as shown in <a href="addomc.html#wp1261138">Figure&#160;2-2</a>.
</p>
<div class="pFigureTitle"><a name="wp1261138"> </a>
Figure&#160;2-2  Combining Two Oracle Tuxedo System Applications
</div>

 
 <p class="pGraphic"><a name="wp1261142"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/domcom.gif" alt="Combining Two Oracle Tuxedo System Applications" id="wp1261140"/></div><p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1261143"> </a>
Creating the UBBCONFIG File for the Combined Application
</h4>
<p class="pBody"><a name="wp1261144"> </a>
To create the <code class="cCode">UBBCONFIG</code> file for the combined application, take the following information from the <code class="cCode">UBBCONFIG</code> file for the credit card authorization application and add it to the <code class="cCode">UBBCONFIG</code> file for the <code class="cCode">bankapp</code> application:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261145"> </a>Add machine, network, and group entries for the credit card authorization application to the <code class="cCode">UBBCONFIG</code> file.</li>
<li><a name="wp1261146"> </a>Add Server entries for the credit card authorization application to the <code class="cCode">UBBCONFIG</code> file.</li>
<li><a name="wp1261147"> </a>Add Service entries for the credit card authorization to the <code class="cCode">UBBCONFIG</code> file.</li>
</ul></div>
<p class="pBody"><a name="wp1261148"> </a>
<a href="addomc.html#wp1261150">Listing&#160;2-2</a> shows a possible <code class="cCode">UBBCONFIG</code> file for the combined application.
</p>
<div class="pCodeTitle"><a name="wp1261150"> </a>
Listing&#160;2-2	   Sample UBBCONFIG File for the Combined Application
</div> <a name="wp1261151"> </a><div class="pPreformatted"><pre>*RESOURCES<br />IPCKEY           76666<br />UID              0000<br />GID              000<br />PERM             0660<br />MAXACCESSERS     40<br />MAXSERVERS       35<br />MAXSERVICES      75<br />MAXCONV          10<br />MAXGTT           100<br />MASTER           SITE1,SITE2<br />SCANUNIT         10<br />SANITYSCAN       5<br />BBLQUERY         50<br />BLOCKTIME        2<br />DBBLWAIT         6<br />OPTIONS          LAN,MIGRATE<br />MODEL            MP<br />LDBAL            Y<br />#<br />*MACHINES<br />#<br /># Machines for the bankapp part<br />mach1 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE1<br />                 TUXDIR=&#8220;/home/rsmith/tuxroot&#8221;<br />                 APPDIR=&#8220;/home/rsmith/bankapp&#8221;<br />                 ENVFILE=&#8220;/home/rsmith/bankapp/ENVFILE&#8221;<br />                 TLOGDEVICE=&#8220;/home/rsmith/bankapp/TLOG&#8221;<br />                 TLOGNAME=TLOG<br />                 TUXCONFIG=&#8220;/home/rsmith/bankapp/tuxconfig&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=&#8220;type1&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ULOGPFX=&#8220;/home/rsmith/bankapp/ULOG&#8221;<br />mach2 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE2<br />                 TUXDIR=&#8220;/home/rsmith/tuxroot&#8221;<br />                 APPDIR=&#8220;/home/rsmith/bankapp&#8221;<br />                 ENVFILE=&#8220;/home/rsmith/bankapp/ENVFILE&#8221;<br />                 TLOGDEVICE=&#8220;/home/rsmith/bankapp/TLOG&#8221;<br />                 TLOGNAME=TLOG<br />                 TUXCONFIG=&#8220;/home/rsmith/bankapp/tuxconfig&#8221;<br />                 TYPE=&#8220;type2&#8221;<br />                 ULOGPFX=&#8220;/home/rsmith/bankapp/ULOG&#8221;<br />mach3 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE3<br />                 TUXDIR=&#8220;/home/rsmith/tuxroot&#8221;<br />                 APPDIR=&#8220;/home/rsmith/bankapp&#8221;<br />                 ENVFILE=&#8220;/home/rsmith/bankapp/ENVFILE&#8221;<br />                 TLOGDEVICE=&#8220;/home/rsmith/bankapp/TLOG&#8221;<br />                 TLOGNAME=TLOG<br />                 TUXCONFIG=&#8220;/home/rsmith/bankapp/tuxconfig&#8221;<br />                 TYPE=&#8220;type2&#8221;<br />                 ULOGPFX=&#8220;/home/rsmith/bankapp/ULOG&#8221;<br />#<br /># Machine for the credit card authorization part<br />sfexpz &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE4<br />                 TUXDIR=&#8220;/home/rsmith/tuxroot&#8221;<br />                 APPDIR=&#8220;/home/rsmith/bankapp&#8221;<br />                 ENVFILE=&#8220;/home/rsmith/bankapp/ENVFILE&#8221;<br />                 TLOGDEVICE=&#8220;/home/rsmith/bankapp/TLOG&#8221;<br />                 TLOGNAME=TLOG<br />                 TUXCONFIG=&#8220;/home/rsmith/bankapp/tuxconfig&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=&#8220;type1&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ULOGPFX=&#8220;/home/rsmith/bankapp/ULOG&#8221;<br />#<br />*GROUPS<br />DEFAULT:  TMSNAME=TMS_SQL    TMSCOUNT=2<br />#<br /># Groups for the bankapp part<br />BANKB1    LMID=SITE1         GRPNO=1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&#8220;TUXEDO/SQL:/home/rsmith/bankapp/bankdl1:bankdb:readwrite&#8221;<br />BANKB2 &#160;&#160;&#160;LMID=SITE2         GRPNO=2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&#8220;TUXEDO/SQL:/home/rsmith/bankapp/bankdl2:bankdb:readwrite&#8221;<br />BANKB3 &#160;&#160;&#160;LMID=SITE3         GRPNO=3<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&#8220;TUXEDO/SQL:/home/rsmith/bankapp/bankdl3:bankdb:readwrite&#8221;<br />#<br /># Group for the credit card authorization part<br />CREDIT&#160;&#160;&#160;&#160;LMID=SITE4         GRPNO=4<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&#8220;TUXEDO/SQL:/home/rsmith/bankapp/crdtdl1:bankdb:readwrite&#8221;<br />#<br />*NETWORK<br />#<br /># Network connections for the bankapp part<br />SITE1    &#160;NADDR=&#8220;&lt;<code class="cCodeEmphasis">network address of SITE1</code>&gt;&#8221;<br />         &#160;BRIDGE=&#8220;&lt;<code class="cCodeEmphasis">device of provider1</code>&gt;&#8221;<br />         &#160;NLSADDR=&#8220;&lt;<code class="cCodeEmphasis">network listener address of SITE1</code>&gt;&#8221;<br />SITE2    &#160;NADDR=&#8220;&lt;<code class="cCodeEmphasis">network address of SITE2</code>&gt;&#8221;<br />         &#160;BRIDGE=&#8220;&lt;<code class="cCodeEmphasis">device of provider2</code>&gt;&#8221;<br />         &#160;NLSADDR=&#8220;&lt;<code class="cCodeEmphasis">network listener address of SITE2</code>&gt;&#8221;<br />SITE3    &#160;NADDR=&#8220;&lt;<code class="cCodeEmphasis">network address of SITE3</code>&gt;&#8221;<br />         &#160;BRIDGE=&#8220;&lt;<code class="cCodeEmphasis">device of provider3</code>&gt;&#8221;<br />         &#160;NLSADDR=&#8220;&lt;<code class="cCodeEmphasis">network listener address of SITE3</code>&gt;&#8221;<br />#<br /># Network connections for the credit card authorization part<br />SITE4    &#160;NADDR=&#8220;&lt;<code class="cCodeEmphasis">network address of SITE4</code>&gt;&#8221;<br />         &#160;BRIDGE=&#8220;&lt;<code class="cCodeEmphasis">device of provider4</code>&gt;&#8221;<br />         &#160;NLSADDR=&#8220;&lt;<code class="cCodeEmphasis">network listener address of SITE4</code>&gt;&#8221;<br />#<br />*SERVERS<br />DEFAULT: &#160;RESTART=Y &#160;&#160;&#160;&#160;&#160;&#160;MAXGEN=5&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=Y&#160;&#160;&#160;CLOPT=&#8220;-A&#8221;<br />#<br /># Servers for the bankapp part<br />TLR     &#160;&#160;SRVGRP=BANKB1   SRVID=1&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 100 -e 1000.00&#8221;<br />TLR     &#160;&#160;SRVGRP=BANKB1 &#160;&#160;SRVID=2&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 200 -e 1000.00&#8221;<br />TLR     &#160;&#160;SRVGRP=BANKB2 &#160;&#160;SRVID=3&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 600 -e 1000.00&#8221;<br />TLR     &#160;&#160;SRVGRP=BANKB2 &#160;&#160;SRVID=4&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 700 -e 1000.00&#8221;<br />TLR     &#160;&#160;SRVGRP=BANKB3 &#160;&#160;SRVID=5&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr3<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 800 -e 1000.00&#8221;<br />TLR     &#160;&#160;SRVGRP=BANKB3   SRVID=6&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr3<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 900&#8221; -e 1000.00<br />XFER    &#160;&#160;SRVGRP=BANKB1   SRVID=7<br />XFER    &#160;&#160;SRVGRP=BANKB2   SRVID=8<br />XFER    &#160;&#160;SRVGRP=BANKB3   SRVID=9<br />ACCT    &#160;&#160;SRVGRP=BANKB1   SRVID=10<br />ACCT    &#160;&#160;SRVGRP=BANKB2   SRVID=11<br />ACCT    &#160;&#160;SRVGRP=BANKB3   SRVID=12<br />BAL &#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1   SRVID=13<br />BAL &#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2   SRVID=14<br />BAL &#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB3   SRVID=15<br />BTADD &#160;&#160;&#160;&#160;SRVGRP=BANKB1   SRVID=16<br />BTADD &#160;&#160;&#160;&#160;SRVGRP=BANKB2   SRVID=17<br />BTADD &#160;&#160;&#160;&#160;SRVGRP=BANKB3   SRVID=18<br />AUDITC &#160;&#160;&#160;SRVGRP=BANKB1   SRVID=19&#160;&#160;&#160;&#160;&#160;&#160;CONV=Y&#160;&#160;MIN=1&#160;&#160;MAX=10&#160;&#160;RQADDR=&#8221;auditc&#8221;<br />BALC &#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1   SRVID=20<br />BALC &#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2   SRVID=21<br />BALC &#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB3   SRVID=22<br />#<br /># Servers for the credit card authorization part<br />TLRA    &#160;&#160;SRVGRP=CREDIT &#160;&#160;SRVID=26<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 300&#8221;<br />ACCTA   &#160;&#160;SRVGRP=CREDIT &#160;&#160;SRVID=27<br />CRDT    &#160;&#160;SRVGRP=CREDIT &#160;&#160;SRVID=35<br />#<br />*SERVICES<br />DEFAULT:        &#160;LOAD=50 &#160;AUTOTRAN=Y&#160;&#160;TRANTIME=30<br />#<br /># Services for the bankapp part<br />WITHDRAWAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />DEPOSIT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />TRANSFER&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />INQUIRY&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />CLOSE_ACCT&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=40&#160;&#160;ROUTING=ACCOUNT_ID<br />OPEN_ACCT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=40&#160;&#160;ROUTING=BRANCH_ID<br />BR_ADD&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=20&#160;&#160;ROUTING=BRANCH_ID<br />TLR_ADD&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=20&#160;&#160;ROUTING=BRANCH_ID<br />ABAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />TBAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />ABAL_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />TBAL_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />ABALC_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />TBALC_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />#<br /># Services for the credit card authorization part<br />WITHDRAWALA     &#160;PRIO=50<br />INQUIRYA        &#160;PRIO=50<br />OPENCA          &#160;PRIO=40<br />CLOSECA         &#160;PRIO=40<br />DEPOSITA        &#160;PRIO=50<br />OPEN_ACCT2      &#160;PRIO=40<br />OPENC           &#160;PRIO=40<br />#<br />*ROUTING<br />ACCOUNT_ID &#160;&#160;&#160;&#160;&#160;&#160;FIELD=ACCOUNT_ID<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BUFTYPE=&#8220;FML&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RANGES=&#8220;10000-39999:BANKB1,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;40000-69999:BANKB2,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;70000-109999:BANKB3,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*:*&#8221;<br />BRANCH_ID &#160;&#160;&#160;&#160;&#160;&#160;&#160;FIELD=BRANCH_ID<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BUFTYPE=&#8220;FML&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RANGES=&#8220;1-5:BANKB1,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6-10:BANKB2,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11-15:BANKB3&#8221;<br />b_id&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FIELD=b_id<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BUFTYPE=&quot;VIEW:aud&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RANGES=&quot;1-5:BANKB1,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6-10:BANKB2,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11-15:BANKB3&quot;</pre></div><h4 class="pHeading3"><a name="wp1261153"> </a>
Limitations of Option 1
</h4>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261154"> </a>Administering a single large application can be more cumbersome than administering two smaller ones; each smaller one has its own <code class="cCode">UBBCONFIG</code> file and hence its own administrative interface.</li>
<li><a name="wp1261155"> </a>Booting a networked application can be more costly because of the time required to boot each server and because of the need to propagate bulletin boards across the network. Smaller, separate applications can be booted simultaneously.</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1261157"> </a>
Option 2: Reconfigure the Applications as a Domains Configuration
</h3>
<p class="pBody"><a name="wp1261158"> </a>
Another solution is to reconfigure the <code class="cCode">bankapp</code> application and the credit card authorization application as a Domains configuration, as shown in <a href="addomc.html#wp1261159">Figure&#160;2-3</a>. The two domains interoperate through two TDomain gateway server processes, one running in each domain.
</p>
<div class="pFigureTitle"><a name="wp1261159"> </a>
Figure&#160;2-3  Domains Configuration
</div>

 
 <p class="pGraphic"><a name="wp1261182"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/domdom.gif" height="307" width="637" alt="Domains Configuration" id="wp1261161"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1261183"> </a>
To create the Domains configuration for the <code class="cCode">bankapp</code> and credit card authorization applications, you need to create two <code class="cCode">UBBCONFIG</code> files, one for each of the Oracle Tuxedo applications, and two <code class="cCode">DMCONFIG</code> files, one for each of the Oracle Tuxedo applications.
</p>
<h4 class="pHeading3"><a name="wp1261190"> </a>
Creating the UBBCONFIG File for the bankapp Application in the Domains Environment
</h4>
<p class="pBody"><a name="wp1261191"> </a>
To create the <code class="cCode">UBBCONFIG</code> file for the <code class="cCode">bankapp</code> application in the Domains environment, start with a copy of the <code class="cCode">UBBCONFIG</code> file shown in <a href="addomc.html#wp1261150">Sample UBBCONFIG File for the Combined Application</a> and make the following changes:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261195"> </a>In the <code class="cCode">MACHINES</code> section, remove the machine entry for the credit card authorization application.</li>
<li><a name="wp1261196"> </a>In the <code class="cCode">NETWORK</code> section, remove the network entry for the credit card authorization application.</li>
<li><a name="wp1261197"> </a>In the <code class="cCode">GROUPS</code> section, do the following:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1261198"> </a>Remove the group entry for the credit card authorization application.</li>
<li><a name="wp1261199"> </a>Add a group entry for the <code class="cCode">DMADM</code> server and a different group entry for the <code class="cCode">GWADM</code> and <code class="cCode">GWTDOMAIN</code> servers.</li>
</ul></div>
<li><a name="wp1261200"> </a>In the <code class="cCode">SERVERS</code> section, do the following:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1261201"> </a>Remove the server entries for the credit card authorization application.</li>
<li><a name="wp1261202"> </a>Add server entries for the <code class="cCode">DMADM</code>, <code class="cCode">GWADM</code>, and <code class="cCode">GWTDOMAIN</code> servers.</li>
</ul></div>
<li><a name="wp1261203"> </a>In the <code class="cCode">SERVICES</code> section, remove the service entries for the credit card authorization application.</li>
</ul></div>
<p class="pBody"><a name="wp1261204"> </a>
<a href="addomc.html#wp1261205">Listing&#160;2-3</a> shows a possible <code class="cCode">UBBCONFIG</code> file for the <code class="cCode">bankapp</code> application in the Domains environment.
</p>
<div class="pCodeTitle"><a name="wp1261205"> </a>
Listing&#160;2-3	   Sample UBBCONFIG File for the bankapp Application in the Domains Environment
</div> <a name="wp1261206"> </a><div class="pPreformatted"><pre>*RESOURCES<br />IPCKEY           76666<br />UID              0000<br />GID              000<br />PERM             0660<br />MAXACCESSERS     40<br />MAXSERVERS       35<br />MAXSERVICES      75<br />MAXCONV          10<br />MAXGTT           100<br />MASTER           SITE1,SITE2<br />SCANUNIT         10<br />SANITYSCAN       5<br />BBLQUERY         50<br />BLOCKTIME        2<br />DBBLWAIT         6<br />OPTIONS          LAN,MIGRATE<br />MODEL            MP<br />LDBAL            Y <br />MAXBUFTYPE       16<br />#<br />*MACHINES<br />mach1 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE1<br />                 TUXDIR=&#8220;/home/rsmith/tuxroot&#8221;<br />                 APPDIR=&#8220;/home/rsmith/bankapp&#8221;<br />                 ENVFILE=&#8220;/home/rsmith/bankapp/ENVFILE&#8221;<br />                 TLOGDEVICE=&#8220;/home/rsmith/bankapp/TLOG&#8221;<br />                 TLOGNAME=TLOG<br />                 TUXCONFIG=&#8220;/home/rsmith/bankapp/tuxconfig&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=&#8220;type1&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ULOGPFX=&#8220;/home/rsmith/bankapp/ULOG&#8221;<br />mach2 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE2<br />                 TUXDIR=&#8220;/home/rsmith/tuxroot&#8221;<br />                 APPDIR=&#8220;/home/rsmith/bankapp&#8221;<br />                 ENVFILE=&#8220;/home/rsmith/bankapp/ENVFILE&#8221;<br />                 TLOGDEVICE=&#8220;/home/rsmith/bankapp/TLOG&#8221;<br />                 TLOGNAME=TLOG<br />                 TUXCONFIG=&#8220;/home/rsmith/bankapp/tuxconfig&#8221;<br />                 TYPE=&#8220;type2&#8221;<br />                 ULOGPFX=&#8220;/home/rsmith/bankapp/ULOG&#8221;<br />mach3 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE3<br />                 TUXDIR=&#8220;/home/rsmith/tuxroot&#8221;<br />                 APPDIR=&#8220;/home/rsmith/bankapp&#8221;<br />                 ENVFILE=&#8220;/home/rsmith/bankapp/ENVFILE&#8221;<br />                 TLOGDEVICE=&#8220;/home/rsmith/bankapp/TLOG&#8221;<br />                 TLOGNAME=TLOG<br />                 TUXCONFIG=&#8220;/home/rsmith/bankapp/tuxconfig&#8221;<br />                 TYPE=&#8220;type2&#8221;<br />                 ULOGPFX=&#8220;/home/rsmith/bankapp/ULOG&#8221;<br />#<br />*GROUPS<br />DEFAULT:  TMSNAME=TMS_SQL&#160;&#160;TMSCOUNT=2<br />#<br /># Groups for bankapp<br />BANKB1    LMID=SITE1&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRPNO=1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&#8220;TUXEDO/SQL:/home/rsmith/bankapp/bankdl1:bankdb:readwrite&#8221;<br />BANKB2 &#160;&#160;&#160;LMID=SITE2&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRPNO=2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&#8220;TUXEDO/SQL:/home/rsmith/bankapp/bankdl2:bankdb:readwrite&#8221;<br />BANKB3 &#160;&#160;&#160;LMID=SITE3&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRPNO=3<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&#8220;TUXEDO/SQL:/home/rsmith/bankapp/bankdl3:bankdb:readwrite&#8221;<br />#<br /># Groups for Domains<br /><code class="cCode">DMADMGRP&#160;&#160;LMID=SITE1 &#160;&#160;&#160;&#160;&#160;&#160;GRPNO=4<br />GWTGROUP&#160;&#160;LMID=SITE2 &#160;&#160;&#160;&#160;&#160;&#160;GRPNO=5<br /></code>#<br />*NETWORK<br />SITE1    &#160;NADDR=&#8220;&lt;<code class="cCodeEmphasis">network address of SITE1</code>&gt;&#8221;<br />         &#160;BRIDGE=&#8220;&lt;<code class="cCodeEmphasis">device of provider1</code>&gt;&#8221;<br />         &#160;NLSADDR=&#8220;&lt;<code class="cCodeEmphasis">network listener address of SITE1</code>&gt;&#8221;<br />SITE2    &#160;NADDR=&#8220;&lt;<code class="cCodeEmphasis">network address of SITE2</code>&gt;&#8221;<br />         &#160;BRIDGE=&#8220;&lt;<code class="cCodeEmphasis">device of provider2</code>&gt;&#8221;<br />         &#160;NLSADDR=&#8220;&lt;<code class="cCodeEmphasis">network listener address of SITE2</code>&gt;&#8221;<br />SITE3    &#160;NADDR=&#8220;&lt;<code class="cCodeEmphasis">network address of SITE3</code>&gt;&#8221;<br />         &#160;BRIDGE=&#8220;&lt;<code class="cCodeEmphasis">device of provider3</code>&gt;&#8221;<br />         &#160;NLSADDR=&#8220;&lt;<code class="cCodeEmphasis">network listener address of SITE3</code>&gt;&#8221;<br />#<br />*SERVERS<br />DEFAULT: &#160;RESTART=Y &#160;&#160;&#160;&#160;&#160;&#160;MAXGEN=5 REPLYQ=Y CLOPT=&#8220;-A&#8221;<br />#<br /># Servers for Domains<br /><code class="cCode">DMADM&#160;&#160;&#160;&#160;&#160;SRVGRP=DMADMGRP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=1001<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0<br />GWADM&#160;&#160;&#160;&#160;&#160;SRVGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=1002<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0<br />GWTDOMAIN&#160;SRVGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=1003<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=&#8221;GWTGROUP&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0<br />#<br /></code># Servers for bankapp<br />TLR     &#160;&#160;SRVGRP=BANKB1   SRVID=1&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 100 -e 1000.00&#8221;<br />TLR     &#160;&#160;SRVGRP=BANKB1 &#160;&#160;SRVID=2&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 200 -e 1000.00&#8221;<br />TLR     &#160;&#160;SRVGRP=BANKB2 &#160;&#160;SRVID=3&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 600 -e 1000.00&#8221;<br />TLR     &#160;&#160;SRVGRP=BANKB2 &#160;&#160;SRVID=4&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 700 -e 1000.00&#8221;<br />TLR     &#160;&#160;SRVGRP=BANKB3 &#160;&#160;SRVID=5&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr3<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 800 -e 1000.00&#8221;<br />TLR     &#160;&#160;SRVGRP=BANKB3   SRVID=6&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=tlr3<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 900&#8221; -e 1000.00<br />XFER    &#160;&#160;SRVGRP=BANKB1   SRVID=7<br />XFER    &#160;&#160;SRVGRP=BANKB2   SRVID=8<br />XFER    &#160;&#160;SRVGRP=BANKB3   SRVID=9<br />ACCT    &#160;&#160;SRVGRP=BANKB1   SRVID=10<br />ACCT    &#160;&#160;SRVGRP=BANKB2   SRVID=11<br />ACCT    &#160;&#160;SRVGRP=BANKB3   SRVID=12<br />BAL &#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1   SRVID=13<br />BAL &#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2   SRVID=14<br />BAL &#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB3   SRVID=15<br />BTADD &#160;&#160;&#160;&#160;SRVGRP=BANKB1   SRVID=16<br />BTADD &#160;&#160;&#160;&#160;SRVGRP=BANKB2   SRVID=17<br />BTADD &#160;&#160;&#160;&#160;SRVGRP=BANKB3   SRVID=18<br />AUDITC &#160;&#160;&#160;SRVGRP=BANKB1   SRVID=19&#160;&#160;&#160;&#160;&#160;&#160;CONV=Y&#160;&#160;MIN=1&#160;&#160;MAX=10&#160;&#160;RQADDR=&#8221;auditc&#8221;<br />BALC &#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1   SRVID=20<br />BALC &#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2   SRVID=21<br />BALC &#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB3   SRVID=22<br />#<br />*SERVICES<br />DEFAULT:        &#160;LOAD=50 &#160;AUTOTRAN=Y&#160;&#160;TRANTIME=30<br />WITHDRAWAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />DEPOSIT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />TRANSFER&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />INQUIRY&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50&#160;&#160;ROUTING=ACCOUNT_ID<br />CLOSE_ACCT&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=40&#160;&#160;ROUTING=ACCOUNT_ID<br />OPEN_ACCT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=40&#160;&#160;ROUTING=BRANCH_ID<br />BR_ADD&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=20&#160;&#160;ROUTING=BRANCH_ID<br />TLR_ADD&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=20&#160;&#160;ROUTING=BRANCH_ID<br />ABAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />TBAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />ABAL_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />TBAL_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />ABALC_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />TBALC_BID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=30&#160;&#160;ROUTING=b_id<br />#<br />*ROUTING<br />ACCOUNT_ID &#160;&#160;&#160;&#160;&#160;&#160;FIELD=ACCOUNT_ID<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BUFTYPE=&#8220;FML&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RANGES=&#8220;10000-39999:BANKB1,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;40000-69999:BANKB2,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;70000-109999:BANKB3,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*:*&#8221;<br />BRANCH_ID &#160;&#160;&#160;&#160;&#160;&#160;&#160;FIELD=BRANCH_ID<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BUFTYPE=&#8220;FML&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RANGES=&#8220;1-5:BANKB1,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6-10:BANKB2,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11-15:BANKB3&#8221;<br />b_id&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FIELD=b_id<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BUFTYPE=&quot;VIEW:aud&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RANGES=&quot;1-5:BANKB1,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6-10:BANKB2,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;11-15:BANKB3&quot;</pre></div><a name="wp1261208"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>In the previous example, <code class="cCode">REPLYQ=N</code> is specified for the <code class="cCode">DMADM</code>, <code class="cCode">GWADM</code>, and <code class="cCode">GWTDOMAIN</code> servers. This setting is not required: you can, if you prefer, designate a reply queue for any of these servers by specifying <code class="cCode">REPLYQ=Y</code>. When <code class="cCode">REPLYQ</code> is set to <code class="cCode">N</code>, however, performance may be improved.</td>
</tr>
</table>

<h4 class="pHeading3"><a name="wp1261209"> </a>
Creating a DMCONFIG File for the bankapp Application
</h4>
<p class="pBody"><a name="wp1261210"> </a>
You also need to create a <code class="cCode">DMCONFIG</code> file for the <code class="cCode">bankapp</code> application, an example of which is shown in <a href="addomc.html#wp1261211">Listing&#160;2-4</a>. The binary version of the a <code class="cCode">DMCONFIG</code> file (<code class="cCode">BDMCONFIG</code>) must reside on the same machine as the <code class="cCode">DMADM</code> server.
</p>
<div class="pCodeTitle"><a name="wp1261211"> </a>
Listing&#160;2-4	   Sample DMCONFIG File for the bankapp Application
</div> <a name="wp1261212"> </a><div class="pPreformatted"><pre>*DM_LOCAL<br />LOCAL1&#160;&#160;&#160;&#160;&#160;&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=<code class="cCode">&#8221;BANK&#8221;<br /></code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=10<br /><code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br /></code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMTLOGDEV=&#8220;/home/rsmith/bankapp/DMTLOG&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;AUDITLOG=&#8220;/home/rsmith/bankapp/AUDITLOG&#8221;<br />#<br />*DM_REMOTE<br />REMOT1&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8221;CREDIT.CARD&#8221;<br />#<br /># If the DM_EXPORT section is absent, as in this sample DMCONFIG <br /># file, all services advertised by the local domain are available <br /># to the remote domains. Thus, the following bankapp services are <br /># available to the credit card authorization application:<br />#<br /># WITHDRAWAL<br /># DEPOSIT<br /># TRANSFER<br /># INQUIRY<br /># CLOSE_ACCT<br /># OPEN_ACCT<br /># BR_ADD<br /># TLR_ADD<br /># ABAL<br /># TBAL<br /># ABAL_BID<br /># TBAL_BID<br /># ABALC_BID<br /># TBALC_BID<br />#<br /><code class="cCode">*DM_IMPORT<br /></code>WITHDRAWALA<code class="cCode">&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>INQUIRYA<code class="cCode">&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>OPENCA<code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>CLOSECA<code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>DEPOSITA<code class="cCode">&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>OPEN_ACCT2<code class="cCode">&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>OPENC<code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br />#<br /></code>*DM_TDOMAIN<br />LOCAL1&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWADDR=&#8220;<code class="cCode">albany.acme.com:4051</code>&#8221;<br />REMOT1&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWADDR=&#8220;<code class="cCode">newyork.acme.com:65431</code>&#8221;</pre></div><h4 class="pHeading3"><a name="wp1261214"> </a>
Creating the UBBCONFIG File for the Credit Card Authorization Application in the Domains Environment
</h4>
<p class="pBody"><a name="wp1261215"> </a>
To create the <code class="cCode">UBBCONFIG</code> file for the credit card authorization application in the Domains environment, make the following changes to the <code class="cCode">UBBCONFIG</code> file for the credit card authorization application:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261216"> </a>In the <code class="cCode">GROUPS</code> section, add a group entry for the <code class="cCode">DMADM</code> server and a different group entry for the <code class="cCode">GWADM</code> and <code class="cCode">GWTDOMAIN</code> servers.</li>
<li><a name="wp1261217"> </a>In the <code class="cCode">SERVERS</code> section, add server entries for the <code class="cCode">DMADM</code>, <code class="cCode">GWADM</code>, and <code class="cCode">GWTDOMAIN</code> servers.</li>
</ul></div>
<p class="pBody"><a name="wp1261218"> </a>
<a href="addomc.html#wp1261219">Listing&#160;2-5</a> shows a possible <code class="cCode">UBBCONFIG</code> file for the credit card authorization application in the Domains environment.
</p>
<div class="pCodeTitle"><a name="wp1261219"> </a>
Listing&#160;2-5	   Sample UBBCONFIG File for the Credit Card Authorization Application in the Domains Environment
</div> <a name="wp1261220"> </a><div class="pPreformatted"><pre>*RESOURCES<br />IPCKEY           76666<br />UID              0000<br />GID              000<br />PERM             0660<br />MAXACCESSERS     40<br />MAXSERVERS       35<br />MAXSERVICES      75<br />MAXCONV          10<br />MAXGTT           100<br />MASTER           SITE1<br />SCANUNIT         10<br />MODEL &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SHM<br />LDBAL            Y<br />#<br />*MACHINES<br />sfexpz &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE1<br />                 TUXDIR=&#8220;/home/rsmith/tuxroot&#8221;<br />                 APPDIR=&#8220;/home/rsmith/creditapp&#8221;<br />                 ENVFILE=&#8220;/home/rsmith/creditapp/ENVFILE&#8221;<br />                 TLOGDEVICE=&#8220;/home/rsmith/creditapp/TLOG&#8221;<br />                 TLOGNAME=TLOG<br />                 TUXCONFIG=&#8220;/home/rsmith/creditapp/tuxconfig&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=&#8220;type1&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ULOGPFX=&#8220;/home/rsmith/creditapp/ULOG&#8221;<br />#<br />*GROUPS<br />DEFAULT:  TMSNAME=TMS_SQL&#160;&#160;TMSCOUNT=2<br />#<br /># Group for credit card authorization<br />CREDIT&#160;&#160;&#160;&#160;LMID=SITE1&#160;&#160;&#160;&#160;&#160;&#160;GRPNO=1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&#8220;TUXEDO/SQL:/home/rsmith/creditapp/crdtdl1:bankdb:readwrite&#8221;<br />#<br /># Groups for Domains<br /><code class="cCode">DMADMGRP&#160;&#160;LMID=SITE1 &#160;&#160;&#160;&#160;&#160;GRPNO=2<br />GWTGROUP&#160;&#160;LMID=SITE1 &#160;&#160;&#160;&#160;&#160;GRPNO=3<br /></code>#<br />*SERVERS<br />DEFAULT: &#160;RESTART=Y &#160;&#160;&#160;&#160;&#160;&#160;&#160;MAXGEN=5&#160;&#160;REPLYQ=Y&#160;&#160;CLOPT=&#8220;-A&#8221;<br />#<br /># Servers for Domains<br /><code class="cCode">DMADM&#160;&#160;&#160;&#160;&#160;SRVGRP=DMADMGRP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=50<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0<br />GWADM&#160;&#160;&#160;&#160;&#160;SRVGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=60<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0<br />GWTDOMAIN&#160;SRVGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVID=70<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RQADDR=&#8221;GWTGROUP&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;REPLYQ=N<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRACE=0<br /></code>#<br /># Servers for credit card authorization<br />TLRA    &#160;&#160;SRVGRP=CREDIT&#160;&#160;&#160;SRVID=1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&#8220;-A -- -T 600&#8221;<br />ACCTA   &#160;&#160;SRVGRP=CREDIT&#160;&#160;&#160;SRVID=2<br />CRDT    &#160;&#160;SRVGRP=CREDIT&#160;&#160;&#160;SRVID=3<br />#<br />*SERVICES<br />DEFAULT:        &#160;LOAD=50 &#160;AUTOTRAN=Y&#160;&#160;TRANTIME=30<br /># Services for credit card authorization<br />WITHDRAWALA     &#160;PRIO=50<br />INQUIRYA        &#160;PRIO=50<br />OPENCA          &#160;PRIO=40<br />CLOSECA         &#160;PRIO=40<br />DEPOSITA        &#160;PRIO=50<br />OPEN_ACCT2      &#160;PRIO=40<br />OPENC           &#160;PRIO=40</pre></div><a name="wp1261222"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>In the previous example, <code class="cCode">REPLYQ=N</code> is specified for the <code class="cCode">DMADM</code>, <code class="cCode">GWADM</code>, and <code class="cCode">GWTDOMAIN</code> servers. This setting is not required: you can, if you prefer, designate a reply queue for any of these servers by specifying <code class="cCode">REPLYQ=Y</code>. When <code class="cCode">REPLYQ</code> is set to <code class="cCode">N</code>, however, performance may be improved.</td>
</tr>
</table>

<h4 class="pHeading3"><a name="wp1261223"> </a>
Creating a DMCONFIG File for the Credit Card Authorization Application
</h4>
<p class="pBody"><a name="wp1261224"> </a>
You also need to create a <code class="cCode">DMCONFIG</code> file for the credit card authorization application, an example of which is shown in <a href="addomc.html#wp1261225">Listing&#160;2-6</a>.
</p>
<div class="pCodeTitle"><a name="wp1261225"> </a>
Listing&#160;2-6	   Sample DMCONFIG File for the Credit Card Authorization Application
</div> <a name="wp1261226"> </a><div class="pPreformatted"><pre>*DM_LOCAL<br />LOCAL1&#160;&#160;&#160;&#160;&#160;&#160;&#160;GWGRP=GWTGROUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=<code class="cCode">&#8221;CREDIT.CARD&#8221;<br /></code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=8<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMTLOGDEV=&#8220;/home/rsmith/creditapp/DMTLOG&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;AUDITLOG=&#8220;/home/rsmith/creditapp/AUDITLOG&#8221;<br />#<br />*DM_REMOTE<br />REMOT1&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8221;BANK&#8221;<br />#<br /># If the DM_EXPORT section is absent, as in this sample DMCONFIG <br /># file, all services advertised by the local domain are available <br /># to the remote domains. Thus, the following credit card <br /># authorization services are available to the bankapp application:<br />#<br /># WITHDRAWALA<br /># INQUIRYA<br /># OPENCA<br /># CLOSECA<br /># DEPOSITA<br /># OPEN_ACCT2<br /># OPENC<br />#<br /><code class="cCode">*DM_IMPORT<br /></code>WITHDRAWAL<code class="cCode">&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>DEPOSIT<code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>TRANSFER<code class="cCode">&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>INQUIRY<code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>CLOSE_ACCT<code class="cCode">&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>OPEN_ACCT<code class="cCode">&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>BR_ADD<code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>TLR_ADD<code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>ABAL<code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>TBAL<code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>ABALC_BID<code class="cCode">&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br /></code>TBALC_BID<code class="cCode">&#160;&#160;&#160;&#160;RACCESSPOINT=REMOT1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LACCESSPOINT=LOCAL1<br />#<br /></code>*DM_TDOMAIN<br />LOCAL1&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWADDR=&#8220;<code class="cCode">newyork.acme.com:65431</code>&#8221;<br />REMOT1&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWADDR=&#8220;<code class="cCode">albany.acme.com:4051</code>&#8221;</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1261229"> </a>
Examining the creditapp Domains Configuration
</h2><p class="pBody"><a name="wp1261230"> </a>
The <code class="cCode">creditapp</code> application is a sample Domains configuration that spans four machines. In effect, the <code class="cCode">creditapp</code> application is yet another solution to reconfiguring the <code class="cCode">bankapp</code> application and the credit card authorization application&#8212;as described in <a href="addomc.html#wp1261087">Planning to Build Domains from Multiple Oracle Tuxedo Applications</a>&#8212;so that the two applications can communicate directly with one another. In this solution, the <code class="cCode">bankapp</code> and credit card authorization applications are reconfigured as four Oracle Tuxedo domains, one domain per machine, that interoperate using TDomain gateway server processes.
</p>
<p class="pBody"><a name="wp1261240"> </a>
The <code class="cCode">creditapp</code> application is included with the Oracle Tuxedo distribution. Its files reside at the following location:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261241"> </a><code class="cCodeEmphasis">tux_prod_dir</code><code class="cCode">\samples\atmi\creditapp</code> (Windows)</li>
<li><a name="wp1261242"> </a><code class="cCodeEmphasis">tux_prod_dir</code><code class="cCode">/samples/atmi/creditapp</code> (UNIX)</li>
</ul></div>
<p class="pBody"><a name="wp1261246"> </a>
Where <code class="cCodeEmphasis">tux_prod_dir</code> represents the directory in which the Oracle Tuxedo distribution is installed.
</p>
<p class="pBody"><a name="wp1261247"> </a>
The Domains configuration for the <code class="cCode">creditapp</code> application requires four <code class="cCode">UBBCONFIG</code> files, one for each of the Oracle Tuxedo domains, and four <code class="cCode">DMCONFIG</code> files, one for each of the Oracle Tuxedo domains. The four <code class="cCode">UBBCONFIG</code> files are named <code class="cCode">ubbdom1</code> through <code class="cCode">ubbdom4</code>, and the four <code class="cCode">DMCONFIG</code> files are named <code class="cCode">domcon1</code> through <code class="cCode">domcon4</code>. The files reside in the <code class="cCode">creditapp</code> directory.
</p>
<p class="pBody"><a name="wp1261254"> </a>
<a href="addomc.html#wp1261255">Listing&#160;2-7</a> shows the content of the <code class="cCode">ubbdom1</code> configuration file. Notice in the <code class="cCode">SERVERS</code> section that this domain is configured for three TDomain gateway groups, to be used by this domain to communicate with the three other domains in the Domains configuration.
</p>
<div class="pCodeTitle"><a name="wp1261255"> </a>
Listing&#160;2-7	   ubbdom1 Configuration File for the creditapp Application
</div> <a name="wp1261256"> </a><div class="pPreformatted"><pre>.<br />.<br />.<br />*RESOURCES<br />IPCKEY&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;80952<br />UID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">&lt;user id from id(1)&gt;<br /></code>GID&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">&lt;group id from id(1)&gt;<br /></code>PERM&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0660<br />MAXACCESSERS&#160;&#160;&#160;&#160;&#160;40<br />MAXSERVERS&#160;&#160;&#160;&#160;&#160;&#160;&#160;35<br />MAXSERVICES&#160;&#160;&#160;&#160;&#160;&#160;75<br />MAXCONV&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10<br />MASTER&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SITE1<br />MODEL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SHM<br />LDBAL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Y<br />MAXGTT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;100<br />MAXBUFTYPE&#160;&#160;&#160;&#160;&#160;&#160;&#160;16<br />SCANUNIT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10<br />SANITYSCAN&#160;&#160;&#160;&#160;&#160;&#160;&#160;5<br />DBBLWAIT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6<br />BBLQUERY&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;50<br />BLOCKTIME&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;2<br />#<br />#<br />*MACHINES<br /><code class="cCodeEmphasis">&lt;SITE1&#39;s uname&gt;</code>&#160;&#160;LMID=SITE1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXDIR=&quot;<code class="cCodeEmphasis">&lt;TUXDIR1&gt;</code>&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;APPDIR=&quot;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ENVFILE=&quot;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/ENVFILE&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGDEVICE=&quot;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/TLOG&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGNAME=TLOG<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXCONFIG=&quot;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/tuxconfig&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ULOGPFX=&quot;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/ULOG&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=&quot;&lt;machine type1&gt;&quot;</pre></div><a name="wp1261257"> </a><div class="pPreformatted"><pre><code class="cCodeEmphasis">#<br />#<br /></code>*GROUPS<br />DEFAULT:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE1<br />BANKB1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRPNO=1&#160;&#160;&#160;&#160;&#160;TMSNAME=TMS_SQLTMSCOUNT=2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&quot;TUXEDO/SQL:<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/crdtdl1:bankdb:readwrite&quot;<br />BANKB2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRPNO=2<br />BANKB3&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRPNO=3<br />BANKB4&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRPNO=4<br />#<br />#<br />*SERVERS<br />#<br />DEFAULT:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RESTART=Y&#160;&#160;&#160;&#160;&#160;&#160;&#160;MAXGEN=5&#160;&#160;&#160;REPLYQ=Y&#160;&#160;CLOPT=&quot;-A&quot;<br />DMADM&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2&#160;&#160;&#160;SRVID=32<br />GWADM&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2&#160;&#160;&#160;SRVID=30<br />GWTDOMAIN&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2&#160;&#160;&#160;SRVID=31<br />GWADM&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB3&#160;&#160;&#160;SRVID=24<br />GWTDOMAIN&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB3&#160;&#160;&#160;SRVID=25<br />GWADM&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB4&#160;&#160;&#160;SRVID=20<br />GWTDOMAIN&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB4&#160;&#160;&#160;SRVID=21<br />TLRA&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT=&quot;-A -- -T 100&quot;<br />BTADD&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=3<br />ACCTA&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=4<br />CRDT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=5<br />CRDTA&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1&#160;&#160;&#160;SRVID=6	<br />#<br />*SERVICES<br />DEFAULT:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LOAD=50<br />INQUIRYA&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50<br />WITHDRAWALA&#160;&#160;&#160;&#160;&#160;&#160;PRIO=50<br />OPEN_ACCT2&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=40<br />OPENC&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=40<br />OPENCA&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=40<br />CLOSECA&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=40<br />BR_ADD&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=20<br />TLR_ADD&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PRIO=20</pre></div><p class="pBody"><a name="wp1262284"> </a>
<a href="addomc.html#wp1262288">Listing&#160;2-8</a> shows the content of the <code class="cCode">domcon1</code> Domains configuration file. Notice in the DM_LOCAL section (also known as the DM_LOCAL_DOMAINS section) that this domain is configured for three TDomain gateway groups, to be used by this domain to communicate with the three other domains in the Domains configuration. The <code class="cCode">domcon1</code> content shown here has been updated with the improved Domains terminology described in <a href="addom.html#wp1257587">Terminology Improvements for DMCONFIG File</a>.
</p>
<div class="pCodeTitle"><a name="wp1262288"> </a>
Listing&#160;2-8	   domcon1 Domains Configuration File for the creditapp Application
</div> <a name="wp1261264"> </a><div class="pPreformatted"><pre>.<br />.<br />.<br />*DM_RESOURCES<br />#<br />VERSION=U22<br />#</pre></div><a name="wp1261265"> </a><div class="pPreformatted"><pre>#<br />#<br />*DM_LOCAL<br />#<br />QDOM1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GWGRP=BANKB2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=<code class="cCode">&#8221;QDOM1&#8221;<br /></code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=10<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MAXACCESSPOINT=89<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMTLOGDEV=&#8220;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/DMTLOG&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;AUDITLOG=&#8220;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/AUDITLOG&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMTLOGNAME=&#8221;DMTLOG_TDOM1&#8221;</pre></div><a name="wp1261266"> </a><div class="pPreformatted"><pre>QDOM2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GWGRP=BANKB3<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=<code class="cCode">&#8221;QDOM2&#8221;<br /></code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=10<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MAXACCESSPOINT=89<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMTLOGDEV=&#8220;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/DMTLOG&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;AUDITLOG=&#8220;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/AUDITLOG&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMTLOGNAME=&#8221;DMTLOG_TDOM2&#8221;</pre></div><a name="wp1261267"> </a><div class="pPreformatted"><pre>QDOM3&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GWGRP=BANKB4<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=<code class="cCode">&#8221;QDOM3&#8221;<br /></code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BLOCKTIME=10<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MAXACCESSPOINT=89<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMTLOGDEV=&#8220;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/DMTLOG&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;AUDITLOG=&#8220;<code class="cCodeEmphasis">&lt;APPDIR1&gt;</code>/AUDITLOG&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DMTLOGNAME=&#8221;DMTLOG_TDOM3&#8221;</pre></div><a name="wp1261268"> </a><div class="pPreformatted"><pre>#<br />#<br />*DM_REMOTE<br />#<br />TDOM1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8221;TDOM1&#8221;</pre></div><a name="wp1261269"> </a><div class="pPreformatted"><pre>TDOM2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8221;TDOM2&#8221;</pre></div><a name="wp1261270"> </a><div class="pPreformatted"><pre>TDOM3&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&#8221;TDOM3&#8221;</pre></div><a name="wp1261271"> </a><div class="pPreformatted"><pre>#<br />#<br />*DM_TDOMAIN<br />#<br />TDOM1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWADDR=&#8220;<code class="cCodeEmphasis">&lt;network address of SITE2&gt;</code>&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWDEVICE=&#8221;<code class="cCodeEmphasis">&lt;device of provider2&gt;</code></pre></div><a name="wp1261272"> </a><div class="pPreformatted"><pre>TDOM2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWADDR=&#8220;<code class="cCodeEmphasis">&lt;network address of SITE3&gt;</code>&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWDEVICE=&#8221;<code class="cCodeEmphasis">&lt;device of provider3&gt;</code></pre></div><a name="wp1261273"> </a><div class="pPreformatted"><pre>TDOM3&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWADDR=&#8220;<code class="cCodeEmphasis">&lt;network address of SITE4&gt;</code>&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWDEVICE=&#8221;<code class="cCodeEmphasis">&lt;device of provider4&gt;</code></pre></div><a name="wp1261274"> </a><div class="pPreformatted"><pre>QDOM1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWADDR=&#8220;<code class="cCodeEmphasis">&lt;network address of SITE1&gt;</code>&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWDEVICE=&#8221;<code class="cCodeEmphasis">&lt;device of provider1&gt;</code></pre></div><a name="wp1261275"> </a><div class="pPreformatted"><pre>QDOM2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWADDR=&#8220;<code class="cCodeEmphasis">&lt;network address of SITE1A&gt;</code>&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWDEVICE=&#8221;<code class="cCodeEmphasis">&lt;device of provider1&gt;</code></pre></div><a name="wp1261276"> </a><div class="pPreformatted"><pre>QDOM3&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWADDR=&#8220;<code class="cCodeEmphasis">&lt;network address of SITE1B&gt;</code>&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NWDEVICE=&#8221;<code class="cCodeEmphasis">&lt;device of provider1&gt;</code></pre></div><a name="wp1261277"> </a><div class="pPreformatted"><pre>#<br />#<br />*DM_EXPORT<br />#<br />WITHDRAWALA<br />INQUIRYA<br />OPENCA<br />CLOSECA</pre></div><p class="pBody"><a name="wp1261279"> </a>
If you decide to run the <code class="cCode">creditapp</code> application, start by reading the <code class="cCode">README</code> file in the <code class="cCode">creditapp</code> directory. The <code class="cCode">README</code> file explains how to use a UNIX shell script named <code class="cCode">RUNME.sh</code> to run the <code class="cCode">creditapp</code> application. If you want to run the <code class="cCode">creditapp</code> application on a Windows system, read the <code class="cCode">README</code> file to learn the basic setup information and then execute the comparable tasks in the Windows environment. For details on using Oracle Tuxedo on Windows, see,<span style="font-style: normal" class="cHyperlink">
 <a href="../nt/index.html"></span><span style="font-style: italic">Using Oracle Tuxedo ATMI on Windows</span>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1261286"> </a>
Setting Up a Domains Configuration
</h2><p class="pBody"><a name="wp1261287"> </a>
To configure a Domains environment, you as the Domains administrator must specify all the information that an Oracle Tuxedo domain needs to know about the other domains&#8212;the remote domains&#8212;involved in the Domains configuration. This information includes local services exported to the remote domains, services imported from the remote domains, and addressing and security parameters for contacting the remote domains. This information is defined in the <code class="cCode">UBBCONFIG</code> and <code class="cCode">DMCONFIG</code> configuration files for each domain involved in the Domains configuration.
</p>
<p class="pBody"><a name="wp1261291"> </a>
The Domains example described in the following sections is based on the <code class="cCode">simpapp</code> application, which is a sample application included with the Oracle Tuxedo distribution at the following location:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261295"> </a><code class="cCodeEmphasis">tux_prod_dir</code><code class="cCode">\samples\atmi\simpapp</code> (Windows)</li>
<li><a name="wp1261296"> </a><code class="cCodeEmphasis">tux_prod_dir</code><code class="cCode">/samples/atmi/simpapp</code> (UNIX)</li>
</ul></div>
<p class="pBody"><a name="wp1261300"> </a>
Where <code class="cCodeEmphasis">tux_prod_dir</code> represents the directory in which the Oracle Tuxedo distribution is installed.
</p>
<h3 class="pHeading2"><a name="wp1261301"> </a>
Configuring a Sample Domains Application (simpapp)
</h3>
<p class="pBody"><a name="wp1261305"> </a>
The Domains example, illustrated in <a href="addomc.html#wp1261306">Figure&#160;2-4</a>, consists of two Oracle Tuxedo domains: <code class="cCode">lapp</code>, a <em class="cEmphasis">local application</em> based on <code class="cCode">simpapp</code>, and <code class="cCode">rapp</code>, a <em class="cEmphasis">remote application</em> based on <code class="cCode">simpapp</code>. The <code class="cCode">lapp</code> application is configured to allow its clients to access a service called <code class="cCode">TOUPPER</code> that is available in the <code class="cCode">rapp</code> application.
</p>
<div class="pFigureTitle"><a name="wp1261306"> </a>
Figure&#160;2-4  Local and Remote Applications in simpapp
</div>

 
 <p class="pGraphic"><a name="wp1261310"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/domsim.gif" alt="Local and Remote Applications in simpapp" id="wp1261308"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1261311"> </a>
Configuration Tasks
</h3>
<p class="pBody"><a name="wp1261312"> </a>
The following tasks are required to configure the <code class="cCode">lapp</code> and <code class="cCode">rapp</code> applications.
</p>
<p class="pGraphic"><a name="wp1261348"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/dmproc.gif" height="556" width="511" usemap="#dmproc_gif" alt="Local and Remote Applications in simpapp" id="wp1261314"/>
<map name="dmproc_gif">
<area href="addomc.html#wp1261350" shape="rect" coords="159,18,355,69" />
<area href="addomc.html#wp1261367" shape="rect" coords="159,79,355,128" />
<area href="addomc.html#wp1261392" shape="rect" coords="159,140,354,188" />
<area href="addomc.html#wp1261428" shape="rect" coords="159,201,354,258" />
<area href="addomc.html#wp1261454" shape="rect" coords="159,295,353,345" />
<area href="addomc.html#wp1261472" shape="rect" coords="159,354,354,402" />
<area href="addomc.html#wp1261486" shape="rect" coords="159,416,352,461" />
<area href="addomc.html#wp1261502" shape="rect" coords="159,474,351,537" />
</map>
</div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1261350"> </a>
How to Set Environment Variables for lapp
</h3>
<p class="pBody"><a name="wp1261351"> </a>
You need to set the following environment variables for the <code class="cCode">lapp</code> application to be configured successfully:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261355"> </a><code class="cCode">TUXDIR</code>&#8212;Absolute pathname to the Oracle Tuxedo system root directory on this machine; sometimes represented as <code class="cCodeEmphasis">tux_prod_dir</code>.</li>
<li><a name="wp1261356"> </a><code class="cCode">APPDIR</code>&#8212;Absolute pathname to the <code class="cCode">lapp</code> application root directory on this machine.</li>
<li><a name="wp1261357"> </a><code class="cCode">TUXCONFIG</code>&#8212;Absolute pathname of the device or filename where the application binary configuration file for <code class="cCode">lapp</code> is found on this machine.</li>
<li><a name="wp1261358"> </a><code class="cCode">BDMCONFIG</code>&#8212;Absolute pathname of the device or filename where the Domains binary configuration file for <code class="cCode">lapp</code> is found on this machine.</li>
<li><a name="wp1261359"> </a><code class="cCode">PATH</code>&#8212;must include <code class="cCode">%TUXDIR%\bin</code> (Windows) or <code class="cCode">$TUXDIR/bin</code> (UNIX).</li>
<li><a name="wp1261360"> </a><code class="cCode">LD_LIBRARY_PATH</code> (UNIX only)&#8212;list of dynamically loadable libraries that must be loaded on this machine (must include <code class="cCode">$TUXDIR/lib</code>); on HP-UX on the HP 9000, use <code class="cCode">SHLIB_PATH</code> instead of <code class="cCode">LD_LIBRARY_PATH</code>.</li>
</ul></div>
<h4 class="pHeading3"><a name="wp1261361"> </a>
Windows Example
</h4>
<p class="pBody"><a name="wp1261362"> </a>
prompt&gt; <code class="cCode">set TUXDIR=C:\bea\tuxedo<br /></code>prompt&gt; <code class="cCode">set APPDIR=C:\home\lapp<br /></code>prompt&gt; <code class="cCode">set TUXCONFIG=C:\home\lapp\lapp.tux<br /></code>prompt&gt; <code class="cCode">set BDMCONFIG=C:\home\lapp\lapp.bdm<br /></code>prompt&gt; <code class="cCode">set PATH=%APPDIR%;%TUXDIR%\bin;%PATH%</code>
</p>
<a name="wp1261363"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Windows accesses the required dynamically loadable library files through its <code class="cCode">PATH</code> variable setting.</td>
</tr>
</table>

<h4 class="pHeading3"><a name="wp1261364"> </a>
UNIX Example
</h4>
<p class="pBody"><a name="wp1261365"> </a>
prompt&gt; <code class="cCode">TUXDIR=/home/rsmith/bea/tuxedo<br /></code>prompt&gt; <code class="cCode">APPDIR=/home/rsmith/lapp<br /></code>prompt&gt; <code class="cCode">TUXCONFIG=/home/rsmith/lapp/lapp.tux<br /></code>prompt&gt; <code class="cCode">BDMCONFIG=/home/rsmith/lapp/lapp.bdm<br /></code>prompt&gt; <code class="cCode">PATH=$APPDIR:$TUXDIR/bin:/bin:$PATH<br /></code>prompt&gt; <code class="cCode">LD_LIBRARY_PATH=$APPDIR:$TUXDIR/lib:/lib:/usr/lib:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$LD_LIBRARY_PATH<br /></code>prompt&gt; <code class="cCode">export TUXDIR APPDIR TUXCONFIG BDMCONFIG PATH LD_LIBRARY_PATH</code>
</p>
<h3 class="pHeading2"><a name="wp1261367"> </a>
How to Define the Domains Environment for lapp in the UBBCONFIG File
</h3>
<p class="pBody"><a name="wp1261368"> </a>
In <code class="cCode">lapp.ubb</code>, the text version of the <code class="cCode">lapp</code> application configuration file, only the required parameters are defined. Default settings are used for the other parameters. <a href="addomc.html#wp1261369">Listing&#160;2-9</a> shows the content of <code class="cCode">lapp.ubb</code>.
</p>
<div class="pCodeTitle"><a name="wp1261369"> </a>
Listing&#160;2-9	   lapp.ubb Configuration File
</div> <a name="wp1261370"> </a><div class="pPreformatted"><pre># lapp.ubb<br />#<br />*RESOURCES<br />IPCKEY        111111<br />MASTER        LAPP<br />MODEL         SHM<br /><br />*MACHINES<br />giselle<br />              LMID=LAPP<br />              TUXDIR=&#8221;/home/rsmith/tuxedo&#8221;<br />              APPDIR=&#8221;/home/rsmith/lapp&#8221;<br />              TUXCONFIG=&#8221;/home/rsmith/lapp/lapp.tux&#8221;</pre></div><a name="wp1261371"> </a><div class="pPreformatted"><pre>*GROUPS<br />LDMGRP        GRPNO=1 LMID=LAPP<br />LGWGRP        GRPNO=2 LMID=LAPP<br />.<br />.<br />.<br />*SERVERS<br />DMADM         SRVGRP=LDMGRP SRVID=1<br />GWADM         SRVGRP=LGWGRP SRVID=1<br /><code class="cCode">GWTDOMAIN</code>     SRVGRP=LGWGRP SRVID=2 REPLYQ=N<br />.<br />.<br />.<br />*SERVICES<br />.<br />.<br />.</pre></div><a name="wp1261373"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>In the previous <code class="cCode">UBBCONFIG</code> file listing, <code class="cCode">REPLYQ=N</code> is specified for the <code class="cCode">DMADM</code>, <code class="cCode">GWADM</code>, and <code class="cCode">GWTDOMAIN</code> servers. This setting is not required: you can, if you prefer, designate a reply queue for any of these servers by specifying <code class="cCode">REPLYQ=Y</code>. When <code class="cCode">REPLYQ</code> is set to <code class="cCode">N</code>, however, performance may be improved.</td>
</tr>
</table>

<h4 class="pHeading3"><a name="wp1261374"> </a>
Server Group Definitions
</h4>
<p class="pBody"><a name="wp1261375"> </a>
The following server groups are defined in <code class="cCode">lapp.ubb</code>:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261376"> </a>LDMGRP&#8212;contains the Domains administrative server (<code class="cCode">DMADM</code>).</li>
<li><a name="wp1261377"> </a>LGWGRP&#8212;contains the gateway administrative server (<code class="cCode">GWADM</code>) and the TDomain gateway server (<code class="cCode">GWTDOMAIN</code>).</li>
</ul></div>
<h4 class="pHeading3"><a name="wp1261378"> </a>
Server Definitions
</h4>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261379"> </a><code class="cCode">DMADM</code>&#8212;the Domains administrative server enables run-time modification of the Domains configuration information in the binary Domains configuration file (<code class="cCode">BDMCONFIG</code>). <code class="cCode">DMADM</code> supports a list of registered gateway groups. Only one instance of <code class="cCode">DMADM</code> may be running in an Oracle Tuxedo domain involved in a Domains configuration.</li>
<li><a name="wp1261383"> </a><code class="cCode">GWADM</code>&#8212;the gateway administrative server enables run-time administration of a particular domain gateway group. This server gets Domains configuration information from the <code class="cCode">DMADM</code> server. It also provides administrative functionality and transaction logging for the gateway group.</li>
<li><a name="wp1261384"> </a><code class="cCode">GWTDOMAIN</code>&#8212;the TDomain gateway server enables access to and from remote Oracle Tuxedo domains, allowing interoperability of two or more Oracle Tuxedo domains. Information about the local and remote services that the TDomain gateway exports and imports is included in the Domains configuration file (<code class="cCode">DMCONFIG</code>).</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1261392"> </a>
How to Define Domains Parameters for lapp in the DMCONFIG File
</h3>
<p class="pBody"><a name="wp1261393"> </a>
In <code class="cCode">lapp.dom</code>, the text version of the <code class="cCode">lapp</code> Domains configuration file, only the required parameters are defined. Default settings are used for optional parameters. <a href="addomc.html#wp1261394">Listing&#160;2-10</a> shows the content of the <code class="cCode">lapp.dom</code> file.
</p>
<div class="pCodeTitle"><a name="wp1261394"> </a>
Listing&#160;2-10	   lapp.dom Domains Configuration File
</div> <a name="wp1261395"> </a><div class="pPreformatted"><pre>#<br /># lapp.dom<br />#<br />*DM_LOCAL<br />LAPP         GWGRP=LGWGRP<br />             TYPE=TDOMAIN<br />             ACCESSPOINTID=&#8221;111111&quot;</pre></div><a name="wp1261396"> </a><div class="pPreformatted"><pre>*DM_REMOTE<br />RAPP         TYPE=TDOMAIN<br />             ACCESSPOINTID=&#8221;222222&quot;</pre></div><a name="wp1261397"> </a><div class="pPreformatted"><pre>*DM_EXPORT</pre></div><a name="wp1261398"> </a><div class="pPreformatted"><pre>*DM_IMPORT<br />TOUPPER</pre></div><a name="wp1261399"> </a><div class="pPreformatted"><pre>*DM_TDOMAIN<br />LAPP         NWADDR=&#8221;//giselle:5000&quot;<br />RAPP         NWADDR=&#8221;//juliet:5000&quot;</pre></div><h4 class="pHeading3"><a name="wp1261401"> </a>
DM_LOCAL Section Definitions
</h4>
<p class="pBody"><a name="wp1261402"> </a>
The <code class="cCode">DM_LOCAL</code> section identifies the local domain access points, their associated domain gateway groups, and their characteristics. There is one and only one local domain access point per domain gateway group.
</p>
<p class="pBody"><a name="wp1261403"> </a>
The <code class="cCode">lapp.dom</code> file specifies only one local domain access point, <code class="cCode">LAPP</code>, and defines the following properties for the <code class="cCode">LAPP</code> access point:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261404"> </a><code class="cCode">GWGRP</code> value is LGWGRP, the name of the domain gateway server group specified in the <code class="cCode">lapp.ubb</code> file.</li>
<li><a name="wp1261405"> </a><code class="cCode">TYPE</code> of <code class="cCode">TDOMAIN</code> indicates that the <code class="cCode">lapp</code> application will be communicating with the <code class="cCode">rapp</code> application through the local TDomain gateway server. This parameter indicates the protocol used by the gateways. Other <code class="cCode">TYPE</code> values include <code class="cCode">IDOMAIN</code> (Oracle eLink Adapter for Mainframe gateway), <code class="cCode">SNAX</code> (Oracle eLink Adapter for Mainframe SNA gateway), and <code class="cCode">OSITP</code>/<code class="cCode">OSITPX </code>(Oracle eLink Adapter for Mainframe OSI TP gateway).</li>
<li><a name="wp1261406"> </a><code class="cCode">ACCESSPOINTID</code> identifies the name of the local domain access point; this identifier must be unique across all domains involved in the Domains configuration.</li>
</ul></div>
<h4 class="pHeading3"><a name="wp1261407"> </a>
DM_REMOTE Section Definitions
</h4>
<p class="pBody"><a name="wp1261408"> </a>
The <code class="cCode">DM_REMOTE</code> section identifies the remote domain access points and their characteristics. There may be one or more remote domain access points per domain gateway group.
</p>
<p class="pBody"><a name="wp1261409"> </a>
The <code class="cCode">lapp.dom</code> file specifies only one remote domain access point, <code class="cCode">RAPP</code>, and defines the following properties for the <code class="cCode">RAPP</code> access point:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261410"> </a><code class="cCode">TYPE</code> of <code class="cCode">TDOMAIN</code> indicates that the <code class="cCode">lapp</code> application will be communicating with the <code class="cCode">rapp</code> application through the local TDomain gateway server.</li>
<li><a name="wp1261411"> </a><code class="cCode">ACCESSPOINTID</code> identifies the name of the remote domain access point; this identifier must be unique across all domains involved in the Domains configuration.</li>
</ul></div>
<h4 class="pHeading3"><a name="wp1261412"> </a>
DM_EXPORT Section Definitions
</h4>
<p class="pBody"><a name="wp1261413"> </a>
The <code class="cCode">DM_EXPORT</code> section provides information about the services that are exported to one or more remote domains through a local domain access point. If this section is absent, or is present but empty, all services advertised by the local domain are available to the remote domains associated with the access points defined in the <code class="cCode">DM_REMOTE</code> section.
</p>
<p class="pBody"><a name="wp1261414"> </a>
As specified in the <code class="cCode">lapp.dom</code> file, no <code class="cCode">lapp</code> services are available to the <code class="cCode">rapp </code>application through the <code class="cCode">LAPP</code> access point.
</p>
<h4 class="pHeading3"><a name="wp1261415"> </a>
DM_IMPORT Section Definitions
</h4>
<p class="pBody"><a name="wp1261416"> </a>
The <code class="cCode">DM_IMPORT</code> section provides information about the services that are imported through one or more remote domain access points and made available to the local domain through one or more local domain access points. If this section is absent, or is present but empty, no remote services are available to the local domain.
</p>
<p class="pBody"><a name="wp1261417"> </a>
As specified in the <code class="cCode">lapp.dom</code> file, the <code class="cCode">rapp</code> service named <code class="cCode">TOUPPER</code> is available to the <code class="cCode">lapp</code> application.
</p>
<h4 class="pHeading3"><a name="wp1261418"> </a>
DM_TDOMAIN Section Definitions
</h4>
<p class="pBody"><a name="wp1261421"> </a>
The <code class="cCode">DM_TDOMAIN</code> section defines the addressing information required by the Oracle Tuxedo Domains component. Each domain access point specified in the <code class="cCode">LOCAL</code> and <code class="cCode">REMOTE</code> sections of the configuration file appears as an entry in the in the <code class="cCode">DM_TDOMAIN</code> section.
</p>
<p class="pBody"><a name="wp1261423"> </a>
Associated with each local domain access point entry is a <code class="cCode">NWADDR</code> value, which specifies the network address at which the local domain will accept connections from one or more remote domains.
</p>
<p class="pBody"><a name="wp1261424"> </a>
Associated with each remote domain access point entry is a <code class="cCode">NWADDR</code> value, which specifies the network address at which the local domain will make a connection to a remote domain.
</p>
<p class="pBody"><a name="wp1261425"> </a>
As specified in the <code class="cCode">lapp.dom</code> file, the <code class="cCode">lapp</code> application will listen for incoming connection requests on the network address <code class="cCode">giselle:5000</code>, where <code class="cCode">giselle</code> is the name of the machine on which the <code class="cCode">lapp</code> application is running, and <code class="cCode">5000</code> is the listening port. Also specified in <code class="cCode">lapp.dom</code> is that when the <code class="cCode">lapp</code> application attempts to make a connection to the <code class="cCode">rapp</code> application, it will use the network address <code class="cCode">juliet:5000</code>, where <code class="cCode">juliet</code> is the name of the machine on which the <code class="cCode">rapp</code> application is running, and <code class="cCode">5000</code> is the destination port.
</p>
<h3 class="pHeading2"><a name="wp1261428"> </a>
How to Compile Application and Domains Gateway Configuration Files for lapp
</h3>
<p class="pBody"><a name="wp1261429"> </a>
The <code class="cCode">lapp.ubb</code> application configuration file contains the information necessary to boot the <code class="cCode">lapp</code> application. You compile this file into a binary data file by running <a href="../rfcm/rfcmd.html">tmloadcf(1)</a>.
</p>
<p class="pBody"><a name="wp1261433"> </a>
The <code class="cCode">lapp.dom</code> Domains configuration file contains the information used by the local <code class="cCode">lapp</code> TDomain gateway to communicate with the remote <code class="cCode">rapp</code> TDomain gateway. You compile this file into a binary data file by running <a href="../rfcm/rfcmd.html">dmloadcf(1)</a>.
</p>
<p class="pBody"><a name="wp1261437"> </a>
To compile both configuration files, use the following sample session as a guide.
</p>
<p class="pBody"><a name="wp1261438"> </a>
Windows:<br />prompt&gt; <code class="cCode">cd C:\home\lapp<br /></code>prompt&gt; <code class="cCode">set TUXCONFIG=C:\home\lapp\lapp.tux<br /></code>prompt&gt; <code class="cCode">tmloadcf -y lapp.ubb<br /></code>prompt&gt; <code class="cCode">set BDMCONFIG=C:\home\lapp\lapp.bdm<br /></code>prompt&gt; <code class="cCode">dmloadcf -y lapp.dom</code>
</p>
<p class="pBody"><a name="wp1261439"> </a>
UNIX:<br />prompt&gt; <code class="cCode">cd /home/rsmith/lapp<br /></code>prompt&gt; <code class="cCode">TUXCONFIG=/home/rsmith/lapp/lapp.tux<br /></code>prompt&gt; <code class="cCode">export</code> <code class="cCode">TUXCONFIG<br /></code>prompt&gt; <code class="cCode">tmloadcf -y lapp.ubb<br /></code>prompt&gt; <code class="cCode">BDMCONFIG=/home/rsmith/lapp/lapp.bdm<br /></code>prompt&gt; <code class="cCode">export BDMCONFIG<br /></code>prompt&gt; <code class="cCode">dmloadcf -y lapp.dom</code>
</p>
<p class="pBody"><a name="wp1261440"> </a>
Once you build both the <code class="cCode">lapp</code> and <code class="cCode">rapp</code> applications, you boot the applications on their respective machines by executing the <a href="../rfcm/rfcmd.html">tmboot(1)</a> command:
</p>
<p class="pBody"><a name="wp1261444"> </a>
prompt&gt; <code class="cCode">tmboot -y</code>
</p>
<p class="pBody"><a name="wp1261445"> </a>
The order in which the two applications are booted does not matter. Monitor the applications with <a href="../rfcm/rfcmd.html">dmadmin(1)</a>, as described in <a href="addoma.html">Administering Domains</a>. Once both applications are booted, a client in the <code class="cCode">lapp</code> application can call the <code class="cCode">TOUPPER</code> service provided by the <code class="cCode">rapp</code> application.
</p>
<h3 class="pHeading2"><a name="wp1261454"> </a>
How to Set Environment Variables for rapp
</h3>
<p class="pBody"><a name="wp1261455"> </a>
You need to set the following environment variables for the <code class="cCode">rapp</code> application to be configured successfully:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261459"> </a><code class="cCode">TUXDIR</code>&#8212;Absolute pathname to the Oracle Tuxedo system root directory on this machine; sometimes represented as <code class="cCodeEmphasis">tux_prod_dir</code>.</li>
<li><a name="wp1261460"> </a><code class="cCode">APPDIR</code>&#8212;Absolute pathname to the <code class="cCode">rapp</code> application root directory on this machine.</li>
<li><a name="wp1261461"> </a><code class="cCode">TUXCONFIG</code>&#8212;Absolute pathname of the device or filename where the application binary configuration file for <code class="cCode">rapp</code> is found on this machine.</li>
<li><a name="wp1261462"> </a><code class="cCode">BDMCONFIG</code>&#8212;Absolute pathname of the device or filename where the Domains binary configuration file for <code class="cCode">rapp</code> is found on this machine.</li>
<li><a name="wp1261463"> </a><code class="cCode">PATH</code>&#8212;must include <code class="cCode">%TUXDIR%\bin</code> (Windows) or <code class="cCode">$TUXDIR/bin</code> (UNIX).</li>
<li><a name="wp1261464"> </a><code class="cCode">LD_LIBRARY_PATH</code> (UNIX only)&#8212;list of dynamically loadable libraries that must be loaded on this machine (must include <code class="cCode">$TUXDIR/lib</code>); on HP-UX on the HP 9000, use <code class="cCode">SHLIB_PATH</code> instead of <code class="cCode">LD_LIBRARY_PATH</code>.</li>
</ul></div>
<h4 class="pHeading3"><a name="wp1261465"> </a>
Windows Example
</h4>
<p class="pBody"><a name="wp1261466"> </a>
prompt&gt; <code class="cCode">set TUXDIR=C:\bea\tuxedo<br /></code>prompt&gt; <code class="cCode">set APPDIR=C:\home\rapp<br /></code>prompt&gt; <code class="cCode">set TUXCONFIG=C:\home\rapp\rapp.tux<br /></code>prompt&gt; <code class="cCode">set BDMCONFIG=C:\home\rapp\rapp.bdm<br /></code>prompt&gt; <code class="cCode">set PATH=%APPDIR%;%TUXDIR%\bin;%PATH%</code>
</p>
<a name="wp1261467"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Windows accesses the required dynamically loadable library files through its <code class="cCode">PATH</code> variable setting.</td>
</tr>
</table>

<h4 class="pHeading3"><a name="wp1261468"> </a>
UNIX Example
</h4>
<p class="pBody"><a name="wp1261469"> </a>
prompt&gt; <code class="cCode">TUXDIR=/home/rsmith/bea/tuxedo<br /></code>prompt&gt; <code class="cCode">APPDIR=/home/rsmith/rapp<br /></code>prompt&gt; <code class="cCode">TUXCONFIG=/home/rsmith/rapp/rapp.tux<br /></code>prompt&gt; <code class="cCode">BDMCONFIG=/home/rsmith/rapp/rapp.bdm<br /></code>prompt&gt; <code class="cCode">PATH=$APPDIR:$TUXDIR/bin:/bin:$PATH<br /></code>prompt&gt; <code class="cCode">LD_LIBRARY_PATH=$APPDIR:$TUXDIR/lib:/lib:/usr/lib:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$LD_LIBRARY_PATH<br /></code>prompt&gt; <code class="cCode">export TUXDIR APPDIR TUXCONFIG BDMCONFIG PATH LD_LIBRARY_PATH</code>
</p>
<h3 class="pHeading2"><a name="wp1261472"> </a>
How to Define the Domains Environment for rapp in the UBBCONFIG File
</h3>
<p class="pBody"><a name="wp1261473"> </a>
In <code class="cCode">rapp.ubb</code>, the text version of the <code class="cCode">rapp</code> application configuration file, only the required parameters are defined. Default settings are used for the other parameters. <a href="addomc.html#wp1261474">Listing&#160;2-11</a> shows the content of the <code class="cCode">rapp.ubb</code> file.
</p>
<div class="pCodeTitle"><a name="wp1261474"> </a>
Listing&#160;2-11	   rapp.ubb Application Configuration File
</div> <a name="wp1261475"> </a><div class="pPreformatted"><pre># rapp.ubb<br />#<br />*RESOURCES<br />IPCKEY        222222<br />MASTER        RAPP<br />MODEL         SHM</pre></div><a name="wp1261476"> </a><div class="pPreformatted"><pre>*MACHINES<br />juliet<br />              LMID=RAPP<br />              TUXDIR=&#8221;/home/rsmith/bea/tuxedo&#8221;<br />              APPDIR=&#8221;/home/rsmith/rapp&#8221;<br />              TUXCONFIG=&#8221;/home/rsmith/rapp/rapp.tux&#8221;</pre></div><a name="wp1261477"> </a><div class="pPreformatted"><pre>*GROUPS<br />RDMGRP        GRPNO=1 LMID=RAPP<br />RGWGRP        GRPNO=2 LMID=RAPP<br />APPGRP        GRPNO=3 LMID=RAPP<br />.<br />.<br />.<br />*SERVERS<br />DMADM         SRVGRP=RDMGRP SRVID=1<br />GWADM         SRVGRP=RGWGRP SRVID=1<br /><code class="cCode">GWTDOMAIN</code>     SRVGRP=RGWGRP SRVID=2 REPLYQ=N<br />simpserv      SRVGRP=APPGRP SRVID=1<br />.<br />.<br />.<br />*SERVICES<br />TOUPPER<br />.<br />.<br />.</pre></div><a name="wp1261479"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>In the previous <code class="cCode">UBBCONFIG</code> file listing, <code class="cCode">REPLYQ=N</code> is specified for the <code class="cCode">DMADM</code>, <code class="cCode">GWADM</code>, and <code class="cCode">GWTDOMAIN</code> servers. This setting is not required: you can, if you prefer, designate a reply queue for any of these servers by specifying <code class="cCode">REPLYQ=Y</code>. When <code class="cCode">REPLYQ</code> is set to <code class="cCode">N</code>, however, performance may be improved.</td>
</tr>
</table>

<p class="pBody"><a name="wp1261480"> </a>
The following server groups are defined in <code class="cCode">rapp.ubb</code>:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261481"> </a><code class="cCode">RDMGRP</code>&#8212;contains the Domains server <code class="cCode">DMADM</code>.</li>
<li><a name="wp1261482"> </a><code class="cCode">RGWGRP</code>&#8212;contains the Domains servers <code class="cCode">GWADM</code> and <code class="cCode">GWTDOMAIN</code>.</li>
<li><a name="wp1261483"> </a><code class="cCode">APPGRP</code>&#8212;contains the application server <code class="cCode">simpserv</code>.</li>
</ul></div>
<p class="pBody"><a name="wp1261484"> </a>
The <code class="cCode">simpserv</code> server advertises the <code class="cCode">TOUPPER</code> service, which converts strings from lowercase to uppercase characters.
</p>
<h3 class="pHeading2"><a name="wp1261486"> </a>
How to Define Domains Parameters for rapp in the DMCONFIG File
</h3>
<p class="pBody"><a name="wp1261487"> </a>
In <code class="cCode">rapp.dom</code>, the text version of the <code class="cCode">rapp</code> Domains configuration file, only the required parameters are defined. Default settings are used for the other parameters. <a href="addomc.html#wp1261488">Listing&#160;2-12</a> shows the content of the <code class="cCode">rapp.dom</code> file.
</p>
<div class="pCodeTitle"><a name="wp1261488"> </a>
Listing&#160;2-12	   rapp.dom Domains Configuration File
</div> <a name="wp1261489"> </a><div class="pPreformatted"><pre># rapp.dom<br />#<br />*DM_LOCAL<br />RAPP        GWGRP=RGWGRP<br />            TYPE=TDOMAIN<br />            ACCESSPOINTID=&#8221;222222&quot;</pre></div><a name="wp1261490"> </a><div class="pPreformatted"><pre>*DM_REMOTE<br />LAPP        TYPE=TDOMAIN<br />            ACCESSPOINTID=&#8221;111111&quot;</pre></div><a name="wp1261491"> </a><div class="pPreformatted"><pre>*DM_EXPORT<br />TOUPPER</pre></div><a name="wp1261492"> </a><div class="pPreformatted"><pre>*DM_IMPORT</pre></div><a name="wp1261493"> </a><div class="pPreformatted"><pre>*DM_TDOMAIN<br />RAPP        NWADDR=&#8221;//juliet:5000&quot;<br />LAPP        NWADDR=&#8221;//giselle:5000&quot;</pre></div><p class="pBody"><a name="wp1261495"> </a>
The <code class="cCode">rapp.dom</code> Domains configuration file is similar to the <code class="cCode">lapp.dom</code> Domains configuration file, except that the two files list different services to be exported and imported. Specifically, the <code class="cCode">rapp.dom</code> file defines the following Domains configurations for the <code class="cCode">rapp</code> application:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261496"> </a>Specifies a local domain access point named <code class="cCode">RAPP</code>, and a remote domain access point named <code class="cCode">LAPP</code>. Both access points are associated with the TDomain gateway server group named <code class="cCode">RGWGRP</code>.</li>
<li><a name="wp1261497"> </a>Specifies that the <code class="cCode">rapp</code> service named <code class="cCode">TOUPPER</code> is available to the <code class="cCode">lapp</code> application.</li>
<li><a name="wp1261498"> </a>Specifies that no <code class="cCode">lapp</code> services are available to the <code class="cCode">rapp</code> application.</li>
<li><a name="wp1261499"> </a>Specifies that the <code class="cCode">rapp</code> application will listen for incoming connection requests on network address <code class="cCode">juliet:5000</code>, where <code class="cCode">juliet</code> is the name of the machine on which the <code class="cCode">rapp</code> application is running, and <code class="cCode">5000</code> is the listening port.</li>
<li><a name="wp1261500"> </a>Specifies that if the <code class="cCode">rapp</code> application attempts to make a connection to the <code class="cCode">lapp</code> application, it will use the network address <code class="cCode">giselle:5000</code>, where <code class="cCode">giselle</code> is the name of the machine on which the <code class="cCode">lapp</code> application is running, and <code class="cCode">5000</code> is the destination port.</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1261502"> </a>
How to Compile Application and Domain Gateway Configuration Files for rapp
</h3>
<p class="pBody"><a name="wp1261503"> </a>
The <code class="cCode">rapp.ubb</code> application configuration file contains the information necessary to boot the <code class="cCode">rapp</code> application. You compile this file into a binary data file by running <a href="../rfcm/rfcmd.html">tmloadcf(1)</a>.
</p>
<p class="pBody"><a name="wp1261507"> </a>
The <code class="cCode">rapp.dom</code> Domains configuration file contains the information used by the local <code class="cCode">rapp</code> TDomain gateway to communicate with the remote <code class="cCode">lapp</code> TDomain gateway. You compile this file into a binary data file by running <a href="../rfcm/rfcmd.html">dmloadcf(1)</a>.
</p>
<p class="pBody"><a name="wp1261511"> </a>
To compile both configuration files, use the following sample session as a guide.
</p>
<p class="pBody"><a name="wp1261512"> </a>
Windows:<br />prompt&gt; <code class="cCode">cd C:\home\rapp<br /></code>prompt&gt; <code class="cCode">set TUXCONFIG=C:\home\rapp\rapp.tux<br /></code>prompt&gt; <code class="cCode">tmloadcf -y rapp.ubb<br /></code>prompt&gt; <code class="cCode">set BDMCONFIG=C:\home\rapp\rapp.bdm<br /></code>prompt&gt; <code class="cCode">dmloadcf -y rapp.dom</code>
</p>
<p class="pBody"><a name="wp1261513"> </a>
UNIX:<br />prompt&gt; <code class="cCode">cd /home/rsmith/rapp<br /></code>prompt&gt; <code class="cCode">TUXCONFIG=/home/rsmith/rapp/rapp.tux<br /></code>prompt&gt; <code class="cCode">export</code> <code class="cCode">TUXCONFIG<br /></code>prompt&gt; <code class="cCode">tmloadcf -y rapp.ubb<br /></code>prompt&gt; <code class="cCode">BDMCONFIG=/home/rsmith/rapp/rapp.bdm<br /></code>prompt&gt; <code class="cCode">export BDMCONFIG<br /></code>prompt&gt; <code class="cCode">dmloadcf -y rapp.dom</code>
</p>
<p class="pBody"><a name="wp1261514"> </a>
Once you build both the <code class="cCode">rapp</code> and <code class="cCode">lapp</code> applications, you boot the applications on their respective machines by executing the <a href="../rfcm/rfcmd.html">tmboot(1)</a> command:
</p>
<p class="pBody"><a name="wp1261518"> </a>
prompt&gt; <code class="cCode">tmboot -y</code>
</p>
<p class="pBody"><a name="wp1261519"> </a>
The order in which the two applications are booted does not matter. Monitor the applications with <a href="../rfcm/rfcmd.html">dmadmin(1)</a>, as described in <a href="addoma.html">Administering Domains</a>. Once both applications are booted, a client in the <code class="cCode">lapp</code> application can call the <code class="cCode">TOUPPER</code> service provided by the <code class="cCode">rapp</code> application.
</p>
<h3 class="pHeading2"><a name="wp1261526"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261530"> </a><a href="addom.html#wp1257365">Understanding the Domains Configuration File</a></li>
<li><a name="wp1261534"> </a><a href="addomc.html#wp1261554">How to Compress Data Between Domains</a></li>
<li><a name="wp1261538"> </a><a href="addomc.html#wp1261564">How to Route Service Requests to Remote Domains</a></li>
<li><a name="wp1261544"> </a><a href="../rf5/rf5.html">UBBCONFIG(5)</a> in <em class="cEmphasis">Oracle Tuxedo File Formats, Data Descriptions, MIBs, and System Processes Reference</em></li>
<li><a name="wp1261551"> </a><a href="../rf5/rf5.html">DMCONFIG(5)</a> in <em class="cEmphasis">Oracle Tuxedo File Formats, Data Descriptions, MIBs, and System Processes Reference</em></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1261554"> </a>
How to Compress Data Between Domains
</h3>
<p class="pBody"><a name="wp1261555"> </a>
Data sent between domains can be compressed for faster performance. To configure compression, set the <code class="cCode">CMPLIMIT</code> parameter in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file. This parameter, which is only relevant to remote domain access points, specifies the compression threshold to be used when sending data to a remote domain. The minimum value is 0, and the maximum value is 2147483647. The default setting is 2147483647. Application buffers larger than the specified size will be compressed.
</p>
<p class="pBody"><a name="wp1261558"> </a>
For more information about setting the <code class="cCode">CMPLIMIT</code> parameter, see <span class="cHyperlink">
&#8220;Compres</span><a href="../ada/adrnet.html"></a>sing Data Over a Network&#8221; in <em class="cEmphasis">Administering an Oracle Tuxedo Application at Run Time</em>.
</p>
<h3 class="pHeading2"><a name="wp1261564"> </a>
How to Route Service Requests to Remote Domains
</h3>
<p class="pBody"><a name="wp1261565"> </a>
Data-dependent routing information used by domain gateways to send service requests to specific remote domains is provided in the <code class="cCode">DM_ROUTING</code> section of the <code class="cCode">DMCONFIG</code> file. The <code class="cCode">FML</code>, <code class="cCode">FML32</code>, <code class="cCode">VIEW</code>, <code class="cCode">VIEW32</code>, <code class="cCode">X_C_TYPE</code>, <code class="cCode">X_COMMON</code>, and <code class="cCode">XML</code> typed buffers are supported.
</p>
<p class="pBody"><a name="wp1261566"> </a>
To create a routing table for a domain involved in a Domains configuration, you specify the following information in the <code class="cCode">DM_ROUTING</code> section of the <code class="cCode">DMCONFIG</code> file:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261567"> </a>Buffer type for which the routing entry is valid</li>
<li><a name="wp1261568"> </a>Name of the routing entry and field</li>
<li><a name="wp1261569"> </a>Ranges and associated remote domain names of the routing field.</li>
</ul></div>
<p class="pBody"><a name="wp1261572"> </a>
For an example of a Domains data-dependent routing configuration, see <a href="addom.html#wp1257695">Specifying Domains Data-Dependent Routing</a>. For a detailed description of Domains data-dependent routing, see the <code class="cCode">DM_ROUTING</code> section on reference page DMCONFIG<span class="cHyperlink">
<a href="../rf5/rf5.html"></a>(5)</span>in <em class="cEmphasis">Oracle Tuxedo File Formats, Data Descriptions, MIBs, and System Processes Reference</em>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1261580"> </a>
Setting Up Security in a Domains Configuration
</h2><p class="pBody"><a name="wp1261584"> </a>
The Oracle Tuxedo ATMI environment provides the following basic security capabilities for Domains configurations:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261585"> </a><em class="cEmphasis">Authentication</em>&#8212;Verifies the identities of the local domain and a remote domain when attempting to establish a connection to one another</li>
<li><a name="wp1261586"> </a><em class="cEmphasis">Authorization</em>&#8212;Restricts remote client access to local services via access control lists (ACLs)</li>
<li><a name="wp1261587"> </a><em class="cEmphasis">Link-level encryption</em>&#8212;Keeps interdomain communications private</li>
</ul></div>
<p class="pBody"><a name="wp1261588"> </a>
The security capabilities available to Domains configurations and those available to individual Oracle Tuxedo applications are relatively independent but compatible. For information about the security capabilities available to Oracle Tuxedo applications, see <span style="font-style: normal" class="cHyperlink">
<a href="../sec/index.html"></span><span style="font-style: italic">Using Security in ATMI Applications</a></span>.
</p>
<h3 class="pHeading2"><a name="wp1261596"> </a>
Domains Security Mechanisms
</h3>
<p class="pBody"><a name="wp1261600"> </a>
The Oracle Tuxedo Domains component provides the following security mechanisms:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261601"> </a><em class="cEmphasis">Domains authentication</em>&#8212;Supplies the means by which the local domain and a remote domain can mutually authenticate one another when attempting to connect to one another. You specify identities, or principal names, for the local domain and each remote domain via the <code class="cCode">CONNECTION_PRINCIPAL_NAME</code> parameter in the <code class="cCode">DM_LOCAL</code> and <code class="cCode">DM_REMOTE</code> sections of the <code class="cCode">DMCONFIG</code> file.</li>
<p class="pBodyRelative"><a name="wp1261602"> </a>
In addition, the local domain and a remote domain can use any of three levels of password security when attempting to connect to one another. You configure the level of password security on a local domain basis by setting the <code class="cCode">SECURITY</code> parameter in the <code class="cCode">DM_LOCAL</code> section of the <code class="cCode">DMCONFIG</code> file.
</p>
<li><a name="wp1261603"> </a><em class="cEmphasis">Domains local domain access</em>&#8212;Restricts local services to remote domains. If a service is not exported to remote domains, it is unavailable to them. You export a service by placing an entry for the service in the <code class="cCode">DM_EXPORT</code> section of the <code class="cCode">DMCONFIG</code> file.</li>
<li><a name="wp1261604"> </a><em class="cEmphasis">Domains access control lists (ACLs)</em>&#8212;Restricts the availability of services in a local domain to only certain remote domains. You create ACL names in the <code class="cCode">DM_ACCESS_CONTROL</code> section of the <code class="cCode">DMCONFIG</code> file and apply the ACL names to services in the <code class="cCode">EXPORT</code> section of the <code class="cCode">DMCONFIG</code> file.</li>
<li><a name="wp1261605"> </a><em class="cEmphasis">Domains ACL policy</em>&#8212;Controls the ACL policy for remote domains. You configure a local or global ACL policy for a remote domain via the <code class="cCode">ACL_POLICY</code> parameter in the <code class="cCode">DM_REMOTE</code> section of the <code class="cCode">DMCONFIG</code> file.</li>
<li><a name="wp1261606"> </a><em class="cEmphasis">Domains link-level encryption</em>&#8212;Ensures data privacy between communicating domain gateways. For TDomain gateways, you configure link-level encryption by setting the <code class="cCode">MINENCRYPTBITS</code> and <code class="cCode">MAXENCRYPTBITS</code> parameters in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file.</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1261607"> </a>
How to Configure Principal Names for Domains Authentication
</h3>
<p class="pBody"><a name="wp1261611"> </a>
As described in <span class="cHyperlink">
&#8220;Establishi</span><a href="../sec/secadm.html"></a>ng a Link Between Domains&#8221; in <em class="cEmphasis">Using Security in ATMI Applications</em>, a local TDomain gateway needs an identity, or principal name, that both the local domain and a remote domain know about so that the remote domain can authenticate the local domain when the domains are attempting to connect to one another. Similarly, the remote TDomain gateway needs an identity, or principal name, that both the remote domain and the local domain know about so that the local domain can authenticate the remote domain when the domains are attempting to establish a connection to one another. In addition, the local TDomain gateway uses its assigned principal name to acquire a set of security credentials needed when setting up the connection.
</p>
<p class="pBody"><a name="wp1261613"> </a>
The local TDomain gateway needs a second principle name to acquire a set of security credentials required to enforce the local access control list (ACL) policy described in <a href="addomc.html#wp1261741">How to Configure ACL Policy for a Remote Domain</a>.
</p>
<p class="pBody"><a name="wp1261617"> </a>
As the administrator, you use the following configuration parameters to specify the principal names for the TDomain gateways running in your Release 7.1 or later Oracle Tuxedo applications:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261618"> </a><code class="cCode">SEC_PRINCIPAL_NAME</code> (string) in <code class="cCode">UBBCONFIG</code></li>
<p class="pBodyRelative"><a name="wp1261619"> </a>
Specifies the security principal name identification string to be used for authentication purposes by an application running Oracle Tuxedo 7.1 or later software. This parameter may contain a maximum of 511 characters (excluding the terminating <code class="cCode">NULL</code> character). The principal name specified for this parameter becomes the identity of one or more system processes&#8212;including TDomain gateway (<code class="cCode">GWTDOMAIN</code>) processes&#8212;running in this application.
</p>
<p class="pBodyRelative"><a name="wp1261620"> </a>
During application booting, each TDomain gateway process in the application calls the authentication plug-in to acquire security credentials for the security principal name specified in <code class="cCode">SEC_PRINCIPAL_NAME</code>. A TDomain gateway acquires these credentials for the principal name specified in the <code class="cCode">SEC_PRINCIPAL_NAME</code> parameter.
</p>
<li><a name="wp1261621"> </a><code class="cCode">CONNECTION_PRINCIPAL_NAME</code> (string) in <code class="cCode">DM_LOCAL</code> section of <code class="cCode">DMCONFIG</code></li>
<p class="pBodyRelative"><a name="wp1261622"> </a>
Specifies the connection principal name identifier, which is the principal name for verifying the identity of the domain gateway associated with this local domain access point when establishing a connection to a remote domain. This parameter applies only to domain gateways of type <code class="cCode">TDOMAIN</code> running Oracle Tuxedo 7.1 or later software.
</p>
<p class="pBodyRelative"><a name="wp1261623"> </a>
The <code class="cCode">CONNECTION_PRINCIPAL_NAME</code> parameter may contain a maximum of 511 characters (excluding the terminating <code class="cCode">NULL</code> character). If this parameter is not specified, the connection principal name defaults to the <code class="cCode">ACCESSPOINTID</code> string for this local domain access point.
</p>
<p class="pBodyRelative"><a name="wp1261624"> </a>
For default authentication plug-ins, if a value is assigned to the <code class="cCode">CONNECTION_PRINCIPAL_NAME</code> parameter for this local domain access point, it must be the same as the value assigned to the <code class="cCode">ACCESSPOINTID</code> parameter for this local domain access point. If these values do not match, the local TDomain gateway process will not boot, and the system will generate the following <code class="cCode">userlog(3c)</code> message: <code class="cCode">ERROR: Unable to acquire credentials</code>.
</p>
<li><a name="wp1261625"> </a><code class="cCode">CONNECTION_PRINCIPAL_NAME</code> (string) in <code class="cCode">DM_REMOTE</code> section of <code class="cCode">DMCONFIG</code></li>
<p class="pBodyRelative"><a name="wp1261626"> </a>
Specifies the connection principal name identifier, which is the principal name for verifying the identity of this remote domain access point when establishing a connection to the local domain. This parameter applies only to domain gateways of type <code class="cCode">TDOMAIN</code> running Oracle Tuxedo 7.1 or later software.
</p>
<p class="pBodyRelative"><a name="wp1261627"> </a>
The <code class="cCode">CONNECTION_PRINCIPAL_NAME</code> parameter may contain a maximum of 511 characters (excluding the terminating <code class="cCode">NULL</code> character). If this parameter is not specified, the connection principal name defaults to the <code class="cCode">ACCESSPOINTID</code> string for this remote domain access point.
</p>
<p class="pBodyRelative"><a name="wp1261628"> </a>
For default authentication plug-ins, if a value is assigned to the <code class="cCode">CONNECTION_PRINCIPAL_NAME</code> parameter for this remote domain access point, it must be the same as the value assigned to the <code class="cCode">ACCESSPOINTID</code> parameter for this remote domain access point. If these values do not match, any attempt to set up a connection between the local TDomain gateway and the remote TDomain gateway will fail, and the system will generate the following <code class="cCode">userlog(3c)</code> message: <code class="cCode">ERROR: Unable to initialize administration key for domain </code><code class="cCodeEmphasis">domain_name</code>.
</p>
</ul></div>
<p class="pBody"><a name="wp1261629"> </a>
In the following example, the CONNECTION_PRINCIPAL_NAME identities in the <code class="cCode">DMCONFIG</code> file are used when establishing a connection through the <code class="cCode">LOCAL1</code> access point and the <code class="cCode">REMOT1</code> access point.
</p>
<a name="wp1261630"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_LOCAL<br /></code>LOCAL1&#160;&#160;&#160;GWGRP=bankg1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.CENTRAL01&quot;</pre></div><a name="wp1261631"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_REMOTE<br /></code>REMOT1 &#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.BANK01&quot;</pre></div><h3 class="pHeading2"><a name="wp1261632"> </a>
How to Configure Domains Password Security
</h3>
<p class="pBody"><a name="wp1261633"> </a>
Domain gateways can be made to authenticate incoming connections requested by remote domains. Application administrators can define when security should be enforced for incoming connections from remote domains.
</p>
<p class="pBody"><a name="wp1261634"> </a>
As the administrator, you can specify the level of security used by a particular local domain by setting the <code class="cCode">SECURITY</code> parameter in the <code class="cCode">DM_LOCAL</code> section of the <code class="cCode">DMCONFIG</code> file. There are three levels of password security:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261635"> </a><em class="cEmphasis">No security</em> (using the NONE option)&#8212;Incoming connections from remote domains are not authenticated.</li>
<li><a name="wp1261636"> </a><em class="cEmphasis">Application password </em>(using the APP_PW option)&#8212;Incoming connections from remote domains are authenticated using the application password defined in the <code class="cCode">TUXCONFIG</code> file. (The application password is <em class="cEmphasis">not</em> included in the <code class="cCode">UBBCONFIG</code> file.) The Oracle Tuxedo application password is administered with <a href="../rfcm/rfcmd.html">tmloadcf(1)</a>, which prompts for the password when the SECURITY option is enabled in the <code class="cCode">TUXCONFIG</code> file. The password is automatically propagated with the <code class="cCode">TUXCONFIG</code> file to the other machines in the configuration. You can update the password dynamically using the tmadmin command.</li>
<li><a name="wp1261643"> </a><em class="cEmphasis">Domains password </em>(using the DM_PW option<em class="cEmphasis">)</em>&#8212;Connections between the local and remote domains are authenticated using passwords defined in the <code class="cCode">DM_PASSWORDS</code> section of the <code class="cCode">BDMCONFIG</code> file. (The <code class="cCode">DM_PASSWORDS</code> section is <em class="cEmphasis">not</em> included in the <code class="cCode">DMCONFIG</code> file.) These passwords are added to the binary configuration file after <code class="cCode">dmloadcf</code> has been run, using <code class="cCode">DM_MIB(5)</code> or the <code class="cCode">passwd</code> subcommand of the <code class="cCode">dmadmin(1)</code> command. Each entry contains the password used by a remote domain to access the local domain, and the password required by the local domain to access a remote domain.</li>
</ul></div>
<p class="pBody"><a name="wp1261644"> </a>
If in the <code class="cCode">TUXCONFIG</code> file the <code class="cCode">SECURITY</code> parameter is set to <code class="cCode">NONE</code> or is not set, the Domains configuration can still require the TDomain gateways to enforce security at the <code class="cCode">DM_PW</code> level. If the DM_PW option is selected, each remote domain must have a password defined in the <code class="cCode">DM_PASSWORDS</code> section of the BDMCONFIG file. In other words, incoming connections without a password are rejected by the TDomain gateway.
</p>
<h4 class="pHeading3"><a name="wp1261645"> </a>
Using the DM_MIB(5) to Set Domains Passwords (DM_PW)
</h4>
<p class="pBody"><a name="wp1261646"> </a>
You can use the <code class="cCode">DM_MIB</code> to set Domains passwords (<code class="cCode">DM_PW</code>). The <code class="cCode">T_DM_PASSWORDS</code> class in the <code class="cCode">DM_MIB</code> represents configuration information for interdomain authentication through local and remote access points of type <code class="cCode">TDOMAIN</code>. The <code class="cCode">T_DM_PASSWORDS</code> class contains the following entries for each remote domain.
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261647"> </a><code class="cCode">TA_DMLACCESSPOINT</code>&#8212;Name of the local domain access point to which the password applies.</li>
<li><a name="wp1261648"> </a><code class="cCode">TA_DMRACCESSPOINT</code>&#8212;Name of the remote domain access point to which the password applies.</li>
<li><a name="wp1261649"> </a><code class="cCode">TA_DMLPWD</code>&#8212;Local password used to authenticate connections between the local domain access point (identified by <code class="cCode">TA_DMLACCESSPOINT</code>) and the remote domain access point (identified by <code class="cCode">TA_DMRACCESSPOINT</code>).</li>
<li><a name="wp1261650"> </a><code class="cCode">TA_DMRPWD</code>&#8212;Remote password used to authenticate connections between the remote domain access point (identified by <code class="cCode">TA_DMRACCESSPOINT</code>) and the local domain access point (identified by <code class="cCode">TA_DMLACCESSPOINT</code>).</li>
<a name="wp1261651"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Passwords are stored securely in encrypted format.</td>
</tr>
</table>

</ul></div>
<p class="pBody"><a name="wp1261652"> </a>
For information about formatting MIB administrative requests and interpreting MIB administrative replies, see reference page DM_MIB<span class="cHyperlink">
<a href="../rf5/rf5.html"></a>(5)</span>in <em class="cEmphasis">Oracle Tuxedo File Formats, Data Descriptions, MIBs, and System Processes Reference</em>.
</p>
<h4 class="pHeading3"><a name="wp1261657"> </a>
Using the dmadmin Command to Set Domains Passwords (DM_PW)
</h4>
<p class="pBody"><a name="wp1261658"> </a>
You can also use the <code class="cCode">dmadmin</code> command to set Domains passwords (<code class="cCode">DM_PW</code>):
</p>
<p class="pBody"><a name="wp1261659"> </a>
prompt&gt; <code class="cCode">dmadmin<br />passwd</code> <code class="cCode">[-r]</code> <code class="cCodeEmphasis">local_domain_access_point_name<br /></code><code class="cCode">&#160;&#160;&#160;</code><code class="cCodeEmphasis">remote_domain_access_point_name</code>
</p>
<p class="pBody"><a name="wp1261660"> </a>
The <code class="cCode">dmadmin</code> command prompts you for new passwords for the specified local and remote domain access points. For more information about <code class="cCode">dmadmin(1)</code>, see <a href="addoma.html">Administering Domains</a>.
</p>
<h4 class="pHeading3"><a name="wp1261664"> </a>
Examples of Coding Password Security Between Domains
</h4>
<p class="pBody"><a name="wp1261665"> </a>
The <code class="cCode">SECURITY</code> parameter in the <code class="cCode">DM_LOCAL</code> section of the <code class="cCode">DMCONFIG</code> file specifies the security type of a local domain. If authentication is required, it is done every time a connection is established between the local domain and a remote domain. If the security types of the two domains are incompatible, or if the passwords do not match, the connection fails.
</p>
<h5 class="pHeading4"><a name="wp1261666"> </a>
Example 1: Setting Security to NONE
</h5>
<p class="pBody"><a name="wp1266789"> </a>
If <code class="cCode">SECURITY</code> is set to <code class="cCode">NONE</code> for a local domain, incoming connection attempts are not authenticated. Even with <code class="cCode">SECURITY</code> set to <code class="cCode">NONE</code>, a local domain can still connect to a remote domain that has <code class="cCode">SECURITY</code> set to <code class="cCode">DM_PW</code>, but before such a connection can be established, you must define the passwords on both sides by using <code class="cCode">DM_MIB(5)</code> or the <code class="cCode">dmadmin passwd</code> command.
</p>
<p class="pBody"><a name="wp1266793"> </a>
<a href="addomc.html#wp1266790">Listing&#160;2-13</a> shows setting security to NONE for both application and domains.
</p>
<div class="pCodeTitle"><a name="wp1266790"> </a>
Listing&#160;2-13	   Setting Security to NONE for Both Application and Domains
</div> <a name="wp1266786"> </a><div class="pPreformatted"><pre>LOCAL1: SECURITY in UBBCONFIG set to NONE<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SECURITY in DMCONFIG set to NONE</pre></div><a name="wp1261670"> </a><div class="pPreformatted"><pre>REMOT1: SECURITY in UBBCONFIG set to NONE<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SECURITY in DMCONFIG set to DM_PW</pre></div><p class="pBody"><a name="wp1261672"> </a>
In this example, <code class="cCode">LOCAL1</code> is not enforcing any security but <code class="cCode">REMOT1</code> is enforcing <code class="cCode">DM_PW</code> security. On the initiator (<code class="cCode">LOCAL1</code>) side, the pertinent attributes in <code class="cCode">UBBCONFIG</code> and <code class="cCode">DMCONFIG</code> are set as follows:
</p>
<a name="wp1261673"> </a><div class="pPreformatted"><pre>UBBCONFIG<br />&#160;*RESOURCES<br /> SECURITY &#160;NONE</pre></div><a name="wp1261674"> </a><div class="pPreformatted"><pre>DMCONFIG<br /><code class="cCode">&#160;*DM_LOCAL<br /></code>&#160;LOCAL1&#160;&#160;&#160;&#160;GWGRP=bankg1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SECURITY=NONE</pre></div><a name="wp1261675"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_REMOTE<br /></code>&#160;REMOT1 &#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.BANK01&quot;</pre></div><p class="pBody"><a name="wp1261676"> </a>
On the responder (<code class="cCode">REMOT1</code>) side, the pertinent attributes in <code class="cCode">UBBCONFIG</code> and <code class="cCode">DMCONFIG</code> are set as follows:
</p>
<a name="wp1261677"> </a><div class="pPreformatted"><pre>UBBCONFIG<br />&#160;*RESOURCES<br /> SECURITY&#160;&#160;NONE</pre></div><a name="wp1261678"> </a><div class="pPreformatted"><pre><code class="cCode">DMCONFIG<br />&#160;*DM_LOCAL<br /></code>&#160;REMOT1&#160;&#160;&#160;&#160;GWGRP=bankg2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SECURITY=DM_PW</pre></div><a name="wp1261679"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_REMOTE<br /></code>&#160;LOCAL1&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.CENTRAL01&quot;</pre></div><p class="pBody"><a name="wp1261680"> </a>
After the required attributes have been set in the <code class="cCode">TUXCONFIG</code> and <code class="cCode">BDMCONFIG</code> files, boot the applications on <code class="cCode">LOCAL1</code> and <code class="cCode">REMOT1</code>. 
</p>
<p class="pBody"><a name="wp1261681"> </a>
On <code class="cCode">LOCAL1</code>:
</p>
<a name="wp1261682"> </a><div class="pPreformatted"><pre>      &#160;&#160;&#160;&#160;&#160;dmadmin<br />      &#160;&#160;&#160;&#160;&#160;passwd LOCAL1 REMOT1<br />     &#160;&#160;&#160;&#160;&#160; Enter Local Domain Password:foo1<br />     &#160;&#160;&#160;&#160;&#160; Reenter Local Domain Password:foo1<br />      &#160;&#160;&#160;&#160;&#160;Enter Remote Domain Password:foo2<br />      &#160;&#160;&#160;&#160;&#160;Reenter Remote Domain Password:foo2</pre></div><p class="pBody"><a name="wp1261683"> </a>
On <code class="cCode">REMOT1</code>:
</p>
<a name="wp1261684"> </a><div class="pPreformatted"><pre>      &#160;&#160;&#160;&#160;&#160;dmadmin<br />      &#160;&#160;&#160;&#160;&#160;passwd REMOT1 LOCAL1<br />      &#160;&#160;&#160;&#160;&#160;Enter Local Domain Password:foo2<br />      &#160;&#160;&#160;&#160;&#160;Reenter Local Domain Password:foo2<br />      &#160;&#160;&#160;&#160;&#160;Enter Remote Domain Password:foo1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Reenter Remote Domain Password:foo1</pre></div><p class="pBody"><a name="wp1261685"> </a>
Once passwords have been created on both domains, a connection can be established and services can be invoked on the remote domain.
</p>
<p class="pBody"><a name="wp1266798"> </a>
<a href="addomc.html#wp1261686">Listing&#160;2-14</a> shows the setting application security to NONE and domains security to DM_PW.
</p>
<div class="pCodeTitle"><a name="wp1261686"> </a>
Listing&#160;2-14	   Setting Application Security to NONE and Domains Security to DM_PW
</div> <p class="pBody"><a name="wp1261687"> </a>
On the initiator (<code class="cCode">LOCAL1</code>) side, the pertinent attributes in <code class="cCode">UBBCONFIG</code> and <code class="cCode">DMCONFIG</code> are set as follows:
</p>
<a name="wp1261688"> </a><div class="pPreformatted"><pre>UBBCONFIG<br />&#160;*RESOURCES<br /> SECURITY&#160;&#160;NONE</pre></div><a name="wp1261689"> </a><div class="pPreformatted"><pre><code class="cCode">DMCONFIG<br />&#160;*DM_LOCAL<br /></code>&#160;LOCAL1&#160;&#160;&#160;&#160;GWGRP=bankg1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SECURITY=DM_PW</pre></div><a name="wp1261690"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_REMOTE<br /></code>&#160;REMOT1 &#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.BANK01&quot;</pre></div><p class="pBody"><a name="wp1261691"> </a>
On the responder (<code class="cCode">REMOT1</code>) side, the pertinent attributes in <code class="cCode">UBBCONFIG</code> and <code class="cCode">DMCONFIG</code> are set as follows:
</p>
<a name="wp1261692"> </a><div class="pPreformatted"><pre>UBBCONFIG<br />&#160;*RESOURCES<br /> SECURITY&#160;&#160;NONE</pre></div><a name="wp1261693"> </a><div class="pPreformatted"><pre><code class="cCode">DMCONFIG<br />&#160;*DM_LOCAL<br /></code>&#160;REMOT1&#160;&#160;&#160;&#160;GWGRP=bankg2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SECURITY=DM_PW</pre></div><a name="wp1261694"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_REMOTE<br /></code>&#160;LOCAL1&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.CENTRAL01&quot;</pre></div><p class="pBody"><a name="wp1261695"> </a>
After the required attributes have been set in the <code class="cCode">TUXCONFIG</code> and <code class="cCode">BDMCONFIG</code> files, boot the applications on <code class="cCode">LOCAL1</code> and <code class="cCode">REMOT1</code>:
</p>
<p class="pBody"><a name="wp1261696"> </a>
On <code class="cCode">LOCAL1</code>:
</p>
<a name="wp1261697"> </a><div class="pPreformatted"><pre>      &#160;&#160;&#160;&#160;&#160;dmadmin<br />      &#160;&#160;&#160;&#160;&#160;passwd LOCAL1 REMOT1<br />      &#160;&#160;&#160;&#160;&#160;Enter Local Domain Password:foo1<br />      &#160;&#160;&#160;&#160;&#160;Reenter Local Domain Password:foo1<br />      &#160;&#160;&#160;&#160;&#160;Enter Remote Domain Password:foo2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Reenter Remote Domain Password:foo2</pre></div><p class="pBody"><a name="wp1261698"> </a>
On <code class="cCode">REMOT1</code>:
</p>
<a name="wp1261699"> </a><div class="pPreformatted"><pre>      &#160;&#160;&#160;&#160;&#160;dmadmin<br />      &#160;&#160;&#160;&#160;&#160;passwd REMOT1 LOCAL1<br />      &#160;&#160;&#160;&#160;&#160;Enter Local Domain Password:foo2<br />      &#160;&#160;&#160;&#160;&#160;Reenter Local Domain Password:foo2<br />      &#160;&#160;&#160;&#160;&#160;Enter Remote Domain Password:foo1<br />      &#160;&#160;&#160;&#160;&#160;Reenter Remote Domain Password:foo1</pre></div><p class="pBody"><a name="wp1261701"> </a>
Once passwords have been created on both domains, a connection can be established and services can be invoked on the remote domain.
</p>
<h5 class="pHeading4"><a name="wp1261702"> </a>
Example 2: Setting Security to APP_PW
</h5>
<p class="pBody"><a name="wp1261703"> </a>
If the <code class="cCode">SECURITY</code> parameter in the <code class="cCode">UBBCONFIG</code> is set to <code class="cCode">APP_PW</code> or higher, then <code class="cCode">SECURITY</code> in the <code class="cCode">DMCONFIG</code> can be set to <code class="cCode">NONE</code>, <code class="cCode">APP_PW</code>, or <code class="cCode">DM_PW</code>. Because you can define multiple views of a domain in one <code class="cCode">DMCONFIG</code> file (one view per local domain definition), you can assign a different type of security mechanism to each of those views.
</p>
<a name="wp1261704"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>If <code class="cCode">SECURITY</code> is set to APP_PW for a local domain access point in the <code class="cCode">DMCONFIG</code>, then <code class="cCode">SECURITY</code> in the <code class="cCode">UBBCONFIG</code> must be set to APP_PW or higher.</td>
</tr>
</table>

<p class="pBody"><a name="wp1266803"> </a>
<a href="addomc.html#wp1261705">Listing&#160;2-15</a> shows the setting security to APP_PW for both application and domains.
</p>
<div class="pCodeTitle"><a name="wp1261705"> </a>
Listing&#160;2-15	   Setting Security to APP_PW for Both Application and Domains
</div> <a name="wp1261706"> </a><div class="pPreformatted"><pre>LOCAL1: SECURITY in UBBCONFIG set to APP_PW<br />      &#160;&#160;SECURITY in DMCONFIG set to APP_PW</pre></div><a name="wp1261707"> </a><div class="pPreformatted"><pre>REMOT1: SECURITY in UBBCONFIG set to APP_PW<br />      &#160;&#160;SECURITY in DMCONFIG set to APP_PW</pre></div><p class="pBody"><a name="wp1261709"> </a>
In this example, both <code class="cCode">LOCAL1</code> and <code class="cCode">REMOT1</code> enforce <code class="cCode">APP_PW</code> security.
</p>
<p class="pBody"><a name="wp1261710"> </a>
On the initiator (<code class="cCode">LOCAL1</code>) side, the pertinent attributes in <code class="cCode">UBBCONFIG</code> and <code class="cCode">DMCONFIG</code> are set as follows:
</p>
<a name="wp1261711"> </a><div class="pPreformatted"><pre>UBBCONFIG<br />&#160;*RESOURCES<br /> SECURITY &#160;APP_PW</pre></div><a name="wp1261712"> </a><div class="pPreformatted"><pre><code class="cCode">DMCONFIG<br />&#160;*DM_LOCAL<br /></code>&#160;LOCAL1&#160;&#160;&#160;&#160;GWGRP=bankg1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SECURITY=APP_PW</pre></div><a name="wp1261713"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_REMOTE<br /></code>&#160;REMOT1 &#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.BANK01&quot;</pre></div><p class="pBody"><a name="wp1261714"> </a>
On the responder (<code class="cCode">REMOT1</code>) side, the pertinent attributes in <code class="cCode">UBBCONFIG</code> and <code class="cCode">DMCONFIG</code> are set as follows.
</p>
<a name="wp1261715"> </a><div class="pPreformatted"><pre>UBBCONFIG<br />&#160;*RESOURCES<br /> SECURITY &#160;APP_PW</pre></div><a name="wp1261716"> </a><div class="pPreformatted"><pre><code class="cCode">DMCONFIG<br />&#160;*DM_LOCAL<br /></code>&#160;REMOT1&#160;&#160;&#160;&#160;GWGRP=bankg2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SECURITY=APP_PW</pre></div><a name="wp1261717"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_REMOTE<br /></code>&#160;LOCAL1&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.CENTRAL01&quot;</pre></div><p class="pBody"><a name="wp1261718"> </a>
After the <code class="cCode">TUXCONFIG</code> and <code class="cCode">BDMCONFIG</code> files have been created, boot the applications on <code class="cCode">LOCAL1</code> and <code class="cCode">REMOT1</code>.
</p>
<h3 class="pHeading2"><a name="wp1261719"> </a>
How to Configure Domains Access Control Lists
</h3>
<p class="pBody"><a name="wp1261720"> </a>
To set up a Domains access control list (ACL) in the <code class="cCode">DM_ACCESS_CONTROL</code> section of the <code class="cCode">DMCONFIG</code> file, you specify the name of the ACL and the remote domain access points associated with the ACL name. <a href="addomc.html#wp1266812">Table&#160;2-1</a> clarifies the procedure.
</p>
<p class="pGraphic"><a name="wp1261738"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1266812table1261721"><caption><a name="wp1266812"> </a>
Table 2-1  How to Configure Domains Access Control Lists

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1261723"> </a>
Domain ACL Field 
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1261725"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1261727"> </a>
Domains ACL name
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1261729"> </a>
The name of this ACL.
</div>
<div class="pCellBody"><a name="wp1261730"> </a>
A valid name consists of a string of 1-30 characters, inclusive. It must be printable and it may not include a colon, a pound sign, or a newline character.
</div>
<div class="pCellBody"><a name="wp1261731"> </a>
Example: <code class="cCode">ACLGRP1</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1261733"> </a>
Remote Domains list
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1261735"> </a>
The list of remote domains that are granted access in this access control list.
</div>
<div class="pCellBody"><a name="wp1261736"> </a>
A valid value in this field is a set of one or more comma-separated remote domain names. 
</div>
<div class="pCellBody"><a name="wp1261737"> </a>
Examples: <code class="cCode">REMDOM1,REMDOM2,REMDOM3</code>
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1261739"> </a>
Upon creating an ACL, you use the <code class="cCode">ACL</code> parameter in the <code class="cCode">DM_EXPORT</code> section of the <code class="cCode">DMCONFIG</code> file to restrict access to a local service exported through a particular local domain access point to just those remote domain access points associated with the ACL name (for example, <code class="cCode">ACL=ACLGRP1</code>).
</p>
<h3 class="pHeading2"><a name="wp1261741"> </a>
How to Configure ACL Policy for a Remote Domain
</h3>
<p class="pBody"><a name="wp1261742"> </a>
As the administrator, you use the following configuration parameters to set and control the ACL policy for remote domains running Oracle Tuxedo release 7.1 or later software. You set these parameters in the <code class="cCode">DM_REMOTE</code> section of the <code class="cCode">DMCONFIG</code> file.
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261746"> </a><code class="cCode">ACL_POLICY</code> (<code class="cCode">LOCAL</code> | <code class="cCode">GLOBAL</code>)</li>
<p class="pBodyRelative"><a name="wp1261747"> </a>
Specifies the access control list (ACL) policy for this remote domain access point. This parameter applies only to domain gateways of type <code class="cCode">TDOMAIN</code> running Oracle Tuxedo 7.1 or later software and domain gateways of type <code class="cCode">OSITPX</code> running Oracle Tuxedo 8.0 or later software.
</p>
<p class="pBodyRelative"><a name="wp1261748"> </a>
<code class="cCode">LOCAL</code> means that the local domain <em class="cEmphasis">replaces</em> the credential (identity) of any service request received from the remote domain <em class="cEmphasis">with</em> the principal name specified in the <code class="cCode">LOCAL_PRINCIPAL_NAME</code> parameter for this remote domain access point. <code class="cCode">GLOBAL</code> means that the local domain does not replace the credential received with a remote service request; if no credential is received with a remote service request, the local domain forwards the service request to the local service <em class="cEmphasis">as is</em> (which usually fails). If not specified, the default is <code class="cCode">LOCAL</code>.
</p>
<li><a name="wp1261749"> </a><code class="cCode">LOCAL_PRINCIPAL_NAME</code> (string)</li>
<p class="pBodyRelative"><a name="wp1261750"> </a>
The local principal name identifier (credential) assigned by the local domain to service requests received from the remote domain when the <code class="cCode">ACL_POLICY</code> parameter for this remote domain access point is set (or defaulted) to <code class="cCode">LOCAL</code>. This parameter applies only to domain gateways of type <code class="cCode">TDOMAIN</code> running Oracle Tuxedo 7.1 or later software and domain gateways of type <code class="cCode">OSITPX</code> running Oracle Tuxedo 8.0 or later software.
</p>
<p class="pBodyRelative"><a name="wp1261754"> </a>
The <code class="cCode">LOCAL_PRINCIPAL_NAME</code> parameter may contain a maximum of 511 characters (excluding the terminating NULL character). If this parameter is not specified, the local principal name defaults to the <code class="cCode">ACCESSPOINTID</code> string for this remote domain access point.
</p>
<li><a name="wp1261755"> </a><code class="cCode">CREDENTIAL_POLICY</code> (<code class="cCode">LOCAL</code> | <code class="cCode">GLOBAL</code>)</li>
<p class="pBodyRelative"><a name="wp1261756"> </a>
Specifies the credential policy for this remote domain access point. This parameter applies only to domain gateways of type <code class="cCode">TDOMAIN</code> running Oracle Tuxedo 8.0 or later software.
</p>
<p class="pBodyRelative"><a name="wp1261757"> </a>
<code class="cCode">LOCAL</code> means that the local domain removes the credential (identity) from a local service request destined for this remote domain access point. <code class="cCode">GLOBAL</code> means that the local domain does not remove the credential from a local service request destined for this remote domain access point. If not specified, the default is <code class="cCode">LOCAL</code>.
</p>
<p class="pBodyRelative"><a name="wp1261758"> </a>
Note that the <code class="cCode">CREDENTIAL_POLICY</code> parameter controls whether or not the local domain removes the credential from a local service request before sending the request to a remote domain. The <code class="cCode">ACL_POLICY</code> parameter controls whether or not the local domain replaces the credential of a service request received from a remote domain with the principal name specified in the <code class="cCode">LOCAL_PRINCIPAL_NAME</code> parameter.
</p>
</ul></div>
<p class="pBody"><a name="wp1261759"> </a>
In the following example, the connection for the <code class="cCode">REMOT1</code> access point is configured for global ACL in the <code class="cCode">DMCONFIG</code> file, meaning that the domain gateway for the <code class="cCode">LOCAL1</code> access point passes client requests <em class="cEmphasis">from</em> the <code class="cCode">REMOT1</code> access point without change. For global ACL, the LOCAL_PRINCIPAL_NAME entry for the <code class="cCode">REMOT1</code> access point is ignored. Also, because CREDENTIAL_POLICY=GLOBAL, the domain gateway for the <code class="cCode">LOCAL1</code> access point does <em class="cEmphasis">not</em> remove the credential from any local service request destined for the <code class="cCode">REMOT1</code> access point.
</p>
<a name="wp1261760"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_LOCAL<br /></code>LOCAL1&#160;&#160;&#160;GWGRP=bankg1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SECURITY=DM_PW</pre></div><a name="wp1261761"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_REMOTE<br /></code>REMOT1&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.BANK01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACL_POLICY=GLOBAL<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CREDENTIAL_POLICY=GLOBAL<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LOCAL_PRINCIPAL_NAME=&quot;BA.BANK01.BOB&quot;</pre></div><h3 class="pHeading2"><a name="wp1261762"> </a>
How to Configure Domains Link-Level Encryption
</h3>
<p class="pBody"><a name="wp1261763"> </a>
Domains link-level encryption (LLE) establishes data privacy for messages moving over the network links that connect the local domain gateway to the remote domain gateway. There are three levels of link-level encryption security: 0-bit (no encryption), 56-bit (International), and 128-bit (United States and Canada).
</p>
<p class="pBody"><a name="wp1261764"> </a>
To set up Domains link-level encryption on domain gateway links, follow these steps.
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1261765"> </a>Open the <code class="cCode">DMCONFIG</code> file with a text editor and add the following lines to the <code class="cCode">DM_TDOMAIN</code> section.</li>
<a name="wp1261766"> </a><div class="pPreformattedRelative"><pre><code class="cCode">*DM_TDOMAIN<br />LOCAL1</code> &#160;&#160;NWADDR=&#8220;<code class="cCode">newyork.acme.com:65431</code>&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MINENCRYPTBITS=<code class="cCodeEmphasis">min<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</code>MAXENCRYPTBITS=<code class="cCodeEmphasis">max</code></pre></div><a name="wp1261767"> </a><div class="pPreformattedRelative"><pre><code class="cCode">REMOT1</code> &#160;&#160;NWADDR=&#8220;<code class="cCode">albany.acme.com:4051</code>&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MINENCRYPTBITS=<code class="cCodeEmphasis">min<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</code>MAXENCRYPTBITS=<code class="cCodeEmphasis">max</code></pre></div><li><a name="wp1261768"> </a>Load the configuration by running <code class="cCode">dmloadcf(1)</code>. The <code class="cCode">dmloadcf</code> command parses <code class="cCode">DMCONFIG</code> and loads the binary <code class="cCode">BDMCONFIG</code> file to the location referenced by the <code class="cCode">BDMCONFIG</code> variable.</li>
</ol></div>
<p class="pBody"><a name="wp1261769"> </a>
In the preceding example, when <code class="cCode">tmboot(1)</code> starts the application, each domain gateway reads the <code class="cCode">BDMCONFIG</code> file to access various parameters, including <code class="cCode">MINENCRYPTBITS</code> and <code class="cCode">MAXENCRYPTBITS</code>, and propagates those parameters to its local and remote domains. When the local domain is establishing a network link with a remote domain, the two domains negotiate the key size until they agree on the largest key size supported by both.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1261771"> </a>
Setting Up Connections in a Domains Configuration
</h2><p class="pBody"><a name="wp1261772"> </a>
You can specify the conditions under which a local domain gateway tries to establish a connection to a remote domain. To specify these conditions, assign a value to the <code class="cCode">CONNECTION_POLICY</code> parameter in the <code class="cCode">DM_LOCAL</code> section of the <code class="cCode">DMCONFIG</code> file. You can select any of the following connection policies:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261774"> </a><span class="cHyperlink">
<a href="addomc.html#wp1261794">Connect when a local client program requests a remote service (</a></span>ON_DEMAND)</li>
<li><a name="wp1261776"> </a><span class="cHyperlink">
<a href="addomc.html#wp1261803">Connect at boot time (</a></span>ON_STARTUP)</li>
<li><a name="wp1261778"> </a><span class="cHyperlink">
<a href="addomc.html#wp1261816">Accept incoming connections but do not initiate a connection automatically (</a></span>INCOMING_ONLY)</li>
</ul></div>
<p class="pBody"><a name="wp1261782"> </a>
For Oracle Tuxedo release 8.1 or later, you can also define the connection policy on a per remote domain basis in the <code class="cCode">DM_TDOMAIN</code> section of the <code class="cCode">DMCONFIG</code> file. For details, see <a href="addom.html#wp1257806">How To Configure Your Connection Policy</a>.
</p>
<p class="pBody"><a name="wp1261786"> </a>
For connection policies of <code class="cCode">ON_STARTUP</code> and <code class="cCode">INCOMING_ONLY</code>, Dynamic Status is invoked. Dynamic Status, described in <a href="addom.html#wp1257852">How Connection Policy Determines Availability of Remote Services</a>, is a Oracle Tuxedo Domains capability that checks and reports the status of remote services.
</p>
<h3 class="pHeading2"><a name="wp1261794"> </a>
How to Request Connections for Client Demands (ON_DEMAND Policy)
</h3>
<p class="pBody"><a name="wp1261795"> </a>
A connection policy of <code class="cCode">ON_DEMAND</code> (<code class="cCode">CONNECTION_POLICY=ON_DEMAND</code>) means that a connection is attempted only when either a local client requests a remote service or an administrative <code class="cCode">dmadmin connect</code> command is run. <code class="cCode">ON_DEMAND</code> is the default connection policy setting.
</p>
<p class="pBody"><a name="wp1261796"> </a>
<a href="addomc.html#wp1261797">Figure&#160;2-5</a> shows how connections are attempted and made by a domain gateway for which the connection policy is <code class="cCode">ON_DEMAND</code>.
</p>
<div class="pFigureTitle"><a name="wp1261797"> </a>
Figure&#160;2-5  Connections Made with an ON_DEMAND Policy
</div>

 
 <p class="pGraphic"><a name="wp1261801"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/graphic4.gif" alt="Connections Made with an ON_DEMAND Policy" id="wp1261799"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1261803"> </a>
How to Request Connections at Boot Time (ON_STARTUP Policy)
</h3>
<p class="pBody"><a name="wp1261804"> </a>
A connection policy of <code class="cCode">ON_STARTUP</code> (<code class="cCode">CONNECTION_POLICY=ON_STARTUP</code>) means that a domain gateway attempts to establish a connection with its remote domains when the domain gateway server is initialized. By default, the <code class="cCode">ON_STARTUP</code> connection policy retries failed connections every 60 seconds, but you can specify a different value for this interval, as explained in <a href="addomc.html#wp1261824">How to Configure the Connection Retry Interval for ON_STARTUP Only</a>.
</p>
<p class="pBody"><a name="wp1261808"> </a>
<a href="addomc.html#wp1261809">Figure&#160;2-6</a> shows how connections are attempted and made by a domain gateway for which the connection policy is <code class="cCode">ON_STARTUP</code>.
</p>
<div class="pFigureTitle"><a name="wp1261809"> </a>
Figure&#160;2-6  Connections Made with an ON_STARTUP Policy
</div>

 
 <p class="pGraphic"><a name="wp1261813"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/graphic5.gif" alt="Connections Made with an ON_STARTUP Policy" id="wp1261811"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1261816"> </a>
How to Limit Connections to Incoming Messages Only (INCOMING_ONLY Policy)
</h3>
<p class="pBody"><a name="wp1261817"> </a>
A connection policy of <code class="cCode">INCOMING_ONLY</code> (<code class="cCode">CONNECTION_POLICY=INCOMING_ONLY</code>) means that a domain gateway does not try to establish a connection to remote domains upon starting. <a href="addomc.html#wp1261818">Figure&#160;2-7</a> shows how connections are attempted and made by a domain gateway for which the connection policy is <code class="cCode">INCOMING_ONLY</code>. 
</p>
<div class="pFigureTitle"><a name="wp1261818"> </a>
Figure&#160;2-7  Connections Made with an INCOMING_ONLY Policy (Accept Incoming Connections)
</div>

 
 <p class="pGraphic"><a name="wp1261822"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/graphic6.gif" alt="Connections Made with an INCOMING_ONLY Policy (Accept Incoming Connections)" id="wp1261820"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1261824"> </a>
How to Configure the Connection Retry Interval for ON_STARTUP Only
</h3>
<p class="pBody"><a name="wp1261825"> </a>
When the <code class="cCode">CONNECTION_POLICY</code> parameter is set to <code class="cCode">ON_STARTUP</code>, automatic connection retry processing is available. Connection retry processing enables a domain gateway to retry, automatically, a failed attempt to connect to a remote domain. As the administrator, you can control the frequency of automatic connection attempts. To do so, specify the length (in seconds) of the interval during which the gateway should wait before trying, again, to establish a connection. You can specify the retry interval by setting the <code class="cCode">RETRY_INTERVAL</code> parameter as follows:
</p>
<a name="wp1261826"> </a><div class="pPreformatted"><pre><code class="cCode">RETRY_INTERVAL=</code><code class="cCodeEmphasis">number_of_seconds</code></pre></div><p class="pBody"><a name="wp1261827"> </a>
You can specify between 0 and 2147483647 seconds. If the connection policy is <code class="cCode">ON_STARTUP</code> and you do not specify a value for the <code class="cCode">RETRY_INTERVAL</code> parameter, a default of 60 seconds is used.
</p>
<p class="pBody"><a name="wp1261828"> </a>
The <code class="cCode">RETRY_INTERVAL</code> parameter is valid only when the connection policy is <code class="cCode">ON_STARTUP</code>. For the other connection policies (<code class="cCode">ON_DEMAND</code> and <code class="cCode">INCOMING_ONLY</code>), connection retry processing is not available.
</p>
<h3 class="pHeading2"><a name="wp1261829"> </a>
How to Configure the Maximum Retry Number
</h3>
<p class="pBody"><a name="wp1261830"> </a>
You indicate the number of times that a domain gateway tries to establish connections to remote domains before quitting by assigning a value to the <code class="cCode">MAXRETRY</code> parameter: the minimum value is 0; the default and maximum value is the value of the <code class="cCode">MAXLONG</code> parameter (2147483647).
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1261831"> </a>If you set <code class="cCode">MAXRETRY=0</code>, connection retry processing is turned off. The local domain gateway does not attempt to connect to the remote domain gateway(s) automatically.</li>
<li><a name="wp1261832"> </a>If you set<code class="cCode"> MAXRETRY=</code><code class="cCodeEmphasis">number</code>, the gateway tries to establish a connection the specified number of times before quitting.</li>
<li><a name="wp1261833"> </a>If you set <code class="cCode">MAXRETRY=MAXLONG</code>, the default setting, connection retry processing is repeated up to 2147483647 times or until a connection is established.</li>
</ul></div>
<p class="pBody"><a name="wp1261834"> </a>
The <code class="cCode">MAXRETRY</code> parameter is valid only when the connection policy is <code class="cCode">ON_STARTUP</code>. For the other connection policies (<code class="cCode">ON_DEMAND</code> and <code class="cCode">INCOMING_ONLY</code>), connection retry processing is not available.
</p>
<p class="pBody"><a name="wp1261835"> </a>
<a href="addomc.html#wp1261838">Table&#160;2-2</a> presents examples of how <code class="cCode">MAXRETRY</code> and <code class="cCode">RETRY_INTERVAL</code> affect automatic connection retry processing.
</p>
<p class="pGraphic"><a name="wp1261857"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1261838table1261836"><caption><a name="wp1261838"> </a>
Table 2-2  Example Settings of the MAXRETRY and RETRY_INTERVAL Parameters

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1261842"> </a>
If You Set...
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1261844"> </a>
Then...
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1261846"> </a>
<code class="cCode">CONNECTION_POLICY=ON_STARTUP<br />MAXRETRY=3<br />RETRY_INTERVAL=30</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1261848"> </a>
The local domain gateway makes three attempts to establish a connection, at 30 seconds intervals, before quitting.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1261850"> </a>
<code class="cCode">CONNECTION_POLICY=ON_STARTUP<br />MAXRETRY=0</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1261852"> </a>
The local domain gateway attempts to establish a connection at initialization time but does not retry if the first attempt fails.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1261854"> </a>
<code class="cCode">CONNECTION_POLICY=ON_STARTUP<br />RETRY_INTERVAL=30</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1261856"> </a>
The domain gateway attempts to establish a connection every 30 seconds until a connection is established.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1261858"> </a>
Example of Coding Connection Policies Between Domains
</h3>
<p class="pBody"><a name="wp1261859"> </a>
Because domains involved in a Domains configuration work independently of one another, any combination of connection policies is allowed in a Domains configuration. However, not every connection policy combination is practical. In most cases, for example, configuring each of two interoperating domains with a connection policy of <code class="cCode">ON_STARTUP</code> does not make much sense.
</p>
<p class="pBody"><a name="wp1261860"> </a>
The following configuration example is a practical connection policy combination. In this example, <code class="cCode">LOCAL1</code> is configured for <code class="cCode">ON_STARTUP</code> in the local <code class="cCode">DMCONFIG</code> file, and <code class="cCode">REMOT1</code> is configured for <code class="cCode">INCOMING_ONLY</code> in the remote <code class="cCode">DMCONFIG</code> file.
</p>
<p class="pBody"><a name="wp1261861"> </a>
In local <code class="cCode">DMCONFIG</code> file:
</p>
<a name="wp1261862"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_LOCAL<br /></code>LOCAL1&#160;&#160;&#160;&#160;GWGRP=bankg1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br /><code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=ON_STARTUP<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MAXRETRY=5<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RETRY_INTERVAL=100</code></pre></div><a name="wp1261863"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_REMOTE<br /></code>REMOT1 &#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.BANK01&quot;</pre></div><p class="pBody"><a name="wp1261864"> </a>
In remote <code class="cCode">DMCONFIG</code> file:
</p>
<p class="pBody"><a name="wp1261865"> </a>
<code class="cCode">*DM_LOCAL<br /></code>REMOT1&#160;&#160;&#160;&#160;GWGRP=bankg2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.BANK01&quot;<br /><code class="cCode">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_POLICY=INCOMING_ONLY</code>
</p>
<a name="wp1261866"> </a><div class="pPreformatted"><pre><code class="cCode">*DM_REMOTE<br /></code>LOCAL1&#160;&#160;&#160;&#160;TYPE=TDOMAIN<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ACCESSPOINTID=&quot;BA.CENTRAL01&quot;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CONNECTION_PRINCIPAL_NAME=&quot;BA.CENTRAL01&quot;</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1261868"> </a>
Controlling Connections in a Domains Configuration
</h2><p class="pBody"><a name="wp1261869"> </a>
As the administrator, you can control the number of connections you want to establish between domains. You can also break the connections between local and remote domains.
</p>
<h3 class="pHeading2"><a name="wp1261871"> </a>
How to Establish Connections Between Domains
</h3>
<p class="pBody"><a name="wp1261872"> </a>
To establish a connection between a local domain gateway and a remote domain, run the <code class="cCode">dmadmin</code> command with the <code class="cCode">connect</code> (<code class="cCode">co</code>) subcommand:
</p>
<p class="pBody"><a name="wp1261873"> </a>
prompt&gt; <code class="cCode">dmadmin co -d </code><code class="cCodeEmphasis">local_domain_access_point_name</code>
</p>
<p class="pBody"><a name="wp1261874"> </a>
By default, connections are established between the local domain you have specified and all remote domains configured for the local gateway. If you want to establish a connection to only one remote domain, specify that domain on the command line with the <code class="cCode">-R</code> option:
</p>
<p class="pBody"><a name="wp1261875"> </a>
prompt&gt; <code class="cCode">dmadmin co -d </code><code class="cCodeEmphasis">local_domain_access_point_name</code><code class="cCode"> <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-R </code><code class="cCodeEmphasis">remote_domain_access_point_name</code>
</p>
<p class="pBody"><a name="wp1261876"> </a>
If a connection attempt fails and the connection policy is <code class="cCode">ON_STARTUP</code> with connection retry processing turned on, repeated attempts to connect (via connection retry processing) are made.
</p>
<h3 class="pHeading2"><a name="wp1261877"> </a>
How to Break Connections Between Domains
</h3>
<p class="pBody"><a name="wp1261878"> </a>
To break a connection between a local gateway and a remote domain (making sure that the gateway does not try to re-establish the connection through automatic connection retry processing), run the <code class="cCode">dmadmin</code> command with the <code class="cCode">disconnect</code> (<code class="cCode">dco</code>) subcommand:
</p>
<p class="pBody"><a name="wp1261879"> </a>
prompt&gt; <code class="cCode">dmadmin dco -d </code><code class="cCodeEmphasis">local_domain_access_point_name</code>
</p>
<p class="pBody"><a name="wp1261880"> </a>
By default, all remote domains configured for the local gateway are disconnected. If you want to end the connection to only one remote domain, specify that domain on the command line with the <code class="cCode">-R </code>option:
</p>
<p class="pBody"><a name="wp1261881"> </a>
prompt&gt; <code class="cCode">dmadmin dco -d </code><code class="cCodeEmphasis">local_domain_access_point_name</code><code class="cCode"> <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-R </code><code class="cCodeEmphasis">remote_domain_access_point_name</code>
</p>
<p class="pBody"><a name="wp1261882"> </a>
Automatic connection retry processing is stopped by this command, regardless of whether there are any active connections when the command is run.
</p>
<h3 class="pHeading2"><a name="wp1261883"> </a>
How to Report on Connection Status
</h3>
<p class="pBody"><a name="wp1261884"> </a>
Using the <code class="cCode">dmadmin printdomain</code> command, you can generate a report on connection status and the connections being retried. The <code class="cCode">connect</code> command reports whether a connection attempt has succeeded. The <code class="cCode">printdomain</code> command prints information about the specified local domain, including a list of remote domains, a list of remote domains to which it is connected, and a list of remote domains to which it is trying to establish connections.
</p>
<p class="pBody"><a name="wp1261885"> </a>
The following example shows a <code class="cCode">dmadmin</code> session in which the <code class="cCode">printdomain</code> command is issued (in its abbreviated form, <code class="cCode">pd</code>) for a local domain access point named <code class="cCode">LOCAL1</code>.
</p>
<a name="wp1261886"> </a><div class="pPreformatted"><pre>prompt&gt; dmadmin<br />dmadmin - Copyright ...<br />.<br />.<br />.<br />pd -d LOCAL1<br />Local domain :LOCAL1<br />  Connected domains:<br />  Domainid:  REMOT1<br />  Disconnected domains being retried:<br />  Domainid: REMOT2</pre></div><a name="wp1261887"> </a><div class="pPreformatted"><pre>dco -d LOCAL1 -R REMOT1<br />Operation completed successfully. Use printdomain(pd) to obtain results.</pre></div><a name="wp1261888"> </a><div class="pPreformatted"><pre>dco -d LOCAL1 -R REMOT2<br />Operation completed successfully. Use printdomain(pd) to obtain results.</pre></div><a name="wp1261889"> </a><div class="pPreformatted"><pre>co -d LOCAL1 -R REMOT1<br />Operation completed successfully. Use printdomain(pd) to obtain results.</pre></div><a name="wp1261890"> </a><div class="pPreformatted"><pre>pd -d LOCAL1<br />Local domain :LOCAL1<br />  Connected domains:<br />  Domainid: REMOT1</pre></div><p class="pBody"><a name="wp1261891"> </a>
In this example, the remote domain access point names (<code class="cCode">REMOT1</code>, <code class="cCode">REMOT2</code>) and their <code class="cCode">DOMAINID</code>&#8212;<code class="cCode">ACCESSPOINTID</code>&#8212;names (<code class="cCode">REMOT1</code>, <code class="cCode">REMOT2</code>) are the same, as defined in the <code class="cCode">DM_REMOTE</code> section of the <code class="cCode">DMCONFIG</code> file, to keep the example simple.
</p>
<h3 class="pHeading2"><a name="wp1265410"> </a>
How to Initiate Domain Connection Events
</h3>
<p class="pBody"><a name="wp1265412"> </a>
Domain connection events are generated by default when configuration or connection status changes occur between two or more domains; however, you must subscribe to a domain connection event in order to display/output warning or error messages.
</p>
<p class="pBody"><a name="wp1265413"> </a>
Tuxedo generates the following four domain connection events:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1265414"> </a><code class="cCode">.SysConnectionSuccess</code> - Connection successfully established</li>
<li><a name="wp1265415"> </a><code class="cCode">.SysConnectionConfig </code>- Connection configuration has changed. The Connection configuration changed event may happen when the following configuration parameters change between two domains:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1265416"> </a><code class="cCode">CONNECTION_POLICY</code></li>
<li><a name="wp1265417"> </a><code class="cCode">CMPLIMIT</code></li>
<li><a name="wp1265418"> </a><code class="cCode">MINENCRYPTBITS</code></li>
<li><a name="wp1265419"> </a><code class="cCode">MAXENCRYPTBITS</code></li>
<li><a name="wp1265420"> </a><code class="cCode">RETRY_INTERVAL</code></li>
<li><a name="wp1265421"> </a><code class="cCode">MAXRETRY</code></li>
<li><a name="wp1265422"> </a><code class="cCode">DMKEEPALIVE</code></li>
<li><a name="wp1265423"> </a><code class="cCode">DMKEEPALIVEWAIT</code></li>
<li><a name="wp1265424"> </a><code class="cCode">TCPKEEPALIVE</code></li>
<p class="pBodyRelative"><a name="wp1265425"> </a>
When several parameters are changed in one operation (<code class="cCode">DMMIB</code> or<code class="cCode"> dmadmin</code>), only one event is generated. 
</p>
</ul></div>
<li><a name="wp1265426"> </a><code class="cCode">.SysConnectionDropped</code> - Connection has dropped. The <code class="cCode">.SysConnectionDropped</code> event must also indicate the reason for the drop. There are three specific reasons why a connection drop can occur and each of them must be appended to the INFO message. They are:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1265427"> </a><code class="cCode">LDOM</code> issued disconnect</li>
<li><a name="wp1265436"> </a><code class="cCode">RDOM</code> issued disconnect</li>
<li><a name="wp1265437"> </a>Unknown connection loss</li>
</ul></div>
<li><a name="wp1265438"> </a><code class="cCode">.SysConnectionFailed</code> - Connection is unsuccessful. The <code class="cCode">.SysConnectionFailed</code> event also indicates the reason for failure. There can be several reasons for why a failure and all must be appended to the INFO message:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1265439"> </a>Socket Failure</li>
<li><a name="wp1265440"> </a>Authentication Failure</li>
<li><a name="wp1265441"> </a>Unconfigured RDOM</li>
</ul></div>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1261893"> </a>
Configuring Domains Link-Level Failover and Keepalive
</h2><p class="pBody"><a name="wp1261894"> </a>
Domains link-level failover is a mechanism that ensures that an alternate network link becomes active when a primary link fails. Domains keepalive is a mechanism that keeps interdomain connections open through firewalls during periods of inactivity and enables quick detection of connection failures. Domains keepalive is available in Oracle Tuxedo release 8.1 or later.
</p>
<p class="pBody"><a name="wp1253977"> </a>
For a description of Domains link-level failover, see <a href="addom.html#wp1257891">How to Configure Domains Link-Level Failover</a>. For a description of Domains keepalive, see <a href="addom.html#wp1257904">Specifying Domains Keepalive</a>.
</p>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="addomc.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="addom.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="adcorb.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
