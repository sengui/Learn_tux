<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/notify/fm/int_samp.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:19:11" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Building the Introductory Sample Application</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Using the CORBA Notification Service
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="cos_apps.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="adv_samp.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/notify.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1074467"> </a>
Building the Introductory Sample Application
</h1>
<p class="pBody"><a name="wp1073066"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1069374"> </a><a href="int_samp.html#wp1071464">Overview</a></li>
<li><a name="wp1069378"> </a><a href="int_samp.html#wp1051503">Building and Running the Introductory Sample Application</a></li>
</ul></div>
<a name="wp1074887"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB were deprecated in Tuxedo 8.1 and are no longer supported. All Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB text references, associated code samples, should only be used to help implement/run third party Java ORB libraries, and for programmer reference only.</td>
</tr>
</table>

<a name="wp1074888"> </a><table class="Note">
<tr>
<td valign="top"><b class="texthide">Note:</b></td>
<td>Technical support for third party CORBA Java ORBs should be provided by their respective vendors. Oracle Tuxedo does not provide any technical support or documentation for third party CORBA Java ORBs.</td>
</tr>
</table>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1071464"> </a>
Overview
</h2><p class="pBody"><a name="wp1065893"> </a>
The Introductory sample applications simulate a newsroom environment in which a news reporter posts a story and a news subscriber consumes the story. 
</p>
<p class="pBody"><a name="wp1069186"> </a>
One implementation of the Introductory sample application is provided: the C++ programming language that uses the Oracle Simple Events application programming interface (API). The Introductory sample application consists of the Reporter and Subscriber applications and the Notification Service. The Reporter application implements a client application that prompts the user to enter news articles, and then posts the news articles as events to the Oracle Tuxedo CORBA Notification Service. The Subscriber application implements a joint client/server application that acts as client when it subscribes and unsubscribes for events, and acts as a server when it receives events. To receive events, the subscriber implements a callback object which is invoked by the Notification Service when an event needs to be delivered.
</p>
<p class="pBody"><a name="wp1048945"> </a>
The Introductory sample application shows the simplest usage of the Notification Service. It demonstrates how to use the Oracle Simple Events API, the CosNotification API, transient subscriptions, and transient object references. It does not demonstrate the use of persistent subscriptions or data filtering. For a sample application that uses persistent subscriptions and data filtering, see <a href="adv_samp.html">Building the Advanced Sample Application.</a> 
</p>
<p class="pBody"><a name="wp1048951"> </a>
This Introductory sample application provides two executables (see <a href="int_samp.html#wp1048959">Figure&#160;5-1</a>):
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1048953"> </a>A Reporter application that posts events to the Notification Service. It is a client without callback capability.</li>
<li><a name="wp1048955"> </a>A Subscriber application that subscribes to the Notification Service and receives events. The subscriber is a joint client/server that acts as a client when it subscribes to events and acts as a server when it receives events.</li>
<div class="pFigureTitle"><a name="wp1048959"> </a>
Figure&#160;5-1  Introductory Sample Application Components
</div>

 
 <p class="pGraphic"><a name="wp1050200"> </a>
<br />
<img src="wwimages/evt_intr.gif" height="216" width="456" alt="Introductory Sample Application Components" id="wp1050201"/><br />

</p>
</ul></div>
<p class="pBody"><a name="wp1070465"> </a>
The event poster, the Reporter application, uses the structured event <code class="cCode">domain_name</code>, <code class="cCode">type_name</code>, and <code class="cCode">filterable_data</code> fields to construct the event. The domain name defines the industry. In this application, domain_name is set to &#8220;News&#8221;. The <code class="cCode">type_name</code> defines the kind of event in the industry and it is set to the category of news story (for example, &#8220;Sports&#8221;). The application user specifies this value. In the <code class="cCode">filterable_data</code> fields, a field named &#8220;Story&#8221; is added, which contains the text of the news story being posted. This text is also specified by the application user.
</p>
<p class="pBody"><a name="wp1070466"> </a>
The Subscriber application uses the structured event <code class="cCode">domain_name</code> and <code class="cCode">type_name</code> fields to create a subscription to the Notification Service. The subscription defines the <code class="cCode">domain_name</code> as a fixed string with the content of &#8220;News&#8221;. At run time, the Subscriber application queries the user for the &#8220;News Category&#8221; and uses the input to define the <code class="cCode">type_name</code> field in the subscription. Obviously, the users of both applications, the reporter and the subscriber, must collaborate on the &#8220;News Category&#8221; string for the subscription to match an event, otherwise, no events will be delivered to the subscriber. The subscription does not do any checking of the <code class="cCode">filterable_data</code> field, but rather assumes that the body of the story will be a string, and that the story will be in the first Named/Value pair in the <code class="cCode">filterable_data</code> field of a structured event. 
</p>
<p class="pBody"><a name="wp1070467"> </a>
To post events, the Reporter application uses the <code class="cCode">push_structured_event</code> method to push news events to the Notification Service. For each event, the Reporter application queries the user for a &#8220;News category&#8221; (for example, &#8220;Sports&#8221;) and a story (a multiple-line text string).
</p>
<p class="pBody"><a name="wp1070468"> </a>
To subscribe to news events, the Subscriber application invokes the Notification Service to subscribe to news events. For each subscription, the Subscriber application queries the user for a &#8220;News category&#8221; (for example, &#8220;Sports&#8221;). The Subscriber application also implements a callback object (via the NewsConsumer_i servant class) which is used to receive and process news events. When the Subscriber subscribes, it gives the Notification Service a reference to this callback object. When a matching event occurs; that is, when the Reporter posts an event with a &#8220;News category&#8221; that matches the news category of the subscription, the Notification Service invokes the <code class="cCode">push_structured_event</code> method on the callback object to deliver the event to the callback object in the subscriber. This method prints out the event, invokes the <code class="cCode">unsubscribe</code> method on the Notification Service to cancel the subscription, and shuts down the Subscriber. For simplicity, the <code class="cCode">push_structured_event</code> method assumes that the <code class="cCode">domain_name</code>, <code class="cCode">type_name</code>, <code class="cCode">length</code>, and <code class="cCode">name</code> field match and the story is in the <code class="cCode">value</code> field. 
</p>
<a name="wp1048984"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The &#8220;News category&#8221; is just a string that the Reporter user and the Subscriber user agree on. There are no fixed categories in this sample. Therefore, both the Reporter user and the Subscriber user must type the same string when prompted for a category (including case and white space).</td>
</tr>
</table>

<p class="pBody"><a name="wp1048990"> </a>
To run this sample, you must start at least one Reporter application and at least one Subscriber application; however, you may run multiple Reporters and Subscribers. Events posted by any Reporter will be delivered to all matching Subscribers (based on &#8220;News category&#8221;). 
</p>
<p class="pBody"><a name="wp1050557"> </a>
Also, be sure to start any subscribers before posting events; otherwise, the events will be lost.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1051503"> </a>
Building and Running the Introductory Sample Application
</h2><p class="pBody"><a name="wp1069898"> </a>
To build and run the Introductory sample application, you must perform these steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1051589"> </a>Verify that the <code class="cCode">&quot;TUXDIR&quot;</code> environment variable are set to the correct directory path. </li>
<li><a name="wp1074693"> </a>Unset <code class="cCode">&#8220;JAVA_HOME&#8221;</code></li>
<li><a name="wp1051720"> </a>Copy the files for the Introductory sample application into a work directory. </li>
<li><a name="wp1051730"> </a>Change the protection attributes on the files to grant write and execute access.</li>
<li><a name="wp1051737"> </a>For UNIX, ensure the <code class="cCode">make</code> file is in your path. For Microsoft Windows, ensure the <code class="cCode">nmake</code> file is in your path</li>
<li><a name="wp1051606"> </a>Set the application environment variables.</li>
<li><a name="wp1067874"> </a>Build the sample.</li>
<li><a name="wp1070571"> </a>Boot the system.</li>
<li><a name="wp1070572"> </a>Run the Subscriber and Reporter applications.</li>
<li><a name="wp1070596"> </a>Shut down the system.</li>
<li><a name="wp1051680"> </a>Restore the directory to its original state.</li>
</ol></div>
<p class="pBody"><a name="wp1067892"> </a>
These steps are described in detail in the following sections.
</p>
<h3 class="pHeading2"><a name="wp1054830"> </a>
Verifying the Settings of the Environment Variables
</h3>
<p class="pBody"><a name="wp1054831"> </a>
Before you build and run the Introductory sample application, you need to ensure that the <code class="cCode">TUXDIR</code> environment variable is set on your system. In most cases, this environment variable is set as part of the installation procedure. However, you need to check the environment variables to ensure they reflect correct information.
</p>
<p class="pBody"><a name="wp1070770"> </a>
<a href="int_samp.html#wp1070774">Table&#160;5-1</a> lists the environment variables required to run the Introductory sample application.
</p>
<p class="pGraphic"><a name="wp1070799"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1070774table1070771"><caption><a name="wp1070774"> </a>
Table 5-1  Required Environment Variables for the Introductory Sample Application

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1070778"> </a>
Environment Variable
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1070780"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1070782"> </a>
<code class="cCode">TUXDIR</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1070785"> </a>
The directory path where you installed the Oracle Tuxedo software. For example:
</div>
<div class="pCellBody"><a name="wp1070786"> </a>
<b class="cBold">Windows</b>
</div>
<div class="pCellBody"><a name="wp1070787"> </a>
<code class="cCode">TUXDIR=c:\tuxdir</code>
</div>
<div class="pCellBody"><a name="wp1070788"> </a>
<b class="cBold">UNIX</b>
</div>
<div class="pCellBody"><a name="wp1070789"> </a>
<code class="cCode">TUXDIR=/usr/local/tuxdir</code>
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1070867"> </a>
To verify that the information for the environment variables defined during installation is correct, perform the following steps:
</p>
<p class="pBody"><a name="wp1054838"> </a>
<b class="cBold">Windows</b>
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1054839"> </a>From the Start menu, select Settings.</li>
<li><a name="wp1054840"> </a>From the Settings menu, select the Control Panel.</li>
<p class="pBodyRelative"><a name="wp1054841"> </a>
The Control Panel appears.
</p>
<li><a name="wp1054842"> </a>Click the System icon.</li>
<p class="pBodyRelative"><a name="wp1054843"> </a>
The System Properties window appears.
</p>
<li><a name="wp1054844"> </a>Click the Environment tab.</li>
<p class="pBodyRelative"><a name="wp1054845"> </a>
The Environment page appears.
</p>
<li><a name="wp1054846"> </a>Check the setting for <code class="cCode">TUXDIR</code></li>
</ol></div>
<p class="pBody"><a name="wp1054847"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1054848"> </a>
<code class="cCode">ksh prompt&gt;printenv TUXDIR</code>
</p>
<p class="pBody"><a name="wp1054850"> </a>
To change the settings, perform the following steps:
</p>
<p class="pBody"><a name="wp1054851"> </a>
<b class="cBold">Windows</b>
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1054852"> </a>On the Environment page in the System Properties window, click the environment variable you want to change.</li>
<li><a name="wp1054853"> </a>Enter the correct information for the environment variable in the Value field.</li>
<li><a name="wp1054854"> </a>Click OK to save the changes.</li>
</ol></div>
<p class="pBody"><a name="wp1054855"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1070918"> </a>
<code class="cCode">ksh prompt&gt;export TUXDIR=</code><code class="cCodeEmphasis">directorypath</code>
</p>
<p class="pBody"><a name="wp1072119"> </a>
Or
</p>
<p class="pBody"><a name="wp1072120"> </a>
csh&gt; setenv TUXDIR=<code class="cCodeEmphasis">directorypath</code>
</p>
<h3 class="pHeading2"><a name="wp1054826"> </a>
Copying the Files for the Introductory Sample Application into a Work Directory
</h3>
<p class="pBody"><a name="wp1026042"> </a>
You need to copy the files for the Introductory sample application and files in the common directory into a work directory on your local machine. 
</p>
<a name="wp1072696"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The application directory and the common directory must be copied to the same parent directory.</td>
</tr>
</table>

<p class="pBody"><a name="wp1072231"> </a>
The files are located in the following directories:
</p>
<p class="pBody"><a name="wp1026044"> </a>
<b class="cBold">Windows</b>
</p>
<p class="pBody"><a name="wp1026045"> </a>
For the C++ Introductory sample:<br /><code class="cCodeEmphasis">drive:\tuxdir</code><code class="cCode">\samples\corba\notification\introductory_simple_cxx<br /></code><code class="cCodeEmphasis">drive:\tuxdir</code><code class="cCode">\samples\corba\notification\common</code>
</p>
<p class="pBody"><a name="wp1072204"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1070961"> </a>
For the C++ Introductory sample:<br /><code class="cCodeEmphasis">/usr/local/tuxdir</code><code class="cCode">/samples/corba/notification/<br />introductory_simple_cxx<br /></code><code class="cCodeEmphasis">/usr/local/tuxdir</code><code class="cCode">/samples/corba/notification/common</code>
</p>
<p class="pBody"><a name="wp1068771"> </a>
You use the files listed in <a href="int_samp.html#wp1068888">Table&#160;5-2</a> and <a href="int_samp.html#wp1071036">Table&#160;5-3</a> to build and run the C++ Introductory sample application, which is implemented using the Oracle Simple Events API.
</p>
<p class="pGraphic"><a name="wp1075008"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1068888table1068885"><caption><a name="wp1068888"> </a>
Table 5-2  <span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">Files Located in the introductory_sample_c++ Directory&#160;</span>

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1068892"> </a>
File 
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1068894"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069218"> </a>
<code class="cCode">Readme.txt </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069220"> </a>
Describes the Introductory sample application and provides instructions for setting up the environment and building and running the application.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069222"> </a>
<code class="cCode">setenv.cmd</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069224"> </a>
Sets the environment for Microsoft Windows systems.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069226"> </a>
<code class="cCode">setenv.ksh</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069228"> </a>
Sets the environment for UNIX systems.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069230"> </a>
<code class="cCode">makefile.nt </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069232"> </a>
Makefile for Microsoft Windows systems.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069234"> </a>
<code class="cCode">makefile.mk </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069236"> </a>
Makefile for UNIX systems.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069238"> </a>
<code class="cCode">makefile.inc</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069240"> </a>
Common makefile used by the <code class="cCode">makefile.nt</code> and the <code class="cCode">makefile.mk</code> files.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069242"> </a>
<code class="cCode">Reporter.cpp</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069244"> </a>
Code for the reporter.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069246"> </a>
<code class="cCode">Subscriber.cpp</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069248"> </a>
Code for the subscriber.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069250"> </a>
<code class="cCode">NewsConsumer_i.h and NewsConsumer.cpp</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1069252"> </a>
The callback servant class that subscribers use to receive news events. (For the Subscriber application.)
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1068932"> </a>
<a href="int_samp.html#wp1071036">Table&#160;5-3</a> lists other files that the Introductory sample application uses.
</p>
<p class="pGraphic"><a name="wp1053053"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1071036table1053070"><caption><a name="wp1071036"> </a>
Table 5-3  Other Files the Introductory Sample Application Uses&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1071040"> </a>
File
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1071042"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="straddledcells" colspan="2" rowspan="1"><div class="pCellBody"><a name="wp1071044"> </a>
The following files are located in the common directory.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071048"> </a>
<code class="cCode">common.nt</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071050"> </a>
Makefile symbols for Microsoft Windows systems.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071052"> </a>
<code class="cCode">common.mk</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071054"> </a>
Makefile symbols for UNIX systems.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071056"> </a>
<code class="cCode">introductory.inc</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071058"> </a>
Makefile for administrative targets.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071060"> </a>
<code class="cCode">ex.h</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071062"> </a>
Utilities to print exceptions. (For C++ only.)
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071064"> </a>
<code class="cCode">client_ex.h</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071066"> </a>
Client utilities to handle exceptions. (For C++ only.)
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="straddledcells" colspan="2" rowspan="1"><div class="pCellBody"><a name="wp1071096"> </a>
The following files are located in the \tuxdir\include directory.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071068"> </a>
<code class="cCode">CosEventComm.idl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071070"> </a>
The OMG IDL code that declares the CosEventComm module.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071072"> </a>
<code class="cCode">CosNotification.idl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071074"> </a>
The OMG IDL code that declares the CosNotification module.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071076"> </a>
<code class="cCode">CosNotifyComm.idl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071078"> </a>
The OMG IDL code that declares the CosNotifyComm module.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071080"> </a>
<code class="cCode">Tobj_Events.idl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071082"> </a>
The OMG IDL code that declares the Tobj_Events module.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071084"> </a>
<code class="cCode">Tobj_SimpleEvents.idl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1072405"> </a>
The OMG IDL code that declares the Tobj_SimpleEvents module. 
</div>
<p class="pTableNote"><a name="wp1072412"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>This file is needed only for the application that was developed using Oracle Simple Events API.</td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td class="straddledcells" colspan="2" rowspan="1"><div class="pCellBody"><a name="wp1072578"> </a>
The following files are needed only for the application that <b class="cBold">was developed</b> using CosNotification Service API.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071152"> </a>
<code class="cCode">CosEventChannelAdmin.idl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071170"> </a>
The OMG IDL code that declares the CosEventChannelAdmin module.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071148"> </a>
<code class="cCode">CosNotifyFilter.idl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071176"> </a>
The OMG IDL code that declares the CosNotifyFilter module.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071144"> </a>
<code class="cCode">CosNotifyChannelAdmin.idl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071180"> </a>
The OMG IDL code that declares the CosNotifyChannelAdmin module.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071140"> </a>
<code class="cCode">Tobj_Notification.idl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1071188"> </a>
The OMG IDL code that declares the Tobj_Notification module.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1053207"> </a>
Changing the Protection Attribute on the Files for the Introductory Sample Application
</h3>
<p class="pBody"><a name="wp1026120"> </a>
During the installation of the Oracle Tuxedo CORBA software, the sample application files are marked read-only. Before you can edit or build the files in the Introductory sample application, you need to change the protection attribute of the files you copied into your work directory, as follows:
</p>
<p class="pBody"><a name="wp1026121"> </a>
<b class="cBold">Windows</b>
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1054438"> </a>In a DOS window, change (<code class="cCode">cd</code>) to your work directory.</li>
<li><a name="wp1054465"> </a><code class="cCode">prompt&gt;attrib -r</code> <code class="cCodeEmphasis">drive:</code>\<code class="cCodeEmphasis">workdirectory</code><code class="cCode">\*.*</code></li>
</ol></div>
<p class="pBody"><a name="wp1026123"> </a>
<b class="cBold">UNIX</b>
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1054476"> </a>Change (cd) to your work directory.</li>
<li><a name="wp1054499"> </a><code class="cCode">prompt&gt;/bin/ksh</code></li>
<li><a name="wp1026125"> </a><code class="cCode">ksh prompt&gt;chmod u+w /</code><code class="cCodeEmphasis">workdirectory</code><code class="cCode">/*.*</code></li>
</ol></div>
<p class="pBody"><a name="wp1026126"> </a>
On UNIX systems, you also need to change the permission of <code class="cCode">setenv.ksh</code> to give execute permission to the file, as follows:
</p>
<p class="pBody"><a name="wp1026127"> </a>
<code class="cCode">ksh prompt&gt;chmod +x setenv.ksh</code>
</p>
<h3 class="pHeading2"><a name="wp1026188"> </a>
Setting Up the Environment
</h3>
<p class="pBody"><a name="wp1054521"> </a>
To set up the environment, enter the following command:
</p>
<p class="pBody"><a name="wp1054540"> </a>
<b class="cBold">Windows</b>
</p>
<p class="pBody"><a name="wp1054581"> </a>
<code class="cCode">prompt&gt;.\setenv.cmd</code>
</p>
<p class="pBody"><a name="wp1054558"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1054559"> </a>
<code class="cCode">ksh prompt&gt;. ./setenv.ksh</code>
</p>
<h3 class="pHeading2"><a name="wp1054520"> </a>
Building the Introductory Sample Application
</h3>
<p class="pBody"><a name="wp1055062"> </a>
You use the <code class="cCode">make</code> command to run makefiles, which are provided for Microsoft Windows and UNIX, to build the sample application. For UNIX, use <code class="cCode">make</code>. For Microsoft Windows, use <code class="cCode">nmake</code>.
</p>
<h4 class="pHeading3"><a name="wp1053886"> </a>
Makefile Summary
</h4>
<p class="pBody"><a name="wp1055029"> </a>
The<code class="cCode"> </code>makefile automates the following steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1054106"> </a>Checks that the set environment command (<code class="cCode">setenv.cmd</code>) has been run. If the environment variables have not been set, the makefile prints an error message to the screen and exits.</li>
<li><a name="wp1054107"> </a>Includes the <code class="cCode">common.nt</code> (for Microsoft Windows) or <code class="cCode">common.mk</code> (for UNIX) command file. This file defines the makefile symbols used by the samples. These symbols allow the UNIX and Microsoft Windows makefiles to delegate the build rules to platform-independent makefiles.</li>
<li><a name="wp1067665"> </a>Includes the <code class="cCode">makefile.inc</code> command file. This file builds the <code class="cCode">is_reporter</code> and <code class="cCode">is_subscriber</code> executables, and cleans up the directory of unneeded files and directories.</li>
<li><a name="wp1067666"> </a>Includes the <code class="cCode">introductory.inc</code> command file. This file creates the <code class="cCode">UBBCONFIG</code> file and executes the <code class="cCode">tmloadcf -y ubb</code> command to create the <code class="cCode">TUXCONFIG</code> file. This is a platform-independent makefile fragment that defines the administrative build rules common to the Introductory sample application.</li>
</ol></div>
<h4 class="pHeading3"><a name="wp1026203"> </a>
Executing the Makefile
</h4>
<p class="pBody"><a name="wp1055035"> </a>
Before executing the <code class="cCode">makefile</code>, you need to check the following:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1038937"> </a>Ensure that you have the appropriate administrative privileges to build and run applications.</li>
<li><a name="wp1027247"> </a>On Microsoft Windows, verify that <code class="cCode">nmake</code> is in the path of your machine.</li>
<li><a name="wp1027248"> </a>On UNIX, verify that <code class="cCode">make</code> is in the path of your machine.</li>
</ul></div>
<p class="pBody"><a name="wp1054933"> </a>
To build the Introductory sample application, enter the <code class="cCode">make</code> command as follows:
</p>
<p class="pBody"><a name="wp1053934"> </a>
<b class="cBold">Windows</b>
</p>
<p class="pBody"><a name="wp1053935"> </a>
<code class="cCode">nmake -f makefile.nt</code>
</p>
<p class="pBody"><a name="wp1053936"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1070090"> </a>
<code class="cCode">make -f makefile.mk</code>
</p>
<h3 class="pHeading2"><a name="wp1070094"> </a>
Starting the Introductory Sample Application
</h3>
<p class="pBody"><a name="wp1070095"> </a>
To start the Introductory sample application, enter the following commands:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1054195"> </a>To boot the Oracle Tuxedo system:</li>
<p class="pBodyRelative"><a name="wp1027310"> </a>
<code class="cCode">prompt&gt;tmboot -y</code>
</p>
<p class="pBodyRelative"><a name="wp1027312"> </a>
This command starts the following server processes:
</p>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1027409"> </a><code class="cCode">TMSUSREVT</code></li>
<p class="pBodyRelative"><a name="wp1054197"> </a>
An Oracle Tuxedo system-provided, EventBroker server that is used by the Notification Service.
</p>
<li><a name="wp1027319"> </a><code class="cCode">TMNTS</code></li>
<p class="pBodyRelative"><a name="wp1054187"> </a>
An Oracle Tuxedo Notification Service server that processes requests for subscriptions and event postings.
</p>
<li><a name="wp1054188"> </a><code class="cCode">TMNTSFWD_T</code></li>
<p class="pBodyRelative"><a name="wp1054192"> </a>
An Oracle Tuxedo Notification Service server that forwards events to subscribers that have transient subscriptions.
</p>
<li><a name="wp1027321"> </a><code class="cCode">ISL</code></li>
<p class="pBodyRelative"><a name="wp1066158"> </a>
The IIOP Listener/Handler process.
</p>
</ul></div>
<li><a name="wp1066159"> </a>To start the Subscriber application:</li>
<p class="pBodyRelative"><a name="wp1074805"> </a>
For C++: <code class="cCode">prompt&gt;is_subscriber</code>
</p>
<p class="pBodyRelative"><a name="wp1074829"> </a>
To start another Subscriber, open another window, change (<code class="cCode">cd</code>) to your work directory, set the environment variables (by running <code class="cCode">setenv.cmd</code> or <code class="cCode">setenv.ksh</code>), and enter the start command that is appropriate for your platform.
</p>
<li><a name="wp1054277"> </a>To start the Reporter application, open another window and enter the following:</li>
<p class="pBodyRelative"><a name="wp1074813"> </a>
For C++: <code class="cCode">prompt&gt;is_reporter</code>
</p>
<p class="pBodyRelative"><a name="wp1074830"> </a>
To start another Reporter, open another window, change (<code class="cCode">cd</code>) to your work directory, set the environment variables (by running <code class="cCode">setenv.cmd</code> or <code class="cCode">setenv.ksh</code>), and enter the start command that is appropriate for your platform.
</p>
</ol></div>
<h3 class="pHeading2"><a name="wp1027435"> </a>
Using the Introductory Sample Application
</h3>
<p class="pBody"><a name="wp1054425"> </a>
To use the Introductory sample application, you must use the Subscriber application to subscribe to an event and the Reporter application to post an event. Be sure to subscribe before you post each event; otherwise, events will be lost. 
</p>
<a name="wp1055472"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The Subscriber application shuts down after it receives one event.</td>
</tr>
</table>

<h4 class="pHeading3"><a name="wp1054424"> </a>
Using the Subscriber Application to Subscribe to Events
</h4>
<p class="pBody"><a name="wp1070017"> </a>
Perform these steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1073014"> </a>When you start the Subscriber application (<code class="cCode">prompt&gt;is_subscriber</code>), the following prompts are displayed:</li>
<p class="pBodyRelative"><a name="wp1073015"> </a>
<code class="cCode">Name?</code>                                (Enter a name (without spaces).)<br /><code class="cCode">Category (or all)?</code>      (Enter the category of news you want or &quot;all&quot;.)
</p>
<p class="pBodyRelative"><a name="wp1054388"> </a>
You may type in any string for the news category; that is, there is no fixed list of news categories. However, when you use the Reporter application to post an event, make sure to specify the same string for the news category.
</p>
<li><a name="wp1054389"> </a>The Subscriber application creates a subscription then prints &#8220;Ready&#8221; when it is ready to receive events. After the Subscriber receives one event, it shuts down.</li>
<a name="wp1054423"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You should always use the Subscriber application to subscribe to events before you use the Reporter application to post events; otherwise, events will be lost.</td>
</tr>
</table>

</ol></div>
<h4 class="pHeading3"><a name="wp1054428"> </a>
Using the Reporter Application to Post Events
</h4>
<p class="pBody"><a name="wp1070023"> </a>
Perform these steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1054431"> </a>When you start the Reporter application (<code class="cCode">prompt&gt; is_reporter</code>), the following prompts are displayed:</li>
<p class="pBodyRelative"><a name="wp1054395"> </a>
<code class="cCode">(r) Report news<br />(e) Exit</code>
</p>
<p class="pBodyRelative"><a name="wp1054396"> </a>
<code class="cCode">Option?</code> 
</p>
<li><a name="wp1055463"> </a>Enter <code class="cCode">r</code> to report news. The following prompt is displayed:</li>
<p class="pBodyRelative"><a name="wp1054397"> </a>
<code class="cCode">Category?</code> 
</p>
<li><a name="wp1055462"> </a>Enter the news category. It must match exactly the category you typed on the Subscriber application (including white space and case).</li>
<p class="pBodyRelative"><a name="wp1055156"> </a>
After you enter the news category, the following prompt is displayed:
</p>
<p class="pBodyRelative"><a name="wp1054398"> </a>
<code class="cCode">Enter story (terminate with &#39;.&#39;) </code>
</p>
<li><a name="wp1055461"> </a>Enter your story. It can span multiple lines. Finish the story by typing a period only (<code class="cCode">&quot;.&quot;</code>) on a line, followed by a carriage return.</li>
<p class="pBodyRelative"><a name="wp1054399"> </a>
Subscribers whose category matches the category of this story will receive, and print out the story. When a subscriber receives a story, the subscriber automatically shuts down. 
</p>
<li><a name="wp1070055"> </a>To send and receive more news stories, start another subscriber, then report another story. When you are done reporting news, choose the Exit <code class="cCode">(e)</code> option.</li>
<a name="wp1070056"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The Subscriber application shuts down after it receives one event. Therefore, always use the Subscriber application to subscribe to events before you use the Reporter application to post an event; otherwise, events will be lost.</td>
</tr>
</table>

</ol></div>
<h3 class="pHeading2"><a name="wp1055234"> </a>
Shutting Down the System and Cleaning Up the Directory
</h3>
<p class="pBody"><a name="wp1070030"> </a>
Perform the following steps:
</p>
<a name="wp1054402"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Make sure the Reporter and Subscriber processes have stopped.</td>
</tr>
</table>

<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1054403"> </a>To shut down the system, in any window, type:</li>
<p class="pBodyRelative"><a name="wp1055251"> </a>
<code class="cCode">prompt&gt;tmshutdown -y</code>
</p>
<li><a name="wp1055276"> </a>To restore the directory to its original state, in any window, type:</li>
<p class="pBodyRelative"><a name="wp1055309"> </a>
<b class="cBold">Windows</b>
</p>
<p class="pBodyRelative"><a name="wp1055321"> </a>
<code class="cCode">prompt&gt;nmake -f makefile.nt clean</code>
</p>
<p class="pBodyRelative"><a name="wp1055311"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBodyRelative"><a name="wp1055327"> </a>
<code class="cCode">prompt&gt;make -f makefile.mk clean</code>
</p>
</ol></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="int_samp.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="cos_apps.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="adv_samp.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
