<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/pcb/fm/pgbind.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:23:31" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>COBOL Language Bindings for the Workstation Component</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Programming an Oracle Tuxedo Application Using COBOL
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="pberr.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next_grey1.gif" border="0" alt="Next" />&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
&nbsp;
<a href="../pdf/pcb.pdf" target="pdf"><img id="LongDescNotReq5" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq6" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1013156"> </a>
COBOL Language Bindings for the Workstation Component
</h1>
<p class="pBody"><a name="wp1012424"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1006928"> </a><a href="pgbind.html#wp997313">UNIX Bindings</a></li>
<li><a name="wp1006941"> </a><a href="pgbind.html#wp999366">Microsoft Windows Bindings</a></li>
</ul></div>
<p class="pBody"><a name="wp1007011"> </a>
Refer to <em class="cEmphasis">Using the Oracle Tuxedo Workstation Component</em> for more information on the Workstation platform.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp997313"> </a>
UNIX Bindings
</h2><p class="pBody"><a name="wp1007429"> </a>
The following sections describe how to write and build client programs, and set appropriate environment variables when developing, in COBOL, an Oracle Tuxedo application on a UNIX platform.
</p>
<h3 class="pHeading2"><a name="wp1007491"> </a>
Writing Client Programs
</h3>
<p class="pBody"><a name="wp1007492"> </a>
You can develop COBOL client programs for a UNIX platform in the same way that you develop COBOL clients in the Oracle Tuxedo administrative domain. All ATMI calls are available.
</p>
<h3 class="pHeading2"><a name="wp1007434"> </a>
Building Client Programs
</h3>
<p class="pBody"><a name="wp1007435"> </a>
To compile and link-edit Workstation client programs, use the <a href="../rfcm/rfcmd.html">buildclient(1)</a> command. If you are building a UNIX Workstation client on the native node, use the <code class="cCode">-w</code> option to have the client built using the Workstation libraries. 
</p>
<p class="pBody"><a name="wp1011250"> </a>
If you are building a client on a native node, and both native and Workstation libraries are present, the native libraries are used by default. In this case, specifying the <code class="cCode">-w</code> option ensures that the correct libraries for a Workstation client are used. 
</p>
<p class="pBody"><a name="wp1011263"> </a>
On a workstation, where only the Workstation libraries are present, it is not necessary to specify <code class="cCode">-w</code>.
</p>
<p class="pBody"><a name="wp997591"> </a>
<a href="pgbind.html#wp1000197">Listing&#160;12-3</a> shows how to use the <code class="cCode">buildclient</code> command on a native node.
</p>
<div class="pCodeTitle"><a name="wp1004232"> </a>
Listing&#160;12-1	   Example of Running buildclient on a UNIX Platform
</div> <a name="wp1004233"> </a><div class="pPreformatted"><pre>ALTCC=cobcc ALTCFLAGS=&quot;-I /APPDIR/include&quot;<br />COBCPY=$TUXDIR/cobinclude<br />COBOPT=&quot;-C ANS85 -C ALIGN=8 -C NOIBMCOMP -C TRUNC=ANSI -C OSEXT=cbl&quot;<br />export COBOPT COBCPY ALTCC ALTCFLAGS<br />buildclient -C -w -o empclient -f name.cbl -f &quot;userlib1.a userlib2.a&quot;</pre></div><p class="pBody"><a name="wp997840"> </a>
The <code class="cCode">-o</code> option enables you to specify a name for your output file. Input files specified with the <code class="cCode">-f</code> option are linkedited before system libraries. 
</p>
<p class="pBody"><a name="wp1011057"> </a>
As illustrated, the <code class="cCode">TUXDIR</code> environment variable must be used to ensure that the <code class="cCode">buildclient</code> command can locate system libraries. Be sure that you have defined <code class="cCode">TUXDIR</code>. The <code class="cCode">CC</code> environment variable defaults to <code class="cCode">cc</code>, but can be set to another compiler through <code class="cCode">ALTCC</code>.
</p>
<h3 class="pHeading2"><a name="wp1011058"> </a>
Setting Environment Variables
</h3>
<p class="pBody"><a name="wp997866"> </a>
Workstation clients make use of several environment variables. 
</p>
<p class="pBody"><a name="wp1005761"> </a>
<a href="pgbind.html#wp811247">Table&#160;12-1</a> lists the environment variables that are checked by <code class="cCode">TPINITIALIZE</code> when a Workstation client attempts to join an application.
</p>
<p class="pGraphic"><a name="wp1009935"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp811247table1005152"><caption><a name="wp811247"> </a>
Table 12-1  <span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">Environment Variables Checked by TPINITIALIZE on a UNIX Platform</span>

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1005154"> </a>
Environment Variable
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1005156"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005158"> </a>
<code class="cCode">WSENVFILE</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005160"> </a>
Name of a file containing environment variable settings to be used in the client&#8217;s environment.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005162"> </a>
<code class="cCode">WSNADDR</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005164"> </a>
Network address of the Workstation listener process through which the client gains access to the application. Use the value specified in the application configuration file for the Workstation listener to be called. If the value begins with the characters <code class="cCode">0x</code>, the system interprets it as a string of hexadecimal digits; otherwise, the system interprets it as ASCII characters.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005166"> </a>
<code class="cCode">WSDEVICE</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005168"> </a>
Name of the device to be used to access the network. Not required by all transport layer interfaces.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005170"> </a>
<code class="cCode">WSTYPE</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005172"> </a>
Workstation type. Used by <code class="cCode">TPINITIALIZE</code> when that call is invoked by a Workstation client to negotiate encode/decode responsibilities with the native site. If you do not specify <code class="cCode">WSTYPE</code>, the system performs encoding, even if <code class="cCode">WSTYPE</code> is not specified on the native site, either. You must explicitly specify the same <code class="cCode">WSTYPE</code> value for both the native and Workstation client sites to ensure that the encode/decode feature is turned off.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005174"> </a>
<code class="cCode">WSRPLYMAX</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005176"> </a>
Maximum amount of core memory that the ATMI uses for buffering application replies before dumping them to disk. Used by <code class="cCode">TPINITIALIZE</code>. The default system limit is 256,000 bytes. Whether you should use <code class="cCode">WSRPLYMAX</code> to set a lower limit depends on the amount of memory available on your machine. Writing replies to disk causes a substantial reduction in performance.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1011928"> </a>
<code class="cCode">WSFADDR</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1011930"> </a>
The network address used by the Workstation client when connecting to the Workstation listener or Workstation handler. This variable, along with the <code class="cCode">WSFRANGE</code> variable, determines the range of TCP/IP ports to which a Workstation client will attempt to bind before making an outbound connection. This address must be a TCP/IP address.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1011924"> </a>
<code class="cCode">WSFRANGE</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1011926"> </a>
The range of TCP/IP ports to which a Workstation client process attempts to bind before making an outbound connection. The <code class="cCode">WSFADDR</code> parameter specifies the base address of the range. The default is 1. 
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp998252"> </a>
Other environment variables may be needed by Workstation COBOL clients on a UNIX workstation, depending on which components of the Oracle Tuxedo system are being used.
</p>
<a name="wp998326"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>MicroFocus delivers <code class="cCode">LIBNSL.a</code> as a shared object, which is required by <code class="cCode">buildclient</code> when linking a Workstation client. Because MicroFocus COBOL does not support shared objects on UNIX 3.2, Workstation for UNIX 3.2 is not supported.</td>
</tr>
</table>

<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp999366"> </a>
Microsoft Windows Bindings
</h2><p class="pBody"><a name="wp1007687"> </a>
The following sections describe how to write and build client programs, build ACCEPT/DISPLAY clients, block network behavior, and restore the network environment when developing, in COBOL, an Oracle Tuxedo application for the Microsoft Windows platform.
</p>
<h3 class="pHeading2"><a name="wp999441"> </a>
Writing Client Programs
</h3>
<p class="pBody"><a name="wp999452"> </a>
All program-specific ATMI calls are available.
</p>
<h3 class="pHeading2"><a name="wp999477"> </a>
Building Client Programs
</h3>
<p class="pBody"><a name="wp999557"> </a>
To compile the COBOL source files that call the ATMI, you must use the COBOL compiler with the <code class="cCode">LITLINK</code> option. To linkedit the Workstation client object files, use the <a href="../rfcm/rfcmd.html">buildclient(1)</a> command. While the syntax of the command is straightforward, the usage varies according to the compilation system used. 
</p>
<p class="pBody"><a name="wp1010691"> </a>
<a href="pgbind.html#wp999570">Listing&#160;12-2</a> shows how to use the <code class="cCode">buildclient</code> command.
</p>
<div class="pCodeTitle"><a name="wp999570"> </a>
Listing&#160;12-2	   Example of Running buildclient on a Windows Platform
</div> <a name="wp1011152"> </a><div class="pPreformatted"><pre>COBCPY=C:\TUXEDO\COBINC<br />COBDIR=C:\COBOL\LBR;C:\COBOL\EXEDLL<br />PATH=C:\COBOL\EXEDLL;...<br />TUXDIR=C:\tuxedo<br />LIB=C:\NET\TOOLKIT\LIB;C:\MSVC\LIB;C:\TUXEDO\LIB;C:\COBOL\LIB<br />buildclient -C -o EMP.EXE -f EMP -f &quot;/NOD/NOI/NOE/CO/SE:300&quot; -l WLIBSOCK</pre></div><a name="wp1011153"> </a><div class="pPreformatted"><pre>For Windows NT:</pre></div><a name="wp1011154"> </a><div class="pPreformatted"><pre>buildclient -C -o EMP.EXE  -f empobj </pre></div><p class="pBody"><a name="wp999722"> </a>
<a href="pgbind.html#wp811278">Table&#160;12-2</a> describes the <code class="cCode">buildclient</code> command options used in the preceding example.
</p>
<p class="pGraphic"><a name="wp1009091"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp811278table1005929"><caption><a name="wp811278"> </a>
Table 12-2  buildclient Command Options for Windows Platform

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1005931"> </a>
Option
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1005933"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005943"> </a>
<code class="cCode">-o </code><code class="cCodeEmphasis">name</code><code class="cCode"> </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005945"> </a>
Name of the executable file being created. The default is <code class="cCode">client.exe</code>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005947"> </a>
<code class="cCode">-f </code><code class="cCodeEmphasis">firstfiles</code><code class="cCode"> </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005949"> </a>
One or more object files to be included before the Oracle Tuxedo libraries. You can use the <code class="cCode">-f</code> option to pass options to the compiler or linker. To specify more than one filename, enter a list of files after <code class="cCode">-f</code>, using white space to separate filenames and double quotation marks around the list. You can also specify multiple filenames using multiple occurrences of the <code class="cCode">-f</code> option on the command line.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005951"> </a>
<code class="cCode">-l </code><code class="cCodeEmphasis">libfiles</code><code class="cCode"> </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1005953"> </a>
Libraries to be included after the Oracle Tuxedo libraries. To specify more than one filename, you must separate the names by white space and enclose the list in quotation marks. You can also specify multiple filenames using multiple occurrences of the <code class="cCode">-l</code> option on the command line.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1000167"> </a>
Building ACCEPT/DISPLAY Clients
</h3>
<p class="pBody"><a name="wp1000178"> </a>
The following example shows how to build an executable client for an <code class="cCode">ACCEPT/DISPLAY</code> application, such as <code class="cCode">CSIMPAPP</code>.
</p>
<div class="pCodeTitle"><a name="wp1000197"> </a>
Listing&#160;12-3	   Building ACCEPT/DISPLAY clients
</div> <a name="wp1000208"> </a><div class="pPreformatted"><pre>a) compile the COBOL module and create a file.obj<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cobol file.cbl omf(obj) litlink;<br />b) use the following link statement<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;link FILE+cblwinaf,,,\<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;wcobatmi+cobws+wtuxws+ \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lcobol+lcoboldw+cobw+cobfp87w+  \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;wlibsock,FILE.def  /nod/noe;<br />&#160;&#160;&#160;For Windows NT the link statement is:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cbllink -oEMP.exe EMP.obj  \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cobws.lib ncobatmi.lib wtuxws32.lib  \<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;libcmt.lib user32.lib</pre></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="pgbind.html"><img id="LongDescNotReq7" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="pberr.html"><img id="LongDescNotReq8" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<img id="LongDescNotReq9" src="/global_resources/images/nexttop_disabled.gif" border="0" alt="Next" />
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
