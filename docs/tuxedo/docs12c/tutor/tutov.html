<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/tutor/fm/tutov.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:50:29" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Developing an Oracle Tuxedo Application</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Tutorials for Developing Oracle Tuxedo ATMI Applications
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="index.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="tutsi.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
&nbsp;
<a href="../pdf/tutor.pdf" target="pdf"><img id="LongDescNotReq5" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq6" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1299921"> </a>
Developing an Oracle Tuxedo Application
</h1>
<p class="pBody"><a name="wp1117131"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1296528"> </a><a href="tutov.html#wp1112113"><span class="cHyperlink">
Before Developing Your Oracle Tuxedo Application</span></a></li>
<li><a name="wp1289932"> </a><a href="tutov.html#wp1290005"><span class="cHyperlink">
Creating an Oracle Tuxedo ATMI Client</span></a></li>
<li><a name="wp1117539"> </a><a href="tutov.html#wp1112144"><span class="cHyperlink">
Creating an Oracle Tuxedo ATMI Server</span></a></li>
<li><a name="wp1117559"> </a><a href="tutov.html#wp1114796"><span class="cHyperlink">
Using Typed Buffers in Your Application</span></a></li>
<li><a name="wp1117580"> </a><a href="tutov.html#wp1112868"><span class="cHyperlink">
Using Oracle Tuxedo Messaging Paradigms in Your Application</span></a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1112113"> </a>
Before Developing Your Oracle Tuxedo Application
</h2><p class="pBody"><a name="wp1291579"> </a>
Before you begin developing your Oracle Tuxedo Application-to-Transaction Monitor Interface (ATMI) application, it may be helpful to review the various concepts related to its design and the tools that are available to you. These concepts include identifying <a href="tutov.html#wp1290005">clients</a> or the various ways input from the outside world is gathered and presented to your business for processing, and identifying <a href="tutov.html#wp1112144">servers</a> or the programs containing the business logic that process the input data. Also important is reviewing the concept of <a href="tutov.html#wp1114796">typed buffers</a> or how a client program allocates a memory area before sending data to another program. Another concept worth reviewing is that of the Oracle Tuxedo <a href="tutov.html#wp1112868">messaging paradigms</a>. ATMI client programs access the Oracle Tuxedo system by calling the ATMI library. Most calls in the ATMI library support these different communication styles available to programmers, such as request/response and conversational. These are the building blocks of every Oracle Tuxedo application. 
</p>
<p class="pBody"><a name="wp1291877"> </a>
For more information about concepts, such as application queues, event-based communication, and using ATMI, and on the tools available to you, refer to <span class="cHyperlink">
&#8220;Basic Architectu</span><a href="../int/intatm.html"></a>re of the Oracle Tuxedo ATMI Environment&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em>. For information about programming an application, refer to <em class="cEmphasis">Programming Oracle Tuxedo ATMI Applications Using C</em> and <em class="cEmphasis">Programming Oracle Tuxedo ATMI Applications Using COBOL</em>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1290005"> </a>
Creating an Oracle Tuxedo ATMI Client
</h2><p class="pBody"><a name="wp1112114"> </a>
Creating an Oracle Tuxedo client is just like creating any other program in the C or C++ programming language. The Oracle Tuxedo system provides you with a C-based programming interface known as the Oracle Tuxedo Application-to-Transaction Monitor Interface or ATMI. The ATMI is an easy-to-use interface that enables the rapid development of Oracle Tuxedo clients and servers.
</p>
<a name="wp1282919"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Oracle Tuxedo ATMI also supports a COBOL interface. (The examples shown here illustrate the C/C++ API.)</td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp1282920"> </a>
Client Tasks
</h3>
<p class="pBody"><a name="wp1282921"> </a>
Clients perform the following basic tasks:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1284736"> </a>Clients may need to call <code class="cCode">tpchkauth()</code> to determine the level of security required to join an application. Possible responses are: no security enabled, application password enabled, application authentication enabled, access control lists enabled, link-level encryption, public key encryption, auditing. (This is optional depending on whether you are using security levels.)</li>
<li><a name="wp1112118"> </a>Clients call <code class="cCode">tpinit()</code> to connect to an Oracle Tuxedo application. Any required security information is passed to the application as arguments for <code class="cCode">tpinit()</code>.</li>
<li><a name="wp1112119"> </a>Clients perform service requests.</li>
<li><a name="wp1112120"> </a>Clients call <code class="cCode">tpterm()</code> to disconnect from an Oracle Tuxedo application.</li>
<div class="pFigureTitle"><a name="wp1112121"> </a>
Figure&#160;1-1  Tasks Performed by a Client
</div>

 
 <p class="pGraphic"><a name="wp1293094"> </a>
<br />
<img src="wwimages/buildc.gif" alt="Tasks Performed by a Client" id="wp1293092"/><br />

</p>
</ul></div>
<h3 class="pHeading2"><a name="wp1293972"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1293976"> </a><span class="cHyperlink">
&#8220;Writing </span><a href="../pgc/pgclt.html"></a>Clients&#8221; in <em class="cEmphasis">Programming Oracle Tuxedo ATMI Applications Using C</em></li>
<li><a name="wp1295181"> </a><span class="cHyperlink">
&#8220;Administering </span><a href="../sec/secadm.html"></a>Security&#8221; in <em class="cEmphasis">Using Security in CORBA Applications</em></li>
<li><a name="wp1295169"> </a><a href="tutov.html#wp1112868">Using Oracle Tuxedo Messaging Paradigms in Your Application</a></li>
<li><a name="wp1293977"> </a><span class="cHyperlink">
&#8220;What Are Ty</span><a href="../int/intatm.html"></a>ped Buffers?&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em></li>
<li><a name="wp1112134"> </a><span style="font-style: italic">&#8220;What You Ca</span><span style="font-style: normal"><a href="../int/intatm.html"></a></span><span style="font-style: italic">n Do Using the ATMI&#8221; </span><span style="font-style: normal">in</span><em class="cEmphasis"> Introducing Oracle Tuxedo ATMI</em></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1112144"> </a>
Creating an Oracle Tuxedo ATMI Server
</h2><p class="pBody"><a name="wp1112145"> </a>
Developers use the ATMI programming interface to create an Oracle Tuxedo client and server. However, Oracle Tuxedo servers are not written by application developers as complete programs (that is, with a standard <code class="cCode">main</code>). Instead, application developers write a set of specific business functions (known as services) that are compiled along with the Oracle Tuxedo binaries to produce a server executable.
</p>
<p class="pBody"><a name="wp1112146"> </a>
When an Oracle Tuxedo server is booted, it continues running until it receives a shutdown message. A typical Oracle Tuxedo server may perform thousands of service calls before being shut down and rebooted.
</p>
<h3 class="pHeading2"><a name="wp1112147"> </a>
Server Tasks
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1112148"> </a>Application developers write the code and the Oracle Tuxedo ATMI servers invoke the <code class="cCode">tpsvrinit()</code> function only when the Oracle Tuxedo server is booted. Programmers use this function to open an application resource (such as a database) for later use.</li>
<li><a name="wp1112149"> </a>Application developers write the code and the Oracle Tuxedo ATMI servers invoke the <code class="cCode">tpsvrdone()</code> function only when the Oracle Tuxedo server is shut down. Programmers use this function to close any application resources opened by&#160;<code class="cCode">tpsvrinit()</code>.</li>
<li><a name="wp1112150"> </a>Application developers write the code and the Oracle Tuxedo ATMI servers request named application services that process client requests. Oracle Tuxedo ATMI clients do not call <span style="font-style: italic">servers</span> by name; they call <span style="font-style: italic">services</span>. An Oracle Tuxedo ATMI client does not &#8220;know&#8221; the location of the server processing its request.</li>
<li><a name="wp1112151"> </a>ATMI servers call the <code class="cCode">tpreturn()</code> function to end a service request and return a buffer, if required, to the calling client.</li>
<div class="pFigureTitle"><a name="wp1112152"> </a>
Figure&#160;1-2  Tasks Performed by a Server
</div>

 
 <p class="pGraphic"><a name="wp1112156"> </a>
<br />
<img src="wwimages/builds.gif" alt="Tasks Performed by a Server" id="wp1112154"/><br />

</p>
</ul></div>
<h3 class="pHeading2"><a name="wp1112157"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1112160"> </a><span class="cHyperlink">
&#8220;Writing </span><a href="../pgc/pgserv.html"></a>Servers&#8221; on page&#160;5-1 in <em class="cEmphasis">Programming Oracle Tuxedo ATMI Applications Using C</em></li>
<li><a name="wp1295212"> </a><a href="tutov.html#wp1112868">Using Oracle Tuxedo Messaging Paradigms in Your Application</a></li>
<li><a name="wp1290728"> </a><span class="cHyperlink">
&#8220;What Are Typed</span><a href="../int/intatm.html"></a> Buffers?&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em></li>
<li><a name="wp1112165"> </a><span class="cHyperlink">
&#8220;What You Can </span><a href="../int/intatm.html"></a>Do Using the ATMI&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em> </li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1114796"> </a>
Using Typed Buffers in Your Application
</h2><p class="pBody"><a name="wp1114797"> </a>
All communication in the Oracle Tuxedo system is transmitted through typed buffers. The Oracle Tuxedo system offers application developers the choice of many different buffer types to facilitate this communication. All buffers passed through the Oracle Tuxedo system have special headers, and must be allocated and freed through the Oracle Tuxedo ATMI (<code class="cCode">tpalloc()</code>, <code class="cCode">tprealloc()</code>, and <code class="cCode">tpfree()</code>).
</p>
<div class="pFigureTitle"><a name="wp1114798"> </a>
Figure&#160;1-3  Different Types of Buffers
</div>

 
 <p class="pGraphic"><a name="wp1114802"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/buffers.gif" alt="Different Types of Buffers" id="wp1114800"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1114803"> </a>
The typed buffers facility allows for generic well-defined processing to be implemented once a buffer type is shared across any type of network and protocol and any type of CPU architecture and operating system supported by the Oracle Tuxedo system. The advantage of typed buffers in a distributed environment is that they relieve your clients and servers from the details of preparing data to be transferred between heterogeneous computers linked by various communications networks. This affords an application programmer time to concentrate on their business logic, instead of focusing attention on writing this facility into their own programs.
</p>
<h3 class="pHeading2"><a name="wp1255255"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1114807"> </a><span class="cHyperlink">
&#8220;What Are Typed </span><a href="../int/intatm.html"></a>Buffers?&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em> </li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1112868"> </a>
Using Oracle Tuxedo Messaging Paradigms in Your Application
</h2><p class="pBody"><a name="wp1112172"> </a>
The Oracle Tuxedo ATMI offers several communication models that you can use in your application:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1112176"> </a><a href="tutov.html#wp1112210">Using the Request/Response Model (Synchronous Calls)</a></li>
<li><a name="wp1112180"> </a><a href="tutov.html#wp1290779">Using the Request/Response Model (Asynchronous Calls)</a></li>
<li><a name="wp1112184"> </a><a href="tutov.html#wp1112237">Using Nested Calls</a></li>
<li><a name="wp1112188"> </a><a href="tutov.html#wp1294919">Using Forwarded Calls</a></li>
<li><a name="wp1112192"> </a><a href="tutov.html#wp1112264">Using Conversational Communication</a></li>
<li><a name="wp1112196"> </a><a href="tutov.html#wp1112281">Using Unsolicited Notification</a></li>
<li><a name="wp1112200"> </a><a href="tutov.html#wp1112295">Using Event-based Communication</a></li>
<li><a name="wp1112204"> </a><a href="tutov.html#wp1112308">Using Queue-based Communication</a></li>
<li><a name="wp1112208"> </a><a href="tutov.html#wp1112322">Using Transactions</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1112210"> </a>
Using the Request/Response Model (Synchronous Calls)
</h2><p class="pBody"><a name="wp1112211"> </a>
To make a synchronous call, an Oracle Tuxedo ATMI client uses the ATMI function <code class="cCode">tpcall()</code> to send a request to an Oracle Tuxedo ATMI server. The function does not invoke an Oracle Tuxedo server by name; instead, it invokes a specified service, which is provided by any server that offers the service and is available. The client then waits for the requested service to be performed. Until it receives a reply to its request, the client is not available for any other work. In other words, the client <em class="cEmphasis">blocks</em> until it receives a reply. 
</p>
<div class="pFigureTitle"><a name="wp1112212"> </a>
Figure&#160;1-4  Using the Synchronous Request/Response Model
</div>

 
 <p class="pGraphic"><a name="wp1112217"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/syncall.gif" alt="Using the Synchronous Request/Response Model" id="wp1112215"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1290773"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1290777"> </a><span class="cHyperlink">
&#8220;Request/Response </span><a href="../int/intatm.html"></a>Communication&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em> </li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1290779"> </a>
Using the Request/Response Model (Asynchronous Calls)
</h2><p class="pBody"><a name="wp1112225"> </a>
To make an asynchronous call, a client calls two ATMI functions: the <a href="../rf3c/rf3c.html">tpacall(3c)</a> function, to request a service, and the <a href="../rf3c/rf3c.html">tpgetrply(3c)</a> function, to retrieve the reply. This method is commonly used when a client can perform additional tasks after issuing a request and before receiving a reply.
</p>
<div class="pFigureTitle"><a name="wp1112226"> </a>
Figure&#160;1-5  Using Asynchronous Calls
</div>

 
 <p class="pGraphic"><a name="wp1112230"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/asyncall.gif" alt="Using Asynchronous Calls" id="wp1112228"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1112231"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1112235"> </a><span class="cHyperlink">
&#8220;Request/Response </span><a href="../int/intatm.html"></a>Communication&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em> </li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1112237"> </a>
Using Nested Calls
</h2><p class="pBody"><a name="wp1301074"> </a>
Services can act as Oracle Tuxedo ATMI clients and call other Oracle Tuxedo services. In other words, you can request a service that, in turn, requests other services. For example, suppose an Oracle Tuxedo client calls service X and waits for a reply. Service X then calls service Y and also waits for a reply. When service X receives a reply, it returns the reply to the calling client. This method is efficient because service X can take the reply from service Y, do more work on it, and modify the return buffer before sending a final reply back to the client.
</p>
<div class="pFigureTitle"><a name="wp1112239"> </a>
Figure&#160;1-6  Using Nested Calls
</div>

 
 <p class="pGraphic"><a name="wp1112243"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/nestcall.gif" alt="Using Nested Calls" id="wp1112241"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1112244"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1294916"> </a><span class="cHyperlink">
&#8220;Nested </span><a href="../int/intatm.html"></a>Requests&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1294919"> </a>
Using Forwarded Calls
</h2><p class="pBody"><a name="wp1112251"> </a>
With call forwarding, a nested service can return a reply directly to an ATMI client without going through the first service that was called, thereby freeing the first service to handle other requests. This capability is useful when the first service is acting strictly as a delivery agent, without adding data to the reply returned by the nested service.
</p>
<p class="pBody"><a name="wp1301070"> </a>
To facilitate call forwarding, a service called by a client uses the <a href="../rf3c/rf3c.html">tpforward(3c)</a> function to pass the request to another service Y. This is the only situation in which an Oracle Tuxedo service can end a service call without calling <a href="../rf3c/rf3c.html">tpreturn(3c)</a>.
</p>
<p class="pBody"><a name="wp1121881"> </a>
Call forwarding is transparent to the client. In other words, the same client code is valid for service requests handled by one service and requests handled by more than one service.
</p>
<div class="pFigureTitle"><a name="wp1112253"> </a>
Figure&#160;1-7  Using Forwarded Calls
</div>

 
 <p class="pGraphic"><a name="wp1112257"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/forwcall.gif" alt="Using Forwarded Calls" id="wp1112255"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1112258"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1112262"> </a><span class="cHyperlink">
&#8220;Forwarded </span><a href="../int/intatm.html"></a>Requests&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1112264"> </a>
Using Conversational Communication
</h2><p class="pBody"><a name="wp1112265"> </a>
If multiple buffers need to be sent between an Oracle Tuxedo ATMI client and an Oracle Tuxedo service in a stateful manner, then the Oracle Tuxedo conversation may be a suitable option. 
</p>
<p class="pBody"><a name="wp1121890"> </a>
Use Oracle Tuxedo conversations judiciously because a server engaged in a conversation is unavailable until the conversation has ended. To implement a conversation, incorporate the following steps into your code:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1112266"> </a>The Oracle Tuxedo client starts the conversation with the <code class="cCode">tpconnect()</code> function.</li>
<li><a name="wp1295274"> </a>The Oracle Tuxedo client and the conversational server exchange buffers using the <code class="cCode">tpsend()</code> and <code class="cCode">tprecv()</code> functions. A special flag is set in the service calls to indicate which participant has control of the conversation.</li>
<li><a name="wp1295275"> </a>The conversation ends in normal conditions, when the server calls <code class="cCode">tpreturn()</code> or the <code class="cCode">tpdiscon()</code> function.</li>
<div class="pFigureTitle"><a name="wp1112270"> </a>
Figure&#160;1-8  Using Conversations
</div>

 
 <p class="pGraphic"><a name="wp1112274"> </a>
<br />
<img src="wwimages/converse.gif" alt="Using Conversations" id="wp1112272"/><br />

</p>
</ol></div>
<h3 class="pHeading2"><a name="wp1112275"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1112279"> </a><span class="cHyperlink">
&#8220;Conversational </span><a href="../int/intatm.html"></a>Communication&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1112281"> </a>
Using Unsolicited Notification
</h2><p class="pBody"><a name="wp1112282"> </a>
To enable unsolicited notification, an Oracle Tuxedo ATMI client creates an unsolicited message handle using the&#160;<code class="cCode">tpsetunsol()</code> function. To send an unsolicited message, an Oracle Tuxedo client or server can use either the <code class="cCode">tpnotify()</code> function, to send a message to a single client, or the <code class="cCode">tpbroadcast()</code> function, to send a message to multiple clients at the same time. When a client receives a message, the Oracle Tuxedo system calls the client&#8217;s unsolicited handler function.
</p>
<p class="pBody"><a name="wp1293134"> </a>
In a signal-based system, a client does not have to poll for unsolicited messages. However, in a non-signal based system, a client must check for unsolicited messages using the <code class="cCode">tpchkunsol()</code> function. Whenever a client makes a service request, <code class="cCode">tpchkunsol()</code> is called implicitly.
</p>
<div class="pFigureTitle"><a name="wp1293135"> </a>
Figure&#160;1-9  Handling Unsolicited Notification
</div>

 
 <p class="pGraphic"><a name="wp1112288"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/unsol.gif" alt="Handling Unsolicited Notification" id="wp1112286"/></div><p class="pGraphic">

</p>
<a name="wp1112289"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>If you call <code class="cCode">tpnotify()</code> with the <code class="cCode">tpack</code> flag bit set, you will receive an acknowledgement of your request.</td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp1200084"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1112293"> </a><span class="cHyperlink">
&#8220;Unsolicited </span><a href="../int/intatm.html"></a>Communication&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1112295"> </a>
Using Event-based Communication
</h2><p class="pBody"><a name="wp1112296"> </a>
In event-based communication, events can also be posted to application queues, log files, and system commands. Any Oracle Tuxedo ATMI client can subscribe to a user-defined event using the <code class="cCode">tpsubscribe()</code> function and receive an unsolicited message whenever an Oracle Tuxedo service or client issues a <code class="cCode">tppost()</code> function. ATMI clients can also subscribe to system-defined events that are triggered whenever the Oracle Tuxedo system detects the event. When a server dies, for example, the .<code class="cCode">SysServerDied</code> event is posted. No application server is needed to post this event, because it is performed by the Oracle Tuxedo system.
</p>
<div class="pFigureTitle"><a name="wp1112297"> </a>
Figure&#160;1-10  Using Event-based Communication
</div>

 
 <p class="pGraphic"><a name="wp1112301"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/eventbr.gif" alt="Using Event-based Communication" id="wp1112299"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1112302"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1112306"> </a><span class="cHyperlink">
&#8220;How Events Are </span><a href="../int/intatm.html"></a>Reported&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1112308"> </a>
Using Queue-based Communication
</h2><p class="pBody"><a name="wp1112309"> </a>
To interface with the /Q system, an Oracle Tuxedo client uses two ATMI functions: <code class="cCode">tpenqueue()</code>, to put messages into the queue space, and <code class="cCode">tpdequeue()</code>, to take messages out of the queue space.
</p>
<p class="pBody"><a name="wp1292542"> </a>
The following model represents peer-to-peer asynchronous messaging. Here, a client enqueues a message to a service using <code class="cCode">tpenqueue()</code>. Optionally, the names of a reply queue and a failure queue can be included in the call to <code class="cCode">tpenqueue()</code>. The client can also specify a correlation identifier value to accompany the message. This value is persistent across queues so that any reply or failure message associated with the queued message can be identified when it is read from the reply or the failure queue. 
</p>
<p class="pBody"><a name="wp1292549"> </a>
The client can use the default queue ordering (for example, a time after which the message should be dequeued), or can specify an override of the default queue ordering (asking, for example, that this message be put at the top of the queue or ahead of another message on the queue). The call to <code class="cCode">tpenqueue()</code> sends the message to the <code class="cCode">TMQUEUE</code> server, the message is queued to stable storage, and an acknowledgment is sent to the client. The acknowledgment is not seen directly by the client, but can be assumed when the client gets a successful return. (A failure return includes information about the nature of the failure.) A message identifier assigned by the queue manager is returned to the application. The identifier can be used to dequeue a specific message. It can also be used in another <code class="cCode">tpenqueue()</code> to identify a message on the queue ahead of the next message to be enqueued. 
</p>
<p class="pBody"><a name="wp1292560"> </a>
Before an enqueued message is made available for dequeuing, the transaction in which the message is enqueued must be committed successfully. A client uses <code class="cCode">tpdequeue()</code> to dequeue messages from the queue.
</p>
<div class="pFigureTitle"><a name="wp1214495"> </a>
Figure&#160;1-11  Peer-to-Peer Asynchronous Messaging Model
</div>

 
 <p class="pGraphic"><a name="wp1214830"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/qbased1.gif" alt="Peer-to-Peer Asynchronous Messaging Model" id="wp1216086"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1217947"> </a>
In the following graphic, forwarding a message to another server is illustrated.
</p>
<p class="pBody"><a name="wp1292387"> </a>
The client enqueues a message intended for service X on the server. The service receives this message when it is active and when the handling instructions for the message are met (for example, the message can be encoded to be activated on Friday at 6 PM). Once the service is completed, it returns the reply to the queue space, from which it can be retrieved by the client. 
</p>
<p class="pBody"><a name="wp1292382"> </a>
This system of queuing is transparent to services. In other words, the same application code is used for a service, regardless of whether the service is invoked through queuing or direct service invocation using <code class="cCode">tp(a)call</code>.
</p>
<div class="pFigureTitle"><a name="wp1218269"> </a>
Figure&#160;1-12  Using Queue Forwarding for Queue-based Service Invocation 
</div>

 
 <p class="pGraphic"><a name="wp1217951"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/qbased.gif" alt="Using Queue Forwarding for Queue-based Service Invocation " id="wp1217949"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1217920"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1112320"> </a><span class="cHyperlink">
&#8220;Message </span><a href="../int/intatm.html"></a>Queuing Communication&#8221; <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1112322"> </a>
Using Transactions
</h2><p class="pBody"><a name="wp1112323"> </a>
To implement transactions, an application programmer uses three ATMI functions:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1122161"> </a><code class="cCode">tpbegin()</code> to start the transaction.</li>
<li><a name="wp1122183"> </a><code class="cCode">tpcommit()</code> to start the two-phase commit process.</li>
<li><a name="wp1122178"> </a><code class="cCode">tpabort()</code> to immediately cancel the transaction.</li>
</ul></div>
<p class="pBody"><a name="wp1122191"> </a>
Any code placed outside the begin and commit/abort sequence is not included in the transaction.
</p>
<p class="pBody"><a name="wp1112324"> </a>
In the following example, a client begins a transaction, requests two services, and then commits the transaction. Because the service requests are made between the beginning and the commitment of the transaction, both services join the transaction.
</p>
<div class="pFigureTitle"><a name="wp1112325"> </a>
Figure&#160;1-13  Using Transactions
</div>

 
 <p class="pGraphic"><a name="wp1112329"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/trans1.gif" alt="Using Transactions" id="wp1112327"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1112330"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1292796"> </a><a href="tutba.html">Tutorial for bankapp, a Full C Application</a></li>
<li><a name="wp1292804"> </a><a href="tutcs.html">Tutorial for CSIMPAPP, a Simple COBOL Application</a></li>
<li><a name="wp1292809"> </a><a href="tutsi.html">Tutorial for simpapp, a Simple C Application</a></li>
<li><a name="wp1292813"> </a><a href="tutst.html">Tutorial for STOCKAPP, a Full COBOL Application</a></li>
</ul></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="tutov.html"><img id="LongDescNotReq7" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="index.html"><img id="LongDescNotReq8" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="tutsi.html"><img id="LongDescNotReq9" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
