<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/tutor/fm/tutsqtxml.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:50:37" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Tutorial for XMLSTOCKAPP: a C and C++ XML Parser Application</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Tutorials for Developing Oracle Tuxedo ATMI Applications
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="tutst.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="tutxmlfmlapp.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
&nbsp;
<a href="../pdf/tutor.pdf" target="pdf"><img id="LongDescNotReq5" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq6" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1318326"> </a>
Tutorial for XMLSTOCKAPP: a C and C++ XML Parser Application
</h1>
<p class="pBody"><a name="wp1306068"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1293912"> </a><a href="tutsqtxml.html#wp1293923">What Is XMLSTOCKAPP?</a></li>
<li><a name="wp1294455"> </a><a href="tutsqtxml.html#wp1178534">Familiarizing Yourself with XMLSTOCKAPP</a></li>
<li><a name="wp1297469"> </a><a href="tutsqtxml.html#wp1181492">Preparing XMLSTOCKAPP Files and Resources</a></li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1297470"> </a><a href="tutsqtxml.html#wp1180445">Step1: Copy the XMLSTOCKAPP Files to a New Directory</a></li>
<li><a name="wp1313129"> </a><a href="tutsqtxml.html#wp1311580">Step 2: Set Environment Variables</a></li>
<li><a name="wp1313227"> </a><a href="tutsqtxml.html#wp1312743">Step 3: Building Clients</a></li>
<li><a name="wp1297483"> </a><a href="tutsqtxml.html#wp1189524">Step 4: Building Servers in XMLSTOCKAPP</a></li>
<li><a name="wp1297562"> </a><a href="tutsqtxml.html#wp1078608">Step 5: How to Edit the Configuration File</a></li>
<li><a name="wp1297567"> </a><a href="tutsqtxml.html#wp1078701">Step 6: Creating a Binary Configuration File</a></li>
</ul></div>
<li><a name="wp1297474"> </a><a href="tutsqtxml.html#wp1182599">Running XMLSTOCKAPP</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1293923"> </a>
What Is XMLSTOCKAPP?
</h2><p class="pBody"><a name="wp1177584"> </a>
<code class="cCode">XMLSTOCKAPP</code> is a sample ATMI stock application that is provided with the Oracle Tuxedo system software. The application runs two servers on a single machine and illustrates invoking the parser from a C and a C++ Tuxedo server and routing of XML buffers. One server is a Tuxedo server written in C++ (<code class="cCode">stockxml</code>) and the other server is written in C (<code class="cCode">stockxml_c</code>). The two servers offer the same STOCKQUOTE service. The client calls the service and returns the stock price and the client then prints the XML buffer.
</p>
<p class="pBody"><a name="wp1177585"> </a>
This documentation leads you, step-by-step, through the procedure you must perform to develop the <code class="cCode">XMLSTOCKAPP</code> application. Once you have &#8220;developed&#8221; <code class="cCode">XMLSTOCKAPP</code> through this tutorial, you will be ready to start developing applications of your own. 
</p>
<p class="pBody"><a name="wp1177586"> </a>
The <code class="cCode">XMLSTOCKAPP</code> tutorial is presented in three sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1177590"> </a><a href="tutsqtxml.html#wp1178534">Familiarizing Yourself with XMLSTOCKAPP</a></li>
<li><a name="wp1177594"> </a><a href="tutsqtxml.html#wp1181492">Preparing XMLSTOCKAPP Files and Resources</a></li>
<li><a name="wp1297572"> </a><a href="tutsqtxml.html#wp1182599">Running XMLSTOCKAPP</a></li>
</ul></div>
<a name="wp1079473"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>This information is focused on system users with some experience in application development, administration, or programming. We assume some familiarity with the Oracle Tuxedo system software. A development license is required to build Oracle Tuxedo applications.</td>
</tr>
</table>

<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1178534"> </a>
Familiarizing Yourself with XMLSTOCKAPP
</h2><p class="pBody"><a name="wp1308860"> </a>
This documentation provides a tour of the files, client, and services that make up the <code class="cCode">XMLSTOCKAPP</code> application. The following activities for more information about that part of the tour.
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1308899"> </a><a href="tutsqtxml.html#wp1308879"><span class="cHyperlink">
Learning About the XMLSTOCKAPP Files</span></a></li>
<li><a name="wp1309470"> </a><a href="tutsqtxml.html#wp1183027">Examining the XMLSTOCKAPP Clients</a></li>
<li><a name="wp1311259"> </a><a href="tutsqtxml.html#wp1181335">Examining the XMLSTOCKAPP Servers</a></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1308879"> </a>
Learning About the XMLSTOCKAPP Files
</h3>
<p class="pBody"><a name="wp1308997"> </a>
The files that make up the <code class="cCode">XMLSTOCKAPP</code> application are delivered in the <code class="cCode">samples/atmi/xmlstockapp</code> directory. The files that are delivered with this sample are:
</p>
<p class="pBody"><a name="wp1179761"> </a>
The <code class="cCode">XMLSTOCKAPP</code> directory contains the following files:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1179840"> </a>Two <code class="cCode">.xml</code> input files to the client: <code class="cCode">stock_quote_beas.xml</code> and <code class="cCode">stock_quote_msft.xml</code></li>
<li><a name="wp1179902"> </a>One client: <code class="cCode">Client.cpp</code> </li>
<li><a name="wp1185177"> </a>Two files that are servers: <code class="cCode">stockxml</code> and <code class="cCode">stockxml_c</code></li>
<li><a name="wp1185179"> </a>Files provided to facilitate the use of <code class="cCode">STOCKAPP</code> as an example:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1314807"> </a><code class="cCode">SAXPrint.cpp</code></li>
<li><a name="wp1314837"> </a><code class="cCode">SAXPrintHandler.cpp</code></li>
<li><a name="wp1314838"> </a><code class="cCode">DOMTreeErrorReporter.cpp</code></li>
<li><a name="wp1314846"> </a><code class="cCode">xmlWrapper.cpp</code></li>
</ul></div>
</ul></div>
<h3 class="pHeading2"><a name="wp1183027"> </a>
Examining the XMLSTOCKAPP Clients
</h3>
<p class="pBody"><a name="wp1180783"> </a>
In the ATMI client-server architecture of the Oracle Tuxedo system, there are two modes of communication: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1180784"> </a>Request/response mode, which is characterized by the sending of a single request for a service to be performed by the server and getting back a single response.</li>
<li><a name="wp1180785"> </a>Conversational mode; in this mode a dedicated connection is established between a client (or a server acting like a client) and a server. The connection remains active until terminated. While the connection is active, messages containing service requests and responses can be sent and received between the two participating processes.</li>
</ul></div>
<p class="pBody"><a name="wp1309897"> </a>
The <code class="cCode">XMLSTOCKAPP</code> implements the request/response mode and uses the <code class="cCode">STOCKQUOTE</code> service to request a stock price.
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1309922"> </a>A request for a stock price for BEAS or MSFT.</li>
<li><a name="wp1309947"> </a>The client, which is run with a single argument in an XML file, calls the STOCKQUOTE service.</li>
<li><a name="wp1309953"> </a>The service updates the XML buffer with the stock price.</li>
<li><a name="wp1310029"> </a>The client prints the XML buffer. </li>
</ol></div>
<h4 class="pHeading3"><a name="wp1180796"> </a>
A Request/Response Client: stock_quote_beas.xml
</h4>
<p class="pBody"><a name="wp1310606"> </a>
<code class="cCode">Client.cpp</code> is a client program that uses input from one of the XML files, <code class="cCode">stock_quote_beas.xml</code> or <code class="cCode">stock_quote_msft.xml</code>. It makes an  inquiry that calls on the service <code class="cCode">STOCKQUOTE</code> and returns the stock price for BEAS or MSFT. As an executable, it is invoked as follows: 
</p>
<a name="wp1180798"> </a><div class="pPreformatted"><pre>Client stock_quote_beas.xml</pre></div><p class="pBody"><a name="wp1315202"> </a>
or
</p>
<a name="wp1315245"> </a><div class="pPreformatted"><pre>Client stock_quote_msft.xml</pre></div><h4 class="pHeading3"><a name="wp1180807"> </a>
See Also
</h4>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1180811"> </a><span class="cHyperlink">
&#8220;What You Can Do Usin</span><a href="../int/intatm.html"></a>g the ATMI&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em></li>
<li><a name="wp1295271"> </a><span class="cHyperlink">
&#8220;What Are </span><a href="../int/intatm.html"></a>Typed Buffers?&#8221; in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em></li>
<li><a name="wp1180816"> </a>ATMI commands and functions in <em class="cEmphasis">Oracle Tuxedo Command Reference</em> and <em class="cEmphasis">Oracle Tuxedo ATMI C Function Reference</em></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1181335"> </a>
Examining the XMLSTOCKAPP Servers
</h3>
<p class="pBody"><a name="wp1311289"> </a>
ATMI servers are executable processes that offer one or more services. In the Oracle Tuxedo system, they continually accept requests (from processes acting as clients) and dispatch them to the appropriate services. It is the services accessing a resource manager that provide the functionality for which your Oracle Tuxedo system transaction processing application is being developed. Service routines are one part of the application that must be written by the Oracle Tuxedo system programmer (user-defined clients being another part).
</p>
<p class="pBody"><a name="wp1311300"> </a>
The <code class="cCode">STOCKQUOTE</code> service in the <code class="cCode">XMLSTOCKAPP</code> program uses functions provided in the Application-to-Transaction Monitor Interface (ATMI) to return a stock price to the client as an XML buffer.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1181492"> </a>
Preparing XMLSTOCKAPP Files and Resources
</h2><p class="pBody"><a name="wp1181561"> </a>
This documentation leads you through the procedures you must complete to create the files and other resources you need to run <code class="cCode">XMLSTOCKAPP</code>.
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1313564"> </a><a href="tutsqtxml.html#wp1180445">Step1: Copy the XMLSTOCKAPP Files to a New Directory</a></li>
<li><a name="wp1313602"> </a><a href="tutsqtxml.html#wp1311580">Step 2: Set Environment Variables</a></li>
<li><a name="wp1313622"> </a><a href="tutsqtxml.html#wp1312743">Step 3: Building Clients</a></li>
<li><a name="wp1313634"> </a><a href="tutsqtxml.html#wp1189524">Step 4: Building Servers in XMLSTOCKAPP</a></li>
<li><a name="wp1313693"> </a><a href="tutsqtxml.html#wp1078608">Step 5: How to Edit the Configuration File</a></li>
<li><a name="wp1313721"> </a><a href="tutsqtxml.html#wp1078701">Step 6: Creating a Binary Configuration File</a></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1180445"> </a>
Step1: Copy the XMLSTOCKAPP Files to a New Directory
</h3>
<p class="pBody"><a name="wp1311668"> </a>
It is recommended that you copy the XMLSTOCKAPP files to your own directory prior to editing any of the files or running the sample.
</p>
<h3 class="pHeading2"><a name="wp1311580"> </a>
Step 2: Set Environment Variables
</h3>
<p class="pBody"><a name="wp1315262"> </a>
You will need to edit the environment variables file.
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1194308"> </a>Ensure that <code class="cCode">TUXDIR</code> is set. If it is not set, execution of the file fails with the following message: </li>
<a name="wp1078277"> </a><div class="pPreformattedRelative"><pre>TUXDIR: parameter null or not set</pre></div><li><a name="wp1078278"> </a>Set <code class="cCode">TUXDIR</code> to the root directory of your Oracle Tuxedo system directory structure, and export it.</li>
<li><a name="wp1078279"> </a>Set <code class="cCode">APPDIR</code> to the directory <code class="cCode">{TUXDIR}/samples/atmi/XMLSTOCKAPP</code> which is the directory where <code class="cCode">XMLSTOCKAPP</code> source files are located: <code class="cCode">APPDIR</code> is a directory where the Oracle Tuxedo system looks for your application-specific files. If you copied the <code class="cCode">XMLSTOCKAPP</code> files to a different directory to safeguard the original source files, then enter the directory there. It does not have to be under <code class="cCode">TUXDIR</code>.</li>
<li><a name="wp1078281"> </a>When you have made all necessary changes to the environment variables file,  execute it as follows:</li>
<a name="wp1078282"> </a><div class="pPreformattedRelative"><pre>. ./&lt;VARFILE&gt;</pre></div><p class="pBodyRelative"><a name="wp1315391"> </a>
where <code class="cCode">&lt;VARFILE&gt;</code> is the name of your environment variable file.
</p>
</ol></div>
<h4 class="pHeading3"><a name="wp1078287"> </a>
Additional Requirements
</h4>
<p class="pBody"><a name="wp1311948"> </a>
<code class="cCode">LD_LIBRARY_PATH</code> must include <code class="cCode">$TUXDIR/lib</code> on systems that use shared libraries, with the exception of HP-UX and AIX.
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1079881"> </a>On AIX, set <code class="cCode">LIBPATH</code> instead of <code class="cCode">LD_LIBRARY_PATH</code>. </li>
<li><a name="wp1079971"> </a>On HP-UX, set <code class="cCode">SHLIB_PATH</code> instead of <code class="cCode">LD_LIBRARY_PATH</code>.</li>
<li><a name="wp1080104"> </a>If your operating system is Sun Solaris, you need to: put <code class="cCode">/usr/5bin</code> at the beginning of your <code class="cCode">PATH</code>. The following command can be used: </li>
<a name="wp1080105"> </a><div class="pPreformattedRelative"><pre>PATH=/usr/5bin:$PATH;export PATH</pre></div><p class="pBodyRelative"><a name="wp1183433"> </a>
Use <code class="cCode">/bin/sh</code> rather than <code class="cCode">csh</code> for your shell.
</p>
</ul></div>
<h3 class="pHeading2"><a name="wp1312743"> </a>
Step 3: Building Clients
</h3>
<p class="pBody"><a name="wp1312744"> </a>
To build the client:
</p>
<a name="wp1312745"> </a><div class="pPreformatted"><pre>export CFLAGS=-I</pre></div><p class="pBody"><a name="wp1312746"> </a>
Use the following commands for the specified opearting system:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1312747"> </a>For Solaris:</li>
<a name="wp1312748"> </a><div class="pPreformattedRelative"><pre>export CC=CC</pre></div><li><a name="wp1312749"> </a>For HP-UX:</li>
<a name="wp1312750"> </a><div class="pPreformattedRelative"><pre>export CC=aCC</pre></div><li><a name="wp1312751"> </a>For Digital Unix:</li>
<a name="wp1312752"> </a><div class="pPreformattedRelative"><pre>export CC=cxx</pre></div><li><a name="wp1312753"> </a>For AIX:</li>
<a name="wp1312754"> </a><div class="pPreformattedRelative"><pre>export CC=xlC_r</pre></div><li><a name="wp1316793"> </a>For Linux:</li>
<a name="wp1316794"> </a><div class="pPreformattedRelative"><pre>export CC=g++</pre></div></ul></div>
<p class="pBody"><a name="wp1312755"> </a>
The following command builds the client:
</p>
<a name="wp1312756"> </a><div class="pPreformatted"><pre>buildclient -o Client -f Client.cpp -f SAXPrint.cpp -f SAXPrintHandlers.cpp -f -ltxml</pre></div><h3 class="pHeading2"><a name="wp1189524"> </a>
Step 4: Building Servers in XMLSTOCKAPP
</h3>
<p class="pBody"><a name="wp1189525"> </a>
In the XMLSTOCKAPP sample, two servers are provided for you. However, if you want to build the servers for this example, you will need to follow the directions inn the README file.
</p>
<p class="pBody"><a name="wp1315826"> </a>
<code class="cCode">buildserver</code> is used to put together an executable ATMI server. Options identify the names of the output file, the input files provided by the application, and various libraries that permit you to run an Oracle Tuxedo system application in a variety of ways.
</p>
<p class="pBody"><a name="wp1189526"> </a>
The key <code class="cCode">buildserver</code> command-line options are illustrated in the examples that follow.
</p>
<p class="pBody"><a name="wp1312150"> </a>
The <code class="cCode">buildserver</code> command is used in a <code class="cCode">.mk</code> file to compile and build each server in the stock application. (Refer to <a href="../rfcm/rfcmd.html">buildserver(1)</a> in the <em class="cEmphasis">Oracle Tuxedo Command Reference</em> for complete details.)
</p>
<h4 class="pHeading3"><a name="wp1189529"> </a>
How to Build the stockxml and stockxml_c Servers
</h4>
<p class="pBody"><a name="wp1194328"> </a>
The <code class="cCode">buildserver</code> command that was used to build the <code class="cCode">stockxml</code> server and the <code class="cCode">stockxml_c</code> server follows: 
</p>
<a name="wp1189531"> </a><div class="pPreformatted"><pre>buildserver -s STOCKQUOTE -o stockxml -f stockxml.cpp -f DOMTreeErrorReporter.cpp -f -ltxml<br />buildserver -s STOCKQUOTE -f stockxml_c.c -o stockxml_c -f xmlWrapper.cpp -f DOMTreeErrorReporter.cpp -f -ltxml</pre></div><p class="pBodyRelative"><a name="wp1189532"> </a>
The explanation of the command-line options follows: 
</p>
<div class="pSmartList1Bullet"><ul>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1297713"> </a>The <code class="cCode">-o</code> option is used to assign a name to the executable output file. If no name is provided, the file is named <code class="cCode">SERVER</code>.</li>
<li><a name="wp1299052"> </a>The <code class="cCode">-s</code> option is used to specify the service names in the server that are available to be advertised when the server is booted. If the name of the function that performs a service is different from the service name, the function name becomes part of the argument of the <code class="cCode">-s</code> option. In the <code class="cCode">XMLSTOCKAPP</code>, the function name is the same as the name of the service so only the service names themselves need to be specified. It is our convention to specify all uppercase for the service name. However, the <code class="cCode">-s</code> option of <code class="cCode">buildserver</code> does allow you to specify an arbitrary name for the processing function for a service within a server. Refer to the <a href="../rfcm/rfcmd.html">buildserver(1)</a> in the <em class="cEmphasis">Oracle Tuxedo Command Reference </em>for details. It is also possible for the administrator to specify that only a subset of the services that were used to create the server with the <code class="cCode">buildserver</code> command is to be available when the server is booted. For more information, refer to <em class="cEmphasis">Administering an Oracle Tuxedo Application at Run Time</em> and <em class="cEmphasis">Setting Up an Oracle Tuxedo Application</em>.</li>
<li><a name="wp1189538"> </a>The <code class="cCode">-f</code> option specifies the files that are used in the link-edit phase. Also refer to the <code class="cCode">-l</code> option on the <code class="cCode">buildserver</code> reference page. There is a significance to the order in which the files are listed. The order is dependent on function references and in what libraries the references are resolved. Source modules should be listed ahead of libraries that might be used to resolve their references. Object files can be either separate <code class="cCode">.o</code> files or groups of files in archive (<code class="cCode">.a</code>) files. If more than a single filename is given as an argument to a <code class="cCode">-f</code>, the syntax calls for a list enclosed in double quotes. You can use as many <code class="cCode">-f</code> options as you need.</li>
<li><a name="wp1312402"> </a>The <code class="cCode">-s</code> option names the <code class="cCode">STOCKQUOTE</code> service to be the services that comprise the <code class="cCode">stockxml</code> and <code class="cCode">stockxml_c</code> servers. The <code class="cCode">-o</code> option assigns the name <code class="cCode">stockxml</code> and <code class="cCode">stockxml_c</code> to the executable output file and the <code class="cCode">-f</code> option specifies that the <code class="cCode">stockxml.cpp</code>, <code class="cCode">DOMTreeErrorReporter.cpp</code>, and the <code class="cCode">xmlWrapper.cpp</code> files are to be used in the link edit phase of the build.</li>
</ul></div>
</ul></div>
<h4 class="pHeading3"><a name="wp1189542"> </a>
See Also
</h4>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1189546"> </a><a href="tutsqtxml.html#wp1178534">Familiarizing Yourself with XMLSTOCKAPP</a></li>
<li><a name="wp1189611"> </a><a href="../rfcm/rfcmd.html">buildserver(1)</a></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1078608"> </a>
Step 5: How to Edit the Configuration File
</h3>
<p class="pBody"><a name="wp1078610"> </a>
The sample configuration file, ubbsimple, must be edited to replace the bracketed items with values appropriate to your installation. Your TUXDIR and TUXCONFIG environment variables must match the values in the configuration file.
</p>
<div class="pCodeTitle"><a name="wp1313822"> </a>
Listing&#160;6-1	   The ubbsimple Configuration File 
</div> <a name="wp1313823"> </a><div class="pPreformatted"><pre>1$<br />2<br />3 #Skeleton UBBCONFIG file for the BEA Tuxedo Simple Application.<br />4 #Replace the &lt;bracketed&gt; items with the appropriate values.<br />5 RESOURCES<br />6 IPCKEY            &lt;<em class="cEmphasis">Replace with valid IPC Key greater than 32,768</em>&gt;<br />7<br />8  #Example:<br />9<br />10 #IPCKEY         62345<br />11<br />12 MASTER          simple<br />13 MAXACCESSERS    5<br />14 MAXSERVERS      5<br />15 MAXSERVICES     10<br />16 MODEL           SHM<br />17 LDBAL           N<br />18 <br />19 *MACHINES<br />20<br />21 DEFAULT:<br />22<br />23 			        APPDIR=&quot;&lt;<em class="cEmphasis">Replace with the current pathname</em>&gt;&quot;<br />24	         TUXCONFIG=&quot;&lt;<em class="cEmphasis">Replace with TUXCONFIG Pathname</em>&gt;&quot;<br />25         TUXDIR=&quot;&lt;<em class="cEmphasis">Root directory of Tuxedo (not /)</em>&gt;&quot;<br />26 #Example:<br />27 #       APPDIR=&quot;/usr/me/simpdir&quot;<br />28 #       TUXCONFIG=&quot;/usr/me/simpdir/tuxconfig&quot;<br />29 #       TUXDIR=&quot;/usr/tuxedo&quot;<br />30<br />31 &lt;Machine-name&gt;  LMID=simple<br />32 #Example:<br />33 #tuxmach        LMID=simple<br />34 *GROUPS<br />35 GROUP1<br />36              LMID=simple   GRPNO=1  OPENINFO=NONE<br />37<br />38 *SERVERS<br />39  DEFAULT:<br />40              CLOPT=&quot;-A&quot;<br />41  stockxml    SRVGRP=GROUP1 SRVID=1<br />42  stockxml_c  SRVGRP=GROUP1 SRVID=1<br />43 *SERVICES<br />44  STOCKQUOTE</pre></div><div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1313825"> </a>For each <code class="cCode">&lt;string&gt;</code> (that is, for each string shown between angle brackets), substitute an appropriate value.</li>
</ol></div>
<h4 class="pHeading3"><a name="wp1078660"> </a>
See Also
</h4>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1078661"> </a><a href="tutsqtxml.html#wp1181492">Preparing XMLSTOCKAPP Files and Resources</a></li>
<li><a name="wp1184682"> </a><a href="../rf5/rf5.html">UBBCONFIG(5)</a> in <em class="cEmphasis">File Formats, Data Descriptions, MIBs, and System Processes Reference</em></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1078701"> </a>
Step 6: Creating a Binary Configuration File
</h3>
<p class="pBody"><a name="wp1194687"> </a>
Before creating the binary configuration file, you need to be in the directory in which your <code class="cCode">XMLSTOCKAPP</code> files are located and you must set the environment variables. Complete the following tasks.
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1182497"> </a>Go to the directory in which your <code class="cCode">XMLSTOCKAPP</code> files are located.</li>
<li><a name="wp1182505"> </a>Set the environment variables by entering:</li>
<a name="wp1078707"> </a><div class="pPreformattedRelative"><pre>. ./&lt;variable_file&gt;</pre></div><p class="pBodyRelative"><a name="wp1316162"> </a>
where <code class="cCode">&lt;variable_file&gt;</code> is the name of your variables file.
</p>
</ol></div>
<h4 class="pHeading3"><a name="wp1078708"> </a>
How to Load the Configuration File
</h4>
<p class="pBody"><a name="wp1182524"> </a>
Once you have finished editing the configuration file, you must load it into a binary file on your <code class="cCode">MASTER</code> machine. The name of the binary configuration file is <code class="cCode">TUXCONFIG</code>; its path name is defined in the <code class="cCode">TUXCONFIG</code> environment variable. The file should be created by a person with the effective user ID and group ID of the Oracle Tuxedo system administrator, which should be the same as the <code class="cCode">UID</code> and <code class="cCode">GID</code> values in your configuration file. If this requirement is not met, you may have permission problems in running <code class="cCode">XMLSTOCKAPP</code>. 
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1194701"> </a>To create <code class="cCode">TUXCONFIG</code>, enter the following command: </li>
<a name="wp1182525"> </a><div class="pPreformattedRelative"><pre>    tmloadcf <code class="cCode">ubbsimple</code></pre></div><p class="pBodyRelative"><a name="wp1182526"> </a>
While the configuration file is being loaded, you are prompted several times to confirm that you want to install this configuration, even if doing so means an existing configuration file must be overwritten. If you want to suppress such prompts, include the <code class="cCode">-y</code> option on the command line.
</p>
<li><a name="wp1182527"> </a>If you want the amount of IPC resources needed by your application to be calculated by the Oracle Tuxedo system, include the <code class="cCode">-c</code> option on the command line.</li>
<p class="pBodyRelative"><a name="wp1182528"> </a>
<code class="cCode">TUXCONFIG</code> can be installed only on the <code class="cCode">MASTER</code> machine; it is propagated to other machines by <code class="cCode">tmboot</code> when the application is booted. 
</p>
<p class="pBodyRelative"><a name="wp1078713"> </a>
<code class="cCode">tmloadcf</code> parses the text configuration file (<code class="cCode">UBBCONFIG</code>) for syntax errors before it loads it, so if there are errors in the file, the job fails.
</p>
</ol></div>
<h4 class="pHeading3"><a name="wp1078714"> </a>
See Also
</h4>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1092587"> </a><a href="tutsqtxml.html#wp1181492">Preparing XMLSTOCKAPP Files and Resources</a></li>
<li><a name="wp1183548"> </a><a href="../rfcm/rfcmd.html">tmloadcf(1)</a> in <em class="cEmphasis">Oracle Tuxedo Command Reference</em></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1182599"> </a>
 Running XMLSTOCKAPP
</h2><p class="pBody"><a name="wp1182565"> </a>
This documentation leads you through the procedures for booting <code class="cCode">XMLSTOCKAPP</code>, testing it by running various client programs and transactions, and shutting it down when you have finished. 
</p>
<h3 class="pHeading2"><a name="wp1092589"> </a>
Step 1: How to Prepare to Boot
</h3>
<p class="pBody"><a name="wp1092680"> </a>
Before booting <code class="cCode">XMLSTOCKAPP</code>, verify that your machine has enough IPC resources to support your application. To generate a report on IPC resources, run the <code class="cCode">tmboot</code> command with the <code class="cCode">-c</code> option. 
</p>
<h3 class="pHeading2"><a name="wp1092643"> </a>
Step 2: How to Boot XMLSTOCKAPP
</h3>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1182804"> </a>Set the environment: </li>
<a name="wp1182805"> </a><div class="pPreformattedRelative"><pre>../&lt;variable_file&gt; </pre></div><li><a name="wp1182806"> </a>Boot the application by entering the following: </li>
<a name="wp1182807"> </a><div class="pPreformattedRelative"><pre>    tmboot -y</pre></div><p class="pBodyRelative"><a name="wp1182810"> </a>
When you enter -<code class="cCode">y</code>, a running report, such as the following, is displayed on the screen:
</p>
<a name="wp1182811"> </a><div class="pPreformattedRelative"><pre>Booting all admin and server processes in /usr/me/appdir/tuxconfig<br />Booting all admin processes<br />exec BBL -A:<br />           process id=24223 Started.</pre></div></ol></div>
<p class="pBody"><a name="wp1182812"> </a>
The report continues until all servers in the configuration have been started. It ends by reporting the total number of servers started. 
</p>
<p class="pBody"><a name="wp1182813"> </a>
If you prefer, you can boot only a portion of the configuration. For example, to boot only administrative servers, include the <code class="cCode">-A</code> option. If no options are specified, the entire application is booted. 
</p>
<p class="pBody"><a name="wp1182814"> </a>
In addition to reporting on the number of servers booted, <code class="cCode">tmboot</code> also sends messages to the <code class="cCode">ULOG</code>.
</p>
<h4 class="pHeading3"><a name="wp1078760"> </a>
See Also
</h4>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1183568"> </a><a href="../rfcm/rfcmd.html">tmboot(1)</a> in the <em class="cEmphasis">Oracle Tuxedo Command Reference</em></li>
<li><a name="wp1078944"> </a><a href="../rf3cbl/rf3cbl.html">USERLOG(3cbl)</a> in the <em class="cEmphasis">Oracle Tuxedo ATMI COBOL Function Reference</em></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1078829"> </a>
Step 3: How to Test XMLSTOCKAPP Services
</h3>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1182927"> </a>If you are logging in cold to a running system, you must set your environment for <code class="cCode">XMLSTOCKAPP</code>. To do so, enter the following command:</li>
<a name="wp1078831"> </a><div class="pPreformattedRelative"><pre>../&lt;variable_file&gt;</pre></div><li><a name="wp1078835"> </a>Run the client program. To execute the client program, enter the following command:</li>
<a name="wp1078840"> </a><div class="pPreformattedRelative"><pre>Client stock_quote_beas.xml</pre></div></ol></div>
<h3 class="pHeading2"><a name="wp1082419"> </a>
Step 4: How to Shut Down XMLSTOCKAPP
</h3>
<p class="pBody"><a name="wp1183009"> </a>
To bring down <code class="cCode">XMLSTOCKAPP</code>, enter the <code class="cCode">tmshutdown(1)</code> command with no arguments, from the <code class="cCode">MASTER</code> machine, as follows.
</p>
<a name="wp1183010"> </a><div class="pPreformattedRelative"><pre>    tmshutdown -y</pre></div><p class="pBody"><a name="wp1183011"> </a>
Running this command (or the shutdown command of <code class="cCode">tmadmin</code>) causes the following results:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1183012"> </a>All application servers, gateway servers, TMS servers, and administrative servers are shut down.</li>
<li><a name="wp1183022"> </a>All associated IPC resources are removed.</li>
</ul></div>
<h4 class="pHeading3"><a name="wp1078848"> </a>
See Also
</h4>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1183595"> </a><a href="../rfcm/rfcmd.html">tmadmin(1)</a> in the <em class="cEmphasis">Oracle Tuxedo Command Reference</em> </li>
<li><a name="wp1078899"> </a><a href="../rfcm/rfcmd.html">tmshutdown(1)</a> in the <em class="cEmphasis">Oracle Tuxedo Command Reference</em></li>
</ul></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="tutsqtxml.html"><img id="LongDescNotReq7" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="tutst.html"><img id="LongDescNotReq8" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="tutxmlfmlapp.html"><img id="LongDescNotReq9" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
