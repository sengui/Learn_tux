<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="3" />
<meta name="LOC_US_CHANGE" content="42043" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux12c/pgj/fm/pgapi.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="06/29/12 11:17:27" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>ATMI Java Server User Interfaces</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Programming an Oracle Tuxedo Application Using Java
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="pgenv.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="pgsmp.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
&nbsp;
<a href="../pdf/pgj.pdf" target="pdf"><img id="LongDescNotReq5" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq6" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1126219"> </a>
ATMI Java Server User Interfaces
</h1>
<p class="pBody"><a name="wp1118758"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1055312"> </a><a href="pgapi.html#wp1055327">TuxedoJavaServer</a></li>
<li><a name="wp1055316"> </a><a href="pgapi.html#wp1127122">Oracle Tuxedo Java Context</a></li>
<li><a name="wp1055320"> </a><a href="pgapi.html#wp1127125">TJATMI Primitives for Tuxedo Java Applications</a></li>
<li><a name="wp1055324"> </a><a href="pgapi.html#wp1127305">TypedBuffers for Tuxedo Java Applications</a></li>
<li><a name="wp1127764"> </a><a href="pgapi.html#wp1127518">Get/Set Service Information</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1055327"> </a>
TuxedoJavaServer
</h2><p class="pBody"><a name="wp1127046"> </a>
<code class="cCode">TuxedoJavaServer</code> is an abstract class, which should be inherited by all the user-defined classes that implement the services. 
</p>
<p class="pGraphic"><a name="wp1127061"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1127065table1127063"><caption><a name="wp1127065"> </a>
Table 3-1  <span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">TuxedoJavaServer Interfaces</span>

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1127069"> </a>
Function
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1127071"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127073"> </a>
<code class="cCode">tpsvrinit</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127075"> </a>
An abstract method, which should be implemented by child class to do some initialization works
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127077"> </a>
<code class="cCode">tpsvrdone</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127079"> </a>
An abstract method, which should be implemented by child class to do some cleanup works
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127081"> </a>
<code class="cCode">getTuxAppContext</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127083"> </a>
Use to retrieve the current attached Tuxedo application Java context.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1127122"> </a>
Oracle Tuxedo Java Context
</h2><p class="pBody"><a name="wp1127123"> </a>
To access the TJATMI primitives provided by Oracle Tuxedo Java Support, you need to get a <code class="cCode">TuxAppContext</code> object that implements all the TJATMI primitives. 
</p>
<p class="pBody"><a name="wp1127124"> </a>
Because the service class inherits from <code class="cCode">TuxedoJavaServer</code>, you can call <code class="cCode">getTuxAppContext()</code> in the service to get the context object.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1127125"> </a>
TJATMI Primitives for Tuxedo Java Applications
</h2><p class="pBody"><a name="wp1127126"> </a>
TJATMI is a set of primitives that provides communication between clients and servers, such as calling the services, starting and ending transactions, getting the connection to DataSource, logging, and etc.
</p>
<p class="pGraphic"><a name="wp1127062"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1127142table1127140"><caption><a name="wp1127142"> </a>
Table 3-2  TJATMI Primitives

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1127146"> </a>
Name
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1127148"> </a>
Operation
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127150"> </a>
<code class="cCode">tpcall</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127152"> </a>
Use for synchronous invocation of an Oracle Tuxedo service during request/response communication.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127154"> </a>
<code class="cCode">tpreturn</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127156"> </a>
Use to set the return value and data in Tuxedo Java Server.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127168"> </a>
tpbegin
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127170"> </a>
Use to begin a transaction.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127172"> </a>
tpcommit
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127174"> </a>
Use to commit the current transaction
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127176"> </a>
tpabort
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127178"> </a>
Use to abort the current transaction
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127180"> </a>
tpgetlev
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127182"> </a>
Use to check if a transaction is in progress
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127184"> </a>
getConnection
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127186"> </a>
Use to get a connection to the configured DataSource 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127158"> </a>
<code class="cCode">userlog</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127160"> </a>
Use to print the user log in Tuxedo user log file
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<a name="wp1127138"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The service continues running after <code class="cCode">tpreturn</code> ends execution. It is recommended put <code class="cCode">tpreturn()</code> as the last executive statement in the service.</td>
</tr>
</table>

<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1127305"> </a>
TypedBuffers for Tuxedo Java Applications
</h2><p class="pBody"><a name="wp1127306"> </a>
ATMI Java server reuses the Oracle WebLogic Tuxedo Connector TypedBuffers that corresponds to Oracle Tuxedo typed buffers. Messages are passed to servers in typed buffers. The ATMI Java server provides the following buffer types in <a href="pgapi.html#wp1127363">Table&#160;3-3</a>:
</p>
<p class="pGraphic"><a name="wp1127268"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1127363table1127361"><caption><a name="wp1127363"> </a>
Table 3-3  TypedBuffers

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1127367"> </a>
Buffer Type
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1127369"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127371"> </a>
<code class="cCode">TypedString</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127373"> </a>
Buffer type used when the data is an array of characters that terminates with the null character. Oracle Tuxedo equivalent: <code class="cCode">STRING</code>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127375"> </a>
<code class="cCode">TypedCArray</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127377"> </a>
Buffer type used when the data is an undefined array of characters (byte array), any of which can be null. Oracle Tuxedo equivalent: <code class="cCode">CARRAY</code>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127379"> </a>
TypedFML
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127381"> </a>
Buffer type used when the data is self-defined. Each data field carries its own identifier, an occurrence number, and possibly a length indicator. Oracle Tuxedo equivalent: <code class="cCode">FML</code>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127383"> </a>
TypedFML32
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127385"> </a>
Buffer type similar to TypeFML but allows for larger character fields, more fields, and larger overall buffers. Oracle Tuxedo equivalent: <code class="cCode">FML32</code>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127387"> </a>
TypedXML
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127389"> </a>
Buffer type used when data is an XML based message. Oracle Tuxedo equivalent: XML for Tuxedo Release 7.1 and higher.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127391"> </a>
TypedView
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127393"> </a>
Buffer type used when the application uses a Java structure to define the buffer structure using a view description file. Oracle Tuxedo equivalent: <code class="cCode">VIEW</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127395"> </a>
TypedView32
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127397"> </a>
Buffer type similar to View but allows for larger character fields, more fields, and larger overall buffers. Oracle Tuxedo equivalent: <code class="cCode">VIEW32</code>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127399"> </a>
<code class="cCode">TypedMBString</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127401"> </a>
Buffer type used when the data is a wide array of characters to support multibyte characters. Oracle Tuxedo equivalent: <code class="cCode">MBSTRING</code>.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1127518"> </a>
Get/Set Service Information 
</h2><p class="pBody"><a name="wp1127519"> </a>
Use the <code class="cCode">TPSVCINFO</code> class to get/set service information sent by the Oracle Tuxedo client.
</p>
<p class="pGraphic"><a name="wp1127359"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1127541table1127539"><caption><a name="wp1127541"> </a>
Table 3-4  Getter Functions

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1127545"> </a>
Function
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1127547"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127549"> </a>
<code class="cCode">getServiceData</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127551"> </a>
Use to return the service data sent from the Oracle Tuxedo Client.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127553"> </a>
<code class="cCode">getServiceFlags</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127555"> </a>
Use to return the service flags sent from the Oracle Tuxedo Client.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127557"> </a>
<code class="cCode">getServiceName</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127559"> </a>
Use to return the service name that was called. 
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pGraphic"><a name="wp1127537"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1127570table1127568"><caption><a name="wp1127570"> </a>
Table 3-5  Setter Functions

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1127574"> </a>
Function
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1127576"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127578"> </a>
<code class="cCode">setServiceData</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127580"> </a>
Use to set the service data sent from the Oracle Tuxedo Client.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127582"> </a>
<code class="cCode">setServiceFlags</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127584"> </a>
Use to set the service flags sent from the Oracle Tuxedo Client.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127586"> </a>
<code class="cCode">setServiceName</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127588"> </a>
Use to set the service name that was called. 
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1127566"> </a>
Use <code class="cCode">TuxATMIReply</code> to get the reply data and meta-data from a service invocation.
</p>
<p class="pGraphic"><a name="wp1127659"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1127666table1127664"><caption><a name="wp1127666"> </a>
Table 3-6  Getter Functions for Reply

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1127670"> </a>
Function
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1127672"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127674"> </a>
<code class="cCode">getReplyBuffer</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127676"> </a>
Return the (possibly null) typed buffer returned from a service
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127678"> </a>
<code class="cCode">gettpurcode</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1127680"> </a>
Return the <code class="cCode">tpurcode</code> returned from a service
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1127864"> </a>
Exception
</h2><p class="pBody"><a name="wp1127865"> </a>
You need to catch the exception thrown by JATMI primitives in the service, such as <code class="cCode">tpcall()</code>. There are two types of exceptions that JATMI can throw:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1127866"> </a><code class="cCode">TuxATMITPException</code>:  Exception thrown that represents a JATMI failure.</li>
<li><a name="wp1127867"> </a><code class="cCode">TuxATMITPReplyException</code>: Exception thrown that represents a JATMI failure when user data is associated with the exception thrown. </li>
</ul></div>
<p class="pBody"><a name="wp1127868"> </a>
You can throw the exception within the service, but it is not recommended throw an exception to client.
</p>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="pgapi.html"><img id="LongDescNotReq7" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="pgenv.html"><img id="LongDescNotReq8" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="pgsmp.html"><img id="LongDescNotReq9" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
