<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41824" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux12c/dotnet/fm/dotnet_chapter.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="06/26/12 11:05:01" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Creating Tuxedo .NET Workstation Client Applications</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Using the Tuxedo .NET Workstation Client
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="index.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next_grey1.gif" border="0" alt="Next" />&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
&nbsp;
<a href="../pdf/dotnet.pdf" target="pdf"><img id="LongDescNotReq5" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq6" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1043183"> </a>
Creating Tuxedo .NET Workstation Client Applications
</h1>
<p class="pBody"><a name="wp1059467"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1059443"> </a><a href="dotnet_chapter.html#wp1061312">Overview</a></li>
<li><a name="wp1070477"> </a><a href="dotnet_chapter.html#wp1061374">How Tuxedo .NET Workstation Client Works</a></li>
<li><a name="wp1059552"> </a><a href="dotnet_chapter.html#wp1068523">Programming Tuxedo .NET Workstation Clients</a></li>
<li><a name="wp1065032"> </a><a href="dotnet_chapter.html#wp1064938">Tuxedo .NET Workstation Client Samples</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1061312"> </a>
Overview
</h2><p class="pBody"><a name="wp1063912"> </a>
For Microsoft .NET programmers, Tuxedo .NET Workstation Client is a facilitating tool that will help to efficiently develop Tuxedo .NET Workstation Client applications. Besides providing a set of Object Oriented (OO) interfaces to .NET programmers, this tool allows you to design and write code in OO styles.
</p>
<p class="pBody"><a name="wp1063913"> </a>
For Tuxedo programmers, the Tuxedo .NET Workstation Client inherits most ATMI function invocation behavior which makes it easier to understand and use .NET Client classes to write applications. Because the Tuxedo .NET Workstation Client is published as a .NET assembly, it also leverages the benefit of .NET Framework. It can be used with many .NET programming languages (for example, C#, J#, VB .NET, and ASP.NET).
</p>
<a name="wp1069463"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The Tuxedo Workstation Client has been tested with and officially supports Microsoft Framework 2.0</td>
</tr>
</table>

<p class="pBody"><a name="wp1065746"> </a>
The Tuxedo .NET Workstation Client enables you to write Tuxedo client applications using .NET programming languages to access Tuxedo services. It also provides connectivity between .NET workstation applications and Tuxedo services.
</p>
<p class="pBody"><a name="wp1063468"> </a>
The Tuxedo .NET Workstation Client contains the following components:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1063470"> </a>A wrapper assembly: <code class="cCode">libwsclient.dll</code></li>
<p class="pBodyRelative"><a name="wp1064102"> </a>
This Microsoft .NET Framework <code class="cCode">.dll</code> assembly wraps Tuxedo ATMI and FML functions for developing Tuxedo .NET workstation clients.
</p>
<li><a name="wp1064103"> </a>A set of utilities: <code class="cCode">viewcs</code>, <code class="cCode">viewcs32</code>; <code class="cCode">mkfldcs</code>, <code class="cCode">mkfldcs32</code>; and <code class="cCode">buildnetclient</code></li>
<p class="pBodyRelative"><a name="wp1064231"> </a>
These executable utilities help to develop C# code using Tuxedo VIEW/VIEW32 and FML/FML32 typed buffer and compile C# code to Tuxedo .NET Workstation Client executable assemblies. For more information, see <a href="../rfcm/rfcmd.html">viewcs,&#160;viewcs32(1)</a>, <a href="../rfcm/rfcmd.html">mkfldcs,&#160;mkfldcs32(1)</a>, <a href="../rfcm/rfcmd.html">buildnetclient(1)</a><code class="cCode">.</code>
</p>
<li><a name="wp1064238"> </a>Sample applications: callapp, fmlviewapp, and unsolapp</li>
<p class="pBodyRelative"><a name="wp1064119"> </a>
These three samples explain how to create Tuxedo .NET Workstation Client application using C#. See <a href="dotnet_chapter.html#wp1064938">Tuxedo .NET Workstation Client Samples</a>.
</p>
</ul></div>
<h3 class="pHeading2"><a name="wp1068229"> </a>
Limitations
</h3>
<p class="pBody"><a name="wp1068230"> </a>
The Tuxedo .NET Workstation Client has the following limitations:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1068231"> </a>It exclusively supports developing Tuxedo workstation clients with .NET languages. It does not support developing Tuxedo native clients or Tuxedo servers in a .NET environment.</li>
<li><a name="wp1068860"> </a>New Tuxedo 11<em class="cEmphasis">g </em>R1 ATMI functions are not included in the Tuxedo .NET Workstation Client package (for example, <code class="cCode">tpxmltofml32(3)</code> and <code class="cCode">tpfmltoxml32(3)</code>).</li>
<li><a name="wp1069092"> </a>Tx Transaction interfaces (for example: <code class="cCode">tx_open()</code>, <code class="cCode">tx_close()</code>, and <code class="cCode">tx_begin()</code>), are not supported by Tuxedo .NET Workstation Client. Only Tuxedo TP transaction functions can be used.</li>
<li><a name="wp1069045"> </a>Tuxedo .NET workstation Client implementation requires ATMI client functionality. During the Tuxedo installation, the<span style="font-style: italic"> Full Install Set</span> and <span style="font-style: italic">.NET Client Install Set</span> automatically include the <span style="font-style: italic">ATMI Client Install Set</span>.</li>
<p class="pBodyRelative"><a name="wp1068861"> </a>
For more Tuxedo .NET Client installation and Tuxedo install set information, see <a href="../install/index.html"><em class="cHyperlinkEmphasis">
Installing the Oracle Tuxedo System</a></em>.
</p>
<li><a name="wp1068237"> </a>Microsoft .NET Framework 2.0 must be installed in order to use the Tuxedo .NET Workstation Client. Microsoft .NET Framework is not bundled with the Tuxedo .NET Workstation Client package.</li>
<p class="pBodyRelative"><a name="wp1068289"> </a>
To download Microsoft .NET Framework 2.0 and for more Microsoft .NET Framework information, see <a href="http://msdn.microsoft.com/netframework/"><span class="cHyperlink">
Microsoft&#8217;s .NET Developer Center</a></span>.
</p>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1061374"> </a>
How Tuxedo .NET Workstation Client Works
</h2><p class="pBody"><a name="wp1068031"> </a>
The Tuxedo .NET Workstation Client works as an intermediate layer or wrapper between your .NET applications and underlying Tuxedo workstation shared libraries (<code class="cCode">libwsc.dll</code>,<code class="cCode"> libengine.dll</code>, and <code class="cCode">libfml.dll</code>). <span class="cHyperlink">
<a href="dotnet_chapter.html#wp1070429">Figure 1</a></span> illustrates how the Tuxedo .NET Workstation client works.
</p>
<p class="pBody"><a name="wp1064780"> </a>
The . NET assembly <code class="cCode">libwscdnet.dll</code> contains the wrapper API classes for Tuxedo .NET Workstation Client and implements a set of object-oriented-styled interfaces that wrap around Tuxedo ATMI functions and FML functions.
</p>
<p class="pBody"><a name="wp1064786"> </a>
<code class="cCode">buildnetclient</code> references <code class="cCode">libwscdnet.dll</code> in order to build Tuxedo workstation clients written in . NET programming languages. It targets the Common Language Runtime (CLR) environment, and is invoked by the assemblies (for example, client executables, libraries) depending on it at runtime.
</p>
<p class="pBody"><a name="wp1064613"> </a>
The win32 shared library, <code class="cCode">libwdi.dll</code>, implements platform specific functions that <code class="cCode">libwscdnet.dll</code> uses.
</p>
<a name="wp1064811"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td><code class="cCode">libwdi.dll</code> is only required by <code class="cCode">libwscdnet.dll</code> at runtime and is not necessary when <code class="cCode">buildnetclient</code> builds the application source files into .NET executables.</td>
</tr>
</table>

<a name="wp1064814"> </a><table class="Note">
<tr>
<td valign="top"><b class="texthide">Note:</b></td>
<td>This library is reserved for future use if Microsoft&#8217;s .NET Framework is ported to platforms other than the Microsoft Windows family.</td>
</tr>
</table>
<div class="pFigureTitle"><a name="wp1070429"> </a>
Figure&#160;1   How Tuxedo .NET Workstation Client Works
</div>

 
 <h3 class="pHeading2"><a name="wp1068816"> </a>
Microsoft .NET Framework
</h3>
<p class="pBody"><a name="wp1068817"> </a>
The Tuxedo .NET Workstation Client requires Microsoft .NET Framework 2.0 SDK installation on your system. The Oracle Tuxedo installer program automatically checks to see if .NET Framework is installed or not. If installed, <code class="cCode">libwscdnet.dll</code> is automatically registered in the .NET Framework global assembly cache.
</p>
<p class="pBody"><a name="wp1069109"> </a>
If .NET Framework is not installed, you must install it. You can download the .NET Framework from <a href="http://msdn.microsoft.com/netframework/"><span class="cHyperlink">
Microsoft&#8217;s .NET Developer Center</a></span>. After you have installed .NET Framework, manually registering <code class="cCode">libwscdnet.dll </code>in the global assembly cache is highly recommended.
</p>
<p class="pBody"><a name="wp1068819"> </a>
To manually register/unregister <code class="cCode">libwscdnet.dll</code> in the global assembly cache, you must do the following steps:
</p>
<h5 class="pHeading4"><a name="wp1068820"> </a>
Register libwscdnet.dll Using GUI Configuration
</h5>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1068821"> </a>Launch the . NET GUI configuration program. On your Windows desktop, click <span style="font-style: italic">Start/All Programs/Administrative Tools/Microsoft .NET Framework</span></li>
<li><a name="wp1068822"> </a>Right click <span style="font-style: italic">Assembly Cache</span>. Click <span style="font-style: italic">Add</span></li>
<li><a name="wp1068823"> </a>Select <code class="cCode">libwscdnet.dll</code> from the <code class="cCode">%TUXDIR%\bin</code> directory. Click <span style="font-style: italic">Open. </span><code class="cCode">libwscdnet.dll</code> is added to the Assembly Cache list.</li>
</ol></div>
<h5 class="pHeading4"><a name="wp1068824"> </a>
Unregister libwscdnet.dll Using GUI Configuration
</h5>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1068825"> </a>Launch the . NET GUI configuration program. On your Windows desktop, click <b style="font-weight: bold" class="cBold">Start</b><b style="font-family: Symbol; font-weight: normal" class="cBold">Æ &#160;</b><b style="font-weight: bold" class="cBold">All Programs</b><b style="font-family: Symbol; font-weight: normal" class="cBold">Æ &#160;</b><b style="font-weight: bold" class="cBold">Administrative Tools</b><b style="font-family: Symbol; font-weight: normal" class="cBold">Æ &#160;</b><b style="font-weight: bold" class="cBold">Microsoft .NET Framework</b> and select <b class="cBold">Assembly Cache</b>. </li>
<li><a name="wp1068826"> </a>In the <b class="cBold">Assembly Cache</b> list, right click <code class="cCode">libwscdnet.dll</code> and click <b class="cBold">Delete</b>.</li>
</ol></div>
<h5 class="pHeading4"><a name="wp1068827"> </a>
Register/Unregister Using Command Line
</h5>
<p class="pBody"><a name="wp1069874"> </a>
You can also register/un-register <code class="cCode">libwscdnet.dll</code> from the command line. 
</p>
<p class="pBody"><a name="wp1068828"> </a>
To register enter: <code class="cCode">%WINDIR%\Microsoft.NET\Framework\v2.0.4322\gacutil.exe /i %TUXDIR%\bin\libwscdnet.dll.</code>
</p>
<p class="pBody"><a name="wp1068829"> </a>
To unregister enter: <code class="cCode">%WINDIR%\Microsoft.NET\Framework\v2.0.4322\gacutil.exe /u libwscdnet.dll.</code>
</p>
<h3 class="pHeading2"><a name="wp1068922"> </a>
Developing Tuxedo .NET Workstation Client Applications
</h3>
<p class="pBody"><a name="wp1068923"> </a>
Programmers developing Tuxedo .NET Workstation Client applications must:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1068924"> </a>Use the .NET wrapper classes/interfaces</li>
<li><a name="wp1068925"> </a>Set up a Tuxedo workstation client environment</li>
<li><a name="wp1068926"> </a>Access Tuxedo services via Tuxedo /WS protocol.</li>
</ol></div>
<p class="pBody"><a name="wp1068927"> </a>
The Tuxedo .NET Workstation Client provides development utilities that can aid programmers using Tuxedo FML/VIEW typed buffer and building .NET executable files. See <a href="dotnet_chapter.html#wp1061914">Using FML/FML32 Typed Buffers</a> and <a href="dotnet_chapter.html#wp1064070">Using VIEW/VIEW32 Typed Buffers</a>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1068523"> </a>
Programming Tuxedo .NET Workstation Clients
</h2><p class="pBody"><a name="wp1060339"> </a>
Main changes in Tuxedo .NET Workstation Client interface (compared to Tuxedo ATMI and FML C functions), are as follows:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1060340"> </a><code class="cCode">Class AppContext</code> is used to organize almost all ATMI C functions.</li>
<li><a name="wp1064815"> </a>A Tuxedo transaction is encapsulated as a class. All transaction related functions are defined as methods of <code class="cCode">Class Transaction</code>, (for example, <code class="cCode">tpbegin()</code>, <code class="cCode">tpcommit()</code>, and so on).</li>
<li><a name="wp1067421"> </a>Exception classes control error handling</li>
<li><a name="wp1067422"> </a>Tuxedo typed buffer encapsulation is handled using class <code class="cCode">TypedBuffer</code> and its derived classes. See <a href="dotnet_chapter.html#wp1060011">Using Typed Buffers</a>.</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1067424"> </a>
Tuxedo .NET Workstation Client Namespaces
</h3>
<p class="pBody"><a name="wp1060346"> </a>
Tuxedo .NET Workstation Client namespaces are divided into two categories. The first category includes two namespaces, <code class="cCode">Bea.Tuxedo.ATMI</code> and <code class="cCode">Bea.Tuxedo.FML </code>that bundles ATMI and FML wrapper classes.
</p>
<p class="pBody"><a name="wp1067438"> </a>
The second category uses the <code class="cCode">Bea.Tuxedo.Autogen namespace </code>to bundle all auto-generated .NET classes using .NET Client utilities.
</p>
<p class="pBody"><a name="wp1064374"> </a>
These namespaces include <span style="font-style: italic">all the classes</span> <span style="font-style: italic">and structures</span> related to the functions listed in the <span class="cHyperlink">
<a href="../netwrapper/api/api_ref.htm">Tuxedo .NET Workstation Client API Reference</a>.</span>
</p>
<h3 class="pHeading2"><a name="wp1064358"> </a>
Using AppContext Class
</h3>
<p class="pBody"><a name="wp1064359"> </a>
The <code class="cCode">AppContext</code> class is a key class used to perform Tuxedo service access functions. <code class="cCode">AppContext</code> leverages the OO programming style in a multi-contexted client application. 
</p>
<a name="wp1064362"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>For more <span style="font-style: italic">multi-context</span> information, see <span class="cHyperlink">
<a href="../pgc/pgthr.html">Programming a Multithreaded and Multicontexted ATMI Application</a></span> in <em class="cEmphasis">Programming an Oracle Tuxedo ATMI Application Using C</em>.</td>
</tr>
</table>

<p class="pBody"><a name="wp1062898"> </a>
Most Tuxedo ATMI C functions (for example, <code class="cCode">tpcall()</code>, and <code class="cCode">tpnotify()</code>), are defined as AppContext class methods. Creating an <code class="cCode">AppContext </code>class instance is a key component in connecting to a Tuxedo domain and call services provided by that Tuxedo domain.
</p>
<p class="pBody"><a name="wp1065839"> </a>
In a multi-contexted application written in C or COBOL, programmers typically have to switch between different Tuxedo context using two ATMI functions, <code class="cCode">tpgetctxt()</code> and <code class="cCode">tpsetctxt()</code>. This is not required using the Tuxedo .NET Workstation Client. Creating a class <code class="cCode">AppContext </code>instance also creates specific Tuxedo context instance.
</p>
<p class="pBody"><a name="wp1065841"> </a>
Operations on a particular <code class="cCode">AppContext</code> will not impact other <code class="cCode">AppContext</code> instances. You can develop multi-context applications and easily switch between them.
</p>
<p class="pBody"><a name="wp1060373"> </a>
To create a Tuxedo context instance you need to invoke the static class method, <code class="cCode">AppContext.tpinit(TPINIT),</code> instead of the class constructor.
</p>
<a name="wp1069364"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Tuxedo context instances are not destroyed automatically. You must invoke <code class="cCode">AppContext.tpterm()</code> before a Tuxedo context instance is destroyed, otherwise you may encounter the following:</td>
</tr>
</table>

<div class="pSmartList1NoteBullet"><ul>
<li><a name="wp1069409"> </a>The garbage collector (gc) may destroy <code class="cCode">AppContext</code> class instances without terminating the Tuxedo context session.</li>
<li><a name="wp1069443"> </a>The client and WSH connection remains live until it times-out.</li>
</ul></div>
<p class="pBody"><a name="wp1060375"> </a>
The following sample shows how to connect to a <span style="font-style: italic">single context</span> Tuxedo domain.
</p>
<div class="pCodeTitle"><a name="wp1059881"> </a>
Listing&#160;1	   C# Code Sample: Connecting to a Single Context Client
</div> <a name="wp1060405"> </a><div class="pPreformatted"><pre>……<br /><br />TypedTPINIT  tpinfo = new TypedTPINIT();<br /><br />AppContext ctx1 = AppContext.tpinit(tpinfo);   // connect to Tuxedo domain<br /><br />……<br /><br />ctx1.tpterm();         // disconnect from Tuxedo domain</pre></div><p class="pBody"><a name="wp1069983"> </a>
The following sample shows how to connect to a <span style="font-style: italic">multi-context</span> Tuxedo domain .
</p>
<div class="pCodeTitle"><a name="wp1069978"> </a>
Listing&#160;2	   C# Code Sample: Connecting to a Multi-Context Client
</div> <a name="wp1060692"> </a><div class="pPreformatted"><pre>……<br /><br />TypedTPINIT  tpinfo = new TypedTPINIT();<br /><br />tpinfo.flags = TypedTPINIT.TPMULTICONTEXTS;   // set multi context flag<br /><br />// connect to the first Tuxedo domain<br /><br />AppContext ctx1 = AppContext.tpinit(tpinfo);<br /><br />Utils.tuxputenv(&quot;WSNADDR=//10.2.0.5:1001&quot;);<br /><br />// connect to the second Tuxedo domain<br /><br />AppContext ctx2 = AppContext.tpinit(tpinfo);<br /><br />……<br /><br />ctx1.tpterm();           // disconnect from the first Tuxedo domain<br /><br />ctx2.tpterm();           // disconnect from the second Tuxedo domain</pre></div><h3 class="pHeading2"><a name="wp1060011"> </a>
Using Typed Buffers
</h3>
<p class="pBody"><a name="wp1060029"> </a>
The Tuxedo .NET Workstation Client supports the following built-in Oracle Tuxedo buffer types: <code class="cCode">FML</code>, <code class="cCode">FML32</code>, <code class="cCode">VIEW</code>, <code class="cCode">VIEW32</code>, <code class="cCode">CARRAY</code>, and <code class="cCode">STRING.</code><a href="dotnet_chapter.html#wp1070004"></a><span class="cHyperlink">
Figure 2</span> provides an illustration of the Tuxedo .NET Workstation Client typed buffer class hierarchy.
</p>
<p class="pBody"><a name="wp1064060"> </a>
The Tuxedo .NET Workstation Client class <code class="cCode">TypedBuffer</code> is the base class of all concrete Tuxedo buffer types and provides some low level functions to all derived classes. Class <code class="cCode">TypedBuffer </code>is an <span style="font-style: italic">abstract</span> class and cannot be used to create instances.
</p>
<div class="pFigureTitle"><a name="wp1070004"> </a>
Figure&#160;2   Tuxedo .NET Workstation Client Typed Buffer Class Hierarchy
</div>

 
 <h4 class="pHeading3"><a name="wp1060086"> </a>
Using STRING Typed Buffers
</h4>
<p class="pBody"><a name="wp1060087"> </a>
The Tuxedo .NET Workstation Client uses class <code class="cCode">TypedString </code>to define <code class="cCode">STRING</code> typed buffer characters. <code class="cCode">TypedString</code> instances can be used directly to communicate with <code class="cCode">AppContext</code> methods such as<code class="cCode"> tpcall()</code>. See the following example.
</p>
<div class="pCodeTitle"><a name="wp1060083"> </a>
Listing&#160;3	   Using TypedString Class (C# code example)
</div> <a name="wp1060095"> </a><div class="pPreformatted"><pre>……<br /><br />TypedString  snd_str = new TypedString (&quot;Hello World&quot;);<br /><br />TypedString rcv_str = new TypedString(1000);<br /><br />AppContext ctx = AppContext.tpinit(null);<br /><br />……<br /><br />ctx.tpcall(&quot;TOUPPER&quot;, snd_str, rcv_str, 0);<br /><br />……<br /><br />ctx.tpterm();<br /><br />……</pre></div><h4 class="pHeading3"><a name="wp1061914"> </a>
Using FML/FML32 Typed Buffers
</h4>
<p class="pBody"><a name="wp1064094"> </a>
The Tuxedo .NET Workstation Client uses class <code class="cCode">TypedFML</code>/<code class="cCode">TypedFML32</code> to define most FML C functions. You should do the following steps to develop Tuxedo .NET applications using FML typed buffers:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1064096"> </a>Define FML field table files.</li>
<p class="pBodyRelative"><a name="wp1066162"> </a>
Compile field table files into C# source files using the <code class="cCode">mkfldcs</code> Tuxedo .NET Workstation Client utility. The generated C# files contain public classes including definitions of every FML field ID defined in the field table files. See also <code class="cCode">mkfldcs(1)</code>
</p>
<li><a name="wp1066163"> </a>Write your .NET application.</li>
<p class="pBodyRelative"><a name="wp1062962"> </a>
Use <code class="cCode">TypeFML</code> class methods to create and access FML data.
</p>
</ol></div>
<p class="pBody"><a name="wp1060136"> </a>
For more FML typed buffer programming information, see <a href="../fml/index.html"><em style="font-style: italic" class="cHyperlinkEmphasis">
Programming a Tuxedo ATMI Application Using FML</em><span style="font-style: normal"></a></span>.
</p>
<div class="pCodeTitle"><a name="wp1060123"> </a>
Listing&#160;4	   FML Auto-Generated Code Using mkfldcs (C# code example)
</div> <a name="wp1060153"> </a><div class="pPreformatted"><pre>using Bea.Tuxedo.FML;<br /><br />namespace Bea.Tuxedo.Autogen {<br /><br />public class fnext_flds {<br /><br />public static readonly FLDID F_short 	= 110;	// number: 110	 type: short<br /><br />public static readonly FLDID F_view32	 = 369098863;	// number: 111	 type: view32</pre></div><a name="wp1060160"> </a><div class="pPreformatted"><pre>    public static readonly FLDID F_double	 = 134217840;	// number: 112	 type: double</pre></div><a name="wp1060865"> </a><div class="pPreformatted"><pre>    public static readonly FLDID F_ptr	 = 301990001;	// number: 113	 type: ptr<br /><br />}<br /><br />}	//	namespace Bea.Tuxedo.Autogen </pre></div><div class="pCodeTitle"><a name="wp1060207"> </a>
Listing&#160;5	   Using TypedFML Class (C# code example)
</div> <a name="wp1060923"> </a><div class="pPreformatted"><pre>……<br /><br />TypedFML  fmlbuf = new TypedFML(2048);<br /><br />short s = 123;<br /><br />fmlbuf.Fadd(fnext_flds.F_short,  s);<br /><br />……<br /><br />fmlbuf.Resize(3000);<br /><br />……<br /><br />fmlbuf.Dispose();<br /><br />……</pre></div><h4 class="pHeading3"><a name="wp1064070"> </a>
Using VIEW/VIEW32 Typed Buffers
</h4>
<p class="pBody"><a name="wp1067367"> </a>
The Tuxedo .NET Workstation Client uses class <code class="cCode">TypedVIEW </code>to create and access VIEW/VIEW32 data. You should do the following steps to develop Tuxedo .NET Workstation Client applications using VIEW/VIEW32 typed buffers:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1060259"> </a>Define the VIEW definition file (.v).</li>
<li><a name="wp1060260"> </a>Use the Tuxedo .NET Workstation Client <code class="cCode">viewcs</code> utility to compile the VIEW definition file into a VIEW binary file (.VV). For more information, see<span class="cHyperlink">
 </span><a href="../rfcm/rfcmd.html">viewc(1)</a>,<span class="cHyperlink">
 </span><a href="../rfcm/rfcmd.html">viewcs(1)</a>.</li>
<li><a name="wp1064384"> </a>Use the Tuxedo .NET Workstation Client <code class="cCode">viewcs</code> utility to generate class <code class="cCode">TypedVIEW</code> derived definition C# code and corresponding .dll library (if necessary) from the View binary file.</li>
<li><a name="wp1066091"> </a>Use class <code class="cCode">TypedVIEW</code> to write your .NET application. </li>
<p class="pBodyRelative"><a name="wp1070070"> </a>
Using class <code class="cCode">TypedVIEW</code> provides you with two options:
</p>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1066092"> </a><b class="cBold">Option 1: No Environment Variables</b></li>
<p class="pBodyRelative"><a name="wp1067282"> </a>
This is the most common usage of <code class="cCode">TypedVIEW</code>.
</p>
<p class="pBodyRelative"><a name="wp1067329"> </a>
Use the <code class="cCode">viewcs</code> utility to generate derived class <code class="cCode">TypedVIEW</code> definition C# code from the xxx.VV file, then compile the C# code into an <code class="cCode">.exe</code> file. No additional environment variables are required.
</p>
<p class="pBodyRelative"><a name="wp1067334"> </a>
See the following example:
</p>
<a name="wp1070129"> </a><div class="pPreformattedRelative"><pre>viewcs(32) view1.VV view2.VV<br />buildnetclient -o simpapp.exe simpapp.cs view1.cs view2.cs</pre></div><li><a name="wp1067722"> </a><b class="cBold">Option 2: Use .NET Assembly Environment Variables</b></li>
<p class="pBodyRelative"><a name="wp1067723"> </a>
You can use the <code class="cCode">viewcs</code> utility along with .NET assembly environment variables to generate .dll libraries. The .NET assembly environment variables <code class="cCode">ASSFILES</code>, <code class="cCode">ASSDIR</code> (<code class="cCode">ASSFILES32</code>, <code class="cCode">ASSDIR32 </code>for view32) must be set accordingly in order to view <code class="cCode">viewcs</code>-generated .dll libraries.
</p>
<a name="wp1067736"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td><code class="cCode">TypedView</code> must link to .dll libraries instead of C# code in the .NET environment. This is because it compiles the class type into .dll libraries or <code class="cCode">.exe</code> files. If the definition is compiled into both .dll libraries and .exe files, the output binaries for these two files are not the same.</td>
</tr>
</table>

<p class="pBodyRelative"><a name="wp1067737"> </a>
Using these environment variables, <code class="cCode">.dll</code> libraries can be generated automatically or manually:
</p>
<p class="pBodyRelative"><a name="wp1067837"> </a>
<b class="cBold">Automatic </b><b class="cBold">viewcs</b><b class="cBold">-generated </b><b class="cBold">.dll</b><b class="cBold"> libraries</b>
</p>
<p class="pBodyRelative"><a name="wp1067838"> </a>
This method may be used when many xxx.VV files exist. To simplify management of <code class="cCode">TypedVIEW</code> C# code, these xxx.VV files can be compiled into a .dll library.
</p>
<p class="pBodyRelative"><a name="wp1067839"> </a>
Use the <code class="cCode">viewcs</code> utility to generate derived class <code class="cCode">TypedVIEW</code> definition C# code and corresponding .dll library from the xxx.VV files. Manually register the <code class="cCode">libwscdnet.dll</code> assembly, and then compile your client application using the .dll library.
</p>
<p class="pBodyRelative"><a name="wp1067775"> </a>
See the following example:
</p>
<a name="wp1070109"> </a><div class="pPreformattedRelative"><pre>viewcs(32) view.dll view1.VV view2.VV<br />gacutil.exe /i view.dll<br />buildnetclient -o simpapp.exe simpapp.cs view.dll<br />set ASSFILES(32)=view.dll<br />set ASSDIR(32)=%APDIR%</pre></div><p class="pBodyRelative"><a name="wp1067212"> </a>
<b class="cBold">Manual-generated </b><b class="cBold">.dll</b><b class="cBold"> Libraries</b>
</p>
<p class="pBodyRelative"><a name="wp1067823"> </a>
In certain integrated programming environments (for example, VB .NET, and ASP.NET). the framework provides the executing environment. Client applications are integrated as .dll files. In this case it is best to manually generate .dll libraries.
</p>
<p class="pBodyRelative"><a name="wp1067764"> </a>
Use the <code class="cCode">viewcs</code> utility to generate derived class <code class="cCode">TypedVIEW</code> definition C# code from the xxx.VV file, then compile the C# code into an application .dll.
</p>
<p class="pBodyRelative"><a name="wp1067765"> </a>
The .NET assembly environment variables <code class="cCode">ASSFILES</code>, <code class="cCode">ASSDIR</code> (<code class="cCode">ASSFILES32</code>, <code class="cCode">ASSDIR32 </code>for view32) must be set to application .dll libraries and directories that have <code class="cCode">TypedVIEW</code> defined.
</p>
<p class="pBodyRelative"><a name="wp1067339"> </a>
See the following example:
</p>
<a name="wp1070119"> </a><div class="pPreformattedRelative"><pre>viewcs(32) view1.VV view2.VV<br />csc /t:library /out:simpapp.dll /r:%TUXDIR%\bin\libwscdnet.dll simpapp.cs<br />view1.cs view2.cs<br />set ASSFILES(32)=simpapp.dll<br />set ASSDIR(32)=%APDIR%</pre></div></ul></div>
</ol></div>
<p class="pBody"><a name="wp1060263"> </a>
The Typed Buffer Samples file (included in the Tuxedo . NET Workstation Client package) demonstrates how to use FML and VIEW typed buffers.
</p>
<h3 class="pHeading2"><a name="wp1067685"> </a>
Programming with Visual Basic (VB)
</h3>
<p class="pBody"><a name="wp1067686"> </a>
One benefit of the .NET Framework environment is <span style="font-style: italic">language integration</span>. Once a .NET assembly is generated, you can use any .NET supported language to develop applications using that assembly. Accordingly, you can also use J#, VB, C++ or other .NET supported languages to develop Tuxedo .NET Workstation Client applications.
</p>
<p class="pBody"><a name="wp1065350"> </a>
The following is a VB language code example:
</p>
<div class="pCodeTitle"><a name="wp1065351"> </a>
Listing&#160;6	   Visual Basic .NET Code Example
</div> <a name="wp1064909"> </a><div class="pPreformatted"><pre>Imports System<br />Imports Bea.Tuxedo.ATMI<br /><br />Module Main</pre></div><a name="wp1067539"> </a><div class="pPreformatted"><pre>	Sub Main()<br />		<br />		Dim sndstr, rcvstr As TypedString<br />		Dim ac As AppContext<br />		Dim info As TypedTPINIT<br />		<br />		info = New TypedTPINIT()<br />		info.cltname = &quot;vb client&quot;<br />				<br />		Try <br />		    ac = AppContext.tpinit(info)<br />		<br />		    sndstr = New TypedString(&quot;hello world&quot;)<br />		    rcvstr = new TypedString(1000)<br />		<br />		    ac.tpcall(&quot;TOUPPER&quot;, sndstr, rcvstr, 0)<br />		<br />		    Console.WriteLine(&quot;rcvstr = {0}&quot;<br />		 ...rcvstr.GetString(0,1000))<br />		<br />		    ac.tpterm()<br />		<br />		Catch e as ApplicationException<br />			<br />		   Console.WriteLine(&quot;Got Exception = {0}&quot;, e)<br />			<br />		End Try</pre></div><a name="wp1064911"> </a><div class="pPreformatted"><pre><br />	End Sub</pre></div><a name="wp1064912"> </a><div class="pPreformatted"><pre><br />End Module</pre></div><h3 class="pHeading2"><a name="wp1064855"> </a>
Building .NET Workstation Clients
</h3>
<p class="pBody"><a name="wp1064856"> </a>
The <code class="cCode">buildnetclient</code> utility is provided to help compile C# source files into a .NET executable files. See also<span class="cHyperlink">
 </span><a href="../rfcm/rfcmd.html">buildnetclient(1)</a>. 
</p>
<a name="wp1072047"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Link editing must be done by running the <code class="cCode">buildnetclient</code> utility.</td>
</tr>
</table>

<p class="pBody"><a name="wp1072046"> </a>
The following is a <code class="cCode">buildnetclient</code> syntax example:
</p>
<p class="pBody"><a name="wp1064857"> </a>
<code class="cCode">buildnetclient -v -o simpapp.exe simpapp.cs</code>
</p>
<h3 class="pHeading2"><a name="wp1065051"> </a>
Managing Errors
</h3>
<p class="pBody"><a name="wp1065052"> </a>
The error code return mechanism used with Tuxedo ATMI C and FML C functions is replaced with an exception mechanism in the Tuxedo .NET Workstation Client. You can use the <code class="cCode">try </code>statement to handle errors using the Tuxedo .NET Workstation Client. Errors are defined into two categories: <code class="cCode">TPException</code> and <code class="cCode">FException</code>.
</p>
<div class="pCodeTitle"><a name="wp1060255"> </a>
Listing&#160;7	   Exception Handling (C# Code Example)
</div> <a name="wp1060961"> </a><div class="pPreformatted"><pre>……<br /><br />try {<br /><br />……<br /></pre></div><a name="wp1060962"> </a><div class="pPreformatted"><pre>      TypedTPINIT  tpinfo = new TypedTPINIT();<br /></pre></div><a name="wp1060981"> </a><div class="pPreformatted"><pre>      AppContext ctx1 = AppContext.tpinit(tpinfo);   // connect to Tuxedo domain<br /><br />……<br /></pre></div><a name="wp1060997"> </a><div class="pPreformatted"><pre>      ctx1.tpterm();         // disconnect from Tuxedo domain</pre></div><a name="wp1060999"> </a><div class="pPreformatted"><pre>       ……</pre></div><a name="wp1060302"> </a><div class="pPreformatted"><pre>} catch (ApplicationException e) {</pre></div><a name="wp1060304"> </a><div class="pPreformatted"><pre>      Console.WriteLine(&quot;******Error******, e = {0}&quot;, e);</pre></div><a name="wp1060306"> </a><div class="pPreformatted"><pre><br />}<br />……</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1064938"> </a>
Tuxedo .NET Workstation Client Samples
</h2><p class="pBody"><a name="wp1062079"> </a>
Three sample applications are bundled with Tuxedo .NET Workstation Client package:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1062082"> </a>Basic Sample</li>
<p class="pBodyRelative"><a name="wp1065788"> </a>
Describes how to develop Tuxedo .NET Workstation Client applications
</p>
<li><a name="wp1062085"> </a>Typed Buffer Sample</li>
<p class="pBodyRelative"><a name="wp1065761"> </a>
Demonstrates <code class="cCode">FML/VIEW</code> typed buffer usage in Tuxedo .NET Workstation Client applications
</p>
<li><a name="wp1062137"> </a>Unsolicited Message Sample</li>
<p class="pBodyRelative"><a name="wp1065781"> </a>
Demonstrates how to register unsolicited message handler in Tuxedo .NET Workstation Client applications
</p>
</ul></div>
<p class="pBody"><a name="wp1059802"> </a>
You must do the following steps to access the sample applications:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1059803"> </a>Read the <code class="cCode">readme.nt</code> file in each sample application directory.</li>
<li><a name="wp1067552"> </a>Run <code class="cCode">setenv.cmd</code> to set Tuxedo environment variable.</li>
<li><a name="wp1059844"> </a>Run <code class="cCode">nmake -f xxx.nt</code> to build the Tuxedo .NET Workstation Client application, Tuxedo server program and Tuxedo <code class="cCode">TUXCONFIG</code> file.</li>
<li><a name="wp1059845"> </a>Run <code class="cCode">tmboot -y</code> to start Tuxedo application.</li>
<li><a name="wp1059806"> </a>Run Tuxedo .NET Workstation Client application.</li>
</ol></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1061799"> </a>
See Also
</h2><div class="pSmartList1Bullet"><ul>
<li><a name="wp1063666"> </a><span class="cHyperlink">
<a href="../rfcm/rfcmd.html">viewc, viewc32(1)</a>; <a href="../rfcm/rfcmd.html">viewcs, viewcs32(1)</a></span></li>
<li><a name="wp1064336"> </a><a href="../rfcm/rfcmd.html">mkfldhdr, mkfldhdr32(1)</a>; <a href="../rfcm/rfcmd.html">mkfldcs, mkfldcs32(1)</a></li>
<li><a name="wp1064335"> </a><span class="cHyperlink">
<a href="../pgc/index.html">Programming Oracle Tuxedo ATMI Applications Using C</a></span></li>
<li><a name="wp1062219"> </a><span class="cHyperlink">
<a href="../rf3c/rf3c.html">Oracle Tuxedo ATMI C Function Reference</a></span></li>
<li><a name="wp1062220"> </a><span class="cHyperlink">
<a href="../rf3fml/rf3fml.html">Oracle Tuxedo ATMI FML Function Reference</a></span></li>
<li><a name="wp1061836"> </a><span class="cHyperlink">
<a href="../rf5/rf5.html">File Formats, Data Descriptions, MIBs, and System Processes Reference</a></span></li>
</ul></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="dotnet_chapter.html"><img id="LongDescNotReq7" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="index.html"><img id="LongDescNotReq8" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<img id="LongDescNotReq9" src="/global_resources/images/nexttop_disabled.gif" border="0" alt="Next" />
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
