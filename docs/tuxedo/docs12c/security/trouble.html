<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/security/fm/trouble.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:41:45" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Troubleshooting</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Using Security in CORBA Applications
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="samples.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="secur4.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/security.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1050430"> </a>
Troubleshooting
</h1>
<p class="pBody"><a name="wp1045534"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1045696"> </a><a href="trouble.html#wp1043448">Using ULOGS and ORB Tracing</a></li>
<li><a name="wp1045701"> </a><a href="trouble.html#wp1042352">CORBA::ORB_init Problems</a></li>
<li><a name="wp1045719"> </a><a href="trouble.html#wp1045031">Password Authentication Problems</a></li>
<li><a name="wp1045728"> </a><a href="trouble.html#wp1042523">Certificate Authentication Problems</a></li>
<li><a name="wp1045737"> </a><a href="trouble.html#wp1042614">Tobj::Bootstrap:: resolve_initial_references Problems</a></li>
<li><a name="wp1045741"> </a><a href="trouble.html#wp1042680">IIOP Listener/Handler Startup Problems</a></li>
<li><a name="wp1046177"> </a><a href="trouble.html#wp1046062">Configuration Problems</a></li>
<li><a name="wp1045746"> </a><a href="trouble.html#wp1045643">Problems with Using Callbacks Objects with the SSL Protocol</a></li>
<li><a name="wp1045784"> </a><a href="trouble.html#wp1042910">Troubleshooting Tips for Digital Certificates</a></li>
</ul></div>
<a name="wp1050704"> </a><table class="Note">
<tr>
<td valign="top"><strong>Notes:</strong></td>
<td>The Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB were deprecated in Tuxedo 8.1 and are no longer supported. All Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB text references, associated code samples, should only be used to help implement/run third party Java ORB libraries, and for programmer reference only.</td></tr>
</table>

<a name="wp1050705"> </a><table class="Note">
<tr>
<td valign="top"><b class="texthide">Note:</b></td>
<td>Technical support for third party CORBA Java ORBs should be provided by their respective vendors. Oracle Tuxedo does not provide any technical support or documentation for third party CORBA Java ORBs.</td>
</tr>
</table>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1043448"> </a>
Using ULOGS and ORB Tracing
</h2><p class="pBody"><a name="wp1042320"> </a>
In general, Object Request Brokers (ORBs) write important failures to the <code class="cCode">ULOG</code> file. When using the CORBA C++ ORB, you can also enable ORB internal tracing which may provide information in addition to the information that appears in the <code class="cCode">ULOG </code>file.
</p>
<p class="pBody"><a name="wp1042321"> </a>
When looking at the <code class="cCode">ULOG</code> file, note that remote ORB processes by default do not write data to the <code class="cCode">ULOG</code> file in <code class="cCode">APPDIR</code>. 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1042350"> </a>On UNIX, the remote ORB writes information to a <code class="cCode">ULOG</code> file in the current directory. </li>
<li><a name="wp1042351"> </a>On Windows 2003, the remote ORB writes information to a <code class="cCode">ULOG</code> file in the <code class="cCode">c:\ulog</code> directory.</li>
</ul></div>
<p class="pBody"><a name="wp1042322"> </a>
You can set the <code class="cCode">ULOGPFX</code> environment variable to control the location of the <code class="cCode">ULOG</code> file for remote ORBs (for example, you can set the location of the <code class="cCode">ULOG</code> file to <code class="cCode">APPDIR</code> so that all information is put in the same <code class="cCode">ULOG</code> file). Set the <code class="cCode">ULOGPFX</code> environment variable as follows:
</p>
<p class="pBody"><a name="wp1048175"> </a>
<b class="cBold">Windows 2003</b>
</p>
<p class="pBody"><a name="wp1048176"> </a>
<code class="cCode">set ULOGPFX=%APPDIR%\ULOG</code>
</p>
<p class="pBody"><a name="wp1042323"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1042324"> </a>
<code class="cCode">setenv ULOGPFX $APPDIR/ULOG</code>
</p>
<p class="pBody"><a name="wp1042334"> </a>
To enable ORB tracing, complete the following steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1042339"> </a>Create a file named <code class="cCode">trace.dat</code> in <code class="cCode">APPDIR</code>. The contents of <code class="cCode">trace.dat</code> should have <code class="cCode">all=on</code>.</li>
<li><a name="wp1042340"> </a>Use the following command to set the <code class="cCode">OBB_TRACE_INPUT</code> environment variable to point to the<code class="cCode"> trace.dat</code> file before running the application:</li>
<p class="pBodyRelative"><a name="wp1042343"> </a>
<code class="cCode">set OBB_TRACE_INPUT=%APPDIR%\trace.dat</code>
</p>
<p class="pBodyRelative"><a name="wp1042344"> </a>
If you want ORB tracing sent to separate files, add the following line to the <code class="cCode">trace.dat</code> file:
</p>
<p class="pBodyRelative"><a name="wp1042345"> </a>
<code class="cCode">output=obbtrace%p.log</code>
</p>
<p class="pBodyRelative"><a name="wp1042346"> </a>
This command sends the trace output to files that are named after each running process. You may want to do this if you are using ORB tracing on UNIX to an NFS mounted drive. In this case, trace performance is slow due to the user log opening, writing, and closing the file for each trace statement.
</p>
</ol></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1042352"> </a>
CORBA::ORB_init Problems
</h2><p class="pBody"><a name="wp1046548"> </a>
The <code class="cCode">ORB_init</code> routine does not perform internal ORB tracing so you will not see any trace output for invalid argument processing. Therefore, you need to double check the arguments that were passed to the <code class="cCode">ORB_init</code> routine.
</p>
<p class="pBody"><a name="wp1043327"> </a>
If a <code class="cCode">CORBA::BAD_PARAM</code> exception occurs when executing the <code class="cCode">ORB_init</code> routine, verify that all required arguments have values. Also, check that arguments which expect a value from a specific set of valid values have the correct value. Note that values for the arguments of the <code class="cCode">ORB_init</code> routine are case sensitive.
</p>
<p class="pBody"><a name="wp1042361"> </a>
If a <code class="cCode">CORBA::NO_PERMISSION</code> exception occurs and an SSL argument was specified to the <code class="cCode">ORB_init</code> routine, make sure the security license is enabled. Also, verify that the specified level of encryption does not exceed the encryption level supported by the security license.
</p>
<p class="pBody"><a name="wp1044670"> </a>
If a <code class="cCode">CORBA::IMP_LIMIT</code> exception occurs when executing the <code class="cCode">ORB_init</code> routine, verify that the <code class="cCode">ORBport</code> and <code class="cCode">ORBSecurePort</code> system properties have the same value.
</p>
<p class="pBody"><a name="wp1044671"> </a>
If a <code class="cCode">CORBA::Initialize</code> exception occurs when executing the <code class="cCode">ORB_init</code> routine, verify that the values for <code class="cCode">OrbId</code> or <code class="cCode">configset</code> are valid.
</p>
<p class="pBody"><a name="wp1044777"> </a>
If Secure Sockets Layer (SSL) arguments are passed to the<code class="cCode"> ORB_init</code> routine, the ORB attempts to load and initialize the SSL protocol. If no SSL arguments are passed, the ORB does not attempt to initialize the SSL protocol. 
</p>
<p class="pBody"><a name="wp1044778"> </a>
The ORB is not aware of the new URL address formats for the Bootstrap object so if you specify a <code class="cCode">corbaloc</code> or <code class="cCode">corbalocs</code> URL address format, the ORB does not try to load the SSL protocol during the <code class="cCode">ORB_init </code>routine.
</p>
<p class="pBody"><a name="wp1042393"> </a>
If SSL arguments were specified to the <code class="cCode">ORB_init </code>routine, check the following:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1042394"> </a>The specified values for the SSL arguments do not conflict with each other or other ORB arguments.</li>
<li><a name="wp1042498"> </a>Whether or not the ORB is a native process. If the ORB is a native process, SSL arguments are not supported.</li>
<li><a name="wp1043348"> </a>That the value specified for the <code class="cCode">maxCrypto</code> system property is less than the value specified for the <code class="cCode">minCrypto</code> system property. The values for the properties must be within the range appropriate for the license.</li>
<li><a name="wp1043359"> </a>Application-controlled SSL configuration parameters that are not correct. The <code class="cCode">ORB_init </code>routine does not perform digital certificate lookups check so look for missing or corrupted files that would case the dynamic libraries not to be loaded. Also, verify the dynamic libraries are loaded. The ORB trace function will provide information about whether or not the dynamic libraries are loaded.</li>
</ul></div>
<p class="pBody"><a name="wp1043370"> </a>
If the problem persists, turn on ORB tracing. ORB tracing will log SSL failures that occur when the<code class="cCode"> liborbssl</code> dynamic library is loaded and initialized.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1045031"> </a>
Password Authentication Problems
</h2><p class="pBody"><a name="wp1045032"> </a>
If the client application fails when using the <code class="cCode">corbalocs</code> URL address format with password authentication, check the following:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1045033"> </a>The proper configuration steps were performed. See <a href="config.html">Configuring the SSL Protocol</a>and <a href="Secur.html">Configuring Authentication</a> for the list of the required configuration steps.</li>
<li><a name="wp1045034"> </a>An initialization error occurred. Specify a valid SSL system property to the<code class="cCode"> ORB_init</code> routine, an error occurs if:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1045035"> </a>The IIOP Listener/Handler is not available. The ORB trace log will show failed connection attempts.</li>
<li><a name="wp1045036"> </a>The IIOP Listener/Handler is available but it does not support the SSL protocol. The <code class="cCode">ULOG</code> file will show that a non-GIOP message was received.</li>
<li><a name="wp1045037"> </a>The IIOP Listener/Handler was available and configured for the SSL protocol but the SSL connection could not be established. This error can occur when the range of encryption strengths supported by the IIOP Listener/Handler and the range of encryption strengths required by the client application do not match. </li>
<p class="pBodyRelative"><a name="wp1049189"> </a>
The <code class="cCode">ULOG</code> file will indicate that a non-GIOP message was received if the IIOP Listener/Handler was configured for the SSL protocol but the CORBA client application used a <code class="cCode">TOBJADDR</code> object without the <code class="cCode">corbalocs</code> prefix to indicate a secure connection.
</p>
</ul></div>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1042523"> </a>
Certificate Authentication Problems
</h2><p class="pBody"><a name="wp1043373"> </a>
If the client application fails when using the <code class="cCode">corbalocs</code> URL address format with certificate authentication, check the following:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1043389"> </a>The proper configuration steps were performed. See <a href="config.html">Configuring the SSL Protocol</a> and <a href="Secur.html">Configuring Authentication</a> for the list of the required configuration steps.</li>
<li><a name="wp1043390"> </a>Determine whether or not an initialization error occurred. </li>
<li><a name="wp1044849"> </a>Specify a valid SSL system property to the<code class="cCode"> ORB_init</code> routine, an error occurs if:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1044850"> </a>The IIOP Listener/Handler is not available. The ORB trace log will show failed connection attempts.</li>
<li><a name="wp1044851"> </a>The IIOP Listener/Handler is available but it does not support the SSL protocol. The <code class="cCode">ULOG</code> file will show that a non-GIOP message was received.</li>
<li><a name="wp1044852"> </a>The IIOP Listener/Handler was available and configured for the SSL protocol but the SSL connection could not be established. This error can occur when the range of encryption strengths supported by the IIOP Listener/Handler and the range of encryption strengths required by the client application do not match. The error can also occur when the client application does not trust the certificate chain of the IIOP Listener/Handler or the client application did not receive a certificate from the IIOP Listener/Handler. The error will be written to the <code class="cCode">ULOG</code> file and the error will also show up in the ORB trace output.</li>
<p class="pBodyRelative"><a name="wp1044839"> </a>
If an error does not occur, the problem is in the authentication process and the <code class="cCode">ULOG</code> file will contain one of the following error statements indicating the problem:
</p>
<li><a name="wp1043415"> </a><code class="cCode">Couldn&#8217;t connect to an LDAP server</code></li>
<li><a name="wp1043416"> </a><code class="cCode">Couldn&#8217;t find a filter that matched the client certificate</code></li>
<li><a name="wp1043417"> </a><code class="cCode">The client certificate was not found in LDAP</code></li>
<li><a name="wp1043418"> </a><code class="cCode">The private key file could not be found</code></li>
<li><a name="wp1043419"> </a><code class="cCode">The passphrase used to open the private key is not correct</code></li>
<li><a name="wp1043420"> </a><code class="cCode">The public key from the client certificate did not match the private key</code></li>
</ul></div>
</ul></div>
<p class="pBody"><a name="wp1045131"> </a>
Additional certificate problems can also occur. See <a href="trouble.html#wp1042614">Tobj::Bootstrap:: resolve_initial_references Problems</a> for more information about the types of certificate errors that can occur.
</p>
<a name="wp1043433"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>At this point of the initialization process, the failure is not due to a problem in the IIOP Listener/Handler.</td>
</tr>
</table>

<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1042614"> </a>
Tobj::Bootstrap::<br />resolve_initial_references Problems
</h2><p class="pBody"><a name="wp1042620"> </a>
If a failure occurs when performing a  <code class="cCode">Tobj::Bootstrap::resolve_initial_references</code> with the <code class="cCode">corbaloc</code> or <code class="cCode">corbalocs</code> URL address format, a <code class="cCode">CORBA::InvalidDomain </code>exception is raised. This exception may mask <code class="cCode">CORBA::NO_PERMISSION </code>or <code class="cCode">CORBA::COMM_FAILURE</code> exceptions that are raised internally. Look at the <code class="cCode">ULOG</code> file and turn on ORB tracing to get more details on the error. The following errors may occur:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1043575"> </a>If the IIOP Listener/Handler is not available, the ORB trace log will show failed connection attempts.</li>
<li><a name="wp1043576"> </a>If the IIOP Listener/Handler is available but it does not support the SSL protocol, the <code class="cCode">ULOG</code> file will show that a non-GIOP message was received.</li>
<li><a name="wp1043588"> </a>If the IIOP Listener/Handler is available and configured for the SSL protocol but the SSL connection could not be established. An error can occur if the range of encryption strengths supported by the IIOP Listener/Handler and required by the client application do not match. </li>
<li><a name="wp1045085"> </a>The IIOP Listener/Handler could not map a certificate to a username/password combination. Verify that the security level for the CORBA application is set to <code class="cCode">USER_AUTH </code>and that the specified username matches the principal name passed into the authenticate call. Also, check that the username does not exceed the 30 character limit.</li>
</ul></div>
<p class="pBody"><a name="wp1043686"> </a>
Additional certificate problems can occur. See <a href="trouble.html#wp1042910"><span class="cHyperlink">
Troubleshooting Tips for Digital Certificates on page&#160;11-8</span></a> for more information about the types of certificate errors that can occur.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1042680"> </a>
IIOP Listener/Handler Startup Problems
</h2><p class="pBody"><a name="wp1043714"> </a>
This section describes problems that can occur during the startup of the IIOP Listener/Handler.
</p>
<p class="pBody"><a name="wp1042681"> </a>
If a failure occurs when starting the IIOP Listener/Handler, check the <code class="cCode">ULOG </code>file for a description of the error. The IIOP Listener/Hander verifies that the values for the SSL arguments specified in the <code class="cCode">CLOPT</code> parameters are valid. If any of the values are invalid, the appropriate error is recorded in the <code class="cCode">ULOG</code> file. This check is similar to the argument checking done by the ORB.
</p>
<p class="pBody"><a name="wp1043742"> </a>
The IIOP Listener/Handler will not start its processes unless the <code class="cCode">-m</code> option is specified. The ISH is the process that actually loads and initializes the SSL libraries. If there is a problem loading and initializing the SSL libraries in the ISH process, the error will not be recorded in the <code class="cCode">ULOG</code> file until the ISH process starts to handle incoming requests from client application.
</p>
<p class="pBody"><a name="wp1042695"> </a>
If you suspect a problem with the startup of the IIOP Listener/Handler processes, check the <code class="cCode">ULOG </code>file.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1046062"> </a>
Configuration Problems
</h2><p class="pBody"><a name="wp1046063"> </a>
The following are miscellaneous tips to resolve the common configuration problems which may occur when using security:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1046064"> </a>The ORB <code class="cCode">-ORBpeerValidate</code> command-line option and the <code class="cCode">-v</code> option of the ISL command do not control the peer validation rules checking. This system property and option only control the checking of the host name specified in the peer certificate against the host name of the machine to which the principal was connected.</li>
<li><a name="wp1046065"> </a>The only way to disable the peer validation rules on an installed kit is to create an empty file for <code class="cCode">%TUXDIR%\udataobj\security\certs\peer_val.rul</code>. If you are writing a script that builds your CORBA application, you cannot register the <code class="cCode">peer_val.rul</code> file in the script.</li>
<li><a name="wp1046066"> </a>When enabling renegotiation intervals in the IIOP Listener/Handler, check that the option on the ISL command is <code class="cCode">-R</code> not<code class="cCode"> -r</code>. If you use an <code class="cCode">-r</code>,  the IIOP Listener/Handler will use the SSL protocol but the renegotiation interval will not be used. In addition, the <code class="cCode">ULOG</code> file will note that an unknown option was specified on the IIOP Listener/Handler. </li>
<p class="pBodyRelative"><a name="wp1046067"> </a>
Another way to determine if the IIOP Listener/Handler is performing renegotiations is to enable ORB tracing on the client side and check whether the cipher suite negotiation callback is being called the configured renegotiation interval. Note that the client application must be sending requests for in order for renegotiations to occur.
</p>
<li><a name="wp1046068"> </a>If you have defined the <code class="cCode">SECURITY</code> parameter in the CORBA application&#8217;s <code class="cCode">UBBCONFIG</code> file to be <code class="cCode">APP_PW</code> or greater and you have configured the IIOP Listener/Handler to use the SSL protocol but not mutual authentication, you must use password authentication with the <code class="cCode">corbalocs</code> URL address format to communicate with the IIOP Listener/Handler. If you try to use certificate authentication, the IIOP Listener/Handler will not ask the principal for a certificate when establishing an SSL connection and the IIOP Listener/Handler is not able to map the identity of the principal to an Oracle Tuxedo identity.</li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1045643"> </a>
Problems with Using Callbacks Objects with the SSL Protocol
</h2><p class="pBody"><a name="wp1045644"> </a>
If you have a joint client/server application and the client portion of the joint client/server application specifies security requirements using either the <code class="cCode">corbalocs</code> URL address format or by requiring credentials, you must use the <code class="cCode">-ORBsecurePort</code> system property with the <code class="cCode">ORB_init</code> routine to specify that a secure port be used.
</p>
<p class="pBody"><a name="wp1045645"> </a>
If you do not specify the <code class="cCode">-ORBsecurePort</code> system property, the server registration will fail with a <code class="cCode">CORBA::NO_PERMISSION</code> exception. To verify this is the problem, enable ORB tracing and look for the following trace output:
</p>
<p class="pBody"><a name="wp1045646"> </a>
<code class="cCode">TCPTransport::Listen: FAILURE: Attempt to listen on clear port while Credentials require SSL be used</code>
</p>
<p class="pBody"><a name="wp1046583"> </a>
If you want to use the SSL protocol with callback objects, the joint client/server application must use the <code class="cCode">SecurityLevel2::PrincipalAuthenticator::authenticate()</code> method with certificate authentication. Otherwise, the joint client/server application does not have a certificate with which to identify itself to the IIOP Listener/Handler which in this case is the initiator of the SSL connection.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1042910"> </a>
Troubleshooting Tips for Digital Certificates
</h2><p class="pBody"><a name="wp1044160"> </a>
In general, problems with digital certificates occur when:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1044161"> </a>One of the digital certificates in the certificate chain of the IIOP Listener/Handler is not from a certificate authority defined in the <code class="cCode">trust_ca.ce</code>r file. A problem can occur if any certificate authority in the <code class="cCode">trust_ca.ce</code>r file is invalid.</li>
<li><a name="wp1044162"> </a>The name the IIOP Listener/Handler connected to the client application does not match the host name specified in digital certificates of the IIOP Listener/Handler when a host match is performed. The name of the IIOP Listener/Handler is specified in the<code class="cCode"> CommonName</code> attribute of the distinguish name of the IIOP Listener/Handler. The host name and the <code class="cCode">CommonName</code> attribute must match exactly.</li>
<p class="pBodyRelative"><a name="wp1044163"> </a>
You can verify this error by setting the <code class="cCode">-ORBpeerValidate</code> system property to <code class="cCode">none</code> and executing the <code class="cCode">ORB_init</code> routine again.
</p>
<li><a name="wp1044164"> </a>One of the digital certificates in the certificate chain of the IIOP Listener/Handler does not match the specified peer validation rules.</li>
<li><a name="wp1044165"> </a>The digital certificate of the IIOP Listener/Handler is invalid. The digital certificate of the IIOP Listener/Handler becomes invalid when the digital certificate is tampered with, it expires, or the certificate authority that issued the digital certificate expires.</li>
</ul></div>
<p class="pBody"><a name="wp1042912"> </a>
If a digital certificate is rejected for no explainable reason, complete the following steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1042914"> </a>Open the digital certificate in a viewer, for example, Microsoft Explorer.</li>
<li><a name="wp1042915"> </a>Look at the <code class="cCode">KeyUsage</code> and <code class="cCode">BasicConstraints </code>properties of the digital certificate. A small yellow triangle with an exclamation mark indicates the property is critical. Any digital certificate with a property marked critical is rejected by the Oracle Tuxedo software.</li>
<li><a name="wp1044118"> </a>If the none of the properties of the digital certificate are critical, check the properties of the next digital certificate in the certificate chain. Perform this step until all the properties of all the digital certificates in the certificate chain have been verified.</li>
</ol></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="trouble.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="samples.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="secur4.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
