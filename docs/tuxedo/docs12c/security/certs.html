<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/security/fm/certs.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:41:42" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Managing Public Key Security</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Using Security in CORBA Applications
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="secur2.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="llef.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/security.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1050031"> </a>
Managing Public Key Security
</h1>
<p class="pBody"><a name="wp1032878"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1047396"> </a><a href="certs.html#wp1048165">Requirements for Using Public Key Security</a></li>
<li><a name="wp1047416"> </a><a href="certs.html#wp1044333">Who Needs Digital Certificates and Private/Private Key Pairs?</a></li>
<li><a name="wp1044976"> </a><a href="certs.html#wp1046538">Requesting a Digital Certificate</a></li>
<li><a name="wp1047514"> </a><a href="certs.html#wp1032883">Publishing Certificates in the LDAP Directory Service</a></li>
<li><a name="wp1047526"> </a><a href="certs.html#wp1033595">Editing the LDAP Search Filter File</a></li>
<li><a name="wp1041817"> </a><a href="certs.html#wp1041556">Storing the Private Keys in a Common Location</a></li>
<li><a name="wp1041822"> </a><a href="certs.html#wp1032889">Defining the Trusted Certificate Authorities</a></li>
<li><a name="wp1043308"> </a><a href="certs.html#wp1037347">Creating a Peer Rules File</a></li>
</ul></div>
<p class="pBody"><a name="wp1048163"> </a>
Perform the tasks in this topic only if you are using the SSL protocol, or certificate authentication in your CORBA application.
</p>
<a name="wp1050322"> </a><table class="Note">
<tr>
<td valign="top"><strong>Notes:</strong></td>
<td>The Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB were deprecated in Tuxedo 8.1 and are no longer supported. All Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB text references, associated code samples, should only be used to help implement/run third party Java ORB libraries, and for programmer reference only.</td></tr>
</table>

<a name="wp1050323"> </a><table class="Note">
<tr>
<td valign="top"><b class="texthide">Note:</b></td>
<td>Technical support for third party CORBA Java ORBs should be provided by their respective vendors. Oracle Tuxedo does not provide any technical support or documentation for third party CORBA Java ORBs.</td>
</tr>
</table>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1048165"> </a>
Requirements for Using Public Key Security
</h2><p class="pBody"><a name="wp1048253"> </a>
To use the SSL protocol and public key security to protect communication between principals and the Oracle Tuxedo domain, you need to install a special license. For information about installing the license, see <a href="../install/index.html"><a href="../install/index.html">Installing the Oracle Tuxedo System</a>.
</p>
<p class="pBody"><a name="wp1047076"> </a>
You also need to choose a Lightweight Directory Access Protocol server and a certificate authority (either commercial or private) setup for your organization before implementing Public Key Security.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1044333"> </a>
Who Needs Digital Certificates and Private/Private Key Pairs?
</h2><p class="pBody"><a name="wp1046071"> </a>
To use the SSL protocol in the CORBA security environment, you need a private key and a digitally-signed certificate containing the matching public key. How many digital certificates and private keys you need depends on how you plan to use the SSL protocol. 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1046197"> </a>If the SSL protocol is being used for protection of a network connection between a remote client and the IIOP Listener/Handler, you need to obtain a digital certificate and private key for the IIOP Listener/Handler.</li>
<li><a name="wp1046276"> </a>If the SSL protocol is being used with certificate authentication, you need to obtain a digital certificate and private key for the IIOP Listener/Handler and each principal that will access the CORBA application.</li>
</ul></div>
<p class="pBody"><a name="wp1048719"> </a>
Any digital certificate that is obtained and used must be issued from a trusted certificate authority defined in the trusted CA file. For more information, see <a href="certs.html#wp1032889">Defining the Trusted Certificate Authorities</a>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1046538"> </a>
Requesting a Digital Certificate
</h2><p class="pBody"><a name="wp1047781"> </a>
To acquire a digital certificate, you need to submit your request for a digital certificate in a particular format called a certificate signature request (CSR). How you create a CSR depends on the certificate authority you use. Certificate authorities typically provide a means to generate a public key, private key, and a CSR which contains your public key. To create a CSR follow the steps outlined by your chosen certificate authority.
</p>
<p class="pBody"><a name="wp1046804"> </a>
When you complete the steps to create a CSR, you receive the following files from the certificate authority:
</p>
<p class="pGraphic"><a name="wp1046679"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1046740table1046738">
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1046740"> </a>
<span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">File</span>
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1046742"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1046744"> </a>
<code class="cCodeEmphasis">key</code><code class="cCode">.der</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1046746"> </a>
The private key file.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1046752"> </a>
<code class="cCodeEmphasis">request</code><code class="cCode">.pem</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1046754"> </a>
The CSR file which you submit to the certificate authority. It contains the same data as the .dem file but the file is encoded in ASCII so that you can copy it into e-mail or paste it into a Web form.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1046857"> </a>
To purchase a digital certificate from a certificate authority, you submit the CSR to the certificate authority according to the enrollment procedure of the certificate authority. Some commercial certificate authorities allow you to purchase digital certificates through the Web.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1032883"> </a>
Publishing Certificates in the LDAP Directory Service
</h2><p class="pBody"><a name="wp1033650"> </a>
The use of a global directory service is the most popular way to store digital certificates. A directory service simplifies the management of information that needs to be globally available to an ever-growing number of users. An LDAP server provides access to a variety of directory services. 
</p>
<p class="pBody"><a name="wp1042278"> </a>
The CORBA security environment in the Oracle Tuxedo product, when configured to use the SSL protocol, can retrieve digital certificates for principals and certificate authorities from an LDAP directory service, such as Netscape Directory Service or Microsoft Active Directory. Before you can use the SSL protocol or certificate authentication, you need to install an LDAP directory service and configure it for your organization. Oracle Systems does not provide nor recommend any specific LDAP directory service. However, the LDAP directory service you choose should support the X.500 scheme definition and the LDAP version 2 or 3 protocol. 
</p>
<p class="pBody"><a name="wp1039658"> </a>
LDAP directory services define a hierarchy of object classes. While there are a number of different object classes, there is a small set associated with digital certificates. <a href="certs.html#wp1041235">Figure&#160;4-1</a> illustrates the object classes typically associated with digital certificates.
</p>
<div class="pFigureTitle"><a name="wp1041235"> </a>
Figure&#160;4-1  LDAP Directory Structure for Digital Certificates
</div>

 
 <p class="pGraphic"><a name="wp1041268"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/ldap.gif" height="207" width="601" alt="LDAP Directory Structure for Digital Certificates" id="wp1047836"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1041424"> </a>
Once you receive your digital certificates from the certificate authority, store them in the LDAP directory service as follows:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1047229"> </a>Digital certificates for the IIOP Listener/Handler and any principals are stored in the LDAP directory service with an attribute of <code class="cCode">userCertificate</code> on an object class with that attribute defined. Typically, these digital certificates are stored as an instance of the<code class="cCode"> strongAuthenticationUser</code> object class as defined by X.500.</li>
<li><a name="wp1047242"> </a>Digital certificates for certificate authorities are stored in LDAP directory service with an attribute of <code class="cCode">caCertificate </code>on an object class with that attribute defined. Typically, these digital certificates are stored as an instance of the <code class="cCode">certificateAuthority</code> class as defined by X.500.</li>
</ul></div>
<p class="pBody"><a name="wp1047273"> </a>
If your LDAP scheme requires the use of different classes, you will need to modify the LDAP search file as described in <a href="certs.html#wp1033595">Editing the LDAP Search Filter File</a>.
</p>
<p class="pBody"><a name="wp1047856"> </a>
The Oracle Tuxedo product requires that the digital certificates be stored in the directory service in Privacy Enhanced Mail (PEM) format.
</p>
<p class="pBody"><a name="wp1047216"> </a>
Refer to <a href="../install/index.html"><a href="../install/index.html">Installing the Oracle Tuxedo System</a><em class="cEmphasis"> </em>for information about integrating an LDAP directory service into the CORBA security environment.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1033595"> </a>
Editing the LDAP Search Filter File
</h2><p class="pBody"><a name="wp1033822"> </a>
When configuring a CORBA application to use the SSL protocol or certificate authentication, you may need to customize the LDAP search filter file to limit the scope of the search of the directory service or specify the object classes that will be used to hold the digital certificates. Customizing the LDAP search filter file can result in significant performance gains. The Oracle Tuxedo product ships with the following LDAP search filters:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1035624"> </a>A filter stanza that searches the directory service for digital certificates assigned to certificate authorities. The filter limits its search to instances of the <code class="cCode">certificationAuthority </code>object class. </li>
<li><a name="wp1039860"> </a>A filter stanza that searches the directory service for digital certificates assigned to principals. The filter limits its search to instances of the <code class="cCode">strongAuthenticationUser</code> object class.</li>
</ul></div>
<p class="pBody"><a name="wp1039861"> </a>
If the directory service scheme for your organization is defined to store digital certificates in object classes other than <code class="cCode">certificationAuthority</code> and <code class="cCode">strongAuthenticationUser</code>, the LDAP search filter file must be modified to specify those object classes.
</p>
<p class="pBody"><a name="wp1042588"> </a>
You can specify a location of the LDAP search filter file during the installation of the Oracle Tuxedo product. For more information, see <a href="../install/index.html"><a href="../install/index.html">Installing the Oracle Tuxedo System</a>.
</p>
<p class="pBody"><a name="wp1041497"> </a>
The LDAP search filter file should be owned by the administrator account. Oracle recommends that the file be protected so that only the owner has read and write privileges for the file and all other users have only read privileges for the file.
</p>
<p class="pBody"><a name="wp1034368"> </a>
To limit the search of the directory service for digital certificates for principals and certificate authorities, you need to modify the filter stanzas identified by the following tags in the LDAP search filter file:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1034409"> </a><code class="cCode">BEA_person_lookup</code></li>
<li><a name="wp1034452"> </a><code class="cCode">BEA_issuer_lookup</code></li>
</ul></div>
<p class="pBody"><a name="wp1034289"> </a>
These tags identify the stanzas in the LDAP search filter file that contains the filter expression that will be used when looking up information in the directory service. These Oracle-specific tags allow the stanzas of an LDAP search filter file to be stored in a common LDAP search filter file with stanzas used by other LDAP-enabled applications that might be found in your organization.
</p>
<p class="pBody"><a name="wp1034517"> </a>
The following is an example of the stanzas of an LDAP search filter file used by the Oracle Tuxedo product for the SSL protocol and certificate authentication:
</p>
<a name="wp1034290"> </a><div class="pPreformatted"><pre>&#8220;BEA_person_lookup&#8221;<br /> &#8220;.*&#8221;  &#8220; &#8220; &#8220;(|(objectClass=strongAuthenticationUser) (mail=%v))&#8221; <br />                                        &#8220;e-mail address&#8221;<br />           &#8220;(|(objectClass=strongAuthenticationUser) (mail=%v))&#8221; <br />                                        &#8220;start of e-mail address&#8221;<br />&#8220;BEA_issuer_lookup&#8221;<br /> &#8220;.*&#8221; &#8220; &#8221; &#8220;(&amp;(objectClass=certificationAuthority)<br />             (cn=%v)&#8221;  &#8220;exact match cn&#8221;<br />             (sn=%v))&#8221;   &#8220;exact match sn&#8221;</pre></div><div class="pSmartList1Bullet"><ul>
<li><a name="wp1034291"> </a><code class="cCode">BEA_person_lookup</code> specifies to search the LDAP directory service for principals by their e-mail addresses.</li>
<li><a name="wp1034801"> </a><code class="cCode">BEA_issuer_lookup</code> specifies to search the LDAP directory service for principals by their common names (<code class="cCode">cn</code>).</li>
</ul></div>
<p class="pBody"><a name="wp1040005"> </a>
See the documentation for your LDAP-enabled directory service for additional information about LDAP search file filters.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1041556"> </a>
Storing the Private Keys in a Common Location
</h2><p class="pBody"><a name="wp1041560"> </a>
When a principal generates a CSR, they typically get a file with a private key. Principals need this private key file to verify their identity in the authentication process. Assign the private key file protections so that only the owner of the private key file has read privileges and all other users have no privileges to access the file. Private key files must be stored as PEM-encoded PKCS #8 protected format.
</p>
<p class="pBody"><a name="wp1042208"> </a>
The Oracle Tuxedo system uses the e-mail address of the principal to construct a name for the private key file as follows:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1042209"> </a>The<code class="cCode"> @</code> character in the name is replaced by an underscore (<code class="cCode">_</code>) character.</li>
<li><a name="wp1042210"> </a>All characters after the dot (<code class="cCode">.</code>) character are deleted.</li>
<li><a name="wp1042211"> </a>A <code class="cCode">.PEM</code> file extension is appended to the file.</li>
</ol></div>
<p class="pBody"><a name="wp1042212"> </a>
For example, if the name of the principal is <code class="cCode">milozzi@bigcompany.com</code> the resulting private key file is <code class="cCode">milozzi_bigcompany.pem</code>. This naming convention allows an enterprise to have multiple principals that share a common username but are in different e-mail domains.
</p>
<p class="pBody"><a name="wp1042179"> </a>
The Oracle Tuxedo software looks in the following directories for private key files:
</p>
<p class="pBody"><a name="wp1047609"> </a>
<b class="cBold">Window 2000</b>
</p>
<p class="pBody"><a name="wp1047610"> </a>
<code class="cCode">%HOMEDRIVE%\%HOMEPATH%</code>
</p>
<p class="pBody"><a name="wp1042065"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1042081"> </a>
<code class="cCode">$HOME</code>
</p>
<p class="pBody"><a name="wp1042133"> </a>
The Oracle Tuxedo software also looks in the following directory for private key files:
</p>
<p class="pBody"><a name="wp1042100"> </a>
<code class="cCode">$TUXDIR/udataobj/security/keys</code>
</p>
<p class="pBody"><a name="wp1042101"> </a>
The<code class="cCode"> $TUXDIR/udataobj/security/keys</code> directory should be protected so that only the owner has read privileges for the directory and all other users do not have privileges to access the directory.
</p>
<p class="pBody"><a name="wp1042029"> </a>
<a href="certs.html#wp1041948">Listing&#160;4-1</a> provides an example of a private key file.
</p>
<div class="pCodeTitle"><a name="wp1041948"> </a>
Listing&#160;4-1	   Example of Private Key File
</div> <a name="wp1041964"> </a><div class="pPreformatted"><pre>-----BEGIN ENCRYPTED PRIVATE KEY-----<br />MIICoDAaBgkqhkiG9w0BBQMwDQQItSFrtYcfKygCAQUEggKAEgrMxo8gYB/MOSXG<br />...<br />-----END ENCRYPTED PRIVATE KEY-----</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1032889"> </a>
Defining the Trusted Certificate Authorities
</h2><p class="pBody"><a name="wp1036790"> </a>
When establishing an SSL connection, the CORBA processes (client applications and the IIOP Listener/Handler) check the identity of the certificate authority and certificates from the peer&#8217;s digital certificate chain against a list of trusted certificate authorities to ensure the certificate authority is trusted by the organization. This check is similar to the check done in Web browsers. If the comparison fails, the initiator of the SSL connection refuses to authenticate the target and drops the SSL connection. It is typically the job of the system administrator to define a list of trusted certificate authorities.
</p>
<p class="pBody"><a name="wp1036814"> </a>
Retrieve from the LDAP directory service the digital certificates for the certificate authorities that are to be trusted. Cut and paste the PEM formatted digital certificates into a file named <code class="cCode">trust_ca.cer</code> which is stored in <code class="cCode">$TUXDIR/udataobj/security/certs</code>. The <code class="cCode">trust_ca.cer</code> can be edited with any text editor.
</p>
<p class="pBody"><a name="wp1041656"> </a>
The <code class="cCode">trust_ca.cer</code> file should be owned by the administrator account. Oracle recommends that the file be protected so that only the owner has read and write privileges for the file and all other users have only read privileges for the file.
</p>
<p class="pBody"><a name="wp1041629"> </a>
 <a href="certs.html#wp1036804">Listing&#160;4-2</a> provides an example of a Trusted Certificate Authority file.
</p>
<div class="pCodeTitle"><a name="wp1036804"> </a>
Listing&#160;4-2	   Example of Trusted Certificate Authority File
</div> <a name="wp1036892"> </a><div class="pPreformatted"><pre>-----BEGIN CERTIFICATE----<br />MIIEuzCCBCSgAwIBAgIQKtZuM5AOzS9dZaIATJxIuDANBgkqhkiG9w0BAQQFADCB<br />zDEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xHzAdBgNVBAsTFlZlcmlTaWduIFRy<br />dXN0IE5ldHdvcmsxRjBEBgNVBAsTPXd3dy52ZXJpc2lnbi5jb20vcmVwb3NpdG9y<br />eS9SUEEgSW5jb3JwLiBCeSBSZWYuLExJQUIuTFREKGMpOTgxSDBGBgNVBAMTP1Zl<br />cmlTaWduIENsYXNzIDEgQ0EgSW5kaXZpZHVhbCBTdWJzY3JpYmVyLVBlcnNvbmEg<br />...<br />-----END CERTIFICATE-----<br />-----BEGIN CERTIFICATE----<br />MIIEuzCCBCSgAwIBAgIQKtZuM5AOzS9dZaIATJxIuDANBgkqhkiG9w0BAQQFADCB<br />zDEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xHzAdBgNVBAsTFlZlcmlTaWduIFRy<br />dXN0IE5ldHdvcmsxRjBEBgNVBAsTPXd3dy52ZXJpc2lnbi5jb20vcmVwb3NpdG9y<br />...<br />-----END CERTIFICATE-----</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1037347"> </a>
Creating a Peer Rules File
</h2><p class="pBody"><a name="wp1037363"> </a>
When communicating across network links, it is important to validate the peer to which you are connected is the intended or authorized peer. Without this check, it is possible to make a secure connection, exchange secure messages, and receive a valid chain of digital certificates but still be vulnerable to a Man-in-the-Middle attack. You perform peer validation by verifying a set of specified information contained in the peer digital certificate against a list of information that specifies the rules for validating peer trust. The system administrator maintains the Peer Rules file.
</p>
<p class="pBody"><a name="wp1037619"> </a>
The Peer Rules are maintained in an ASCII file named <code class="cCode">peer_val.rul</code>. Store the <code class="cCode">peer_val.rul</code> file in the following location in the Oracle Tuxedo directory structure:
</p>
<p class="pBody"><a name="wp1037620"> </a>
<code class="cCode">$TUXDIR/udataobj/security/certs</code>
</p>
<p class="pBody"><a name="wp1037709"> </a>
<a href="certs.html#wp1037710">Listing&#160;4-3</a> provides an example of a Peer Rules file.
</p>
<div class="pCodeTitle"><a name="wp1037710"> </a>
Listing&#160;4-3	   Example of Peer Rules File
</div> <a name="wp1037626"> </a><div class="pPreformatted"><pre>#<br /># This file contains the list of rules for validating if <br /># a peer is authorized as the target of a secure connection<br />#<br />O=Ace Industry<br />O=&#8221;Acme Systems, Inc.&#8221;; OU=Central Engineering;L=Herkimer;S=NY<br />O=&#8221;Ball, Corp.&#8221;, C=US<br />o=Ace Industry, ou=QA, cn=www.ace.com</pre></div><p class="pBody"><a name="wp1037629"> </a>
Each rule in the Peer Rules file is comprised of a set of elements that are identified by a key. The Oracle Tuxedo product recognizes the key names listed in <a href="certs.html#wp1040830">Table&#160;4-1</a>.
</p>
<p class="pGraphic"><a name="wp1037717"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1040830table1037718"><caption><a name="wp1040830"> </a>
Table 4-1  Supported Keys for Peer Rules File&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1040834"> </a>
Key
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1040836"> </a>
Attribute
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040838"> </a>
<code class="cCode">CN</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040840"> </a>
CommonName
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040842"> </a>
<code class="cCode">SN</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040844"> </a>
SurName
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040846"> </a>
<code class="cCode">L</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040848"> </a>
LocalityName
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040850"> </a>
<code class="cCode">S</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040852"> </a>
StateOrProvinceName
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040854"> </a>
<code class="cCode">O</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040856"> </a>
OrganizationName
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040858"> </a>
<code class="cCode">OU</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040860"> </a>
OrganizationalUnitName
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040862"> </a>
<code class="cCode">C</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040864"> </a>
CountryName
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040866"> </a>
<code class="cCode">E</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1040868"> </a>
EmailAddress
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1037686"> </a>
Each key is followed by an optional white space, the character <code class="cCode">=</code>, an optional white space, and finally the value to be compared. The key is not case sensitive. A rule is not a match unless the subject&#8217;s distinguished name contains each of the specified elements in the rule and the values of those elements match the values specified in the rule, including case and punctuation.
</p>
<p class="pBody"><a name="wp1037690"> </a>
Each line in the Peer Rules file contains a single rule that is used to determine if a secure connection is to be established. Rules cannot span lines; the entire rule must appear on a single line. Each element in the rule can be separated by either a comma (<code class="cCode">,</code>) or semicolon (<code class="cCode">;</code>) character.
</p>
<p class="pBody"><a name="wp1037691"> </a>
Lines beginning with the pound character (<code class="cCode">#</code>) are comments. Comments cannot appear on the same line as the name of an organization.
</p>
<p class="pBody"><a name="wp1037692"> </a>
A value must be enclosed in single quotation marks if one of the following cases is true:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1037693"> </a>Strings contain any of the following characters:</li>
<p class="pBodyRelative"><a name="wp1037955"> </a>
<code class="cCode">, + =  &quot;&quot; &lt;CR&gt; &lt; &gt; # ;</code>
</p>
<li><a name="wp1037694"> </a>Strings have leading or trailing spaces</li>
<li><a name="wp1037695"> </a>Strings contain consecutive spaces</li>
</ul></div>
<p class="pBody"><a name="wp1032893"> </a>
By default, the Oracle Tuxedo product verifies peer information against the Peer Rules file. If you do not want to perform this check, create an empty Peer Rules file.
</p>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="certs.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="secur2.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="llef.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
