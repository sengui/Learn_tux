<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="3" />
<meta name="LOC_US_CHANGE" content="41845" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux12c/mq/fm/build.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="06/26/12 11:27:27" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Building the Oracle Tuxedo MQ Adapter</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">MQ Adapter
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="overview.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="config.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
&nbsp;
<a href="../pdf/mq.pdf" target="pdf"><img id="LongDescNotReq5" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq6" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1074157"> </a>
Building the Oracle Tuxedo MQ Adapter
</h1>
<p class="pBody"><a name="wp1075688"> </a>
This topic contains the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1075180"> </a><a href="build.html#wp1075281">Overview</a></li>
<li><a name="wp1075274"> </a><a href="build.html#wp1075292">Pre-Build Considerations</a></li>
<li><a name="wp1075279"> </a><a href="build.html#wp1075321">Setting Up the WebSphere MQ XA Compliant Resource Manager</a></li>
<li><a name="wp1075280"> </a><a href="build.html#wp1075301">Building the Oracle Tuxedo MQ Adapter Servers</a></li>
<li><a name="wp1075711"> </a><a href="build.html#wp1076198">Post-Installation Procedures</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1075281"> </a>
Overview
</h2><p class="pBody"><a name="wp1075286"> </a>
Object files for the Oracle Tuxedo MQ Adapter are included as part of the standard Oracle Tuxedo distribution.  After customizing the <code class="cCode">$TUXDIR/udataobj/RM</code> file with any values specific to the MQ installation being used, the Oracle Tuxedo administrator uses the <code class="cCode">buildmqadapter(1)</code> command to build the MQ adapter executables.  The Oracle Tuxedo administrator also needs to use the <code class="cCode">buildtms(1)</code> command to build the TMS for the WebSphere MQ Resource manager.  This chapter describes the process of building the MQ Adapter executables.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1075292"> </a>
Pre-Build Considerations
</h2><p class="pBody"><a name="wp1075304"> </a>
The MQ Adapter for Oracle Tuxedo software is currently available on HP-UX, Solaris, AIX, Linux, and Windows versions of Oracle Tuxedo.   Ports of Oracle Tuxedo to other platforms will include the MQ Adapter if WebSphere MQ is supported by IBM on the target platform.
</p>
<p class="pBody"><a name="wp1075949"> </a>
The Oracle Tuxedo administrator should complete the following tasks before building the MQ Adapter TMS and adapter servers:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1075950"> </a>Make sure the proper maintenance version of WebSphere MQ is installed on the target platform. For more information about the required maintenance version of WebSphere MQ on each supported platform, see the <span class="cHyperlink">
<a href="../install/inspds.html">Oracle Tuxedo 10.0 Platform Data Sheets</a></span>.</li>
<li><a name="wp1075312"> </a>Set up the required WebSphere MQ resource manager.</li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1075321"> </a>
Setting Up the WebSphere MQ XA Compliant Resource Manager
</h2><p class="pBody"><a name="wp1075461"> </a>
The Oracle Tuxedo installation program attempts to add a sensible default line for WebSphere MQ 6.0 to the <code class="cCode">$TUXDIR/udataobj/RM</code> file when installing Oracle Tuxedo.  For example, on 32-bit Solaris, the installation program adds the following lines:
</p>
<p class="pBody"><a name="wp1075462"> </a>
<code class="cCode"># WebSphere MQ 6.0</code>
</p>
<p class="pBody"><a name="wp1075463"> </a>
<code class="cCode">MQSeries_XA_RMI:MQRMIXASwitchDynamic: /opt/mqm/lib/libmqmxa.so /opt/mqm/lib/libmqm.so</code>
</p>
<p class="pBody"><a name="wp1075464"> </a>
(On other hardware platforms, the default library suffixes and locations may be different.)
</p>
<p class="pBody"><a name="wp1075465"> </a>
As the Oracle Tuxedo administrator, you should review this information to determine if it is correct for your installation.  You may need to modify the RM file information
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1075488"> </a>If WebSphere MQ is installed in a non-standard location.</li>
<li><a name="wp1075489"> </a>If your application is to be linked with WebSphere MQ client libraries instead of WebSphere MQ server libraries.</li>
<li><a name="wp1075490"> </a>If your application prefers to use the static XA switch MQRMIXASwitch instead of the dynamic XA switch MQRMIXASwitchDynamic. </li>
</ul></div>
<p class="pBody"><a name="wp1075514"> </a>
On Windows NT, there is no standard installation location for WebSphere MQ, so the variable <code class="cCode">%MQMDIR%</code> is used in the <code class="cCode">%TUXDIR%\udataobj\RM</code> file.  This variable should be set before building the MQ Adapter servers.
</p>
<p class="pBody"><a name="wp1075515"> </a>
If using a 64-bit version of Oracle Tuxedo, be sure to link with libraries in the WebSphere MQ lib64 directory and not in the 32-bit lib directory, and be sure to link with the mqmxa64 library and not the mqmxa library. 
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1075301"> </a>
Building the Oracle Tuxedo MQ Adapter Servers
</h2><p class="pBody"><a name="wp1075540"> </a>
To build the MQ adapter servers, execute the following commands as the Oracle Tuxedo administrator with write permission in the <code class="cCode">$TUXDIR/bin</code> directory:
</p>
<p class="pBody"><a name="wp1075541"> </a>
<code class="cCode">buildmqadapter -v</code>
</p>
<p class="pBody"><a name="wp1075543"> </a>
This command will install the TM_MQI, TM_MQO, and TMQUEUE_MQM servers in the <code class="cCode">$TUXDIR/bin</code> directory.  The -v option indicates that buildmqadapter will write the buildserver and compiler command lines used to link the 3 servers as part of its output.
</p>
<a name="wp1076107"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>you must use the build utilities to build the Oracle Tuxedo MQ Adapter Servers.</td>
</tr>
</table>

<p class="pBody"><a name="wp1075575"> </a>
Alternatively the MQ adapter servers can be built one at a time using the following commands:
</p>
<p class="pBody"><a name="wp1075576"> </a>
<code class="cCode">buildTM_MQI -v -o $TUXDIR/bin/TM_MQI</code>
</p>
<p class="pBody"><a name="wp1075577"> </a>
<code class="cCode">buildTM_MQO -v -o $TUXDIR/bin/TM_MQO</code>
</p>
<p class="pBody"><a name="wp1075578"> </a>
<code class="cCode">buildTMQUEUE_MQM -v -o $TUXDIR/bin/TMQUEUE_MQM</code>
</p>
<p class="pBody"><a name="wp1075573"> </a>
(If building the servers one at a time, it is possible to specify $APPDIR instead of $TUXDIR/bin as the output directory.)
</p>
<h3 class="pHeading2"><a name="wp1075589"> </a>
Building the TMS Server for the WebSphere MQ Resource Manager
</h3>
<p class="pBody"><a name="wp1075599"> </a>
Run the following command while in the <code class="cCode">$TUXDIR/bin</code> directory to create the resource manager executable:
</p>
<p class="pBody"><a name="wp1075600"> </a>
<code class="cCode">buildtms -o MQXA -r MQSeries_XA_RMI</code>
</p>
<p class="pBody"><a name="wp1075601"> </a>
(An alternate file name can be specified instead of MQXA if desired, and the output file can be placed in either $TUXDIR/bin or in $APPDIR.)
</p>
<a name="wp1076120"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You must use the <code class="cCode">buildtms</code> command to build the TMS Server. </td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp1075597"> </a>
Specifying MQ Adapter Server Group in the UBBCONFIG file
</h3>
<p class="pBody"><a name="wp1075617"> </a>
Add the following lines to the <code class="cCode">*GROUPS</code> section of the UBBCONFIG file for the group used for the MQ Adapter for Oracle Tuxedo servers.
</p>
<a name="wp1075618"> </a><div class="pPreformatted"><pre><code class="cCode">MQ_GROUP_NAME TMSNAME=MQXA TMSCOUNT=3      <br />	OPENINFO=&quot;MQSeries_XA_RMI:BEA.TEST.MANAGER&quot;</code></pre></div><p class="pBody"><a name="wp1076195"> </a>
In the above example, <code class="cCode">MQ_GROUP_NAME</code> is the name of the group in which the MQ adapter servers are defined. Your application may use whatever name it wants for this group.   The number of TMS servers in this group is 3.  BEA.TEST.MANAGER is the name of the queue manager being used, and another name should be substituted if your queue manager is named something else. 
</p>
<h3 class="pHeading2"><a name="wp1076206"> </a>
Building Single-Threaded and Multi-Threaded TM_MQI
</h3>
<p class="pBody"><a name="wp1076451"> </a>
The single-threaded <code class="cCode">TM_MQI</code> configuration and behavior remain the same as earlier releases. To build the single-threaded <code class="cCode">TM_MQI</code>, neither <code class="cCode">$TUXDIR/udataobj/RM</code> nor b<code class="cCode">uildmqadapter</code> and <code class="cCode">buildTM_MQI</code> command line options need to be changed. 
</p>
<p class="pBody"><a name="wp1076452"> </a>
For multi-threaded <code class="cCode">TM_MQI</code>, we provide special configuration for the command line options as well as the RM file. In the command line, an additional option &quot;-t&quot; is added for <code class="cCode">buildmqadapter</code> and <code class="cCode">buildTM_MQI</code>, to generate new multi-threaded <code class="cCode">TM_MQI</code>. You can build multi-threaded <code class="cCode">TM_MQI</code> using one of the following commands:
</p>
<a name="wp1076209"> </a><div class="pPreformatted"><pre>buildmqadapter -t -v</pre></div><a name="wp1076210"> </a><div class="pPreformatted"><pre>buildTM_MQI -t -v -o $TUXDIR/bin/TM_MQI</pre></div><p class="pBody"><a name="wp1076211"> </a>
You need to change the <code class="cCode">$TUXDIR/udataobj/RM</code> file by adding the link to MQ threaded library. For example, on Solaris (32-bit), the configuration is:
</p>
<a name="wp1076212"> </a><div class="pPreformatted"><pre># WebSphere MQ</pre></div><a name="wp1076213"> </a><div class="pPreformatted"><pre>MQSeries_XA_RMI:MQRMIXASwitchDynamic: /opt/mqm/lib/libmqmxa_r.so /opt/mqm/lib/libmqm_r.so</pre></div><p class="pBody"><a name="wp1076214"> </a>
Administrators should review this information to confirm its correctness.
</p>
<h3 class="pHeading2"><a name="wp1076215"> </a>
Using MQ Client-Only Package
</h3>
<p class="pBody"><a name="wp1076216"> </a>
A new library <code class="cCode">libtuxmq_c*</code> is provided for supporting IBM MQ client-only installation on Tuxedo MQ Adapter. When building Tuxedo MQ Adapter, you can use an additional option &quot;-c&quot; to link related <code class="cCode">libtuxmq_c*</code> and MQ client libraries. See <a href="build.html#wp1076217">Listing&#160;2-1</a> for several building examples.
</p>
<div class="pCodeTitle"><a name="wp1076217"> </a>
Listing&#160;2-1	   Command Line Building Methods
</div> <a name="wp1076218"> </a><div class="pPreformatted"><pre>buildmqadapter -c</pre></div><a name="wp1076219"> </a><div class="pPreformatted"><pre>buildTM_MQI -c -o $TUXDIR/bin/TM_MQI</pre></div><a name="wp1076220"> </a><div class="pPreformatted"><pre>buildTM_MQO -c -o $TUXDIR/bin/TM_MQO</pre></div><a name="wp1076221"> </a><div class="pPreformatted"><pre>buildTMQUEUE_MQM -c -o $TUXDIR/bin/ TMQUEUE_MQM</pre></div><p class="pBody"><a name="wp1076222"> </a>
In addition, you need to change the <code class="cCode">$TUXDIR/udataobj/RM</code> to build MQ Adapter with MQ client library. For example, on Solaris (64-bit) platform, do the following configuration:
</p>
<a name="wp1076223"> </a><div class="pPreformatted"><pre>MQSeriesXA_RMI:MQRMIXASwitchDynamic: /opt/mqm/lib64/libmqcxa64.so /opt/mqm/lib64/libmqic.so</pre></div><p class="pBody"><a name="wp1076224"> </a>
You can also use the -<code class="cCode">t</code> and <code class="cCode">-c</code> options of buildmqadapter and buildTM_MQI commands together to generate multi-threaded TM_MQI with MQ client library. In this case, you need to change the $<code class="cCode">TUXDIR/udataobj/RM</code> configuration to make sure the RM file is linking to necessary multi-threaded libraries. For example, on Solaris (64-bit) platform, do the following configuration:
</p>
<a name="wp1076225"> </a><div class="pPreformatted"><pre>MQSeries_XA_RMI:MQRMIXASwitchDynamic: /opt/mqm/lib64/libmqcxa64_r.so /opt/mqm/lib64/libmqic_r.so</pre></div><p class="pBody"><a name="wp1076226"> </a>
To use client package, you also need to configure the <code class="cCode">UBBCONFIG</code> file. In *GROUPS section, change the O<code class="cCode">PENINFO</code> of the group used for MQ Adapter to:  
</p>
<a name="wp1076266"> </a><div class="pPreformatted"><pre>OPENINFO=&quot;MQSeries_XA_RMI:channel=&lt;YOUR_CHANNEL_NAME&gt;,AXLIB=&lt;PATH_TO_LIBTUX.SO&gt;,trptype=TCP,conname=&lt;MQ_SERVER_IPADDRESS(PORT)&gt;,qmname=&lt;Q_MANAGER_NAME&gt;,tpm=TUXEDO&quot;</pre></div><p class="pBody"><a name="wp1076227"> </a>
For example:
</p>
<a name="wp1076228"> </a><div class="pPreformatted"><pre>GROUP2</pre></div><a name="wp1076229"> </a><div class="pPreformatted"><pre>LMID=simple     GRPNO=2 TMSNAME=TMS_MQ         OPENINFO=&quot;MQSeries_XA_RMI:qmname=SIMPLE.QMANAGER,channel=CHANNEL1,trptype=TCP,AXLIB=/opt/tuxedo11gR1/lib/libtux.so,conname=10.10.10.2(1414),tpm=Tuxedo&quot;</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1076198"> </a>
Post-Installation Procedures
</h2><p class="pBody"><a name="wp1075640"> </a>
After you complete the installation procedures for the MQ Adapter for Oracle Tuxedo, make sure the following has been done before continuing with the MQ Adapter configuration procedures:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1075641"> </a>WebSphere MQ programs you intend to use must be built, must be accessible to run, and must have triggers defined, if applicable.</li>
<li><a name="wp1075642"> </a>All WebSphere MQ queues you intend to use must be defined and must be accessible. For more information on these procedures, refer to WebSphere MQ documentation.</li>
</ul></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="build.html"><img id="LongDescNotReq7" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="overview.html"><img id="LongDescNotReq8" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="config.html"><img id="LongDescNotReq9" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
