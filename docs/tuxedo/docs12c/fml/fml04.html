<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41824" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux12c/fml/fm/fml04.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="06/26/12 11:06:08" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Defining and Using Fields</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Programming an Oracle Tuxedo ATMI Application Using FML
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="fml03.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="fml05.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/fml.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1017787"> </a>
Defining and Using Fields
</h1>
<p class="pBody"><a name="wp1013402"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1010328"> </a><a href="fml04.html#wp1010332">Preparing to Use FML and VIEWS</a></li>
<li><a name="wp1010329"> </a><a href="fml04.html#wp1010339">Defining Fields for FML and VIEWS</a></li>
<li><a name="wp1010330"> </a><a href="fml04.html#wp1010420">Mapping Fields to C Structures and COBOL Records</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010332"> </a>
Preparing to Use FML and VIEWS
</h2><p class="pBody"><a name="wp1010333"> </a>
Before you can begin to work with FML fielded buffers, or to use the VIEWS functions that move fields between structures and fielded buffers, you must:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1010334"> </a>Define fields.</li>
<li><a name="wp1010335"> </a>Make field definitions available to application programs (through field table files and mapping functions at run time, or through C header files at compile time).</li>
<li><a name="wp1010336"> </a>Compile source view descriptions into object view descriptions, and generate corresponding C header files and COBOL COPY files.</li>
</ul></div>
<p class="pBody"><a name="wp1010337"> </a>
These tasks and related activities are described here.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010339"> </a>
Defining Fields for FML and VIEWS
</h2><p class="pBody"><a name="wp1013488"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1010340"> </a><a href="fml04.html#wp1010346">Defining Field Names and Identifiers</a></li>
<li><a name="wp1010341"> </a><a href="fml04.html#wp1010360">Creating Field Table Files</a></li>
<li><a name="wp1010342"> </a><a href="fml04.html#wp1010381">Mapping Field Names to Field IDs</a></li>
<li><a name="wp1010343"> </a><a href="fml04.html#wp1010389">Loading Field Tables</a></li>
<li><a name="wp1010344"> </a><a href="fml04.html#wp1010397">Converting Field Tables to Header Files</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010346"> </a>
Defining Field Names and Identifiers
</h2><p class="pBody"><a name="wp1010347"> </a>
A field identifier (<code class="cCode">fieldid</code>) is defined (with <code class="cCode">typedef</code>) as a <code class="cCode">FLDID</code> (<code class="cCode">FLDID32</code> for FML32), and is composed of two parts: a field type and a field number. The number uniquely identifies the field.
</p>
<p class="pBody"><a name="wp1010348"> </a>
A field number must fall in one of the following ranges:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1012156"> </a>For FML: between 1 and 8191, inclusive</li>
<li><a name="wp1012157"> </a>For FML32: between 1 and 33,554,431, inclusive</li>
</ul></div>
<p class="pBody"><a name="wp1012158"> </a>
Field number 0 and the corresponding field identifier 0 are reserved to indicate a bad field identifier (<code class="cCode">BADFLDID</code>). When FML is used with other software that also uses fields, additional restrictions may be imposed on field numbers.
</p>
<p class="pBody"><a name="wp1010352"> </a>
The Oracle Tuxedo system conforms to the following conventions for field numbers.
</p>
<p class="pGraphic"><a name="wp1016157"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1012251table1012249">
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th colspan="2" rowspan="1"><div class="pCellHeading"><a name="wp1012251"> </a>
<span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">FML Field Numbers</span>
</div>
</th>
    <th colspan="2" rowspan="1"><div class="pCellHeading"><a name="wp1012255"> </a>
FML32 Field Numbers
</div>
</th>
</tr>
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1012259"> </a>
Reserved
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1012261"> </a>
Available
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1012263"> </a>
Reserved
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1012265"> </a>
Available
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1012267"> </a>
1-100
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1012269"> </a>
101-8191
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1012271"> </a>
1-10,000,<br />30,000,001-33,554,431
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1012273"> </a>
10,001-30,000,000
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1012192"> </a>
Applications should avoid using the reserved field numbers, although the Oracle Tuxedo system does not strictly enforce applications from using them.
</p>
<p class="pBody"><a name="wp1010356"> </a>
The mappings between field identifiers and field names are contained in either field table files or field header files. If you are using field table files you must convert field name references in C programs with the mapping functions described later in this section. Field header files allow the C preprocessor (<code class="cCode">cpp</code>(1) in UNIX reference manuals) to resolve name-to-field ID mappings when a program is compiled.
</p>
<p class="pBody"><a name="wp1010357"> </a>
The functions and programs that access field tables use the environment variables <code class="cCode">FLDTBLDIR</code> and <code class="cCode">FIELDTBLS</code> to specify the source directories and field table files, respectively, that are to be used. (<code class="cCode">FLDTBLDIR32</code> and <code class="cCode">FIELDTBLS32</code> are used for the same purpose with<span style="font-weight: bold"> </span>FML32.) You should set these environment variables as described in <a href="fml03.html">Setting Up Your Environment for FML and VIEWS</a>.
</p>
<p class="pBody"><a name="wp1010358"> </a>
The use of multiple field tables allows you to establish separate directories and/or files for separate groups of fields. Note that field names and field numbers should be unique across all field tables, since such tables are capable of being converted into C header files, and field numbers that occur more than once may cause unpredictable results.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010360"> </a>
Creating Field Table Files
</h2><p class="pBody"><a name="wp1010361"> </a>
Field table files are created using a standard text editor, such as <code class="cCode">vi</code>. They have the following format: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1010362"> </a>Blank lines and lines beginning with <code class="cCode">#</code> are ignored.</li>
<li><a name="wp1010363"> </a>Lines beginning with a dollar sign (<code class="cCode">$</code>) are ignored by the mapping functions but are passed through (without the <code class="cCode">$</code>) to header files generated by <code class="cCode">mkfldhdr</code>. (Refer to <a href="../rfcm/rfcmd.html">mkfldhdr,&#160;mkfldh</a><a href="../rfcm/rfcmd.html">dr32(1)</a> in <em class="cEmphasis">Oracle Tuxedo Command Reference</em>.) The ability to have lines ignored by the mapping functions is useful, for example, when an application passes C comments, <code class="cCode">what</code> strings, and so on, to the generated C header file. </li>
<a name="wp1010364"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>In COBOL applications, however, such lines are not passed through to the COBOL copy files.</td>
</tr>
</table>

<li><a name="wp1010365"> </a>Lines beginning with the string <code class="cCode">*base</code> contain a base for offsetting subsequent field numbers. This optional feature provides an easy way to group and renumber sets of related fields.</li>
<li><a name="wp1010366"> </a>All other lines should have the form:</li>
<a name="wp1010367"> </a><div class="pPreformattedRelative"><pre><code class="cCodeEmphasis">name</code>       <code class="cCodeEmphasis">rel-number      type      flag      comment</code></pre></div><p class="pBodyRelative"><a name="wp1010368"> </a>
where: 
</p>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1010369"> </a><code class="cCodeEmphasis">name</code> is the identifier for the field. It should not exceed the C preprocessor identifier restrictions (that is, it should contain only alphanumeric characters and the underscore character). Internally, the name is truncated to 30 characters, so names must be unique within the first 30 characters.</li>
<li><a name="wp1010370"> </a><code class="cCodeEmphasis">rel-number</code> is the relative numeric value of the field. It is added to the current base, if <code class="cCode">*base</code> is specified, to obtain the field number of the field.</li>
<li><a name="wp1010371"> </a><code class="cCodeEmphasis">type</code> is the type of the field. It is specified as one of the following: <code class="cCode">short</code>, <code class="cCode">long</code>, <code class="cCode">float</code>, <code class="cCode">double</code>, <code class="cCode">char</code>, <code class="cCode">string</code>, <code class="cCode">carray</code>, <code class="cCode">mbstring</code>, <code class="cCode">ptr</code>, <code class="cCode">fml32</code>, or <code class="cCode">view32</code>.</li>
<li><a name="wp1010372"> </a>The <code class="cCodeEmphasis">flag</code> field is reserved for future use; use a dash (<code class="cCode">-</code>) in this field.</li>
<li><a name="wp1010373"> </a><code class="cCodeEmphasis">comment</code> is an optional field that can be used for clarifying information.</li>
</ul></div>
</ul></div>
<p class="pBody"><a name="wp1010374"> </a>
Note that these entries must be separated by white space (blanks or tabs).
</p>
<h3 class="pHeading2"><a name="wp1010375"> </a>
Field Table Example
</h3>
<p class="pBody"><a name="wp1010376"> </a>
The following is an example field table in which the base shifts from 500 to 700. The first field in each group will be numbered 501 and 701, respectively.
</p>
<div class="pCodeTitle"><a name="wp1010377"> </a>
Listing&#160;4-1	   System Field Table File
</div> <a name="wp1010378"> </a><div class="pPreformatted"><pre># following are fields for EMPLOYEE service<br /># employee ID fields are based at 500<br />*base 500<br />#name           rel-number      type           flags   comment<br />#----           ----------      ----           ------  -------<br />EMPNAME         1               string         -       emp name<br />EMPID           2               long           -       emp id<br />EMPJOB          3               char           -       job type<br />SRVCDAY         4               carray         -       service date<br />*base 700<br /># all address fields are now relative to 700<br />EMPADDR         1               string         -       street address<br />EMPCITY         2               string         -       city<br />EMPSTATE        3               string         -       state<br />EMPZIP          4               long           -       zip code</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010381"> </a>
Mapping Field Names to Field IDs
</h2><p class="pBody"><a name="wp1013509"> </a>
Run-time mapping is done by the <code class="cCode">Fldid()</code> and <code class="cCode">Fname()</code> functions, which consult the set of field table files specified by the <code class="cCode">FLDTBLDIR</code> and <code class="cCode">FIELDTBLS</code> environment variables. (If FML32 is being used, the <code class="cCode">Fldid32()</code> and <code class="cCode">Fname32()</code> functions reference the <code class="cCode">FLDTBLDIR32</code> and <code class="cCode">FIELDTBLS32</code> environment variables.)
</p>
<p class="pBody"><a name="wp1013510"> </a>
<code class="cCode">Fldid</code> maps its argument, a field name, to a <code class="cCode">fieldid</code>, as shown in the following code:
</p>
<a name="wp1013511"> </a><div class="pPreformatted"><pre>char *name;<br />extern FLDID Fldid();<br />FLDID id;<br />...<br />id = Fldid(name);</pre></div><p class="pBody"><a name="wp1010385"> </a>
<code class="cCode">Fname</code> does the reverse translation by mapping its argument, a <code class="cCode">fieldid</code>, to a field name, as shown in the following code: 
</p>
<a name="wp1010386"> </a><div class="pPreformatted"><pre>extern char *Fname();<br />name = Fname(id);<br />. . .</pre></div><p class="pBody"><a name="wp1010387"> </a>
Identifier-to-name mapping is rarely used; it is rare that one has a field identifier and wants to know the corresponding name. One situation in which the field identifier-to-field name mapping can be used is in a buffer print routine designed to display, in an intelligible form, the contents of a fielded buffer.
</p>
<h3 class="pHeading2"><a name="wp1011253"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1011255"> </a><a href="../rf3fml/rf3fml.html">Fldid,&#160;Fldid32(3fml)</a> in <em class="cEmphasis">Oracle Tuxedo ATMI FML Function Reference</em></li>
<li><a name="wp1011272"> </a><a href="../rf3fml/rf3fml.html">Fname,&#160;Fname32(3fml)</a> in <em class="cEmphasis">Oracle Tuxedo ATMI FML Function Reference</em></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010389"> </a>
Loading Field Tables
</h2><p class="pBody"><a name="wp1010390"> </a>
Upon the first call, <code class="cCode">Fldid()</code> loads the field table files and performs the required search. Thereafter, the files are kept loaded. <code class="cCode">Fldid()</code> returns the field identifier corresponding to its argument on success, and returns <code class="cCode">BADFLDID</code> on failure, with <code class="cCode">Ferror</code> set to <code class="cCode">FBADNAME</code>. (If FML32 is being used, <code class="cCode">Ferror32</code> is set, instead.)
</p>
<p class="pBody"><a name="wp1010391"> </a>
To recover the data space used by the field tables loaded by <code class="cCode">Fldid()</code>, you may unload all of the files by calling the <code class="cCode">Fnmid_unload()</code> function.
</p>
<p class="pBody"><a name="wp1010392"> </a>
The function <code class="cCode">Fname()</code> acts in a fashion similar to <code class="cCode">Fldid()</code>, but it provides a mapping from a field identifier to a field name. It uses the same environment variable scheme for determining the field tables to be loaded, but constructs a separate set of mapping tables. On success, <code class="cCode">Fname()</code> returns a pointer to a character string containing the name corresponding to the <code class="cCode">fldid</code> argument. On failure, <code class="cCode">Fname()</code> returns NULL.
</p>
<a name="wp1010393"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The pointer is valid only as long as the table remains loaded.</td>
</tr>
</table>

<p class="pBody"><a name="wp1010394"> </a>
As with <code class="cCode">Fldid()</code>, failure includes either the inability to find or open a field table (<code class="cCode">FFTOPEN</code>), bad field table syntax (<code class="cCode">FFTSYNTAX</code>), or a no-hit condition within the field tables (<code class="cCode">FBADFLD</code>). The table space used by the mapping tables created by <code class="cCode">Fname()</code> may be recovered by a call to the <code class="cCode">Fidnm_unload()</code> function.
</p>
<p class="pBody"><a name="wp1010395"> </a>
Both mapping functions and other FML functions that use run-time mapping require <code class="cCode">FIELDTBLS</code> and <code class="cCode">FLDTBLDIR</code> to be set properly. Otherwise, defaults are used. (For the default values of these environment variables, see <a href="fml03.html">Setting Up Your Environment for FML and VIEWS</a>.)
</p>
<h3 class="pHeading2"><a name="wp1011122"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1011124"> </a><a href="../rf3fml/rf3fml.html">Fldid,&#160;Fldid32(3fml)</a> in <em class="cEmphasis">Oracle Tuxedo ATMI FML Function Reference</em></li>
<li><a name="wp1011131"> </a><a href="../rf3fml/rf3fml.html">Fnmid_unload,&#160;Fnmid_unload32(3fml)</a> in <em class="cEmphasis">Oracle Tuxedo ATMI FML Function Reference</em></li>
<li><a name="wp1011135"> </a><a href="../rf3fml/rf3fml.html">Fname,&#160;Fname32(3fml)</a> in <em class="cEmphasis">Oracle Tuxedo ATMI FML Function Reference</em></li>
<li><a name="wp1011139"> </a><a href="../rf3fml/rf3fml.html">Fidnm_unload,&#160;Fidnm_unload32(3fml)</a> in <em class="cEmphasis">Oracle Tuxedo ATMI FML Function Reference</em></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010397"> </a>
Converting Field Tables to Header Files
</h2><p class="pBody"><a name="wp1010398"> </a>
The <code class="cCode">mkfldhdr</code> (or <code class="cCode">mkfldhdr32</code>) command converts a field table, as described earlier, into a header file suitable for processing by the C compiler. Each line of the generated header file is of the following form: 
</p>
<a name="wp1010399"> </a><div class="pPreformatted"><pre>#define <code class="cCodeEmphasis">fname</code> <code class="cCodeEmphasis">fieldid</code></pre></div><p class="pBody"><a name="wp1010400"> </a>
where <code class="cCodeEmphasis">fname</code> is the name of the field, and <code class="cCodeEmphasis">fieldid</code> is its field-ID. The field-ID has both the field type and field number encoded in it. The field number is an absolute number, that is, <code class="cCode">base</code> plus <code class="cCode">rel-number</code>. The resulting file is suitable for inclusion in a C program.
</p>
<p class="pBody"><a name="wp1010401"> </a>
It is not necessary to use the header file if the run-time mapping functions are used as described in <a href="fml04.html#wp1010420">Mapping Fields to C Structures and COBOL Records</a>.
</p>
<p class="pBody"><a name="wp1010402"> </a>
The advantage of compile-time mapping of names to identifiers is speed and a decrease of data space requirements. The disadvantage is that changes made to field name/identifier mappings after, for instance, a service routine has been compiled, are not propagated to the service routine. (Under such circumstances, the service routine uses the mappings it has already compiled.)
</p>
<p class="pBody"><a name="wp1010403"> </a>
<code class="cCode">mkfldhdr</code> translates each field table specified in the <code class="cCode">FIELDTBLS</code> environment variable to a corresponding header file, the name of which is formed by adding a <code class="cCode">.h</code> suffix to the field table name. The resulting files are created, by default, in the current directory. If you want your header files to be created in another directory, you may specify that directory with the <code class="cCode">-d</code> option on the <code class="cCode">mkfldhdr</code> command line. For more information, refer to <a href="../rfcm/rfcmd.html">mkfldhdr,&#160;mkfl</a><a href="../rfcm/rfcmd.html">dhdr32(1)</a> in <em class="cEmphasis">Oracle Tuxedo Command Reference</em>.
</p>
<h3 class="pHeading2"><a name="wp1010404"> </a>
Examples of Converting Field Tables to Header Files
</h3>
<p class="pBody"><a name="wp1010405"> </a>
Examples 1 and 2 show how to set your environment variables and run the <code class="cCode">mkfldhdr(1)</code> command so that three field table files&#8212;<code class="cCode">${FLDTBLDIR}/maskftbl</code>, <code class="cCode">${FLDTBLDIR}/DBftbl</code>, and <code class="cCode">${FLDTBLDIR}/miscftbl</code>&#8212;are processed, and three include files&#8212;<code class="cCode">maskftbl.h</code>, <code class="cCode">DBftbl.h</code> and <code class="cCode">miscftbl.h</code>&#8212;are generated in the current directory. For more information, refer to <a href="../rfcm/rfcmd.html">mkfldhdr,&#160;mkfldh</a><a href="../rfcm/rfcmd.html">dr32(1)</a> in <em class="cEmphasis">Oracle Tuxedo Command Reference</em>.
</p>
<h4 class="pHeading3"><a name="wp1010406"> </a>
Example 1
</h4>
<a name="wp1010407"> </a><div class="pPreformatted"><pre>FLDTBLDIR=/project/fldtbls<br />FIELDTBLS=maskftbl,DBftbl,miscftbl<br />export FLDTBLDIR FIELDTBLS<br />mkfldhdr</pre></div><h4 class="pHeading3"><a name="wp1010408"> </a>
Example 2
</h4>
<a name="wp1010409"> </a><div class="pPreformatted"><pre>FLDTBLDIR32=/project/fldtbls<br />FIELDTBLS32=maskftbl,DBftbl,miscftbl<br />export FLDTBLDIR32 FIELDTBLS32<br />mkfldhdr32</pre></div><h4 class="pHeading3"><a name="wp1010410"> </a>
Example 3
</h4>
<p class="pBody"><a name="wp1010411"> </a>
Example 3 is the same as Example 1 with one exception: the output files&#8212;<code class="cCode">maskftbl.h</code>, <code class="cCode">DBftbl.h</code> and <code class="cCode">miscftbl.h</code>&#8212;are generated in the directory indicated by <code class="cCode">${FLDTBLDIR}</code>.
</p>
<a name="wp1010412"> </a><div class="pPreformatted"><pre>FLDTBLDIR=/project/fldtbls<br />FIELDTBLS=maskftbl,DBftbl,miscftbl<br />export FLDTBLDIR FIELDTBLS<br />mkfldhdr -d${FLDTBLDIR}</pre></div><a name="wp1010413"> </a><div class="pPreformatted"><pre>mkfldhdr -d${FLDTBLDIR}</pre></div><h3 class="pHeading2"><a name="wp1010414"> </a>
Overriding Environment Variables to Run mkfldhdr
</h3>
<p class="pBody"><a name="wp1010415"> </a>
You may override the environment variables (or avoid setting them) when using <code class="cCode">mkfldhdr</code> by specifying, on the command line, the names of the field tables to be converted. 
</p>
<p class="pBody"><a name="wp1010416"> </a>
This method does not apply to run-time mapping functions, however. When run-time mapping functions are being used, <code class="cCode">FLDTBLDIR</code> is assumed to be the current directory and <code class="cCode">FIELDTBLS</code> is assumed to be the list of parameters that the user specified on the command line. For example, the command:
</p>
<a name="wp1010417"> </a><div class="pPreformatted"><pre>mkfldhdr myfields</pre></div><p class="pBody"><a name="wp1010418"> </a>
converts the field table file called <code class="cCode">myfields</code> to a field header file called <code class="cCode">myfields.h</code>, and puts the new file in the current directory. 
</p>
<p class="pBody"><a name="wp1011280"> </a>
 For more information, refer to <a href="../rfcm/rfcmd.html">mkfldhdr,&#160;mkfl</a><a href="../rfcm/rfcmd.html">dhdr32(1)</a> in <em class="cEmphasis">Oracle Tuxedo Command Reference</em>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010420"> </a>
Mapping Fields to C Structures and COBOL Records
</h2><p class="pBody"><a name="wp1013522"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1010421"> </a><a href="fml04.html#wp1010429">What Is the VIEWS Facility?</a></li>
<li><a name="wp1010422"> </a><a href="fml04.html#wp1010439">Creating Viewfiles</a></li>
<li><a name="wp1010423"> </a><a href="fml04.html#wp1010446">Creating View Descriptions</a></li>
<li><a name="wp1010424"> </a><a href="fml04.html#wp1010520">Compiling Viewfiles</a></li>
<li><a name="wp1010425"> </a><a href="fml04.html#wp1010530">Using Header Files Compiled with viewc</a></li>
<li><a name="wp1010426"> </a><a href="fml04.html#wp1010536">Using COBOL COPY Files Created by the View Compiler</a></li>
<li><a name="wp1010427"> </a><a href="fml04.html#wp1010546">Displaying Viewfile Information After Compilation</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010429"> </a>
What Is the VIEWS Facility?
</h2><p class="pBody"><a name="wp1010430"> </a>
FML VIEWS is a mechanism that enables the exchange of data between fielded buffers and C structures or COBOL records. This facility is provided because it is usually more efficient to perform lengthy manipulations on C structures with C functions than on fielded buffers with FML functions. VIEWS also provides a way for a COBOL program to send and receive messages with a C program that handles FML fielded records.
</p>
<p class="pBody"><a name="wp1010431"> </a>
This section explains how to use VIEWS to provide fielded buffer/structure mappings.
</p>
<h3 class="pHeading2"><a name="wp1010432"> </a>
Structure of VIEWS
</h3>
<p class="pBody"><a name="wp1010433"> </a>
The following diagram shows the various components of VIEWS and how they relate to one another.
</p>
<div class="pFigureTitle"><a name="wp1010437"> </a>
Figure&#160;4-1  Components of the VIEWS Facility
</div>

 
 <p class="pGraphic"><a name="wp1010906"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/fml-4-1-1.gif" height="231" width="456" alt="Components of the VIEWS Facility" id="wp1010435"/></div><p class="pGraphic">

</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010439"> </a>
Creating Viewfiles
</h2><p class="pBody"><a name="wp1010440"> </a>
Source viewfiles are standard text files (created through any standard text editor, such as <code class="cCode">vi</code>) that contain one or more source view descriptions (the actual field-to-structure mappings).
</p>
<p class="pBody"><a name="wp1010441"> </a>
The view compiler produces (among other things) object viewfiles containing the compiled object view descriptions. These object viewfiles can be used, in turn, as input to the view disassembler (<code class="cCode">viewdis</code> or <code class="cCode">viewdis32</code>), which translates the object view descriptions back into their source format (for verification or editing). For more information, refer to <a href="../rfcm/rfcmd.html">viewdis,&#160;viewdis</a><a href="../rfcm/rfcmd.html">32(1)</a> in <em class="cEmphasis">Oracle Tuxedo Command Reference</em>.
</p>
<p class="pBody"><a name="wp1010442"> </a>
You can create and edit source view descriptions, and edit the output of <code class="cCode">viewdis</code>. You cannot read compiled view descriptions (which are in binary format) directly.
</p>
<p class="pBody"><a name="wp1010443"> </a>
Besides view descriptions, viewfiles may contain comment lines, beginning with <code class="cCode">#</code> or <code class="cCode">$</code>. Blank lines and lines beginning with <code class="cCode">#</code> are ignored by the view compiler, while lines beginning with <code class="cCode">$</code> are passed by the view compiler to any header files generated. This convention lets you pass C comments, <code class="cCode">what</code> strings, and so on, to C header files produced by the view compiler.
</p>
<a name="wp1010444"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>This convention is not observed for COBOL; lines beginning with <code class="cCode">$</code> are not passed through to the COBOL copy files.</td>
</tr>
</table>

<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010446"> </a>
Creating View Descriptions
</h2><p class="pBody"><a name="wp1010447"> </a>
Each source view description in a source viewfile consists of three parts: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1010448"> </a>A line beginning with the keyword <code class="cCode">VIEW</code> (never with a <code class="cCode">32</code> suffix), followed by the name of the view description. This name may be composed of alphanumeric characters, including an underscore. Although <code class="cCode">viewc</code> accepts names of up to 33 characters, the practical limit in most cases is 16 characters, since this is the maximum length for a subtype accepted by <a href="../rf3c/rf3c.html">tpalloc(3c)</a>.</li>
<li><a name="wp1010449"> </a>A list of member descriptions.</li>
<li><a name="wp1010450"> </a>A line beginning with the keyword <code class="cCode">END</code>.</li>
</ul></div>
<p class="pBody"><a name="wp1010451"> </a>
The first line of each view description must begin with the keyword <code class="cCode">VIEW</code>, followed by the name of the view description. A member description (or mapping entry) is a line with information about a member in the C structure or COBOL record. A line with the keyword <code class="cCode">END</code> must be the last line in a view description.
</p>
<p class="pBody"><a name="wp1010452"> </a>
The following listing shows the general structure of a source view description.
</p>
<div class="pCodeTitle"><a name="wp1010454"> </a>
Listing&#160;4-2	   Source View Description
</div> <a name="wp1010455"> </a><div class="pPreformatted"><pre>VIEW vname<br />  # type   cname   fbname   count   flag   size   null<br />  # ----   -----   ------   -----   ----   ----   ----<br />  --------------member descriptions-------------------<br />  .<br />  .<br />  .<br />  END</pre></div><p class="pBody"><a name="wp1010457"> </a>
In the previous listing: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1010458"> </a><code class="cCodeEmphasis">vname</code> is the name of the view description, and should be a valid C identifier name, since it is also used as the name of a C structure. Underscores are mapped automatically to dashes in the COBOL COPY file.</li>
<li><a name="wp1010459"> </a><code class="cCodeEmphasis">type</code> is the type of the member, and is specified as one of the following: <code class="cCode">int</code>, <code class="cCode">short</code>, <code class="cCode">long</code>, <code class="cCode">char</code>, <code class="cCode">float</code>, <code class="cCode">double</code>, <code class="cCode">string</code>, <code class="cCode">carray</code>, or <code class="cCode">dec_t</code>. If the value of <code class="cCodeEmphasis">type</code> is &#8220;<code class="cCode">-</code>&#8221;, the default&#8212;the value of <code class="cCodeEmphasis">fbname</code>&#8212;is used.</li>
<li><a name="wp1010460"> </a><code class="cCodeEmphasis">cname</code> is the identifier for the structure member, and should be a valid C identifier name, since it is the name of a C structure member. Internally, the <code class="cCodeEmphasis">cname</code> is truncated to 30 characters, so <code class="cCodeEmphasis">cnames</code> must be unique within the first 30 characters. Underscores are mapped automatically to dashes in the COBOL COPY file.</li>
<li><a name="wp1010461"> </a><code class="cCodeEmphasis">fbname</code> is the name of the field in the fielded buffer. This name must appear in a field table file.</li>
<li><a name="wp1010462"> </a><code class="cCodeEmphasis">count</code> is the number of elements to be allocated (that is, the maximum number of occurrences to be stored for this member). The value of <code class="cCodeEmphasis">count</code> must be less than or equal to 65,535 for FML, and less than or equal to 2,147,483,647 for FML32.</li>
<li><a name="wp1010463"> </a><code class="cCodeEmphasis">flag</code> is a comma-separated list of options or &#8220;<code class="cCode">-</code>&#8221; (which means that no options are set). For details, see <a href="fml04.html#wp1010469">Specifying flag Options in a View Description</a>.</li>
<li><a name="wp1010464"> </a><code class="cCodeEmphasis">size</code> is the size of the member if the type is <code class="cCode">string</code>, <code class="cCode">carray</code>, or <code class="cCode">dec_t</code>. For other types, &#8220;<code class="cCode">-</code>&#8221; should be specified; the view compiler computes the size. </li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1010465"> </a>For <code class="cCode">string</code> or <code class="cCode">carray</code>, the value of <code class="cCodeEmphasis">size</code> must be less than or equal to 65,535 for FML and less than or equal to 2,147,483,647 for FML32. </li>
<li><a name="wp1010466"> </a>For the <code class="cCode">dec_t</code> type, the value of <code class="cCodeEmphasis">size</code> must be two numbers separated by a comma. The first number represents the number of bytes in the decimal value; it must be greater than 0 and less than 10. The second number represents the number of decimal places to the right of the decimal point; it must be greater than 0 and less than twice the number of bytes minus one.</li>
</ul></div>
<li><a name="wp1010467"> </a><code class="cCode">null</code> is the user-specified NULL value or &#8220;<code class="cCode">-</code>&#8221; to indicate the default NULL value for that field. For details, see <a href="fml04.html#wp1010507">Using NULL Values in VIEWS</a>.</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1010469"> </a>
Specifying flag Options in a View Description
</h3>
<p class="pBody"><a name="wp1010470"> </a>
The following options can be specified as the <code class="cCode">flag</code> element of a member description in a view description.
</p>
<h4 class="pDefTerm"><a name="wp1010471"> </a>
<code class="cCode">C</code> 
</h4><p class="pBodyRelative"><a name="wp1010472"> </a>
This option requests the generation of a structure member called the associated count member (ACM), in addition to the structure member described in the member description. 
</p>
<p class="pBodyRelative"><a name="wp1010473"> </a>
When data is being transferred from a fielded buffer to a structure, each ACM in the structure is set to the number of occurrences transferred to the associated structure member. 
</p>
<div class="pSmartList1Bullet"><ul>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1010474"> </a>A value of 0 in an ACM indicates that no fields were transferred to the associated structure member</li>
<li><a name="wp1010475"> </a>A positive value indicates the number of fields actually transferred to the structure member array.</li>
<li><a name="wp1010476"> </a>A negative value indicates that there were more fields in the buffer than could be transferred to the structure member array. (The absolute value of the ACM equals the number of fields not transferred to the structure). </li>
<p class="pBodyRelative"><a name="wp1010477"> </a>
During a transfer of data from a structure member array to a fielded buffer, the ACM is used to indicate the number of array elements that should be transferred. For example, if the ACM of a member is set to N, the first N non-NULL fields are transferred to the fielded buffer. If N is greater than the dimension of the array, it defaults to the dimension of the array. In either event, after the transfer takes place, the ACM is set to the actual number of array members transferred to the fielded buffer. 
</p>
<p class="pBodyRelative"><a name="wp1010478"> </a>
The type of an ACM in the C header file is declared to be <code class="cCode">short</code> for FML and <code class="cCode">long</code> for FML32, and its name is generated as <code class="cCode">C_</code><code class="cCodeEmphasis">cname</code>, where <code class="cCodeEmphasis">cname</code> is the <code class="cCode">cname</code> entry for which the ACM is declared. For example, an ACM for a member named <code class="cCode">parts</code> is declared as follows: 
</p>
<a name="wp1010479"> </a><div class="pPreformattedRelative"><pre><code class="cCode">short C_parts;</code></pre></div><p class="pBodyRelative"><a name="wp1010480"> </a>
For a COBOL COPY file, the name is generated as <code class="cCode">C-</code><code class="cCodeEmphasis">cname</code> and the type is declared as follows:
</p>
<li><a name="wp1010481"> </a>For FML: <code class="cCode">PIC S9(4) USAGE COMP-5</code></li>
<li><a name="wp1010482"> </a>For FML32: <code class="cCode">PIC S9(9) USAGE COMP-5</code></li>
<a name="wp1010483"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>It is possible for the generated ACM name to conflict with structure members with names that begin with a <code class="cCode">C_</code> prefix. Such conflicts are reported by the view compiler, and are considered fatal errors by the compiler. For example, the name <code class="cCode">C_parts</code> for a structure member conflicts with the name of an ACM generated for the member <code class="cCode">parts</code>.</td>
</tr>
</table>

</ul></div>
</ul></div>
<h4 class="pDefTerm"><a name="wp1010484"> </a>
<code class="cCode">F</code>
</h4><p class="pBodyRelative"><a name="wp1010485"> </a>
Specifies one-way mapping from structure or record to fielded buffer. The mapping of a member with this option is effective only when transferring data from structures to fielded buffers. This option is ignored if the <code class="cCode">-n</code> command-line option is specified.
</p>
<h4 class="pDefTerm"><a name="wp1010486"> </a>
<code class="cCode">L</code>
</h4><p class="pBodyRelative"><a name="wp1010487"> </a>
This option is used only for member descriptions of type <code class="cCode">carray</code> or <code class="cCode">string</code> to indicate the number of bytes transferred for these possibly variable length fields. If a <code class="cCode">carray</code> or <code class="cCode">string</code> field is always used as a fixed length data item, then this option provides no benefit. 
</p>
<p class="pBodyRelative"><a name="wp1010488"> </a>
The <code class="cCode">L</code> option generates an associated length member (ALM) for a structure member of type <code class="cCode">carray</code> or <code class="cCode">string</code>. When transferring data from a fielded buffer to a structure, the ALM is set to the length of the corresponding transferred fields. If the length of a field in the fielded buffer exceeds the space allocated in the mapped structure member, only the allocated number of bytes is transferred. The corresponding ALM is set to the size of the fielded buffer item. Therefore, if the ALM is greater than the dimension of the structure member array, the fielded buffer information is truncated on transfer. 
</p>
<p class="pBodyRelative"><a name="wp1010489"> </a>
When data is being transferred from a structure member to a field in a fielded buffer, the ALM is used to indicate the number of bytes to transfer to the fielded buffer, if it is a <code class="cCode">carray</code> type field. For <code class="cCode">strings</code>, the ALM is ignored on transfer, but is set afterwards to the number of bytes transferred. Note that because <code class="cCode">carray</code> field may be of zero length, an ALM of 0 indicates that a zero-length field should be transferred to the fielded buffer, unless the value in the associated structure member is the NULL value.
</p>
<p class="pBodyRelative"><a name="wp1010490"> </a>
An ALM is defined in the C header file as an unsigned short for FML and an unsigned long for FML32, and has a generated name of <code class="cCode">L_</code><code class="cCodeEmphasis">cname</code>, where <code class="cCodeEmphasis">cname</code> is the name of the structure for which the ALM is declared. 
</p>
<p class="pBodyRelative"><a name="wp1010491"> </a>
If the number of occurrences of the member for which the ALM is declared is 1 (or defaults to 1), then the ALM is declared as: 
</p>
<a name="wp1010492"> </a><div class="pPreformattedRelative"><pre><code class="cCode">unsigned short L_cname;</code></pre></div><p class="pBodyRelative"><a name="wp1010493"> </a>
whereas if the number of occurrences is greater than 1, say N, the ALM is declared as: 
</p>
<a name="wp1010494"> </a><div class="pPreformattedRelative"><pre><code class="cCode">unsigned short L_cname[N];</code></pre></div><p class="pBodyRelative"><a name="wp1010495"> </a>
and is referred to as an ALM Array. In this case, each element in the ALM array refers to a corresponding occurrence of the structure member (or field). For the COBOL COPY file, the type is declared to be <code class="cCode">PIC 9(4) USAGE COMP-5</code> for FML and <code class="cCode">PIC 9(9) USAGE COMP-5</code> for FML32, and its name is generated as <code class="cCode">L-</code><code class="cCodeEmphasis">cname</code>. The COBOL <code class="cCode">OCCURS</code> clause is used to define multiple occurrences if the member occurs multiple times.
</p>
<a name="wp1010496"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>It is possible for the generated ALM name to conflict with structure members with names that begin with an <code class="cCode">L_</code> prefix. Such conflicts are reported by the view compiler, and are considered fatal errors by the compiler. For example, the name <code class="cCode">L_parts</code> for a structure member conflicts with the name of an ALM generated for the member <code class="cCode">parts</code>.</td>
</tr>
</table>

<h4 class="pDefTerm"><a name="wp1010497"> </a>
<code class="cCode">N</code>
</h4><p class="pBodyRelative"><a name="wp1010498"> </a>
Specifies zero-way mapping; no fielded buffer is mapped to the structure. This option can be used to allocate fillers in C structures or COBOL records. It is ignored if the <code class="cCode">-n</code> command-line option is specified.
</p>
<h4 class="pDefTerm"><a name="wp1010499"> </a>
<code class="cCode">P</code>
</h4><p class="pBodyRelative"><a name="wp1010500"> </a>
This option can be used to affect what VIEWS interprets as a NULL value for <code class="cCode">string</code> and <code class="cCode">carray</code> type structure members. If this option is not used, a structure member is NULL if its value is equal to the user-specified NULL value (without considering any trailing NULL characters). 
</p>
<p class="pBodyRelative"><a name="wp1010501"> </a>
If this option is set, however, a member is NULL if its value is equal to the user-specified NULL value with the last character propagated to full length (without considering any trailing NULL character). 
</p>
<p class="pBodyRelative"><a name="wp1010502"> </a>
A member whose value is NULL is not transferred to the destination buffer when data is transferred from the C structure or COBOL record to the fielded buffer. For example, a structure member <code class="cCode">TEST</code> is of type <code class="cCode">carray[25]</code> and a user-specified NULL value &#8220;<code class="cCode">abcde</code>&#8221; is established for it. If the <code class="cCode">P</code> option is not set, <code class="cCode">TEST</code> is considered NULL if the first five characters are <code class="cCode">a</code>, <code class="cCode">b</code>, <code class="cCode">c</code>, <code class="cCode">d</code>, and <code class="cCode">e</code>, respectively. If the <code class="cCode">P</code> option is set, <code class="cCode">TEST</code> is NULL if the first four characters are <code class="cCode">a</code>, <code class="cCode">b</code>, <code class="cCode">c</code>, and <code class="cCode">d</code>, respectively, and the rest of the <code class="cCode">carray</code> contains the character &#8220;<code class="cCode">e</code>&#8221; (that is, 21 <code class="cCode">e</code>&#8217;s). 
</p>
<p class="pBodyRelative"><a name="wp1010503"> </a>
This option is ignored if the <code class="cCode">-n</code> command-line option is specified.
</p>
<h4 class="pDefTerm"><a name="wp1010504"> </a>
<code class="cCode">S</code>
</h4><p class="pBodyRelative"><a name="wp1010505"> </a>
Specifies one-way mapping from fielded buffer to structure or record. The mapping of a member with this option is effective only when transferring data from fielded buffers to structures. This option is ignored if the <code class="cCode">-n</code> command line option is specified.
</p>
<h3 class="pHeading2"><a name="wp1010507"> </a>
Using NULL Values in VIEWS
</h3>
<p class="pBody"><a name="wp1010508"> </a>
NULL values are used in VIEWS to indicate empty C structure or COBOL record members. Default NULL values are provided; you may also define your own.
</p>
<p class="pBody"><a name="wp1010509"> </a>
The default NULL value for all numeric types is <code class="cCode">0</code> (<code class="cCode">0.0</code> for <code class="cCode">dec_t</code>); for <code class="cCode">char</code> types, it is &#8220;<code class="cCode">\0</code>&#8221;; and for <code class="cCode">string</code> and <code class="cCode">carray</code> types, it is &#8220; &#8220;.
</p>
<p class="pBody"><a name="wp1010510"> </a>
Escape convention constants can also be used to specify a NULL value. The view compiler recognizes the following escape constants: <code class="cCodeEmphasis">\ddd</code> (where <code class="cCodeEmphasis">d</code> is an octal digit), <code class="cCode">\0</code>, <code class="cCode">\n</code>, <code class="cCode">\t</code>, <code class="cCode">\v</code>, <code class="cCode">\b</code>, <code class="cCode">\r</code>, <code class="cCode">\f</code>, <code class="cCode">\\</code>, <code class="cCode">\&#8217;</code>, and <code class="cCode">\&#8221;</code>.
</p>
<p class="pBody"><a name="wp1010511"> </a>
<code class="cCode">String</code>, <code class="cCode">carray</code>, and <code class="cCode">char</code> NULL values may be enclosed in double or single quotes. Unescaped quotes within a user-defined NULL value are not accepted by the view compiler.
</p>
<p class="pBody"><a name="wp1010512"> </a>
Alternatively, an element is NULL if its value is the same as the NULL value for that element, except in the following cases: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1010513"> </a>If the <code class="cCode">P</code> option is set for the structure member, and the structure member is of <code class="cCode">string</code> or <code class="cCode">carray</code> type; see the preceding section for details on the <code class="cCode">P</code> option flag.</li>
<li><a name="wp1010514"> </a>If a member is of type <code class="cCode">string</code>, its value must be the same string as the NULL value.</li>
<li><a name="wp1010515"> </a>If a member is of type <code class="cCode">carray</code> and the NULL value is of length N, then the first N characters in the <code class="cCode">carray</code> must be the same as the NULL value.</li>
</ul></div>
<p class="pBody"><a name="wp1010516"> </a>
You can also specify the keyword &#8220;<code class="cCode">NONE</code>&#8221; in the NULL field of a view member description, which means there is no NULL value for the member.
</p>
<p class="pBody"><a name="wp1010517"> </a>
The maximum size of default values for <code class="cCode">string</code> and character array (<code class="cCode">carray</code>) members is 2660 characters.
</p>
<a name="wp1010518"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Note that for <code class="cCode">string</code> members, which usually end with a &#8220;<code class="cCode">\0</code>&#8221;, a  &#8220;<code class="cCode">\0</code>&#8221; is not required as the last character of a user-defined NULL value.</td>
</tr>
</table>

<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010520"> </a>
Compiling Viewfiles
</h2><p class="pBody"><a name="wp1010521"> </a>
<code class="cCode">viewc</code> is a view compiler program for FML and <code class="cCode">viewc32</code> is used for FML32. It takes a source viewfile and produces an object viewfile, which is interpreted at run time to effect the actual mapping of data. At run time, a C compiler must be available for <code class="cCode">viewc</code>. The command line looks like the following: 
</p>
<a name="wp1010522"> </a><div class="pPreformatted"><pre>viewc [-n] [-d <code class="cCodeEmphasis">viewdir</code>] [-C] <em class="cEmphasis">viewfile</em> [<em class="cEmphasis">viewfile</em> . . . ]</pre></div><p class="pBody"><a name="wp1010523"> </a>
where <code class="cCodeEmphasis">viewfile</code> is the name of a source viewfile containing source view descriptions. You may specify one or more <code class="cCodeEmphasis">viewfiles</code> on the command line.
</p>
<p class="pBody"><a name="wp1010524"> </a>
If the <code class="cCode">-C</code> option is specified, then one COBOL COPY file is created for each VIEW defined in the <code class="cCodeEmphasis">viewfile</code>. These copy files are created in the current directory.
</p>
<p class="pBody"><a name="wp1010525"> </a>
The <code class="cCode">-n</code> option can be used when compiling a view description file for a C structure or COBOL record that does not map to an <code class="cCode">FML</code> buffer.
</p>
<p class="pBody"><a name="wp1010526"> </a>
By default, all views in <code class="cCodeEmphasis">viewfile</code> are compiled and two or more files are created: an object viewfile (suffixed with &#8220;.<code class="cCode">V</code>&#8221;), and a header file (suffixed with &#8220;.<code class="cCode">h</code>&#8221;) for each viewfile. For an illustration of the VIEWS components, see the diagram titled <a href="fml04.html#wp1010437">Components of the VIEWS Facility</a>.
</p>
<p class="pBody"><a name="wp1010527"> </a>
The name of the object viewfile is <em class="cEmphasis">viewfile</em>.<code class="cCode">V</code>. It is created in the current directory. The <code class="cCode">-d</code> option can be used to specify an alternate directory. Header files are created in the current directory.
</p>
<a name="wp1010528"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>For those operating systems that are not case-sensitive, such as Windows, the object viewfile is given a <code class="cCode">.vv</code> suffix.</td>
</tr>
</table>

<p class="pBody"><a name="wp1011328"> </a>
For more information, refer to <a href="../rfcm/rfcmd.html">viewc,&#160;view</a><a href="../rfcm/rfcmd.html">c32(1)</a> in <em class="cEmphasis">Oracle Tuxedo Command Reference</em>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010530"> </a>
Using Header Files Compiled with viewc 
</h2><p class="pBody"><a name="wp1010531"> </a>
You can use header files created by the view compiler (<code class="cCode">viewc</code>) in any C application programs to declare a C structure described by views. For example, the following view description: 
</p>
<a name="wp1010532"> </a><div class="pPreformatted"><pre>VIEW test<br />#TYPE   CNAME    FBNAME    COUNT    FLAG    SIZE     NULL<br />int     empid    EMPID       1        -       -      -1<br />float   salary   EMPPAY      1        -       -      0<br />long    phone    EMPPHONE    4        -       -      0<br />string  name     EMPNAME     1        -       32     &quot;NO NAME&quot;<br />END</pre></div><p class="pBody"><a name="wp1010533"> </a>
produces a C header file that looks like this: 
</p>
<a name="wp1010534"> </a><div class="pPreformatted"><pre>struct test {<br /> long    empid;                 /* null=-1 */<br /> float   salary;                /* null=0.000000 */<br /> long    phone[4];              /* null=0 */<br /> char    name[32];              /* null=&quot;NO NAME&quot; */<br />};</pre></div><p class="pBody"><a name="wp1011342"> </a>
For more information, refer to <a href="../rfcm/rfcmd.html">viewc,&#160;viewc</a><a href="../rfcm/rfcmd.html">32(1)</a> in <em class="cEmphasis">Oracle Tuxedo Command Reference</em>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010536"> </a>
Using COBOL COPY Files Created by the View Compiler
</h2><p class="pBody"><a name="wp1010537"> </a>
COBOL COPY files created by the view compiler with the <code class="cCode">-C</code> option can be used in any COBOL application programs to declare COBOL records described by views. For example, the COBOL COPY file for the previous view description looks like the following in the file <code class="cCode">TEST.cbl</code>:
</p>
<a name="wp1010538"> </a><div class="pPreformatted"><pre>*       VIEWFILE: &quot;test.v&quot;<br />*       VIEWNAME: &quot;test&quot;<br />05 EMPID                  PIC S9(9) USAGE IS COMP-5.<br />05 SALARY                 USAGE IS COMP-1.<br />05 PHONE OCCURS 4 TIMES   PIC S9(9) USAGE IS COMP-5.<br />05 NAME                   PIC X(32).</pre></div><p class="pBody"><a name="wp1010539"> </a>
Note that the COPY filename is automatically converted to uppercase by the view compiler. The COPY file is included in a COBOL program as follows: 
</p>
<a name="wp1010540"> </a><div class="pPreformatted"><pre>01 MYREC COPY TEST.</pre></div><p class="pBody"><a name="wp1010541"> </a>
For a more complete description of the output in the resulting COPY files, see <em class="cEmphasis">Programming an Oracle Tuxedo ATMI Application Using COBOL</em>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1010546"> </a>
Displaying Viewfile Information After Compilation
</h2><p class="pBody"><a name="wp1010547"> </a>
The view disassembler, <code class="cCode">viewdis</code>, disassembles an object viewfile produced by the view compiler and displays view information in source viewfile format. In addition, it displays the offsets of structure members in the associated structure. 
</p>
<p class="pBody"><a name="wp1010548"> </a>
The ability to view the information in this type of format is useful for verifying that an object view description is correct.
</p>
<p class="pBody"><a name="wp1010549"> </a>
To run the view disassembler, enter the following command:
</p>
<a name="wp1010550"> </a><div class="pPreformatted"><pre>viewdis <em class="cEmphasis">objviewfile </em>. . .</pre></div><p class="pBody"><a name="wp1010551"> </a>
By default, <code class="cCodeEmphasis">objviewfile</code> in the current directory is disassembled. If this file is not found in the current directory, an error message is displayed. You can specify one or more view object files on the command line.
</p>
<p class="pBody"><a name="wp1010552"> </a>
The output of <code class="cCode">viewdis</code> looks similar to the original source view description. It can be edited and re-input to <code class="cCode">viewc</code>. The order of the lines in the output of <code class="cCode">viewdis</code> may be different from the order of the lines in the original source view description, but this difference is irrelevant in determining whether the object file is correct.
</p>
<p class="pBody"><a name="wp1011354"> </a>
For more information, refer to <a href="../rfcm/rfcmd.html">viewdis,&#160;viewdis32(1)</a> in <em class="cEmphasis">Oracle Tuxedo Command Reference</em>.
</p>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="fml04.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="fml03.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="fml05.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
