<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41824" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux12c/fml/fm/fml03.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="06/26/12 11:06:08" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Setting Up Your Environment for FML and VIEWS</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Programming an Oracle Tuxedo ATMI Application Using FML
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="fml02.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="fml04.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/fml.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1001764"> </a>
Setting Up Your Environment for FML and VIEWS
</h1>
<p class="pBody"><a name="wp999920"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp999156"> </a><a href="fml03.html#wp999160">Environment Requirements for FML and VIEWS</a></li>
<li><a name="wp999157"> </a><a href="fml03.html#wp999166">FML Directory Structure</a></li>
<li><a name="wp999158"> </a><a href="fml03.html#wp999192">Environment Variables Used by FML and VIEWS</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp999160"> </a>
Environment Requirements for FML and VIEWS
</h2><p class="pBody"><a name="wp999164"> </a>
Before you can begin to work with FML fielded buffers, or to use the VIEWS functions that move fields between structures and fielded buffers, you must set up your environment to accommodate these methods by setting the necessary environment variables. This section provides instructions for doing so.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp999166"> </a>
FML Directory Structure
</h2><p class="pBody"><a name="wp999167"> </a>
The FML software delivered with the Oracle Tuxedo system resides in a subtree of the local file system. Several FML modules depend on the subtree structure described here. We assume that you have set the <code class="cCode">TUXDIR</code> environment variable to the full path name of the directory in which the Oracle Tuxedo ATMI Server is installed.
</p>
<p class="pBody"><a name="wp999171"> </a>
The Oracle Tuxedo installation directory contains the following subdirectories:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp999172"> </a><code class="cCode">include</code>&#8212;contains header files needed by writers of C application code.</li>
<li><a name="wp999173"> </a><code class="cCode">cobinclude</code>&#8212;contains COPY files needed by writers of COBOL application code. (This directory is named <code class="cCode">cobinclu</code> for operating systems with an 8.3 file name limitation.)</li>
<li><a name="wp999174"> </a><code class="cCode">bin</code>&#8212;contains the executable commands of FML.</li>
<li><a name="wp999175"> </a><code class="cCode">lib</code>&#8212;contains subroutine packages of FML. When compiling a program that uses FML functions, you should include <code class="cCode">$TUXDIR/lib/libfml.</code><code class="cCodeEmphasis">suffix</code> and <code class="cCode">$TUXDIR/lib/libgp.</code><code class="cCodeEmphasis">suffix</code> on the C compiler command line to resolve external references. <code class="cCode">libfml32.</code><code class="cCodeEmphasis">suffix</code> contains the FML32 and VIEW32 functions. (The suffix is <code class="cCode">.a</code> for POSIX operating systems without shared objects, .<code class="cCode">so</code>.<code class="cCodeEmphasis">release</code> for use of shared objects, <code class="cCode">.lib</code> for Windows; it is part of the Oracle Tuxedo system DLL for platforms that use dynamic link libraries.)</li>
</ul></div>
<p class="pBody"><a name="wp999182"> </a>
C applications in which FML is used must include the following header files in the order shown: 
</p>
<a name="wp999185"> </a><div class="pPreformatted"><pre>#include &lt;stdio.h&gt; <br />#include &#8220;fml.h&#8221;</pre></div><p class="pBody"><a name="wp999187"> </a>
The file <code class="cCode">fml.h</code> or <code class="cCode">fml32.h</code> contains definitions for structures, symbolic constants, and macros used by the FML software.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp999192"> </a>
Environment Variables Used by FML and VIEWS
</h2><p class="pBody"><a name="wp999196"> </a>
Several environment variables are used by FML and VIEWS.
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp999200"> </a>The following variable is used in FML to search for system-supplied files: </li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp999201"> </a><code class="cCode">TUXDIR</code>&#8212;this variable should be set to the topmost node of the installed Oracle Tuxedo system software including FML.</li>
</ul></div>
<li><a name="wp999208"> </a>The following variables are used throughout FML to access field table files:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp999209"> </a><code class="cCode">FIELDTBLS</code>&#8212;this variable should contain a comma-separated list of field table files for the application. Files given as full path names are used as is; files listed as relative path names are searched for through the list of directories specified by the <code class="cCode">FLDTBLDIR</code> variable. <code class="cCode">FIELDTBLS32</code> is used for <code class="cCode">FML32</code>. If <code class="cCode">FIELDTBLS</code> is not set, then the single file name <code class="cCode">fld.tbl</code> is used. (<code class="cCode">FLDTBLDIR</code> still applies; see below.)</li>
<li><a name="wp999210"> </a><code class="cCode">FLDTBLDIR</code>&#8212;this variable specifies a colon-separated list of directories to be used to find field table files with relative filenames. Its usage is similar to the <code class="cCode">PATH</code> environment variable. If <code class="cCode">FLDTBLDIR</code> is not set or is NULL, then its value is taken to be the current directory. <code class="cCode">FLDTBLDIR32</code> is used for <code class="cCode">FML32</code>.</li>
<p class="pBodyRelative"><a name="wp999211"> </a>
For details, see <a href="fml04.html">Defining and Using Fields</a>.
</p>
</ul></div>
<li><a name="wp999212"> </a>VIEWS functions use the same environment variables used by FML (namely, <code class="cCode">FLDTBLDIR</code> and <code class="cCode">FIELDTBLS</code>) plus two other environment variables:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp999213"> </a><code class="cCode">VIEWFILES</code>&#8212;this variable should contain a comma-separated list of object viewfiles for the application. Files given as full path names are used as is; files listed as relative path names are searched for through the list of directories specified by the <code class="cCode">VIEWDIR</code> variable (see the following list item). <code class="cCode">VIEWFILES32</code> is used for <code class="cCode">VIEW32</code>.</li>
<li><a name="wp999214"> </a><code class="cCode">VIEWDIR</code>&#8212;this variable specifies a colon-separated list of directories to be used to find view object files with relative filenames. It is set and used in the same way that the <code class="cCode">PATH</code> environment variable is set and used. If <code class="cCode">VIEWDIR</code> is not set or is NULL, then its value is assumed to be the current directory. <code class="cCode">VIEWDIR32</code> is used for <code class="cCode">VIEW32</code>.</li>
</ul></div>
<li><a name="wp1001155"> </a>The following variables are used in FML32 to support the <code class="cCode">FLD_MBSTRING</code> field type:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1001196"> </a><code class="cCode">TPMBENC</code>&#8212;this variable specifies the code-set encoding name that the application server or client running Oracle Tuxedo 8.1 or later includes for an <code class="cCode">FLD_MBSTRING</code> field in an FML32 typed buffer. When an application server or client process allocates and sends an FML32 buffer containing a <code class="cCode">FLD_MBSTRING</code> field, the code-set encoding name defined in <code class="cCode">TPMBENC</code> is automatically used by <code class="cCode">Fmbpack32()</code> if its <code class="cCodeEmphasis">enc</code> argument is not defined and its <code class="cCodeEmphasis">flag</code> argument is not set to <code class="cCode">FBUFENC</code>. </li>
<p class="pBodyRelative"><a name="wp1001197"> </a>
When the application server or client process receives an FML32 buffer that includes an <code class="cCode">FLD_MBSTRING</code> field, and assuming another environment variable named <code class="cCode">TPMBACONV</code> is set, the code-set encoding name defined in <code class="cCode">TPMBENC</code> is automatically compared to the code-set encoding name included for the <code class="cCode">FLD_MBSTRING</code> field in the received buffer; if the names are <em class="cEmphasis">not</em> the same, the <code class="cCode">FLD_MBSTRING</code> field data is automatically converted to the encoding defined in <code class="cCode">TPMBENC</code> before being delivered to the server or client process.
</p>
<p class="pBodyRelative"><a name="wp1001198"> </a>
<code class="cCode">TPMBENC</code> has no default value. For an application server or client using <code class="cCode">FLD_MBSTRING</code> fields, <code class="cCode">TPMBENC</code> must be defined for automatic conversion to work.
</p>
<a name="wp1001156"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td><code class="cCode">TPMBENC</code> is used in a similar way for MBSTRING typed buffers.</td>
</tr>
</table>

<li><a name="wp1001157"> </a><code class="cCode">TPMBACONV</code>&#8212;this variable specifies whether the application server or client running Oracle Tuxedo 8.1 or later automatically converts the <code class="cCode">FLD_MBSTRING</code> field data in a received FML32 buffer to the encoding defined in <code class="cCode">TPMBENC</code>. By default, the automatic conversion is turned off, meaning that the <code class="cCode">FLD_MBSTRING</code> field data is delivered to the destination server or client process <em class="cEmphasis">as is</em>&#8212;no encoding conversion. Setting <code class="cCode">TPMBACONV</code> to any non-NULL value, say <code class="cCode">Y</code> (yes), turns on the automatic conversion.</li>
<a name="wp1001328"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td><code class="cCode">TPMBACONV</code> is used in a similar way for MBSTRING typed buffers.</td>
</tr>
</table>

<p class="pBodyRelative"><a name="wp1001161"> </a>
For details, see <a href="fml05.html#wp1084302">Converting FLD_MBSTRING Fields</a>.
</p>
</ul></div>
</ul></div>
<h3 class="pHeading2"><a name="wp1001836"> </a>
VIEW32 Support for MBSTRING 
</h3>
<p class="pBodyRelative"><a name="wp1001842"> </a>
Starting with Tuxedo 9.0, VIEW32 supports MBSTRING typed buffers which correspond to the <code class="cCode">FLD_MBSTRING</code> field type in FML32.
</p>
<p class="pBodyRelative"><a name="wp1001848"> </a>
<code class="cCode">Fmbpack32(3fml)</code>prepares an MBSTRING field in a VIEW32 buffer for encoding and <code class="cCode">Fmbunpack32(3fml)</code>extracts it. <code class="cCode">TPMBENC</code> and <code class="cCode">TPMBACONV</code> environment variables are also used in VIEW32.
</p>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="fml03.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="fml02.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="fml04.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
