<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/usamples/fm/wrapper.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:51:50" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>The Wrapper Sample Application</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Guide to CORBA University Sample Applications
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="transactions.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="production.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/usamples.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1061464"> </a>
The Wrapper Sample Application
</h1>
<p class="pBody"><a name="wp1058546"> </a>
The topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058550"> </a><a href="wrapper.html#wp1058574">How the Wrapper Sample Application Works</a></li>
<li><a name="wp1058554"> </a><a href="wrapper.html#wp1058593">The Development Process for the Wrapper Sample Application</a></li>
<li><a name="wp1058558"> </a><a href="wrapper.html#wp1058671">Building the Wrapper Sample Application</a></li>
<li><a name="wp1058562"> </a><a href="wrapper.html#wp1058877">Compiling the Wrapper Sample Application</a></li>
<li><a name="wp1058566"> </a><a href="wrapper.html#wp1058897">Running the Wrapper Sample Application</a></li>
<li><a name="wp1058570"> </a><a href="wrapper.html#wp1058980">Using the Client Applications in the Wrapper Sample Application</a></li>
</ul></div>
<a name="wp1062000"> </a><table class="Note">
<tr>
<td valign="top"><strong>Notes:</strong></td>
<td>The Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB were deprecated in Tuxedo 8.1 and are no longer supported. All Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB text references, associated code samples, should only be used to help implement/run third party Java ORB libraries, and for programmer reference only.</td></tr>
</table>

<a name="wp1062001"> </a><table class="Note">
<tr>
<td valign="top"><b class="texthide">Note:</b></td>
<td>Technical support for third party CORBA Java ORBs should be provided by their respective vendors. Oracle Tuxedo does not provide any technical support or documentation for third party CORBA Java ORBs.</td>
</tr>
</table>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058574"> </a>
How the Wrapper Sample Application Works
</h2><p class="pBody"><a name="wp1058575"> </a>
In the Wrapper sample application, when a student registers for classes, the student&#8217;s account is charged for the classes and the balance of the student&#8217;s account is updated. In addition, students can get information about their account balances.
</p>
<p class="pBody"><a name="wp1058576"> </a>
The Wrapper sample application incorporates a ATMI service. The Billing server application contains a <code class="cCode">Teller</code> object, which calls the ATMI application Teller. The Teller application performs the following billing operations:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058579"> </a>Debiting a student account</li>
<li><a name="wp1058580"> </a>Crediting a student account</li>
<li><a name="wp1058581"> </a>Obtaining the current balance of a student account</li>
</ul></div>
<p class="pBody"><a name="wp1058582"> </a>
The University database is modified to include account information.
</p>
<p class="pBody"><a name="wp1058587"> </a>
<a href="wrapper.html#wp1058589">Figure&#160;6-1</a> illustrates how the Wrapper sample application works.
</p>
<div class="pFigureTitle"><a name="wp1058589"> </a>
Figure&#160;6-1  The Wrapper Sample Application
</div>

 
 <p class="pGraphic"><a name="wp1058591"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/wrapperd.gif" alt="The Wrapper Sample Application" id="wp1059393"/></div><p class="pGraphic">

</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058593"> </a>
The Development Process for the Wrapper Sample Application
</h2><p class="pBody"><a name="wp1058595"> </a>
This section describes the development process required when wrapping an ATMI service in a CORBA application. These steps are in addition to the development process outlined in <a href="basic.html">The Basic Sample Application.</a>
</p>
<a name="wp1058599"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The steps in this section have been done for you and are included in the Wrapper sample application.</td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp1058601"> </a>
OMG IDL
</h3>
<p class="pBody"><a name="wp1058602"> </a>
When wrapping an ATMI service, you need to define an object that interoperates with the ATMI service and a factory that creates that object. In the Wrapper sample application, the <code class="cCode">Teller</code> and <code class="cCode">TellerFactory</code> objects interact with the ATMI service. During the development process, you would define the interfaces of the<code class="cCode"> Teller</code> and the<code class="cCode"> TellerFactory</code> objects in Object Management Group (OMG) Interface Definition Language (IDL), as follows:
</p>
<p class="pGraphic"><a name="wp1058624"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1058605table1058603">
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1058605"> </a>
<span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">Object</span>
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1058607"> </a>
Description
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1058609"> </a>
Operations
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058611"> </a>
<code class="cCode">TellerFactory</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058613"> </a>
Returns an object reference to the Teller object
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058615"> </a>
<code class="cCode">find_teller()</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058617"> </a>
<code class="cCode">Teller</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058619"> </a>
Interoperates with the ATMI application Teller to perform billing and accounting operations
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058621"> </a>
<code class="cCode">get_balance()</code>
</div>
<div class="pCellBody"><a name="wp1058622"> </a>
<code class="cCode">credit()</code>
</div>
<div class="pCellBody"><a name="wp1058623"> </a>
<code class="cCode">debit()</code>
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1058625"> </a>
You need to add a <code class="cCode">Balance</code> field to the <code class="cCode">StudentDetails</code> structure. Client applications use the <code class="cCode">Balance</code> field to show the student&#8217;s account balance. A user exception <code class="cCode">DelinquentAccount</code> is also added.
</p>
<h3 class="pHeading2"><a name="wp1058630"> </a>
The Client Application
</h3>
<p class="pBody"><a name="wp1058631"> </a>
During the development process, you would add code to the client application to handle the user exception <code class="cCode">Delinquent Account</code> that the <code class="cCode">register_for_courses() </code>operation can raise.
</p>
<h3 class="pHeading2"><a name="wp1058633"> </a>
The Server Application
</h3>
<p class="pBody"><a name="wp1058634"> </a>
During the development process, you would write the following for the Billing server application:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058636"> </a>Method implementations for the <code class="cCode">get_balance()</code>, <code class="cCode">credit()</code>, and <code class="cCode">debit()</code> operations for the <code class="cCode">Teller</code> object. The method implementations need to include the code that does the following:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1058637"> </a>Allocates an FML message buffer.</li>
<li><a name="wp1058638"> </a>Fills the FML message buffer with the data you want to send to the ATMI application Teller.</li>
<li><a name="wp1058639"> </a>Calls the ATMI application Teller.</li>
<li><a name="wp1058640"> </a>Extracts information from the FML message buffer returned from the ATMI application Teller.</li>
<li><a name="wp1058641"> </a>Returns the information from the FML message buffer to the University server application.</li>
</ul></div>
<li><a name="wp1058642"> </a>A method implementation for the <code class="cCode">find_teller()</code> operation of the <code class="cCode">TellerFactory</code> object.</li>
<li><a name="wp1058643"> </a>A Billing server object that creates and registers the<code class="cCode"> TellerFactory </code>object and calls the <code class="cCode">open_XA_RM</code> and <code class="cCode">close_XA_RM</code> functions.</li>
</ul></div>
<p class="pBody"><a name="wp1058644"> </a>
During the development process, you would add the following to the University server application:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058645"> </a>In the server initialization portion of the code for the University server application, include the Bootstrap object to get a FactoryFinder object for the <code class="cCode">TellerFactory</code> object. The University server application is using the Bootstrap and FactoryFinder objects like a client application would.</li>
<li><a name="wp1058647"> </a>In the code for the University server application, include a reference to the <code class="cCode">TellerFactory</code> object in the constructor of the servant for the Registrar object. Use the <code class="cCode">TellerFactory</code> object to create a <code class="cCode">Teller </code>object.</li>
<li><a name="wp1058648"> </a>In the method implementations for the <code class="cCode">get_student_details()</code> and <code class="cCode">register_for_courses()</code> operations for the <code class="cCode">Registrar</code> object, invoke the <code class="cCode">get_balance()</code> and <code class="cCode">debit() </code>operations on the <code class="cCode">Teller</code> object. </li>
</ul></div>
<p class="pBody"><a name="wp1058649"> </a>
For information about writing server applications that wrap ATMI services, see <a href="../cservers/index.html">Creating CORBA Server Applications</a>.
</p>
<h3 class="pHeading2"><a name="wp1058651"> </a>
The UBBCONFIG File
</h3>
<p class="pBody"><a name="wp1058652"> </a>
During the development process, you need to make the following changes to the <code class="cCode">UBBCONFIG</code> file:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058654"> </a>Define the following server groups in the <code class="cCode">GROUPS</code> section of the <code class="cCode">UBBCONFIG</code> file:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1058655"> </a><code class="cCode">ORA_GRP, </code>which contains the University server application, the Teller application, and the server application for the University database. This server group allows both the University server application and the Teller application to access the University database.</li>
<li><a name="wp1058656"> </a><code class="cCode">APP_GRP</code>, which contains the Billing server application.</li>
</ul></div>
<li><a name="wp1058657"> </a>Specify the server applications in the Wrapper sample application in the order in which they should be booted in the<code class="cCode"> SERVERS</code> section of the <code class="cCode">UBBCONFIG</code> file. Start the server applications in the following order:</li>
<div class="pSmartList2"><ol type="a" class="pSmartList2">
<li><a name="wp1058658"> </a>ATMI application Teller</li>
<li><a name="wp1058659"> </a>Billing server application</li>
<li><a name="wp1058660"> </a>University server application</li>
</ol></div>
</ul></div>
<h3 class="pHeading2"><a name="wp1058662"> </a>
The ICF File
</h3>
<p class="pBody"><a name="wp1058663"> </a>
During the development process, you need to define activation and transaction policies for the <code class="cCode">Teller</code> and <code class="cCode">TellerFactory</code> objects. The <code class="cCode">Teller</code> and <code class="cCode">TellerFactory</code> objects have the following policies:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058666"> </a>The <code class="cCode">Teller </code>object has an activation policy of<code class="cCode"> process</code> and a transaction policy of <code class="cCode">optional</code>. </li>
<li><a name="wp1058667"> </a>The <code class="cCode">TellerFactory</code> object has an activation policy of <code class="cCode">process</code> and a transaction policy of <code class="cCode">ignore</code>. </li>
</ul></div>
<p class="pBody"><a name="wp1058668"> </a>
For information about defining activation and transaction policies for CORBA objects, see <a href="../cservers/index.html">Creating CORBA Server Applications</a>. 
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058671"> </a>
Building the Wrapper Sample Application
</h2><p class="pBody"><a name="wp1058672"> </a>
To build the Wrapper sample application, complete the following steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1058673"> </a>Copy the files for the Wrapper sample application.</li>
<li><a name="wp1058674"> </a>Change the protection on the files for the Wrapper sample application.</li>
<li><a name="wp1058675"> </a>Set the environment variables.</li>
<li><a name="wp1058676"> </a>Initialize the University database.</li>
<li><a name="wp1058677"> </a>Load the <code class="cCode">UBBCONFIG</code> file.</li>
<li><a name="wp1058678"> </a>Create a transaction log.</li>
<li><a name="wp1058679"> </a>Build the client and server sample applications.</li>
</ol></div>
<p class="pBody"><a name="wp1058680"> </a>
The following sections describe these steps.
</p>
<a name="wp1058681"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Before you can build or run the Wrapper sample application, you need to complete the steps in <a href="environ.html">Setting Up Your Environment.</a></td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp1058686"> </a>
Copying the Files for the Wrapper Sample Application into a Work Directory
</h3>
<p class="pBody"><a name="wp1058687"> </a>
The files for the Wrapper sample application are located in the following directories:
</p>
<p class="pBody"><a name="wp1058688"> </a>
<b class="cBold">Windows</b>
</p>
<p class="pBody"><a name="wp1058689"> </a>
<code class="cCodeEmphasis">drive</code><code class="cCode">:\</code><code class="cCodeEmphasis">TUXDIR</code><code class="cCode">\samples\corba\university</code>\<code class="cCode">wrapper</code>
</p>
<p class="pBody"><a name="wp1058690"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1058691"> </a>
<code class="cCode">/usr/</code><code class="cCodeEmphasis">TUXDIR</code><code class="cCode">/samples/corba/university</code>/<code class="cCode">wrapper</code>
</p>
<p class="pBody"><a name="wp1058692"> </a>
In addition, you need to copy the <code class="cCode">utils </code>directory into your work directory. The <code class="cCode">utils</code> directory contains files that set up logging, tracing, and access to the University database.
</p>
<p class="pBody"><a name="wp1058696"> </a>
You will use the files listed in <a href="wrapper.html#wp1058703">Table&#160;6-1</a> to create the Wrapper sample application.
</p>
<p class="pGraphic"><a name="wp1058830"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1058703table1058697"><caption><a name="wp1058703"> </a>
Table 6-1  Files Included in the Wrapper Sample Application&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1058707"> </a>
File
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1058709"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058711"> </a>
<code class="cCode">billw.idl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058713"> </a>
The OMG IDL that declares the<code class="cCode"> Teller</code> and <code class="cCode">TellerFactory</code> interfaces.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058715"> </a>
<code class="cCode">univw.idl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058717"> </a>
The OMG IDL that declares the <code class="cCode">CourseSynopsisEnumerator</code>, <code class="cCode">Registrar</code>, and <code class="cCode">RegistrarFactory</code> interfaces.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058719"> </a>
<code class="cCode">billws.cpp</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058721"> </a>
The C++ source code for the Billing server application in the Wrapper sample application.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058723"> </a>
<code class="cCode">univws.cpp</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058725"> </a>
The C++ source code for the University server application in the Wrapper sample application.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058727"> </a>
<code class="cCode">billw__i.h<br />billw_i.cpp</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058729"> </a>
The C++ source code for the method implementations of the <code class="cCode">Teller</code> and <code class="cCode">TellerFactory</code> interfaces.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058731"> </a>
<code class="cCode">univw_i.h<br />univw_i.cpp</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058733"> </a>
The C++ source code for the method implementations of the <code class="cCode">CourseSynopsisEnumerator</code>, <code class="cCode">Registrar</code>, and <code class="cCode">RegistrarFactory</code> interfaces.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058735"> </a>
<code class="cCode">univwc.cpp</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058737"> </a>
The C++ source code for the CORBA C++ client application in the Wrapper sample application.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058767"> </a>
<code class="cCode">univw_utils.h<br />univw_utils.cpp</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058769"> </a>
The files that define database access functions for the CORBA C++ client application.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058771"> </a>
<code class="cCode">univw.icf</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058773"> </a>
The ICF file for the University server application in the Wrapper sample application.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058775"> </a>
<code class="cCode">billw.icf</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058777"> </a>
The ICF file for the Billing server application in the Wrapper sample application.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058779"> </a>
<code class="cCode">setenvw.sh</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058781"> </a>
A UNIX script that sets the environment variables needed to build and run the Wrapper sample application.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058783"> </a>
<code class="cCode">tellw_flds, tellw_u.c, tellw_c.h, tellws.ec</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058785"> </a>
The files for the ATMI application Teller.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058787"> </a>
<code class="cCode">setenvw.cmd</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058789"> </a>
An MS-DOS command procedure that sets the environment variables needed to build and run the Wrapper sample application.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058791"> </a>
<code class="cCode">ubb_w.mk</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058793"> </a>
The<code class="cCode"> UBBCONFIG</code> file for the UNIX operating system.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058795"> </a>
<code class="cCode">ubb_w.nt</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058797"> </a>
The<code class="cCode"> UBBCONFIG</code> file for the Windows operating system.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058799"> </a>
<code class="cCode">makefilew.mk</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058801"> </a>
The <code class="cCode">makefile</code> for the Wrapper sample application on the UNIX operating system.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058803"> </a>
<code class="cCode">makefilew.nt</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058805"> </a>
The<code class="cCode"> makefile</code> for the Wrapper sample application on the Windows operating system.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058807"> </a>
<code class="cCode">log.cpp</code>, <code class="cCode">log.h</code>, <code class="cCode">log_client.cpp</code>, and <code class="cCode">log_server.cpp</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058809"> </a>
The files for the client and server applications that provide logging and tracing functions for the sample applications. These files are located in the <code class="cCode">\utils</code> directory.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058811"> </a>
<code class="cCode">oradbconn.cpp</code> and <code class="cCode">oranoconn.cpp</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058813"> </a>
The files that provide access to an Oracle SQL database instance. These files are located in the <code class="cCode">\utils</code> directory.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058815"> </a>
<code class="cCode">samplesdb.cpp</code> and <code class="cCode">samplesdb.h</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058817"> </a>
The files that provide print functions for the database exceptions in the sample applications. These files are located in the <code class="cCode">\utils</code> directory.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058819"> </a>
<code class="cCode">unique_id.cpp</code> and <code class="cCode">unique_id.h</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058821"> </a>
C++ Unique ID class routines for the sample applications.These files are located in the <code class="cCode">\utils</code> directory.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058823"> </a>
<code class="cCode">samplesdbsql.h</code> and <code class="cCode">samplesdbsql.pc</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058825"> </a>
C++ class methods that implement access to the SQL database. These files are located in the <code class="cCode">\utils</code> directory.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058827"> </a>
<code class="cCode">university.sql</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1058829"> </a>
The SQL for the University database. This file is located in the <code class="cCode">\utils</code> directory.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1058832"> </a>
Changing the Protection on the Files for the Wrapper Sample Application 
</h3>
<p class="pBody"><a name="wp1058833"> </a>
During the installation of the Oracle Tuxedo software, the sample application files are marked read-only. Before you can edit the files or build the files in the Wrapper sample application, you need to change the protection of the files you copied into your work directory, as follows:
</p>
<p class="pBody"><a name="wp1058834"> </a>
<b class="cBold">Windows</b>
</p>
<p class="pBody"><a name="wp1058835"> </a>
<code class="cCode">prompt&gt;attrib -r drive:\</code><code class="cCodeEmphasis">workdirectory</code><code class="cCode">\*.*</code>
</p>
<p class="pBody"><a name="wp1058836"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1058837"> </a>
<code class="cCode">prompt&gt;chmod u+rw /</code><code class="cCodeEmphasis">workdirectory</code><code class="cCode">/*.*</code>
</p>
<h3 class="pHeading2"><a name="wp1058838"> </a>
Setting the Environment Variables
</h3>
<p class="pBody"><a name="wp1058839"> </a>
Use the following command to set the environment variables used to build the client and server applications in the Wrapper sample application:
</p>
<p class="pBody"><a name="wp1058840"> </a>
<b class="cBold">Windows</b>
</p>
<p class="pBody"><a name="wp1058841"> </a>
<code class="cCode">prompt&gt;setenvw</code>
</p>
<p class="pBody"><a name="wp1058842"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1058843"> </a>
<code class="cCode">prompt&gt;/bin/ksh</code>
</p>
<p class="pBody"><a name="wp1058844"> </a>
<code class="cCode">prompt&gt;. ./setenvw.sh</code>
</p>
<h3 class="pHeading2"><a name="wp1058848"> </a>
Initializing the University Database
</h3>
<p class="pBody"><a name="wp1058849"> </a>
Use the following command to initialize the University database used with the Wrapper sample application:
</p>
<p class="pBody"><a name="wp1058850"> </a>
<b class="cBold">Windows</b>
</p>
<p class="pBody"><a name="wp1058851"> </a>
<code class="cCode">prompt&gt;nmake -f makefilew.nt initdb</code>
</p>
<p class="pBody"><a name="wp1058852"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1058853"> </a>
<code class="cCode">prompt&gt;make -f makefilew.mk initdb</code>
</p>
<h3 class="pHeading2"><a name="wp1058856"> </a>
Loading the UBBCONFIG File
</h3>
<p class="pBody"><a name="wp1058857"> </a>
Use the following command to load the <code class="cCode">UBBCONFIG</code> file:
</p>
<p class="pBody"><a name="wp1058858"> </a>
<b class="cBold">Windows</b>
</p>
<p class="pBody"><a name="wp1058859"> </a>
<code class="cCode">prompt&gt;tmloadcf -y ubb_w.nt</code>
</p>
<p class="pBody"><a name="wp1058860"> </a>
<b class="cBold">UNIX</b>
</p>
<p class="pBody"><a name="wp1058861"> </a>
<code class="cCode">prompt&gt;tmloadcf -y ubb_w.mk</code>
</p>
<p class="pBody"><a name="wp1058862"> </a>
The build process for the <code class="cCode">UBBCONFIG</code> file prompts you for an application password. This password will be used to log on to the client applications. Enter the password and press Enter. You are then prompted to verify the password by entering it again.
</p>
<h3 class="pHeading2"><a name="wp1058864"> </a>
Creating a Transaction Log
</h3>
<p class="pBody"><a name="wp1058865"> </a>
The transaction log records the transaction activities in a CORBA application. During the development process, you need to define the location of the transaction log (specified by the <code class="cCode">TLOGDEVICE</code> parameter) in the <code class="cCode">UBBCONFIG</code> file. For the Wrapper sample application, the transaction log is placed in your work directory. 
</p>
<p class="pBody"><a name="wp1058866"> </a>
To open the transaction log for the Wrapper sample application, complete the following steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1058867"> </a>Enter the following command to start the Interactive Administrative Interface:</li>
<p class="pBodyRelative"><a name="wp1058868"> </a>
<code class="cCode">tmadmin</code>
</p>
<li><a name="wp1058869"> </a>Enter the following command to create a transaction log:</li>
<p class="pBodyRelative"><a name="wp1058870"> </a>
<code class="cCode">crdl -b </code><code class="cCodeEmphasis">blocks</code><code class="cCode"> -z </code><code class="cCodeEmphasis">directorypath<br /></code><code class="cCode">crlog -m SITE1</code>
</p>
<p class="pBodyRelative"><a name="wp1058871"> </a>
where
</p>
<p class="pBodyRelative"><a name="wp1058872"> </a>
<code class="cCodeEmphasis">blocks</code> specifies the number of blocks to be allocated for the transaction log, and <code class="cCodeEmphasis">directorypath</code> indicates the location of the transaction log. The <code class="cCodeEmphasis">directorypath</code> option needs to match the location specified in the <code class="cCode">TLOGDEVICE</code> parameter in the <code class="cCode">UBBCONFIG</code> file. The following is an example of the command on Windows:
</p>
<p class="pBodyRelative"><a name="wp1058873"> </a>
<code class="cCode">crdl -b 500 -z c:\mysamples\university\wrapper\TLOG</code>
</p>
<li><a name="wp1058874"> </a>Enter q to quit the Interactive Administrative Interface.</li>
</ol></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058877"> </a>
Compiling the Wrapper Sample Application
</h2><p class="pBody"><a name="wp1058879"> </a>
During the development process, you would use the<code class="cCode"> buildobjclient</code> and <code class="cCode">buildobjserver</code> commands to build the client and server applications. However, for the Wrapper sample application, this step has been done for you. The directory for the Wrapper sample application contains a <code class="cCode">makefile</code> that builds the client and server sample applications. 
</p>
<p class="pBody"><a name="wp1058881"> </a>
Use the following commands to build the CORBA C++ client and server application in the Wrapper sample application:
</p>
<p class="pBody"><a name="wp1058882"> </a>
<b class="cBold">Windows</b>
</p>
<a name="wp1058883"> </a><div class="pPreformatted"><pre>prompt&gt;nmake -f makefilew.nt</pre></div><p class="pBody"><a name="wp1058884"> </a>
<b class="cBold">UNIX</b>
</p>
<a name="wp1058885"> </a><div class="pPreformatted"><pre>prompt&gt;make -f makefilew.mk</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058897"> </a>
Running the Wrapper Sample Application
</h2><p class="pBody"><a name="wp1058898"> </a>
To run the Wrapper sample application, complete the following steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1058899"> </a>Start the server application.</li>
<li><a name="wp1058900"> </a>Start one or more of the client applications.</li>
</ol></div>
<p class="pBody"><a name="wp1058901"> </a>
These steps are described in the following sections.
</p>
<h3 class="pHeading2"><a name="wp1058903"> </a>
Starting the Server Application
</h3>
<p class="pBody"><a name="wp1058904"> </a>
Start the system and sample application server processes in the Wrapper sample application by entering the following command:
</p>
<p class="pBody"><a name="wp1058905"> </a>
<code class="cCode">prompt&gt;tmboot -y</code>
</p>
<p class="pBody"><a name="wp1058906"> </a>
This command starts the following server processes:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058907"> </a><code class="cCode">TMSYSEVT</code></li>
<p class="pBodyRelative"><a name="wp1058908"> </a>
The Oracle Tuxedo system EventBroker.
</p>
<li><a name="wp1058909"> </a><code class="cCode">TMFFNAME</code></li>
<p class="pBodyRelative"><a name="wp1058910"> </a>
The transaction management services, including the NameManager and the FactoryFinder services.
</p>
<li><a name="wp1058911"> </a><code class="cCode">TMIFSRVR</code></li>
<p class="pBodyRelative"><a name="wp1058912"> </a>
The Interface Repository server process.
</p>
<li><a name="wp1058913"> </a><code class="cCode">univw_server</code></li>
<p class="pBodyRelative"><a name="wp1058914"> </a>
The University server process.
</p>
<li><a name="wp1058915"> </a><code class="cCode">tellw_server</code></li>
<p class="pBodyRelative"><a name="wp1058916"> </a>
The application process for the ATMI application Teller.
</p>
<li><a name="wp1058917"> </a><code class="cCode">billw_server</code></li>
<p class="pBodyRelative"><a name="wp1058918"> </a>
The Billing server application process.
</p>
<li><a name="wp1058919"> </a><code class="cCode">ISL</code></li>
<p class="pBodyRelative"><a name="wp1058920"> </a>
The IIOP Listener/Handler process.
</p>
</ul></div>
<p class="pBody"><a name="wp1058921"> </a>
Before using another sample application, enter the following command to stop the system and sample application server processes:
</p>
<p class="pBody"><a name="wp1058922"> </a>
<code class="cCode">prompt&gt;tmshutdown</code>
</p>
<h3 class="pHeading2"><a name="wp1058924"> </a>
Starting the CORBA C++ Client Application
</h3>
<p class="pBody"><a name="wp1058925"> </a>
Start the CORBA C++ client application in the Wrapper sample application by completing the following steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1058926"> </a>At the MS-DOS prompt, enter the following command:</li>
<p class="pBodyRelative"><a name="wp1058927"> </a>
<code class="cCode">prompt&gt;univw_client</code>
</p>
<li><a name="wp1058928"> </a>At the <code class="cCode">Enter student id: </code>prompt, enter any number between 100001 and 100010. </li>
<li><a name="wp1058929"> </a>Press Enter.</li>
<li><a name="wp1058930"> </a>At the <code class="cCode">Enter domain password:</code> prompt, enter the password you defined when you loaded the<code class="cCode"> UBBCONFIG</code> file.</li>
<li><a name="wp1058931"> </a>Press Enter.</li>
</ol></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058980"> </a>
Using the Client Applications in the Wrapper Sample Application
</h2><p class="pBody"><a name="wp1058981"> </a>
The following sections explain how to use the client applications in the Wrapper sample application.
</p>
<h3 class="pHeading2"><a name="wp1058983"> </a>
The CORBA C++ Client Application
</h3>
<p class="pBody"><a name="wp1058984"> </a>
The CORBA C++ client application in the Wrapper sample application has the following additional option:
</p>
<a name="wp1058985"> </a><div class="pPreformatted"><pre>&lt;B&gt;    Display Your Balance</pre></div><p class="pBody"><a name="wp1058986"> </a>
The <code class="cCode">Display Your Balance </code>option displays the account balance associated with the student ID used to log on to the CORBA C++ client application.
</p>
<p class="pBody"><a name="wp1058987"> </a>
To exit the C++ CORBA client application, enter<code class="cCode"> E</code> at the Options prompt.
</p>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="wrapper.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="transactions.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="production.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
