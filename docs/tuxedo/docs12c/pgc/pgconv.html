<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41824" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux12c/pgc/fm/pgconv.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="06/26/12 11:37:56" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Writing Conversational Clients and Servers</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Programming an Oracle Tuxedo ATMI Application Using C
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="pgreq.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="pgevb.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
&nbsp;
<a href="../pdf/pgc.pdf" target="pdf"><img id="LongDescNotReq5" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq6" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1124778"> </a>
Writing Conversational Clients and Servers
</h1>
<p class="pBody"><a name="wp1114252"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1062503"> </a><a href="pgconv.html#wp1062529">Overview of Conversational Communication</a></li>
<li><a name="wp1062507"> </a><a href="pgconv.html#wp1062557">Joining an Application</a></li>
<li><a name="wp1062511"> </a><a href="pgconv.html#wp1089600">Establishing a Connection</a></li>
<li><a name="wp1062515"> </a><a href="pgconv.html#wp1062631">Sending and Receiving Messages</a></li>
<li><a name="wp1062519"> </a><a href="pgconv.html#wp1062763">Ending a Conversation</a></li>
<li><a name="wp1062523"> </a><a href="pgconv.html#wp1062836">Building Conversational Clients and Servers</a></li>
<li><a name="wp1062527"> </a><a href="pgconv.html#wp1062850">Understanding Conversational Communication Events</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1062529"> </a>
Overview of Conversational Communication
</h2><p class="pBody"><a name="wp1062530"> </a>
Conversational communication is the Oracle Tuxedo system implementation of a human-like paradigm for exchanging messages between ATMI clients and servers. In this form of communication, a virtual connection is maintained between the client (initiator) and server (subordinate) and each side maintains information about the state of the conversation. The connection remains active until an event occurs to terminate it.
</p>
<p class="pBody"><a name="wp1073244"> </a>
During conversational communication, a <span style="font-style: italic">half-duplex</span> connection is established between the client and server. A half-duplex connection allows messages to be sent in only one direction at any given time. Control of the connection can be passed back and forth between the initiator and the subordinate. The process that has control can send messages; the process that does not have control can only receive messages.
</p>
<p class="pBody"><a name="wp1073241"> </a>
To understand how conversational communication works in an Oracle Tuxedo ATMI application, consider the following example in <a href="pgconv.html#wp1062533">Figure&#160;7-1</a> from an online banking application. In this example, a bank customer requests checking account statements for the past two months.
</p>
<div class="pFigureTitle"><a name="wp1062533"> </a>
Figure&#160;7-1  Example of Conversational Communication in an Online Banking Application
</div>

 
 <p class="pGraphic"><a name="wp1062537"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/conversation.jpg" alt="Example of Conversational Communication in an Online Banking Application" id="wp1062535" border="0" hspace="0" vspace="0"/></div><p class="pGraphic">

</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1062538"> </a>The customer requests the checking account statements for the past two months.</li>
<li><a name="wp1062539"> </a>The Account Records Storage System responds by sending the first month&#8217;s checking account statement followed by a <code class="cCode">More</code> prompt for accessing the remaining month&#8217;s statement.</li>
<li><a name="wp1062540"> </a>The customer requests the second month&#8217;s account statement by selecting the <code class="cCode">More</code> prompt.</li>
</ol></div>
<a name="wp1062541"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The Account Records Storage System must maintain state information so it knows which account statement to return when the customer selects the <code class="cCode">More</code> prompt.</td>
</tr>
</table>

<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1062542"> </a>The Account Records Storage System sends the remaining month&#8217;s account statement.</li>
</ol></div>
<p class="pBody"><a name="wp1062543"> </a>
As with request/response communication, the Oracle Tuxedo system passes data using typed buffers. The buffer types must be recognized by the application. For more information on buffer types, refer to <a href="pgbuf.html#wp1261747">Overview of Typed Buffers</a>.
</p>
<p class="pBody"><a name="wp1062547"> </a>
Conversational clients and servers have the following characteristics: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1062548"> </a>The logical connection between them remains active until terminated.</li>
<li><a name="wp1062549"> </a>Any number of messages can be transmitted across a connection between them.</li>
<li><a name="wp1062550"> </a>Both clients and servers use the <code class="cCode">tpsend</code>() and <code class="cCode">tprecv</code>() routines to send and receive data in conversations.</li>
</ul></div>
<p class="pBody"><a name="wp1062551"> </a>
Conversational communication differs from request/response communication in the following ways:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1062552"> </a>A conversational client initiates a request for service using <a href="pgconv.html#wp1089600">tpconnect()</a> rather than <a href="pgreq.html#wp1055338">tpcall()</a> or <a href="pgreq.html#wp1055487">tpacall()</a>.</li>
<li><a name="wp1062553"> </a>A conversational client sends a service request to a conversational server.</li>
<li><a name="wp1062554"> </a>The configuration file reserves part of the conversational server for addressing conversational services.</li>
<li><a name="wp1062555"> </a>Conversational servers are prohibited from making calls using <a href="pgserv.html#wp1168061">tpforward()</a>.</li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1062557"> </a>
Joining an Application
</h2><p class="pBody"><a name="wp1089595"> </a>
A conversational client must join an application via a call to <a href="pgclt.html#wp1030381">tpinit()</a> before attempting to establish a connection to a service. For more information, refer to <a href="pgclt.html">Writing Clients</a>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1089600"> </a>
Establishing a Connection
</h2><p class="pBody"><a name="wp1062566"> </a>
The <a href="../rf3c/rf3c.html">tpconnect(3c)</a> function sets up a conversation:
</p>
<p class="pBody"><a name="wp1065595"> </a>
Use the following signature to call the <code class="cCode">tpconnect</code>() function.
</p>
<a name="wp1121610"> </a><div class="pPreformatted"><pre>int<br />tpconnect(char *<code class="cCodeEmphasis">name</code>, char *<code class="cCodeEmphasis">data</code>, long <code class="cCodeEmphasis">len</code>, long <code class="cCodeEmphasis">flags</code>)</pre></div><p class="pBody"><a name="wp1121615"> </a>
<a href="pgconv.html#wp738923">Table&#160;7-1</a> describes the arguments to the <code class="cCode">tpconnect()</code> function.
</p>
<p class="pGraphic"><a name="wp1121648"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp738923table1121616"><caption><a name="wp738923"> </a>
Table 7-1  <span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">tpconnect( ) Function Arguments</span>

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1121618"> </a>
Argument
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1121620"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121622"> </a>
<code class="cCodeEmphasis">name</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121624"> </a>
Character pointer to a conversational service name. If you do not specify <code class="cCodeEmphasis">name</code> as a pointer to a conversational service, the call fails with a value of <code class="cCode">-1</code> and <code class="cCode">tperrno</code> is set to the error code <code class="cCode">TPENOENT</code>. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121626"> </a>
<code class="cCodeEmphasis">data</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121628"> </a>
Pointer to a data buffer. When establishing the connection, you can send data simultaneously by setting the <code class="cCodeEmphasis">data</code> argument to point to a buffer previously allocated by tpalloc(). The <code class="cCode">type</code> and <code class="cCode">subtype</code> of the buffer must be types recognized by the service being called. You can set the value of <code class="cCodeEmphasis">data</code> to NULL to specify that no data is to be sent. 
</div>
<div class="pCellBody"><a name="wp1121629"> </a>
The conversational service being called receives the <code class="cCodeEmphasis">data</code> and <code class="cCodeEmphasis">len</code> pointers via the <code class="cCode">TPSVCINFO</code> data structure passed to it by <code class="cCode">main</code>() when the service is invoked. (A request/response service receives the <code class="cCodeEmphasis">data</code> and <code class="cCodeEmphasis">len</code> pointers in the same way.) For more information on the <code class="cCode">TPSVCINFO</code> data structure, refer to <a href="pgserv.html#wp1250152">Defining a Service</a>. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121634"> </a>
<code class="cCodeEmphasis">len</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121636"> </a>
Length of the data buffer. If the buffer is self-defining (for example, an <code class="cCode">FML</code> buffer), you can set <code class="cCodeEmphasis">len</code> to 0. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121638"> </a>
<code class="cCodeEmphasis">flag</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121640"> </a>
Specifies the flag settings. For a complete list of valid flag settings, refer to <a href="../rf3c/rf3c.html">tpconnect(3c)</a> in the <em class="cEmphasis">Oracle Tuxedo ATMI C Function Reference</em>.
</div>
<div class="pCellBody"><a name="wp1121647"> </a>
The system notifies the called service through the flag members of the <code class="cCode">TPSVCINFO</code> structure. 
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1062614"> </a>
The Oracle Tuxedo system returns a connection descriptor (<code class="cCodeEmphasis">cd</code>) when a connection is established with <code class="cCode">tpconnect</code>(). The <code class="cCodeEmphasis">cd</code> is used to identify subsequent message transmissions with a particular conversation. A client or conversational service can participate in more than one conversation simultaneously. The maximum number of simultaneous conversations is 64.
</p>
<p class="pBody"><a name="wp1062615"> </a>
In the event of a failure, the <code class="cCode">tpconnect</code>() function returns a value of <code class="cCode">-1</code> and sets <code class="cCode">tperrno</code> to the appropriate error condition. For a list of possible error codes, refer to <a href="../rf3c/rf3c.html">tpconnect(3c)</a> in the <em class="cEmphasis">Oracle Tuxedo ATMI C Function Reference</em>.
</p>
<p class="pBody"><a name="wp1062622"> </a>
<a href="pgconv.html#wp1121852">Listing&#160;7-1</a> shows how to use the <code class="cCode">tpconnect</code>() function.
</p>
<div class="pCodeTitle"><a name="wp1121852"> </a>
Listing&#160;7-1	   Establishing a Conversational Connection
</div> <a name="wp1121853"> </a><div class="pPreformatted"><pre>#include atmi.h<br />#define    FAIL    -1<br />int cd1;        /* Connection Descriptor */<br />main()<br />{<br /> if ((cd = tpconnect(&#8220;AUDITC&#8221;,NULL,0,TPSENDONLY)) == -1) {<br />&#160;&#160;&#160;error routine<br /> }<br />}</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1062631"> </a>
Sending and Receiving Messages
</h2><p class="pBody"><a name="wp1062632"> </a>
Once the Oracle Tuxedo system establishes a conversational connection, communication between the initiator and subordinate is accomplished using send and receive calls. The process with control of the connection can send messages using the <a href="../rf3c/rf3c.html">tpsend(3c)</a> function; the process without control can receive messages using the <a href="../rf3c/rf3c.html">tprecv(3c)</a> function. 
</p>
<a name="wp1062633"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Initially, the originator (that is, the client) decides which process has control using the <code class="cCode">TPSENDONLY</code> or <code class="cCode">TPRECVONLY</code> flag value of the <a href="pgconv.html#wp1089600">tpconnect()</a> call. <code class="cCode">TPSENDONLY</code> specifies that control is being retained by the originator; <code class="cCode">TPRECVONLY</code>, that control is being passed to the called service.</td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp1062634"> </a>
Sending Messages
</h3>
<p class="pBody"><a name="wp1062635"> </a>
To send a message, use the <a href="../rf3c/rf3c.html">tpsend(3c)</a> function with the following signature:
</p>
<a name="wp1121965"> </a><div class="pPreformatted"><pre>int<br />tpsend(int <span style="font-style: italic">cd</span>, char *<span style="font-style: italic">data</span>, long <span style="font-style: italic">len</span>, long <span style="font-style: italic">flags</span>, long *<span style="font-style: italic">revent</span>)</pre></div><p class="pBody"><a name="wp1121970"> </a>
<a href="pgconv.html#wp738984">Table&#160;7-2</a> describes the arguments to the <code class="cCode">tpsend</code>() function.
</p>
<p class="pGraphic"><a name="wp1122017"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp738984table1121971"><caption><a name="wp738984"> </a>
Table 7-2  tpsend( ) Function Arguments

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1121973"> </a>
Argument
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1121975"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121977"> </a>
<code class="cCodeEmphasis">cd</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121979"> </a>
Specifies the connection descriptor returned by the<span class="cHyperlink">
 </span><a href="pgconv.html#wp1089600">tpconnect()</a> function identifying the connection over which the data is sent. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121982"> </a>
<code class="cCodeEmphasis">data</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121984"> </a>
Pointer to a data buffer. When establishing the connection, you can send data simultaneously by setting the <code class="cCodeEmphasis">data</code> argument to point to a buffer previously allocated by <a href="pgbuf.html#wp1262143">tpalloc()</a>. The <code class="cCode">type</code> and <code class="cCode">subtype</code> of the buffer must be types recognized by the service being called. You can set the value of <code class="cCodeEmphasis">data</code> to NULL to specify that no data is to be sent.
</div>
<div class="pCellBody"><a name="wp1121986"> </a>
The conversational service being called receives the <code class="cCodeEmphasis">data</code> and <code class="cCodeEmphasis">len</code> pointers via the <code class="cCode">TPSVCINFO</code> data structure passed to it by <code class="cCode">main</code>() when the service is invoked. (A request/response server receives the <code class="cCodeEmphasis">data</code> and <code class="cCodeEmphasis">len</code> pointers in the same way.) For more information on the <code class="cCode">TPSVCINFO</code> data structure, refer to <a href="pgserv.html#wp1250152">Defining a Service</a>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121991"> </a>
<code class="cCodeEmphasis">len</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121993"> </a>
Length of the data buffer. If the buffer is self-defining (for example, an <code class="cCode">FML</code> buffer), you can set <code class="cCodeEmphasis">len</code> to 0. If you do not specify a value for <code class="cCodeEmphasis">data</code>, this argument is ignored. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121995"> </a>
<code class="cCodeEmphasis">revent</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1121997"> </a>
Pointer to event value set when an error is encountered (that is, when <a href="../rf5/rf5.html">tperrno(5)</a> is set to <code class="cCode">TPEEVENT</code>). For a list of valid event values, refer to <a href="../rf3c/rf3c.html">tpsend(3c)</a> in the <em class="cEmphasis">Oracle Tuxedo ATMI C Function Reference</em>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122008"> </a>
<code class="cCodeEmphasis">flag</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122010"> </a>
Specifies the flag settings. For a list of valid flag settings, refer to <a href="../rf3c/rf3c.html">tpsend(3c)</a> in the <em class="cEmphasis">Oracle Tuxedo ATMI C Function Reference</em>.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1062686"> </a>
In the event of a failure, the <code class="cCode">tpsend</code>() function returns a value of <code class="cCode">-1</code> and sets <a href="../rf5/rf5.html">tperrno(5)</a> to the appropriate error condition. For a list of possible error codes, refer to <a href="../rf3c/rf3c.html">tpsend(3c)</a> in the <em class="cEmphasis">Oracle Tuxedo ATMI C Function Reference</em>.
</p>
<p class="pBody"><a name="wp1062693"> </a>
You are not required to pass control each time you issue the <code class="cCode">tpsend</code>() function. In some applications, the process authorized to issue <code class="cCode">tpsend</code>() calls can execute as many calls as required by the current task before turning over control to the other process. In other applications, however, the logic of the program may require the same process to maintain control of the connection throughout the life of the conversation.
</p>
<p class="pBody"><a name="wp1062694"> </a>
<a href="pgconv.html#wp1122192">Listing&#160;7-2</a> shows how to invoke the <code class="cCode">tpsend</code>() function.
</p>
<div class="pCodeTitle"><a name="wp1122192"> </a>
Listing&#160;7-2	      Sending Data in Conversational Mode
</div> <a name="wp1125494"> </a><div class="pPreformatted"><pre>if (tpsend(cd,line,0,TPRECVONLY,revent) == -1) {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(void)userlog(&#8220;%s: tpsend failed tperrno %d&#8221;,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;argv[0],tperrno);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(void)tpabort(0);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(void)tpterm();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;exit(1);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}</pre></div><h3 class="pHeading2"><a name="wp1062702"> </a>
Receiving Messages
</h3>
<p class="pBody"><a name="wp1062703"> </a>
To receive data sent over an open connection, use the <a href="../rf3c/rf3c.html">tprecv(3c)</a> function with the following signature:
</p>
<a name="wp1122239"> </a><div class="pPreformatted"><pre>int<br />tprecv(int <code class="cCodeEmphasis">cd</code>, char **<code class="cCodeEmphasis">data</code>, long *<code class="cCodeEmphasis">len</code>, long <code class="cCodeEmphasis">flags</code>, long *<code class="cCodeEmphasis">revent</code>)</pre></div><p class="pBody"><a name="wp1122289"> </a>
The following table describes the arguments to the <code class="cCode">tprecv</code>() function.
</p>
<p class="pGraphic"><a name="wp1125255"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1122242table1122240">
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1122242"> </a>
Argument
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1122244"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122246"> </a>
<code class="cCodeEmphasis">cd</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122248"> </a>
Specifies the connection descriptor. If a subordinate program issues the call, the <code class="cCodeEmphasis">cd</code> argument should be set to the value specified in the <code class="cCode">TPSVCINFO</code> structure for the program. If the originator program issues the call, the <code class="cCodeEmphasis">cd</code> argument should be set to the value returned by the <a href="pgconv.html#wp1089600">tpconnect()</a> function.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122251"> </a>
<code class="cCodeEmphasis">data</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122253"> </a>
Pointer to a data buffer. The <code class="cCodeEmphasis">data</code> argument must point to a buffer previously allocated by <a href="pgbuf.html#wp1262143">tpalloc()</a>. The <code class="cCodeEmphasis">type</code> and <code class="cCodeEmphasis">subtype</code> of the buffer must be types recognized by the service being called. This value cannot be NULL; if it is, the call fails and <a href="../rf5/rf5.html">tperrno(5)</a> is set to <code class="cCode">TPEINVAL</code>.
</div>
<div class="pCellBody"><a name="wp1122258"> </a>
The conversational service being called receives the <code class="cCodeEmphasis">data</code> and len pointers via the <code class="cCode">TPSVCINFO</code> data structure passed to it by <code class="cCode">main</code>() when the service is invoked. (A request/response service receives the <code class="cCodeEmphasis">data</code> and <code class="cCodeEmphasis">len</code> pointers in the same way.) For more information on the <code class="cCode">TPSVCINFO</code> data structure, refer to <a href="pgserv.html#wp1250152">Defining a Service</a>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122263"> </a>
<code class="cCodeEmphasis">len</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122265"> </a>
Length of the data buffer. If the buffer is self-defining (for example, an FML buffer), you can set <code class="cCodeEmphasis">len</code> to 0. This value cannot be NULL; if it is, the call fails and <a href="../rf5/rf5.html">tperrno(5)</a> is set to <code class="cCode">TPEINVAL</code>. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122270"> </a>
<code class="cCodeEmphasis">revent</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122272"> </a>
Pointer to event value set when an error is encountered (that is, when <code class="cCode">tperrno</code> is set to <code class="cCode">TPEEVENT</code>). Refer to <a href="../rf3c/rf3c.html">tprecv(3c)</a> in the <em class="cEmphasis">Oracle Tuxedo ATMI C Function Reference</em> for a list of valid event values.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122280"> </a>
<code class="cCodeEmphasis">flag</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1122287"> </a>
Specifies the flag settings. Refer to <a href="../rf3c/rf3c.html">tprecv(3c)</a> in the <em class="cEmphasis">Oracle Tuxedo ATMI C Function Reference</em> for a list of valid flags.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1122290"> </a>
Upon success, the <code class="cCode">*</code><code class="cCodeEmphasis">data</code> argument points to the data received and <code class="cCodeEmphasis">len</code> contains the size of the buffer. If <code class="cCodeEmphasis">len</code> is greater than the total size of the buffer before the call to <code class="cCode">tprecv</code>(), the buffer size has changed and <code class="cCodeEmphasis">len</code> indicates the new size. A value of 0 for the <code class="cCodeEmphasis">len</code> argument indicates that no data was received.
</p>
<p class="pBody"><a name="wp1062754"> </a>
<a href="pgconv.html#wp1122337">Listing&#160;7-3</a> shows how to use the <code class="cCode">tprecv</code>() function. 
</p>
<div class="pCodeTitle"><a name="wp1122337"> </a>
Listing&#160;7-3	   Receiving Data in Conversation
</div> <a name="wp1122338"> </a><div class="pPreformatted"><pre>if (tprecv(cd,line,len,TPNOCHANGE,revent) != -1) {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(void)userlog(&#8220;%s: tprecv failed tperrno %d revent %ld&#8221;,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;argv[0],tperrno,revent);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(void)tpabort(0);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(void)tpterm();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;exit(1);<br />}</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1062763"> </a>
Ending a Conversation
</h2><p class="pBody"><a name="wp1102727"> </a>
A connection can be taken down gracefully and a conversation ended normally through:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1102729"> </a>A successful call to <a href="pgserv.html#wp1167965">tpreturn()</a> in a simple conversation.</li>
<li><a name="wp1102730"> </a>A series of successful calls to <code class="cCode">tpreturn()</code> in a complex conversation based on a hierarchy of connections.</li>
<li><a name="wp1066177"> </a>Global transactions, as described in <a href="pgglob.html">Writing Global Transactions</a>.</li>
</ul></div>
<a name="wp1062765"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The <a href="pgserv.html#wp1167965">tpreturn()</a> function is described in detail in <a href="pgreq.html">Writing Request/Response Clients and Servers</a>. </td>
</tr>
</table>

<p class="pBody"><a name="wp1066330"> </a>
The following sections describe two scenarios for gracefully terminating conversations that do not include global transactions in which the <a href="pgserv.html#wp1167965">tpreturn()</a> function is used.
</p>
<p class="pBody"><a name="wp1062769"> </a>
The first example shows how to terminate a simple conversation between two components. The second example illustrates a more complex scenario, with a hierarchical set of conversations.
</p>
<p class="pBody"><a name="wp1062774"> </a>
If you end a conversation with connections still open, the system returns an error. In this case, either tpcommit() or <a href="pgserv.html#wp1167965">tpreturn()</a> fails in a disorderly manner. 
</p>
<h3 class="pHeading2"><a name="wp1062775"> </a>
Example: Ending a Simple Conversation
</h3>
<p class="pBody"><a name="wp1062776"> </a>
<a href="pgconv.html#wp1122471">Figure&#160;7-2</a> shows a simple conversation between A and B that terminates gracefully.
</p>
<div class="pFigureTitle"><a name="wp1122471"> </a>
Figure&#160;7-2  Simple Conversation Terminated Gracefully
</div>

 
 <p class="pGraphic"><a name="wp1122475"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/tpreturn.gif" alt="Simple Conversation Terminated Gracefully" id="wp1122473"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1062788"> </a>
The program flow is as follows:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1062789"> </a>A sets up the connection by calling <a href="pgconv.html#wp1089600">tpconnect()</a> with the <code class="cCode">TPSENDONLY</code> flag set, indicating that process B is on the receiving end of the conversation.</li>
<li><a name="wp1066589"> </a>A turns control of the connection over to B by calling <a href="pgconv.html#wp1062634">tpsend()</a> with the <code class="cCode">TPRECVONLY</code> flag set, resulting in the generation of a <code class="cCode">TPEV_SENDONLY</code> event.</li>
<li><a name="wp1066620"> </a>The next call by B to <a href="pgconv.html#wp1062702">tprecv()</a> returns a value of -1, sets <a href="../rf5/rf5.html">tperrno(5)</a> to <code class="cCode">TPEEVENT</code>, and returns <code class="cCode">TPEV_SENDONLY</code> in the <code class="cCodeEmphasis">revent</code> argument, indicating that control has passed to B.</li>
<li><a name="wp1066651"> </a>B calls <a href="pgserv.html#wp1167965">tpreturn()</a> with <code class="cCodeEmphasis">rval</code> set to <code class="cCode">TPSUCCESS</code>. This call generates a <code class="cCode">TPEV_SVCSUCC</code> event for A and gracefully brings down the connection. </li>
<li><a name="wp1066682"> </a>A calls <a href="pgconv.html#wp1062702">tprecv()</a>, learns of the event, and recognizes that the conversation has been terminated. Data can be received on this call to <code class="cCode">tprecv()</code> even if the event is set to <code class="cCode">TPEV_SVCFAIL</code>. </li>
</ol></div>
<a name="wp1062794"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>In this example, A can be either a client or a server, but B must be a server.</td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp1062795"> </a>
Example: Ending a Hierarchical Conversation
</h3>
<p class="pBody"><a name="wp1062796"> </a>
<a href="pgconv.html#wp1122689">Figure&#160;7-3</a> shows a hierarchical conversation that terminates gracefully. 
</p>
<div class="pFigureTitle"><a name="wp1122689"> </a>
Figure&#160;7-3   Connection Hierarchy
</div>

 
 <p class="pGraphic"><a name="wp1122693"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/tpreturn2.gif" alt=" Connection Hierarchy" id="wp1122691"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1062810"> </a>
In the preceding example, service B is a member of a conversation that has initiated a connection to a second service called C. In other words, there are two active connections: A-to-B and B-to-C. If B is in control of both connections, a call to <a href="pgserv.html#wp1167965">tpreturn()</a> has the following effect: the call fails, a <code class="cCode">TPEV_SVCERR</code> event is posted on all open connections, and the connections are closed in a disorderly manner. 
</p>
<p class="pBody"><a name="wp1062811"> </a>
In order to terminate both connections normally, an application must execute the following sequence:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1062812"> </a>B calls <a href="pgconv.html#wp1062634">tpsend()</a> with the <code class="cCode">TPRECVONLY</code> flag set on the connection to C, transferring control of the B-to-C connection to C. </li>
<li><a name="wp1062813"> </a>C calls <a href="pgserv.html#wp1167965">tpreturn()</a> with rval set to <code class="cCode">TPSUCCESS</code>, <code class="cCode">TPFAIL</code>, or <code class="cCode">TPEXIT</code>, as appropriate.</li>
<li><a name="wp1062814"> </a>B can then call <a href="pgserv.html#wp1167965">tpreturn()</a>, posting an event (either <code class="cCode">TPEV_SVCSUCC</code> or <code class="cCode">TPEV_SVCFAIL</code>) for A.</li>
</ol></div>
<a name="wp1082302"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>It is legal for a conversational service to make request/response calls if it needs to do so to communicate with another service. Therefore, in the preceding example, the calls from B to C may be executed using <a href="pgreq.html#wp1055338">tpcall()</a> or <a href="pgreq.html#wp1055487">tpacall()</a> instead of <a href="pgconv.html#wp1089600">tpconnect()</a>. Conversational services are not permitted to make calls to <a href="pgserv.html#wp1168061">tpforward()</a>.</td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp1082308"> </a>
Executing a Disorderly Disconnect
</h3>
<p class="pBody"><a name="wp1062818"> </a>
The only way in which a disorderly disconnect can be executed is through a call to the <a href="../rf3c/rf3c.html">tpdiscon(3c)</a> function (which is equivalent to &#8220;pulling the plug&#8221; on a connection). This function can be called only by the initiator of a conversation (that is, the client).
</p>
<a name="wp1062819"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>This is not the preferred method for bringing down a conversation. To bring down an application gracefully, the subordinate (the server) should call the <a href="pgserv.html#wp1167965">tpreturn()</a> function.</td>
</tr>
</table>

<p class="pBody"><a name="wp1062820"> </a>
Use the following signature to call the <code class="cCode">tpdiscon()</code> function:
</p>
<a name="wp1122977"> </a><div class="pPreformatted"><pre>int<br />tpdiscon(int <code class="cCodeEmphasis">cd</code>)</pre></div><p class="pBody"><a name="wp1062825"> </a>
The <code class="cCodeEmphasis">cd</code> argument specifies the connection descriptor returned by the <a href="pgconv.html#wp1089600">tpconnect()</a> function when the connection is established.
</p>
<p class="pBody"><a name="wp1062826"> </a>
The <code class="cCode">tpdiscon()</code> function generates a <code class="cCode">TPEV_DISCONIMM</code> event for the service at the other end of the connection, rendering the <code class="cCodeEmphasis">cd</code> invalid. If a transaction is in progress, the system aborts it and data may be lost. 
</p>
<p class="pBody"><a name="wp1062827"> </a>
If <code class="cCode">tpdiscon</code>() is called from a service that was not the originator of the connection identified by <code class="cCodeEmphasis">cd</code>, the function fails with an error code of <code class="cCode">TPEBADDESC</code>. 
</p>
<p class="pBody"><a name="wp1062828"> </a>
For a list and descriptions of all event and error codes, refer to <a href="../rf3c/rf3c.html">tpdiscon(3c)</a> in the <em class="cEmphasis">Oracle Tuxedo ATMI C Function Reference</em>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1062836"> </a>
Building Conversational Clients and Servers
</h2><p class="pBody"><a name="wp1062837"> </a>
Use the following commands to build conversational clients and servers:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1062841"> </a><a href="pgclt.html#wp1030541">buildclient()</a> as described in <a href="pgclt.html#wp1030541">Building Clients</a></li>
<li><a name="wp1062845"> </a><a href="pgserv.html#wp1250188">buildserver()</a> as described in <a href="pgserv.html#wp1250188">Building Servers</a></li>
</ul></div>
<p class="pBody"><a name="wp1062846"> </a>
For conversational and request/response services, you cannot:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1062847"> </a>Build both in the same server</li>
<li><a name="wp1062848"> </a>Assign the same name to both</li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1062850"> </a>
Understanding Conversational Communication Events
</h2><p class="pBody"><a name="wp1062851"> </a>
The Oracle Tuxedo system recognizes five events in conversational communication. All five events can be posted for <a href="pgconv.html#wp1062702">tprecv()</a>; three can be posted for <a href="pgconv.html#wp1062634">tpsend()</a>. 
</p>
<p class="pBody"><a name="wp1062852"> </a>
<a href="pgconv.html#wp1114257">Table&#160;7-3</a> lists the events, the functions for which they are returned, and a detailed description of each.
</p>
<p class="pGraphic"><a name="wp1125305"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1114257table1062853"><caption><a name="wp1114257"> </a>
Table 7-3  Conversational Communication Events

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1062855"> </a>
Event
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1062857"> </a>
Received By
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1062859"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062861"> </a>
<code class="cCode">TPEV_SENDONLY</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062863"> </a>
<span class="cHyperlink">
tprecv</span>()<a href="pgconv.html#wp1062702"></a>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062865"> </a>
Control of the connection has been passed; this process can now call <a href="pgconv.html#wp1062634">tpsend()</a>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062867"> </a>
<code class="cCode">TPEV_DISCONIMM</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062869"> </a>
<a href="pgconv.html#wp1062634">tpsend()</a>,   <br />tprecv()<a href="pgconv.html#wp1062702"></a>, <a href="pgserv.html#wp1167965">tpreturn()</a>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062871"> </a>
The connection has been torn down and no further communication is possible. The <a href="pgconv.html#wp1082308">tpdiscon()</a> function posts this event in the originator of the connection, and sends it to all open connections when <a href="pgserv.html#wp1167965">tpreturn()</a> is called, as long as connections to subordinate services remain open. Connections are closed in a disorderly fashion. If a transaction exists, it is aborted.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="straddledcells" colspan="1" rowspan="2"><div class="pCellBody"><a name="wp1062873"> </a>
<code class="cCode">TPEV_SVCERR</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062875"> </a>
<a href="pgconv.html#wp1062634">tpsend()</a> 
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062877"> </a>
Received by the originator of the connection, usually indicating that the subordinate program issued a <a href="pgserv.html#wp1167965">tpreturn()</a> without having control of the connection. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062881"> </a>
<span class="cHyperlink">
tprecv</span>()<a href="pgconv.html#wp1062702"></a>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062883"> </a>
Received by the originator of the connection, indicating that the subordinate program issued a <a href="pgserv.html#wp1167965">tpreturn()</a> with <code class="cCode">TPSUCCESS</code> or <code class="cCode">TPFAIL</code> and a valid data buffer, but an error occurred that prevented the call from completing.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="straddledcells" colspan="1" rowspan="2"><div class="pCellBody"><a name="wp1062885"> </a>
<code class="cCode">TPEV_SVCFAIL</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1097409"> </a>
<a href="pgconv.html#wp1062634">tpsend()</a> 
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062889"> </a>
Received by the originator of the connection, indicating that the subordinate program issued a <a href="pgserv.html#wp1167965">tpreturn()</a> without having control of the connection, and <code class="cCode">tpreturn()</code> was called with <code class="cCode">TPFAIL</code> or <code class="cCode">TPEXIT</code> and no data.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1097424"> </a>
<span class="cHyperlink">
tprecv</span>()<a href="pgconv.html#wp1062702"></a>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062895"> </a>
Received by the originator of the connection, indicating that the subordinate service finished unsuccessfully (<a href="pgserv.html#wp1167965">tpreturn()</a> was called with <code class="cCode">TPFAIL</code> or <code class="cCode">TPEXIT</code>).
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062897"> </a>
<code class="cCode">TPEV_SVCSUCC</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1097429"> </a>
<span class="cHyperlink">
tprecv</span>()<a href="pgconv.html#wp1062702"></a>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1062901"> </a>
Received by the originator of the connection, indicating that the subordinate service finished successfully; that is, it called <a href="pgserv.html#wp1167965">tpreturn()</a> with <code class="cCode">TPSUCCESS</code>.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="pgconv.html"><img id="LongDescNotReq7" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="pgreq.html"><img id="LongDescNotReq8" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="pgevb.html"><img id="LongDescNotReq9" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
