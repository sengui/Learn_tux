<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/trans/fm/trxsvc.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:48:05" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Transaction Service</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Using CORBA Transactions
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="gstrx.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="trxcrbsr.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/trans.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1060765"> </a>
Transaction Service
</h1>
<p class="pBody"><a name="wp1036238"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1029115"> </a><a href="trxsvc.html#wp1028616">About the Transaction Service</a></li>
<li><a name="wp1030047"> </a><a href="trxsvc.html#wp1028640">Capabilities and Limitations</a></li>
<li><a name="wp1029137"> </a><a href="trxsvc.html#wp1047588">Transaction Service in CORBA Applications</a></li>
<li><a name="wp1037946"> </a><a href="trxsvc.html#wp1037935">UserTransaction API</a></li>
</ul></div>
<p class="pBody"><a name="wp1036253"> </a>
This topic provides the information that programmers need to write transactional CORBA applications for the Oracle Tuxedo system. Before you begin, you should read <a href="gstrx.html">Introducing Transactions.</a>
</p>
<a name="wp1060901"> </a><table class="Note">
<tr>
<td valign="top"><strong>Notes:</strong></td>
<td>The Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB were deprecated in Tuxedo 8.1 and are no longer supported. All Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB text references, associated code samples, should only be used to help implement/run third party Java ORB libraries, and for programmer reference only.</td></tr>
</table>

<a name="wp1060902"> </a><table class="Note">
<tr>
<td valign="top"><b class="texthide">Note:</b></td>
<td>Technical support for third party CORBA Java ORBs should be provided by their respective vendors. Oracle Tuxedo does not provide any technical support or documentation for third party CORBA Java ORBs.</td>
</tr>
</table>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1028616"> </a>
About the Transaction Service
</h2><p class="pBody"><a name="wp1028620"> </a>
Oracle Tuxedo provides a Transaction Service that supports transactions in CORBA applications. The Transaction Service provides an implementation of the CORBA Services Transaction Service that is described in the OMG<span style="font-style: italic"> </span>CORBA Services<span style="font-style: italic"> Transaction Service Specification</span>. This specification defines the interfaces for an object service that provides transactional functions.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1028640"> </a>
Capabilities and Limitations
</h2><p class="pBody"><a name="wp1036350"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1028645"> </a><a href="trxsvc.html#wp1028695">Lightweight Clients with Delegated Commit</a></li>
<li><a name="wp1058116"> </a><a href="trxsvc.html#wp1057593">Support for Third-Party Clients Using INS</a></li>
<li><a name="wp1028649"> </a><a href="trxsvc.html#wp1057548">Multithreaded Transaction Client Support</a></li>
<li><a name="wp1028653"> </a><a href="trxsvc.html#wp1028712">Transaction Integrity</a></li>
<li><a name="wp1028657"> </a><a href="trxsvc.html#wp1028718">Transaction Termination</a></li>
<li><a name="wp1028661"> </a><a href="trxsvc.html#wp1028723">Flat Transactions</a></li>
<li><a name="wp1028665"> </a><a href="trxsvc.html#wp1028730">Interoperability Between CORBA Remote Clients and the Oracle Tuxedo Domain</a></li>
<li><a name="wp1028669"> </a><a href="trxsvc.html#wp1028743">Intradomain and Interdomain Interoperability</a></li>
<li><a name="wp1028673"> </a><a href="trxsvc.html#wp1041782">Network Interoperability</a></li>
<li><a name="wp1028677"> </a><a href="trxsvc.html#wp1028763">Relationship of the Transaction Service to Transaction Processing</a></li>
<li><a name="wp1028681"> </a><a href="trxsvc.html#wp1028800">Process Failure</a></li>
<li><a name="wp1028685"> </a><a href="trxsvc.html#wp1054468">General Constraints</a></li>
</ul></div>
<p class="pBody"><a name="wp1036676"> </a>
These sections describe the capabilities and limitations of the Transaction Service that supports CORBA applications.
</p>
<h3 class="pHeading2"><a name="wp1028695"> </a>
Lightweight Clients with Delegated Commit 
</h3>
<p class="pBody"><a name="wp1028698"> </a>
A <span style="font-style: italic">lightweight client</span> runs on a single-user, unmanaged desktop system that has irregular availability. Owners may turn their desktop systems off when they are not in use. These single-user, unmanaged desktop systems should not be required to perform network functions such as transaction coordination. In particular, unmanaged systems should not be responsible for ensuring atomicity, consistency, isolation, and durability (ACID) properties across failures for transactions involving server resources. Oracle Tuxedo CORBA remote clients are lightweight clients.
</p>
<p class="pBody"><a name="wp1028703"> </a>
The Transaction Service allows lightweight clients to do a delegated commit, which means that the Transaction Service allows lightweight clients to begin and terminate transactions while the responsibility for transaction coordination is delegated to a transaction manager running on a server machine. Client applications do not require a local transaction server. The remote TransactionCurrent implementation that CORBA clients use delegates the actual responsibility of transaction coordination to transaction manager on the server.
</p>
<h3 class="pHeading2"><a name="wp1057593"> </a>
Support for Third-Party Clients Using INS
</h3>
<p class="pBody"><a name="wp1057597"> </a>
In Oracle Tuxedo release 8.0 and later, the CORBA Interoperable Naming Service (INS) is supported. Therefore, clients that implement the CORBA services Object Transaction Service (OTS) can communicate with Oracle Tuxedo CORBA servers and initiate and terminate transactions. Using INS, any third-party client ORB that can compile the standard OTS IDL files and produce usable stub files can interact with the Oracle Tuxedo CORBA transaction manager. However, such interaction is limited because the transaction coordination interfaces that would allow a third-party ORB to become a resource manager are not supported. Only Oracle provided resource managers and/or XA compliant resource managers can participate in the coordination of a transaction. Further, the Oracle provided and XA compliant resource managers can participate in transaction coordination only if they use the XA protocols&#8212;not the CORBA services OTS protocols&#8212;for transaction coordination.
</p>
<p class="pBody"><a name="wp1057605"> </a>
In summary, a third-party client ORB can be used to initiate a transaction, and the client can request the rollback or commit of the transaction, however, the client ORB cannot participate in the coordination of the two-phase commit protocol using the CORBA services OTS.
</p>
<h3 class="pHeading2"><a name="wp1057548"> </a>
Multithreaded Transaction Client Support 
</h3>
<p class="pBody"><a name="wp1057552"> </a>
In release 8.0, Oracle Tuxedo CORBA supports multithreaded clients for nontransactional clients and transactional clients.
</p>
<h3 class="pHeading2"><a name="wp1038236"> </a>
Transaction Propagation (CORBA Only)
</h3>
<p class="pBody"><a name="wp1038239"> </a>
For CORBA applications, the OMG CORBA Services <em class="cEmphasis">Transaction Service specification</em> states that a client can choose to propagate a transaction context either implicitly or explicitly. Oracle Tuxedo <em class="cEmphasis">provides</em> implicit propagation. Explicit propagation <span style="font-style: italic">is strongly discouraged</span>.
</p>
<p class="pBody"><a name="wp1028710"> </a>
Objects that are related to transaction contexts that are passed around using explicit transaction propagation <span style="font-style: italic; font-weight: normal">should</span><span style="font-style: normal; font-weight: bold"> </span><span style="font-style: italic">not</span> be mixed with implicit transaction propagation APIs. It should be noted, however, that explicit propagation does not place any constraints on when transactional methods can be processed. There is no guarantee that all transactional methods will be completed before the transaction is committed.
</p>
<h3 class="pHeading2"><a name="wp1028712"> </a>
Transaction Integrity
</h3>
<p class="pBody"><a name="wp1028714"> </a>
Checked transaction behavior provides transaction integrity by guaranteeing that a <code class="cCode">commit</code> will not succeed unless all transactional objects involved in the transaction have completed the processing of their transactional requests. If implicit transaction propagation is used, the Transaction Service <em class="cEmphasis">provides</em> checked transaction behavior that is equivalent to that provided by the request/response interprocess communication models defined by The Open Group. For CORBA applications, for example, the Transaction Service performs <code class="cCode">reply</code> checks, <code class="cCode">commit</code> checks, and <code class="cCode">resume</code> checks, as described in the OMG CORBA Services <em class="cEmphasis">Transaction Service Specification.</em>
</p>
<p class="pBody"><a name="wp1028716"> </a>
Unchecked transaction behavior relies completely on the application to provide transaction integrity. If explicit propagation is used, the Transaction Service <span style="font-style: italic">does not </span>provide checked transaction behavior and transaction integrity<span style="font-style: italic"> is not</span> guaranteed.
</p>
<h3 class="pHeading2"><a name="wp1028718"> </a>
Transaction Termination 
</h3>
<p class="pBody"><a name="wp1028719"> </a>
Oracle Tuxedo CORBA allows transactions to be terminated <span style="font-style: italic">only</span> by the client that created the transaction.
</p>
<a name="wp1028721"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The client may be a server object that requests the services of another object.</td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp1028723"> </a>
Flat Transactions 
</h3>
<p class="pBody"><a name="wp1028724"> </a>
Oracle Tuxedo CORBA implements the flat transaction model. Nested transactions are <span style="font-style: italic">not</span> supported.
</p>
<h3 class="pHeading2"><a name="wp1028730"> </a>
Interoperability Between CORBA Remote Clients and the Oracle Tuxedo Domain
</h3>
<p class="pBody"><a name="wp1044981"> </a>
Oracle Tuxedo<span style="font-style: italic"> </span>CORBA<span style="font-style: italic"> </span>supports remote clients invoking methods on server objects in <span style="font-style: italic">different</span> Oracle Tuxedo domains in the <span style="font-style: italic">same</span> transaction.
</p>
<p class="pBody"><a name="wp1044985"> </a>
Remote CORBA clients with multiple connections to the same Oracle Tuxedo domain <span style="font-style: italic">may</span> make invocations to server objects on these separate connections within the same transaction.
</p>
<h3 class="pHeading2"><a name="wp1028743"> </a>
Intradomain and Interdomain Interoperability 
</h3>
<p class="pBody"><a name="wp1041955"> </a>
Oracle Tuxedo CORBA supports native clients invoking methods on server objects in the Oracle Tuxedo domain. In addition, Oracle Tuxedo supports server objects invoking methods on other objects in the same or in different processes within the same Oracle Tuxedo domain.
</p>
<p class="pBody"><a name="wp1048299"> </a>
In Oracle Tuxedo applications, transactions can span multiple domains as long as factory-based routing is properly configured across multiple domains. To support transactions across multiple domains, you must configure the <code class="cCode">factory_finder.ini</code> file to identify factory objects that are used in the current (local) domain but that are resident in a different (remote) domain. For more information, see Using the Oracle Tuxedo Domains Component<span class="cHyperlink">
</a></span>.
</p>
<h3 class="pHeading2"><a name="wp1041782"> </a>
Network Interoperability 
</h3>
<p class="pBody"><a name="wp1041790"> </a>
A client application can have only one active Bootstrap object and TransactionCurrent object within a single domain. Oracle Tuxedo CORBA does <span style="font-style: italic">not</span> support exporting or importing transactions to or from remote Oracle Tuxedo domains.
</p>
<p class="pBody"><a name="wp1042042"> </a>
However, transactions can encompass multiple domains in a serial fashion. For example, a server with a transaction active in Domain A can communicate with a server in Domain B within the context of that same transaction.
</p>
<h3 class="pHeading2"><a name="wp1028763"> </a>
Relationship of the Transaction Service to Transaction Processing 
</h3>
<p class="pBody"><a name="wp1028764"> </a>
The Transaction Service relates to various transaction processing servers, interfaces, protocols, and standards in the following ways:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1048895"> </a>Support for Oracle Tuxedo ATMI servers. Servers using the Oracle Tuxedo CORBA Transaction Service can make invocations on other Oracle Tuxedo Application-to-Transaction Monitor Interface (ATMI) server processes in the same domain. In addition, ATMI services can invoke CORBA objects in both transactional and nontransactional contexts, both within the same domain and across domains via an Oracle Tuxedo Domains gateway. However, Oracle Tuxedo CORBA <span style="font-style: italic">does not</span> support remote clients or native clients invoking ATMI services in the Oracle Tuxedo domain.</li>
<li><a name="wp1028777"> </a>Support for The Open Group XA interface. The Open Group resource managers are resource managers that can be involved in a distributed transaction by allowing their two-phase commit protocol to be controlled via The Open Group XA interface. Oracle Tuxedo supports interaction with The Open Group resource managers.</li>
<li><a name="wp1028781"> </a>Support for the OSI TP protocol. Open Systems Interconnect Transaction Processing (OSI TP) is the transactional protocol defined by the International Organization for Standardization (ISO). Oracle Tuxedo CORBA <span style="font-style: italic">does not</span> support interactions with OSI TP transactions.</li>
<li><a name="wp1056477"> </a>Support for the LU 6.2 protocol. Systems Network Architecture (SNA) LU 6.2 is a transactional protocol defined by IBM. Oracle Tuxedo CORBA <span style="font-style: italic">does not</span> support interactions with LU 6.2 transactions.</li>
<li><a name="wp1028793"> </a>Support for the ODMG standard. ODMG-93 is a standard defined by the Object Database Management Group (ODMG) that describes a portable interface to access Object Database Management Systems. Oracle Tuxedo CORBA <span style="font-style: italic">does not </span>support interactions with ODMG transactions.</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1028800"> </a>
Process Failure 
</h3>
<p class="pBody"><a name="wp1051966"> </a>
The Transaction Service monitors the participants in a transaction for failures and inactivity. The Oracle Tuxedo system provides management tools for keeping the application running when failures occur. Because Oracle Tuxedo CORBA is built upon the Oracle Tuxedo transaction management system, it inherits the Oracle Tuxedo capabilities for keeping applications running.
</p>
<h3 class="pHeading2"><a name="wp1054468"> </a>
General Constraints
</h3>
<p class="pBody"><a name="wp1028824"> </a>
The following constraints apply to the Transaction Service:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1038925"> </a>In Oracle Tuxedo CORBA, a client or a server object <span style="font-style: italic">cannot</span> invoke methods on an object that is infected with (or participating in) another transaction. The method invocation issued by the client or the server will return an exception.</li>
<li><a name="wp1038811"> </a>For CORBA applications, a server application object using transactions from the Oracle Tuxedo CORBA Transaction Service library <span style="font-style: italic">requires</span> the TP Framework functionality. For more information about the TP Framework, see &#8220;TP Framework&#8221; in the <span style="font-style: italic"><a href="../CORBA_ref/index.html"></span><em class="cEmphasis">CORBA Programming Reference</em><span class="cHyperlink">
</a></span>.</li>
<li><a name="wp1028839"> </a>For CORBA applications, a return from the <code class="cCode">rollback</code> method on the <code class="cCode">Current</code> object is asynchronous.</li>
<p class="pBodyRelative"><a name="wp1041835"> </a>
As a result, the objects that were infected by (or participating in) the rolled back transaction get their states cleared by Oracle Tuxedo <span style="font-style: italic">a little later</span>. Therefore, <span style="font-style: italic">no</span> other client can infect these objects with a different transaction until Oracle Tuxedo clears the states of these objects. This condition exists for a very short amount of time and is typically not noticeable in a production application. A simple workaround for this race condition is to try the appropriate operation after a short (typically a 1-second) delay.
</p>
<li><a name="wp1057370"> </a>In Oracle Tuxedo CORBA applications, clients may not make one-way method invocations within the context of a transaction to server objects having the <code class="cCode">NEVER</code>, <code class="cCode">OPTIONAL</code>, or <code class="cCode">ALWAYS</code> transaction policies.</li>
<p class="pBodyRelative"><a name="wp1057371"> </a>
No error or exception will be returned to the client because it is a one-way method invocation. However, the method on the server object will not be executed, and an appropriate error message will be written to the log. Clients may make one-way method invocations within the context of a transaction to server objects with the <code class="cCode">IGNORE</code> transaction policy. In this case, the method on the server object will be executed, but not in the context of a transaction. For more information about the transaction policies, see &#8220;Implementation Configuration File (ICF)&#8221; in the <span style="font-style: italic"><a href="../CORBA_ref/index.html"></span><em class="cEmphasis">CORBA Programming Reference</em><span class="cHyperlink">
</a></span>.
</p>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1047588"> </a>
Transaction Service in CORBA Applications
</h2><p class="pBody"><a name="wp1036745"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1036749"> </a><a href="trxsvc.html#wp1056089">Getting Initial References to the TransactionCurrent Object Using the Bootstrap Object</a></li>
<li><a name="wp1056228"> </a><a href="trxsvc.html#wp1056276">Getting Initial References to the TransactionFactory Object Using INS</a></li>
<li><a name="wp1036753"> </a><a href="trxsvc.html#wp1031657">CORBA Transaction Service API</a></li>
<li><a name="wp1036757"> </a><a href="trxsvc.html#wp1018738">CORBA Transaction Service API Extensions</a></li>
<li><a name="wp1046249"> </a><a href="trxsvc.html#wp1046136">Notes on Using Transactions in Oracle Tuxedo CORBA Applications</a></li>
</ul></div>
<p class="pBody"><a name="wp1054524"> </a>
These sections describe how Oracle Tuxedo implements the OTS, with particular emphasis on the portion of the CORBAservices Object Transaction Service that is described as implementation-specific. They describe the OTS application programming interface (API) that you use to begin or terminate transactions, suspend or resume transactions, and get information about transactions.
</p>
<h3 class="pHeading2"><a name="wp1056089"> </a>
Getting Initial References to the TransactionCurrent Object Using the Bootstrap Object
</h3>
<p class="pBody"><a name="wp1056091"> </a>
To use the TransactionCurrent object to access the Transaction Service API and the extension to the Transaction Service API as described later in this chapter, an application needs to complete the following operations:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1056092"> </a>Create a Bootstrap object. For more information about creating a Bootstrap object, see the &#8220;CORBA Bootstrapping Programming Reference&#8221; in the <span style="font-style: italic"><a href="../CORBA_ref/index.html"></span><em class="cEmphasis">CORBA Programming Reference</em><span class="cHyperlink">
</a></span>.</li>
<li><a name="wp1056099"> </a>Invoke the <code class="cCode">resolve_initial_reference(&quot;TransactionCurrent&quot;)</code> method on the Bootstrap object. The invocation returns a standard CORBA object pointer. For a description of this Bootstrap object method, see the <span style="font-style: italic"><a href="../CORBA_ref/index.html"></span><em class="cEmphasis">CORBA Programming Reference</em><span class="cHyperlink">
</a></span>.</li>
<li><a name="wp1056105"> </a>If an application requires only the Transaction Service APIs, it should issue a <code class="cCode">CosTransactionsCurrent::_narrow()</code> (in C++) on the object pointer returned from step 2 above.</li>
<p class="pBodyRelative"><a name="wp1056106"> </a>
If an application requires the Transaction Service APIs with the extensions, it should issue a <code class="cCode">Tobj::TransactionCurrent::_narrow()</code> (in C++) on the object pointer returned from step 2 above.
</p>
</ol></div>
<h3 class="pHeading2"><a name="wp1056276"> </a>
Getting Initial References to the TransactionFactory Object Using INS
</h3>
<p class="pBody"><a name="wp1058493"> </a>
Oracle Tuxedo also supports the use of the CORBA Interoperable Naming Service (INS) by third-party clients to obtain initial transaction object references. INS uses the <code class="cCode">ORB::resolve_initial_references()</code> operation. 
</p>
<p class="pBody"><a name="wp1058509"> </a>
<a href="trxsvc.html#wp1058420">Listing&#160;2-1</a> shows an example of how a client application, using INS, gets an object reference to the TransactionFactory object. For a complete code example, see the client application in the University Sample.
</p>
<div class="pCodeTitle"><a name="wp1058420"> </a>
Listing&#160;2-1	   Code Example for a Client Application that Uses INS
</div> <a name="wp1058421"> </a><div class="pPreformatted"><pre>// Get the factory finder from the ORB:<br />CORBA::Object_var v_fact_finder_oref =<br />&#160;&#160;&#160;orb-&gt;resolve_initial_references(&quot;FactoryFinder&quot;);</pre></div><a name="wp1058422"> </a><div class="pPreformatted"><pre>// Narrow the factory finder :<br />Tobj::FactoryFinder_var v_fact_finder_ref =<br />&#160;&#160;&#160;Tobj::FactoryFinder::_narrow(v_fact_finder_oref.in());</pre></div><a name="wp1058423"> </a><div class="pPreformatted"><pre>// Get the TransactionFactory from the FactoryFinder<br />CORBA::Object_var v_txn_fac_oref = <br />&#160;&#160;&#160;v_fact_finder_ref-&gt;find_one_factory_by_id(<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;IDL:omg.org/CosTransactions/TransactionFactory:1.0&quot;);</pre></div><a name="wp1058424"> </a><div class="pPreformatted"><pre>// Narrow the TransactionFactory object reference<br />CosTransactions::TransactionFactory_var v_txn_fac_ref =<br />&#160;&#160;&#160;CosTransactions::TransactionFactory::_narrow(<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;v_txn_fac_oref.in());</pre></div><p class="pBody"><a name="wp1058402"> </a>
For more information about using the <code class="cCode">ORB::resolve_initial_references()</code> operation, see &#8220;CORBA Bootstrapping Programming Reference&#8221; in the <span style="font-style: italic"><a href="../CORBA_ref/index.html"></span><em class="cEmphasis">CORBA Programming Reference</em><span class="cHyperlink">
</a></span>.
</p>
<h3 class="pHeading2"><a name="wp1031657"> </a>
CORBA Transaction Service API
</h3>
<p class="pBody"><a name="wp1036453"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1018699"> </a><a href="trxsvc.html#wp1045026">Data Types</a></li>
<li><a name="wp1022674"> </a><a href="trxsvc.html#wp1045046">Exceptions</a></li>
<li><a name="wp1022690"> </a><a href="trxsvc.html#wp1022710">Current Interface</a></li>
<li><a name="wp1018700"> </a><a href="trxsvc.html#wp1022695">Control Interface</a></li>
<li><a name="wp1022396"> </a><a href="trxsvc.html#wp1018716">TransactionalObject Interface</a></li>
</ul></div>
<p class="pBody"><a name="wp1045021"> </a>
These sections describe the CORBA-based components of the <code class="cCode">CosTransactions</code> modules that Oracle Tuxedo implements to support the Transaction Service. For more information about these components, see the OMG CORBA Services <em class="cEmphasis">Transaction Service Specification, </em>Version 1.1, May 2000.
</p>
<h4 class="pHeading3"><a name="wp1045026"> </a>
Data Types
</h4>
<p class="pBody"><a name="wp1045030"> </a>
<a href="trxsvc.html#wp1018709">Listing&#160;2-2</a> shows the supported data types.
</p>
<div class="pCodeTitle"><a name="wp1018709"> </a>
Listing&#160;2-2	   Data Types Supported by the Transaction Service
</div> <a name="wp1018710"> </a><div class="pPreformatted"><pre>enum Status {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;StatusActive,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;StatusMarkedRollback,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;StatusPrepared,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;StatusCommitted,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;StatusRolledBack,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;StatusUnknown,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;StatusNoTransaction,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;StatusPreparing,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;StatusCommitting,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;StatusRollingBack<br />};<br />// <code class="cCode">This information comes from the OMG Transaction Service<br />// Specification, Version 1.1, May 2000. Used with permission <br />// of the OMG.</code></pre></div><h4 class="pHeading3"><a name="wp1045046"> </a>
Exceptions
</h4>
<p class="pBody"><a name="wp1045050"> </a>
<a href="trxsvc.html#wp1022541">Listing&#160;2-3</a> shows the supported exceptions in IDL code.
</p>
<div class="pCodeTitle"><a name="wp1022541"> </a>
Listing&#160;2-3	   Exceptions Supported by the Transaction Service
</div> <a name="wp1022542"> </a><div class="pPreformatted"><pre>// Heuristic exceptions<br />exception HeuristicMixed {};<br />exception HeuristicHazard {};<br />// Other transaction-specific exceptions<br />exception SubtransactionsUnavailable {};<br />exception NoTransaction {};<br />exception InvalidControl {};<br />exception Unavailable {};</pre></div><p class="pBody"><a name="wp1022548"> </a>
<a href="trxsvc.html#wp1022556">Table&#160;2-1</a> describes the exceptions.
</p>
<a name="wp1055585"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>This information comes from the OMG CORBA Services <em class="cEmphasis">Transaction Service Specification</em>, Version 1.1, May 2000. Used with permission of the OMG.</td>
</tr>
</table>

<p class="pGraphic"><a name="wp1022589"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1022556table1022550"><caption><a name="wp1022556"> </a>
Table 2-1  Exceptions Supported by the Transaction Service&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1022561"> </a>
Exception
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1022563"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022565"> </a>
<code class="cCode">HeuristicMixed</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022567"> </a>
A request raises this exception to report that a heuristic decision was made and that some relevant updates have been committed and others have been rolled back.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022569"> </a>
<code class="cCode">HeuristicHazard</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022571"> </a>
A request raises this exception to report that a heuristic decision was made, that the disposition of all relevant updates is not known, and that for those updates whose disposition is known, either all have been committed or all have been rolled back. Therefore, the <code class="cCode">HeuristicMixed</code> exception takes priority over the <code class="cCode">HeuristicHazard</code> exception.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022573"> </a>
<code class="cCode">SubtransactionsUnavailable</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022575"> </a>
This exception is raised for the <code class="cCode">Current</code> interface <code class="cCode">begin</code> method if the client already has an associated transaction.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022577"> </a>
<code class="cCode">NoTransaction</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022579"> </a>
This exception is raised for the <code class="cCode">Current</code> interface <code class="cCode">rollback</code> and <code class="cCode">rollback_only</code> methods if there is no transaction associated with the client application.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022581"> </a>
<code class="cCode">InvalidControl</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022583"> </a>
This exception is raised for the <code class="cCode">Current</code> interface <code class="cCode">resume</code> method if the parameter is not valid in the current execution environment.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022586"> </a>
<code class="cCode">Unavailable </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022588"> </a>
This exception is raised for the <code class="cCode">Control</code> interface <code class="cCode">get_terminator</code> and <code class="cCode">get_coordinator</code> methods if the <code class="cCode">Control</code> interface cannot provide the requested object.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1022710"> </a>
Current Interface
</h4>
<p class="pBody"><a name="wp1022712"> </a>
The <code class="cCode">Current</code> interface defines methods that allow a client of the Transaction Service to explicitly manage the association between threads and transactions. The <code class="cCode">Current</code> interface also defines methods that simplify the use of the Transaction Service for most applications. These methods can be used to begin and end transactions, to suspend and resume transactions, and to obtain information about the current transaction. 
</p>
<p class="pBody"><a name="wp1022717"> </a>
The <code class="cCode">CosTransactions</code> module defines the <code class="cCode">Current</code> interface (shown in <a href="trxsvc.html#wp1022719">Listing&#160;2-4</a>). 
</p>
<div class="pCodeTitle"><a name="wp1022719"> </a>
Listing&#160;2-4	   Current Interface IDL
</div> <a name="wp1022720"> </a><div class="pPreformatted"><pre>// Current transaction <br />interface Current : CORBA::Current {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;void begin()<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;raises(SubtransactionsUnavailable);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;void commit(in boolean report_heuristics)<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;raises(<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NoTransaction,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;HeuristicMixed,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;HeuristicHazard<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;void rollback()<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;raises(NoTransaction);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;void rollback_only()<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;raises(NoTransaction);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;Status get_status();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;string get_transaction_name();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;void set_timeout(in unsigned long seconds);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;Control get_control();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;Control suspend();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;void resume(in Control which)<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;raises(InvalidControl);</pre></div><a name="wp1022721"> </a><div class="pPreformatted"><pre>};<br />// <code class="cCode">This information comes from the OMG </code><code class="cCodeEmphasis">Transaction Service<br />// Specification</code><code class="cCode">, Version 1.1, May 2000. Used with permission <br />// of the OMG.</code></pre></div><p class="pBody"><a name="wp1022727"> </a>
<a href="trxsvc.html#wp1022735">Table&#160;2-2</a> provides a description of the <code class="cCode">Current</code> transaction methods.
</p>
<a name="wp1055651"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>This information was taken from the OMG CORBA Services <em class="cEmphasis">Transaction Service Specification</em>, Version 1.1, May 2000. Used with permission of the OMG.</td>
</tr>
</table>

<p class="pGraphic"><a name="wp1022809"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1022735table1022729"><caption><a name="wp1022735"> </a>
Table 2-2  Transaction Methods in the Current Object&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1022739"> </a>
Method
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1022741"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022744"> </a>
<code class="cCode">begin</code> 
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022746"> </a>
Creates a new transaction. The transaction context of the client application is modified so that the thread is associated with the new transaction. If the client application is currently associated with a transaction, the <code class="cCode">SubtransactionsUnavailable</code> exception is raised. If the client application cannot be placed in transaction mode due to an error while starting the transaction, the standard system exception <code class="cCode">INVALID_TRANSACTION</code> is raised. If the call was made in an improper context, the standard system exception <code class="cCode">BAD_INV_ORDER</code> is raised.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022749"> </a>
<code class="cCode">commit </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022751"> </a>
If there is no transaction associated with the client application, the <code class="cCode">NoTransaction</code> exception is raised. 
</div>
<div class="pCellBody"><a name="wp1022752"> </a>
If the call was made in an improper context, the standard system exception <code class="cCode">BAD_INV_ORDER</code> is raised.
</div>
<div class="pCellBody"><a name="wp1022753"> </a>
If the system decides to roll back the transaction, the standard exception <code class="cCode">TRANSACTION_ROLLEDBACK</code> is raised and the thread&#8217;s transaction context is set to NULL.
</div>
<div class="pCellBody"><a name="wp1022754"> </a>
A <code class="cCode">HeuristicMixed</code> exception is raised to report that a heuristic decision was made and that some relevant updates have been committed and others have been rolled back. A <code class="cCode">HeuristicHazard</code> exception is raised to report that a heuristic decision was made, and that the disposition of all relevant updates is not known; for those updates whose disposition is known, either all have been committed or all have been rolled back. The <code class="cCode">HeuristicMixed</code> exception takes priority over the <code class="cCode">HeuristicHazard</code> exception. If a heuristic exception is raised or the operation completes normally, the thread&#8217;s transaction exception context is set to NULL. 
</div>
<div class="pCellBody"><a name="wp1022755"> </a>
If the operation completes normally, the thread&#39;s transaction context is set to NULL.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022758"> </a>
<code class="cCode">rollback </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022760"> </a>
If there is no transaction associated with the client application, the <code class="cCode">NoTransaction</code> exception is raised. 
</div>
<div class="pCellBody"><a name="wp1022761"> </a>
If the call was made in an improper context, the standard system exception <code class="cCode">BAD_INV_ORDER</code> is raised.
</div>
<div class="pCellBody"><a name="wp1022762"> </a>
If the operation completes normally, the thread&#39;s transaction context is set to NULL.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022765"> </a>
<code class="cCode">rollback_only </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022767"> </a>
If there is no transaction associated with the client application, the <code class="cCode">NoTransaction</code> exception is raised. Otherwise, the transaction associated with the client application is modified so that the only possible outcome is to roll back the transaction.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022769"> </a>
<code class="cCode">get_status </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022771"> </a>
If there is no transaction associated with the client application, the <code class="cCode">StatusNoTransaction</code> value is returned. Otherwise, this method returns the status of the transaction associated with the client application.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022773"> </a>
<code class="cCode">get_transaction_name </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022775"> </a>
If there is no transaction associated with the client application, an empty string is returned. Otherwise, this method returns a printable string describing the transaction (specifically, the <code class="cCode">XID</code> as specified by The Open Group). The returned string is intended to support debugging. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022777"> </a>
<code class="cCode">set_timeout</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022779"> </a>
This method modifies a state variable associated with the target object that affects the timeout period associated with transactions created by subsequent invocations of the <code class="cCode">begin</code> method. 
</div>
<div class="pCellBody"><a name="wp1036152"> </a>
The initial transaction timeout value is 300 seconds. Calling <code class="cCode">set_timeout()</code> with an argument value larger than zero specifies a new timeout value. Calling <code class="cCode">set_timeout()</code> with a zero argument sets the timeout value back to the default of 300 seconds.
</div>
<div class="pCellBody"><a name="wp1036176"> </a>
After calling <code class="cCode">set_timeout()</code>, transactions created by subsequent invocations of <code class="cCode">begin</code> are subject to being rolled back if they do not complete before the specified number of seconds after their creation.
</div>
<p class="pTableNote"><a name="wp1022780"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The initial transaction timeout value is 300 seconds. If a transaction is started via <code class="cCode">AUTOTRAN</code> instead of the <code class="cCode">begin</code> method, then the timeout value is determined by the <code class="cCode">TRANTIME</code> value in the Oracle Tuxedo configuration file. For more information, see <a href="admtrx.html">Administering Transactions.</a></td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022788"> </a>
<code class="cCode">get_control</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022790"> </a>
If the client is not associated with a transaction, a NULL object reference is returned. Otherwise, a <code class="cCode">Control</code> object is returned that represents the transaction context currently associated with the client application. This object may be given to the <code class="cCode">resume</code> method to reestablish this context.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022793"> </a>
<code class="cCode">suspend </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022795"> </a>
If the client application is not associated with a transaction, a NULL object reference is returned.
</div>
<div class="pCellBody"><a name="wp1022796"> </a>
If the associated transaction is in a state such that the only possible outcome of the transaction is to be rolled back, the standard system exception <code class="cCode">TRANSACTION_ROLLEDBACK</code> is raised and the client application becomes associated with no transaction.
</div>
<div class="pCellBody"><a name="wp1022797"> </a>
If the call was made in an improper context, the standard system exception <code class="cCode">BAD_INV_ORDER</code> is raised. The caller&#39;s state with respect to the transaction is not changed.
</div>
<div class="pCellBody"><a name="wp1022798"> </a>
Otherwise, an object is returned that represents the transaction context currently associated with the client application. The same client can subsequently give this object to the <code class="cCode">resume</code> method to reestablish this context. In addition, the client application becomes associated with no transaction. 
</div>
<p class="pTableNote"><a name="wp1022799"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>As defined in The Common Object Request Broker: Architecture and Specification, Revision 2.4, the standard system exception <code class="cCode">TRANSACTION_ROLLEDBACK</code> indicates that the transaction associated with the request has already been rolled back or has been marked to roll back. Thus, the requested method either could not be performed or was not performed because further computation on behalf of the transaction would be fruitless. </td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022802"> </a>
<code class="cCode">resume</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022804"> </a>
If the client application is already associated with a transaction which is in a state such that the only possible outcome of the transaction is to be rolled back, the standard system exception <code class="cCode">TRANSACTION_ROLLEDBACK</code> is raised and the client application becomes associated with no transaction.
</div>
<div class="pCellBody"><a name="wp1022805"> </a>
If the call was made in an improper context, the standard system exception <code class="cCode">BAD_INV_ORDER</code> is raised.
</div>
<div class="pCellBody"><a name="wp1022806"> </a>
If the system is unable to resume the global transaction because the caller is currently participating in work outside any global transaction with one or more resource managers, the standard system exception <code class="cCode">INVALID_TRANSACTION</code> is raised.
</div>
<div class="pCellBody"><a name="wp1022807"> </a>
If the parameter is a NULL object reference, the client application becomes associated with no transaction. If the parameter is valid in the current execution environment, the client application becomes associated with that transaction (in place of any previous transaction). Otherwise, the <code class="cCode">InvalidControl</code> exception is raised.
</div>
<p class="pTableNote"><a name="wp1022808"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>See <code class="cCode">suspend</code> for a definition of the standard system exception <code class="cCode">TRANSACTION_ROLLEDBACK</code>.</td></tr>
</table>
</p>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1022695"> </a>
Control Interface
</h4>
<p class="pBody"><a name="wp1018715"> </a>
The <code class="cCode">Control</code> interface allows a program to explicitly manage or propagate a transaction context. An object that supports the <code class="cCode">Control</code> interface is implicitly associated with one specific transaction.
</p>
<p class="pBody"><a name="wp1022953"> </a>
<a href="trxsvc.html#wp1022955">Listing&#160;2-5</a> shows the <code class="cCode">Control</code> interface, which is defined in the <code class="cCode">CosTransactions</code> module.
</p>
<div class="pCodeTitle"><a name="wp1022955"> </a>
Listing&#160;2-5	   Control Interface 
</div> <a name="wp1022956"> </a><div class="pPreformatted"><pre>interface Control {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;Terminator get_terminator()<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;raises(Unavailable);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;Coordinator get_coordinator()<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;raises(Unavailable);<br />};<br />// <code class="cCode">This information comes from the OMG </code><code class="cCodeEmphasis">Transaction Service<br />// Specification</code><code class="cCode">, Version 1.1, May 2000. Used with permission <br />// of the OMG.</code></pre></div><p class="pBody"><a name="wp1022962"> </a>
The <code class="cCode">Control</code> interface is used only in conjunction with the <code class="cCode">suspend</code> and <code class="cCode">resume</code> methods.
</p>
<h4 class="pHeading3"><a name="wp1054296"> </a>
Terminator Interface
</h4>
<p class="pBody"><a name="wp1054297"> </a>
The Terminator interface supports operations to commit or roll back a transaction. Typically, these operations are used by the transaction originator. An implementation of the Transaction Service may restrict the scope in which a Terminator can be used; at a minimum, it can be used within a single thread.
</p>
<p class="pBody"><a name="wp1054441"> </a>
<a href="trxsvc.html#wp1054298">Listing&#160;2-6</a> shows the Terminator interface.
</p>
<div class="pCodeTitle"><a name="wp1054298"> </a>
Listing&#160;2-6	   Terminator Interface
</div> <a name="wp1054299"> </a><div class="pPreformatted"><pre><code class="cCode">interface Terminator {<br /></code>&#160;&#160;&#160;&#160;&#160;<code class="cCode">void commit(in boolean report_heuristics)<br /></code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCode">raises(<br /></code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCode">HeuristicMixed,<br /></code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCode">HeuristicHazard<br />);<br /></code>&#160;&#160;&#160;&#160;&#160;<code class="cCode">void rollback();<br />};<br /></code>// <code class="cCode">This information was taken from the OMG </code><code class="cCodeEmphasis">Transaction Service<br />// Specification</code><code class="cCode">, Version 1.1, May 2000. Used with permission <br />// of the OMG.</code></pre></div><p class="pBody"><a name="wp1054305"> </a>
<a href="trxsvc.html#wp1054309">Table&#160;2-3</a> describes the Terminator interface methods.
</p>
<p class="pGraphic"><a name="wp1054327"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1054309table1054306"><caption><a name="wp1054309"> </a>
Table 2-3  Termination Interface Methods

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1054313"> </a>
Method
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1054315"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1054317"> </a>
<code class="cCode">commit</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1054319"> </a>
If the transaction has not been marked rollback only, and all of the participants in the transaction agree to commit, the transaction is committed and the operation terminates normally. Otherwise, the transaction is rolled back (as described below for the <code class="cCode">rollback</code> method) and the <code class="cCode">TRANSACTION_ROLLEDBACK</code> standard exception is raised.
</div>
<div class="pCellBody"><a name="wp1054320"> </a>
If the <code class="cCode">report_heuristics</code> parameter is true, the Transaction Service will report inconsistent or possibly inconsistent outcomes using the <code class="cCode">HeuristicMixed</code> and <code class="cCode">HeuristicHazard</code> exceptions. A Transaction Service implementation may optionally use the CORBA Notification Service to report heuristic decisions.
</div>
<div class="pCellBody"><a name="wp1054321"> </a>
The <code class="cCode">commit</code> operation may roll back the transaction if there are subtransactions of the transaction that have not themselves been committed or rolled back or if there are existing or potential activities associated with the transaction that have not completed. The nature and extent of such error checking is implementation-dependent. When a top-level transaction is committed, all changes to recoverable objects made in the scope of this transaction are made permanent and visible to other transactions or clients. When a subtransaction is committed, the changes are made visible to other related transactions as appropriate to the degree of isolation enforced by the resources.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1054323"> </a>
<code class="cCode">rollback</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1054325"> </a>
The transaction is rolled back.
</div>
<div class="pCellBody"><a name="wp1054326"> </a>
When a transaction is rolled back, all changes to recoverable objects made in the scope of this transaction (including changes made by descendant transactions) are rolled back. All resources locked by the transaction are made available to other transactions as appropriate to the degree of isolation enforced by the resources.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1018716"> </a>
TransactionalObject Interface
</h4>
<p class="pBody"><a name="wp1018718"> </a>
In Oracle Tuxedo release 8.0 and later, the <code class="cCode">CosTransactions::TransactionalObject</code> is no longer used by an object to indicate that it is transactional. If an interface inherits from a TransactionalObject and the ICF indicates a different transaction policy, a warning is issued. The TransactionalObject is not used for any other purpose. For details on transaction policies that need to be set to infect objects with transactions, see &#8220;Implementation Configuration File (ICF)&#8221; in the <span style="font-style: italic"><a href="../CORBA_ref/index.html"></span><em class="cEmphasis">CORBA Programming Reference</em><span class="cHyperlink">
</a></span>.
</p>
<p class="pBody"><a name="wp1018726"> </a>
The <code class="cCode">CosTransactions</code> module defines the <code class="cCode">TransactionalObject</code> interface (shown in <a href="trxsvc.html#wp1018731">Listing&#160;2-7</a>). This interface defines no methods; it is simply a marker. 
</p>
<div class="pCodeTitle"><a name="wp1018731"> </a>
Listing&#160;2-7	   TransactionalObject Interface
</div> <a name="wp1018732"> </a><div class="pPreformatted"><pre>interface TransactionalObject {<br />};<br />// <code class="cCode">This information was taken from the OMG </code><code class="cCodeEmphasis">Transaction Service<br />// Specification</code><code class="cCode">, Version 1.1, May 2000. Used with permission <br />// of the OMG.</code></pre></div><h4 class="pHeading3"><a name="wp1053621"> </a>
TransactionFactory Interface
</h4>
<p class="pBody"><a name="wp1053622"> </a>
The <code class="cCode">TransactionFactory</code> interface is provided to allow the transaction originator to begin a transaction. This interface defines two operations, create and recreate, which create a new representation of a top-level transaction. A TransactionFactory is located using the <code class="cCode">FactoryFinder</code> interface of the life cycle service and not by the <code class="cCode">resolve_initial_reference()</code> operation on the ORB interface.
</p>
<p class="pBody"><a name="wp1053780"> </a>
<a href="trxsvc.html#wp1053797">Listing&#160;2-8</a> shows the <code class="cCode">TransactionFactory</code> interface.
</p>
<a name="wp1056981"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The <code class="cCode">Control recreate</code> method of the <code class="cCode">TransactionFactory</code> interface is not supported.</td>
</tr>
</table>

<div class="pCodeTitle"><a name="wp1053797"> </a>
Listing&#160;2-8	   TransactionFactory Interface
</div> <a name="wp1053827"> </a><div class="pPreformatted"><pre>interface TransactionFactory {<br />     Control create(in unsigned long time_out);<br />     Control recreate(in PropagationContext ctx);<br />};<br />// <code class="cCode">This information was taken from the OMG </code><code class="cCodeEmphasis">Transaction Service<br />// Specification</code><code class="cCode">, Version 1.1, May 2000. Used with permission <br />// of the OMG.</code></pre></div><p class="pBody"><a name="wp1053858"> </a>
<a href="trxsvc.html#wp1053980">Table&#160;2-4</a> describes the <code class="cCode">TransactionFactory</code> interface methods.
</p>
<p class="pGraphic"><a name="wp1053996"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1053980table1053978"><caption><a name="wp1053980"> </a>
Table 2-4  TransactionFactory Interface Methods

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1053984"> </a>
Method
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1053986"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1053988"> </a>
create
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1053990"> </a>
A new top-level transaction is created and a <code class="cCode">Control</code> object is returned. The <code class="cCode">Control</code> object can be used to manage or to control participation in the new transaction. An implementation of the Transaction Service may restrict the ability for the <code class="cCode">Control</code> object to be transmitted to or used in other execution environments; at a minimum, it can be used by the client application.
</div>
<div class="pCellBody"><a name="wp1053991"> </a>
If the parameter has a nonzero value <code class="cCode">n</code>, then the new transaction will be subject to being rolled back if it does not complete before <code class="cCode">n</code> seconds have elapsed. If the parameter is zero, then no application specified timeout is established.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1053993"> </a>
recreate
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1054067"> </a>
Not supported.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1053528"> </a>
Other CORBAservices Object Transaction Service Interfaces
</h4>
<p class="pBody"><a name="wp1018737"> </a>
All other CORBAservices Object Transaction Service interfaces are <span style="font-style: italic">not</span> supported. Note that the <code class="cCode">Current</code> interface described earlier is supported only if it has been obtained from the Bootstrap object. The <code class="cCode">Control</code> interface described earlier is supported only if it has been obtained using the <code class="cCode">get_control</code> and the <code class="cCode">suspend</code> methods on the Current object.
</p>
<h3 class="pHeading2"><a name="wp1018738"> </a>
CORBA Transaction Service API Extensions
</h3>
<p class="pBody"><a name="wp1018739"> </a>
This topic describes specific extensions to the CORBAservices Transaction Service API described earlier. The APIs in this topic enable an application to open or close an Open Group resource manager.
</p>
<p class="pBody"><a name="wp1018740"> </a>
The following APIs help facilitate participation of resource managers in a distributed transaction by allowing their two-phase commit protocol to be controlled via The Open Group XA interface.
</p>
<p class="pBody"><a name="wp1018741"> </a>
The following definitions and interfaces are defined in the <code class="cCode">Tobj</code> module.
</p>
<h4 class="pHeading3"><a name="wp1018742"> </a>
Exception
</h4>
<p class="pBody"><a name="wp1018743"> </a>
The following exception is supported:
</p>
<p class="pBody"><a name="wp1018744"> </a>
<code class="cCode">exception RMfailed {};</code>
</p>
<p class="pBody"><a name="wp1018745"> </a>
A request raises this exception to report that an attempt to open or close a resource manager failed.
</p>
<h4 class="pHeading3"><a name="wp1018746"> </a>
TransactionCurrent Interface
</h4>
<p class="pBody"><a name="wp1018747"> </a>
This interface supports all the methods of the <code class="cCode">Current</code> interface in the <code class="cCode">CosTransactions</code> module and is described in &#8220;C++ Bootstrap Object Programming Reference&#8221; in the <span class="cHyperlink">
<a href="../CORBA_ref/index.html"></span><em class="cEmphasis">CORBA Programming Reference</a></em>. Additionally, this interface supports APIs to open and close the resource manager.
</p>
<p class="pBody"><a name="wp1018750"> </a>
<a href="trxsvc.html#wp1018753">Listing&#160;2-9</a> shows the <code class="cCode">TransactionCurrent</code> interface, which is defined in the <code class="cCode">Tobj</code> module.
</p>
<div class="pCodeTitle"><a name="wp1018753"> </a>
Listing&#160;2-9	   TransactionCurrent Interface
</div> <p class="pBody"><a name="wp1018754"> </a>
<code class="cCode">Interface TransactionCurrent: CosTransactions::Current {<br /></code>&#160;&#160;&#160;&#160;&#160;<code class="cCode">&#160;void open_xa_rm() <br /></code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCode">raises(RMfailed);<br /></code>&#160;&#160;&#160;&#160;&#160;<code class="cCode">&#160;void close_xa_rm()<br /></code>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCode">raises(Rmfailed);<br />}</code>
</p>
<p class="pBody"><a name="wp1047019"> </a>
<a href="trxsvc.html#wp1047025">Table&#160;2-5</a> describes APIs that are specific to the resource manager. For more information about these APIs, see the <span style="font-style: italic"><a href="../CORBA_ref/index.html"></span><em class="cEmphasis">CORBA Programming Reference</em><span class="cHyperlink">
</a></span>. 
</p>
<p class="pGraphic"><a name="wp1060998"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1047025table1047022"><caption><a name="wp1047025"> </a>
Table 2-5  <span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">Resource Manager APIs for the Current Interface&#160;</span>

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1047029"> </a>
Method
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1047031"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1047033"> </a>
<code class="cCode">open_xa_rm</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1047035"> </a>
This method opens The Open Group resource manager to which this process is linked. A <code class="cCode">RMfailed</code> exception is raised if there is a failure while opening the resource manager.
</div>
<div class="pCellBody"><a name="wp1047036"> </a>
Any attempts to invoke this method by remote clients or the native clients raises the standard system exception <code class="cCode">NO_IMPLEMENT</code>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1047038"> </a>
<code class="cCode">close_xa_rm</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1047040"> </a>
This method closes The Open Group resource manager to which this process is linked. An <code class="cCode">RMfailed</code> exception is raised if there is a failure while closing the resource manager. A <code class="cCode">BAD_INV_ORDER</code> standard system exception is raised if the function was called in an improper context (for example, the caller is in transaction mode).   
</div>
<div class="pCellBody"><a name="wp1047041"> </a>
Any attempts by the remote clients or the native clients to invoke this method raises the standard system exception <code class="cCode">NO_IMPLEMENT</code>.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1046136"> </a>
Notes on Using Transactions in Oracle Tuxedo CORBA Applications 
</h3>
<p class="pBody"><a name="wp1046140"> </a>
Consider the following guidelines when integrating transactions into your Oracle Tuxedo CORBA client/server applications:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1046144"> </a>Nested transactions are not permitted in the Oracle Tuxedo system. You cannot start a new transaction if an existing transaction is already active. (You may start a new transaction if you first suspend the existing one; however, the object that suspends the transaction is the only object that can subsequently resume the transaction.)</li>
<li><a name="wp1046146"> </a>The object that starts a transaction is the only entity that can end the transaction. (In a strict sense, the object can be the client application, the TP Framework, or an object managed by the server application.) An object that is invoked within the scope of a transaction may suspend and resume the transaction (and while the transaction is suspended, the object can start and end other transactions). However, you cannot end a transaction in an object unless you began the transaction there.</li>
<li><a name="wp1046150"> </a>Oracle Tuxedo does not support concurrent transactions. Objects can be involved with only one transaction at one time. An object is involved in a transaction for the duration of the entire transaction, and is available to be involved in a different transaction only after the current transaction is completed.</li>
<li><a name="wp1046154"> </a>Oracle Tuxedo does not queue requests to objects that are currently involved in a transaction. If a nontransactional client application attempts to invoke an operation on an object that is currently in a transaction, the client application receives the following error message:</li>
<p class="pBodyRelative"><a name="wp1046157"> </a>
C++
</p>
<a name="wp1046158"> </a><div class="pPreformattedRelative"><pre>CORBA::OBJ_ADAPTER</pre></div><p class="pBodyRelative"><a name="wp1046159"> </a>
If a client that is in a transaction attempts to invoke an operation on an object that is currently in a different transaction, the client application receives the following error message:
</p>
<p class="pBodyRelative"><a name="wp1046162"> </a>
C++
</p>
<a name="wp1046163"> </a><div class="pPreformattedRelative"><pre>CORBA::INVALID_TRANSACTION</pre></div><li><a name="wp1046164"> </a>For transaction-bound objects, consider doing all state handling in the <code class="cCode">Tobj_ServantBase::deactivate_object()</code> operation. This makes it easier for the object to handle its state properly, because the outcome of the transaction is known at the time that <code class="cCode">deactivate_object()</code> is invoked.</li>
<li><a name="wp1046165"> </a>For method-bound objects that have several operations, but only a few that affect the object&#8217;s durable state, consider doing the following:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1046166"> </a>Assign the <code class="cCode">optional</code> transaction policy. </li>
<li><a name="wp1046167"> </a>Scope any write operations within a transaction, by making invocations on the TransactionCurrent object.</li>
<p class="pBodyRelative"><a name="wp1046168"> </a>
If the object is invoked outside a transaction, the object does not incur the overhead of scoping a transaction for reading data. This way, regardless of whether the object is invoked within a transaction, all the object&#8217;s write operations are handled transactionally.
</p>
</ul></div>
<li><a name="wp1046169"> </a>Transaction rollbacks are asynchronous. Therefore, it is possible for an object to be invoked while its transactional context is still active. If you try to invoke such an object, you receive an exception.</li>
<li><a name="wp1046170"> </a>If an object with the <code class="cCode">always</code> transaction policy is involved in a transaction that is started by the Oracle Tuxedo system, and not the client application, note the following:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1046174"> </a>If the server application marks the transaction for rollback only and the server throws a CORBA exception, the client application receives the CORBA exception.</li>
<li><a name="wp1046175"> </a>If the server application marks the transaction for rollback only and the server does <span style="font-style: italic">not</span> throw a CORBA exception, the client application receives the <code class="cCode">OBJ_ADAPTER</code> exception. In this case, the Oracle Tuxedo system automatically rolls back the transaction. However, the client application is completely unaware that a transaction has been scoped in the Oracle Tuxedo domain.</li>
</ul></div>
<li><a name="wp1046182"> </a>If the client application initiates a transaction, and the server application marks the transaction for a rollback, one of the following occurs:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1046183"> </a>If the server throws a CORBA exception, the client application receives a CORBA exception.</li>
<li><a name="wp1046184"> </a>If the server does <span style="font-style: italic">not</span> throw a CORBA exception, the client application receives the <code class="cCode">TRANSACTION_ROLLEDBACK</code> exception.</li>
</ul></div>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1037935"> </a>
UserTransaction API
</h2><p class="pBody"><a name="wp1036793"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1036797"> </a><a href="trxsvc.html#wp1047889">UserTransaction Methods</a></li>
<li><a name="wp1036801"> </a><a href="trxsvc.html#wp1035935">Exceptions Thrown by UserTransaction Methods</a></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1047889"> </a>
UserTransaction Methods
</h3>
<p class="pBody"><a name="wp1031848"> </a>
<a href="trxsvc.html#wp1032041">Table&#160;2-6</a> describes the methods in the UserTransaction object. 
</p>
<p class="pGraphic"><a name="wp1061004"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1032041table1032039"><caption><a name="wp1032041"> </a>
Table 2-6  Methods in the UserTransaction Object&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1032045"> </a>
Method Name
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1032047"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032101"> </a>
<code class="cCode">begin</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032051"> </a>
Starts a transaction on the current thread.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032103"> </a>
<code class="cCode">commit</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032055"> </a>
Commits the transaction associated with the current thread.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032069"> </a>
<code class="cCode">getStatus</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032071"> </a>
Returns the transaction status, or <code class="cCode">STATUS_NO_TRANSACTION</code> if no transaction is associated with the current thread.
</div>
<div class="pCellBody"><a name="wp1032758"> </a>
One of the following values:
</div>
<div class="pSmartList1TableBullet"><ul class="SmartList1TableBullet">
<li><a name="wp1032123"> </a><code class="cCode">STATUS_ACTIVE</code></li>
<li><a name="wp1032134"> </a><code class="cCode">STATUS_COMMITTED</code></li>
<li><a name="wp1032145"> </a><code class="cCode">STATUS_COMMITTING</code></li>
<li><a name="wp1032152"> </a><code class="cCode">STATUS_MARKED_ROLLBACK</code></li>
<li><a name="wp1032159"> </a><code class="cCode">STATUS_NO_TRANSACTION</code></li>
<li><a name="wp1032171"> </a><code class="cCode">STATUS_PREPARED</code></li>
<li><a name="wp1032178"> </a><code class="cCode">STATUS_PREPARING</code></li>
<li><a name="wp1032185"> </a><code class="cCode">STATUS_ROLLEDBACK</code></li>
<li><a name="wp1032192"> </a><code class="cCode">STATUS_ROLLING_BACK</code></li>
<li><a name="wp1032199"> </a><code class="cCode">STATUS_UNKNOWN</code></li>
</ul></div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032234"> </a>
<code class="cCode">rollback</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032236"> </a>
Rolls back the transaction associated with the current thread.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032089"> </a>
<code class="cCode">setRollbackOnly</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032091"> </a>
Marks the transaction associated with the current thread so that the only possible outcome of the transaction is to roll it back.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032093"> </a>
<code class="cCode">setTransactionTimeout</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032095"> </a>
Specifies the timeout value for the transactions started by the current thread with the <code class="cCode">begin</code> method. If an application has not called the <code class="cCode">begin</code> method, then the Transaction Service uses a default value for the transaction timeout.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1035935"> </a>
Exceptions Thrown by UserTransaction Methods
</h3>
<p class="pBody"><a name="wp1032382"> </a>
<a href="trxsvc.html#wp1031978">Table&#160;2-7</a> describes exceptions thrown by methods of the UserTransaction object. 
</p>
<p class="pGraphic"><a name="wp1061010"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1031978table1031976"><caption><a name="wp1031978"> </a>
Table 2-7  Exceptions Thrown by UserTransaction Methods&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1031982"> </a>
Exception
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1031984"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031986"> </a>
<code class="cCode">HeuristicMixedException</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031988"> </a>
Thrown to indicate that a heuristic decision was made and that some relevant updates have been committed while others have been rolled back.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031990"> </a>
<code class="cCode">HeuristicRollbackException</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031992"> </a>
Thrown to indicate that a heuristic decision was made and that some relevant updates have been rolled back.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032823"> </a>
<code class="cCode">NotSupportedException</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032825"> </a>
Thrown when the requested operation is not supported (such as a nested transaction).
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032827"> </a>
<code class="cCode">RollbackException</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032829"> </a>
Thrown when the transaction has been marked for rollback only or the transaction has been rolled back instead of committed.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032831"> </a>
<code class="cCode">IllegalStateException</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032833"> </a>
Thrown if the current thread is not associated with a transaction.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032835"> </a>
<code class="cCode">SecurityException</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1032837"> </a>
Thrown to indicate that the thread is not allowed to commit the transaction.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031994"> </a>
<code class="cCode">SystemException</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031996"> </a>
Thrown by the transaction manager to indicate that it has encountered an unexpected error condition that prevents future transaction services from proceeding.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="trxsvc.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="gstrx.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="trxcrbsr.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
