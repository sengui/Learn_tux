<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/trans/fm/admtrx.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:48:06" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Administering Transactions </title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Using CORBA Transactions
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="trxcrbcl.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next_grey1.gif" border="0" alt="Next" />&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/trans.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1041515"> </a>
Administering Transactions 
</h1>
<p class="pBody"><a name="wp1015264"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1016144"> </a><a href="admtrx.html#wp1041654">Modifying the UBBCONFIG File to Accommodate Transactions</a></li>
<li><a name="wp1015270"> </a><a href="admtrx.html#wp1015416">Modifying the Domain Configuration File to Support Transactions (Oracle Tuxedo CORBA Servers)</a></li>
<li><a name="wp1015271"> </a><a href="admtrx.html#wp1015463">Sample Distributed Application Using Transactions</a></li>
</ul></div>
<p class="pBody"><a name="wp1041643"> </a>
Before you begin, you should read <a href="gstrx.html">Introducing Transactions.</a>
</p>
<a name="wp1041644"> </a><table class="Note">
<tr>
<td valign="top"><strong>Notes:</strong></td>
<td>The administrative information applies whether you are using the Bootstrap object or the CORBA interoperable Naming Service (INS) to obtain initial object references to the Oracle Tuxedo ORB.</td></tr>
</table>

<a name="wp1041658"> </a><table class="Note">
<tr>
<td valign="top"><b class="texthide">Note:</b></td>
<td>The Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB were deprecated in Tuxedo 8.1 and are no longer supported. All Oracle Tuxedo CORBA Java client and Oracle Tuxedo CORBA Java client ORB text references, associated code samples, should only be used to help implement/run third party Java ORB libraries, and for programmer reference only.</td>
</tr>
</table>
<a name="wp1041659"> </a><table class="Note">
<tr>
<td valign="top"><b class="texthide">Note:</b></td>
<td>Technical support for third party CORBA Java ORBs should be provided by their respective vendors. Oracle Tuxedo does not provide any technical support or documentation for third party CORBA Java ORBs.</td>
</tr>
</table>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1041654"> </a>
Modifying the UBBCONFIG File to Accommodate Transactions
</h2><p class="pBody"><a name="wp1028040"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1028047"> </a><a href="admtrx.html#wp1031210">Summary of Steps</a></li>
<li><a name="wp1028318"> </a><a href="admtrx.html#wp1015279">Step 1: Specify Application-wide Transactions in the RESOURCES Section</a></li>
<li><a name="wp1028051"> </a><a href="admtrx.html#wp1022085">Step 2: Create a Transaction Log (TLOG)</a></li>
<li><a name="wp1028063"> </a><a href="admtrx.html#wp1017354">Step 3: Define Each Resource Manager (RM) and the Transaction Manager Server in the GROUPS Section</a></li>
<li><a name="wp1028071"> </a><a href="admtrx.html#wp1020485">Step 4: Enable an Interface to Begin a Transaction</a></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1031210"> </a>
Summary of Steps
</h3>
<p class="pBody"><a name="wp1031212"> </a>
To accommodate transactions, you must modify the <code class="cCode">RESOURCES</code>, <code class="cCode">MACHINES</code>, <code class="cCode">GROUPS</code>, and the <code class="cCode">INTERFACES</code> or <code class="cCode">SERVICES</code> sections of the application&#8217;s <code class="cCode">UBBCONFIG</code> file in the following ways: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1015275"> </a>In the <code class="cCode">RESOURCES</code> section, specify the application-wide number of allowed transactions and the value of the commit control flag.</li>
<li><a name="wp1015276"> </a>In the <code class="cCode">MACHINES</code> section, create the <code class="cCode">TLOG</code> information for each machine.</li>
<li><a name="wp1015277"> </a>In the <code class="cCode">GROUPS</code> section, indicate information about each resource manager and about the Transaction Manager Server.</li>
<li><a name="wp1015278"> </a>In the <code class="cCode">INTERFACES</code> section (for Oracle Tuxedo CORBA applications only) or the <code class="cCode">SERVICES</code> section (for Oracle Tuxedo ATMI applications only), enable the automatic transaction option. </li>
</ul></div>
<p class="pBody"><a name="wp1026099"> </a>
For instructions about modifying these sections in the <code class="cCode">UBBCONFIG</code> file, see &#8220;Creating a Configuration File&#8221; in the <a href="">Setting Up an Oracle Tuxedo Application<span class="cHyperlink">
</a></span>.
</p>
<h3 class="pHeading2"><a name="wp1015279"> </a>
Step 1: Specify Application-wide Transactions in the RESOURCES Section 
</h3>
<p class="pBody"><a name="wp1015280"> </a>
<a href="admtrx.html#wp1026275">Table&#160;5-1</a> provides a description of transaction-related parameters in the <code class="cCode">RESOURCES</code> section of the configuration file.
</p>
<p class="pGraphic"><a name="wp1022080"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1026275table1022059"><caption><a name="wp1026275"> </a>
Table 5-1  <span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">Transaction-related Parameters in the RESOURCES Section&#160;</span>

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1022061"> </a>
Parameter
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1022063"> </a>
Meaning
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022066"> </a>
<code class="cCode">MAXGTT </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022068"> </a>
Limits the total number of global transaction identifiers (<code class="cCode">GTRID</code>s) allowed on one machine at one time. The maximum value allowed is <code class="cCode">2048</code>, the minimum is <code class="cCode">0</code>, and the default is <code class="cCode">100</code>. You can override this value on a per-machine basis in the <code class="cCode">MACHINES</code> section.
</div>
<div class="pCellBody"><a name="wp1022070"> </a>
Entries remain in the table only while the global transaction is active, so this parameter has the effect of setting a limit on the number of simultaneous transactions.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022073"> </a>
<code class="cCode">CMTRET </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022075"> </a>
Specifies the initial setting of the <code class="cCode">TP_COMMIT_CONTROL</code> characteristic. The default is <code class="cCode">COMPLETE</code>. Following are its two settings: 
</div>
<div class="pSmartList1TableBullet"><ul class="SmartList1TableBullet">
<li><a name="wp1022077"> </a><code class="cCode">LOGGED</code>&#8212;the <code class="cCode">TP_COMMIT_CONTROL</code> characteristic is set to <code class="cCode">TP_CMT_LOGGED</code>, which means that <code class="cCode">tpcommit()</code> returns when all the participants have successfully precommitted.</li>
<li><a name="wp1022078"> </a><code class="cCode">COMPLETE</code>&#8212;the <code class="cCode">TP_COMMIT_CONTROL</code> characteristic is set to <code class="cCode">TP_CMT_COMPLETE</code>, which means that <code class="cCode">tpcommit()</code> will not return until all the participants have successfully committed. </li>
</ul></div>
<p class="pTableNote"><a name="wp1022079"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You should consult with the RM vendors to determine the appropriate setting. If any RM in the application uses the<em class="cEmphasis"> late commit</em> implementation of the XA standard, the setting should be <code class="cCode">COMPLETE</code>. If all the resource managers use the <em class="cEmphasis">early commit</em> implementation, the setting should be <code class="cCode">LOGGED</code> for performance reasons. (You can override this setting with <code class="cCode">tpscmt()</code>.)</td></tr>
</table>
</p>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1022085"> </a>
Step 2: Create a Transaction Log (TLOG) 
</h3>
<p class="pBody"><a name="wp1022098"> </a>
This section discusses creating a transaction log (<code class="cCode">TLOG</code>), which refers to a log in which information on transactions is kept until the transaction is completed.
</p>
<h4 class="pHeading3"><a name="wp1022160"> </a>
Creating the UDL 
</h4>
<p class="pBody"><a name="wp1022163"> </a>
The Universal Device List (UDL) is like a map of the Oracle Tuxedo file system. The UDL gets loaded into shared memory when an application is booted. To create an entry in the UDL for the <code class="cCode">TLOG</code> device, create the UDL on each machine using global transactions. If the <code class="cCode">TLOGDEVICE</code> is mirrored between two machines, it is unnecessary to do this on the paired machine. The Bulletin Board Liaison (BBL) then initializes and opens the <code class="cCode">TLOG</code> during the boot process.
</p>
<p class="pBody"><a name="wp1017735"> </a>
To create the UDL, enter a command using the following format, before the application has been booted:
</p>
<p class="pBody"><a name="wp1020300"> </a>
<code class="cCode">tmadmin -c crdl -z </code><code class="cCodeEmphasis">config</code><code class="cCode"> -b </code><code class="cCodeEmphasis">blocks</code><code class="cCode"> </code>
</p>
<p class="pBody"><a name="wp1031782"> </a>
where:
</p>
<p class="pGraphic"><a name="wp1041781"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1031859table1031808">
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031859"> </a>
<code class="cCode">-z </code><code class="cCodeEmphasis">config</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031861"> </a>
Specifies the full pathname for the device where you should create the UDL.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031814"> </a>
<code class="cCode">-b </code><code class="cCodeEmphasis">blocks</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031816"> </a>
Specifies the number of blocks to be allocated on the device.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031818"> </a>
<code class="cCodeEmphasis">config</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1031820"> </a>
Should match the value of the <code class="cCode">TLOGDEVICE</code> parameter in the <code class="cCode">MACHINES</code> section of the <code class="cCode">UBBCONFIG</code> file.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<a name="wp1020400"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>In general, the value that you supply for <code class="cCode">blocks</code> should not be less than the value for <code class="cCode">TLOGSIZE</code>. For example, if <code class="cCode">TLOGSIZE</code> is specified as 200 blocks, specifying <code class="cCode">-b 500</code> would not cause a degradation.</td>
</tr>
</table>

<p class="pBody"><a name="wp1019115"> </a>
For more information about storing the <code class="cCode">TLOG</code>, see <a href="../install/index.html">Installing the Oracle Tuxedo System</a>.
</p>
<h4 class="pHeading3"><a name="wp1018921"> </a>
Defining Transaction-related Parameters in the MACHINES Section 
</h4>
<p class="pBody"><a name="wp1018920"> </a>
You can define a global transaction log (<code class="cCode">TLOG</code>) using several parameters in the <code class="cCode">MACHINES</code> section of the <code class="cCode">UBBCONFIG</code> file. You must manually create the device list entry for the <code class="cCode">TLOGDEVICE</code> on each machine where a <code class="cCode">TLOG</code> is needed. You can do this either before or after <code class="cCode">TUXCONFIG</code> has been loaded, but it must be done before the system is booted.
</p>
<a name="wp1021637"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>If you are not using transactions, the <code class="cCode">TLOG</code> parameters are not required.</td>
</tr>
</table>

<p class="pBody"><a name="wp1020405"> </a>
<a href="admtrx.html#wp1026327">Table&#160;5-2</a> provides a description of transaction-related parameters in the <code class="cCode">MACHINES</code> section of the configuration file.
</p>
<p class="pGraphic"><a name="wp1022475"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1026327table1022442"><caption><a name="wp1026327"> </a>
Table 5-2  Transaction-related Parameters in the MACHINES Section&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1022444"> </a>
Parameter
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1022446"> </a>
Meaning
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022449"> </a>
<code class="cCode">TLOGNAME </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022452"> </a>
The name of the <code class="cCode">DTP</code> transaction log for this machine.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022455"> </a>
<code class="cCode">TLOGDEVICE </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022460"> </a>
Specifies the Oracle Tuxedo or Oracle Tuxedo file system that contains the <code class="cCode">DTP</code> transaction log (<code class="cCode">TLOG</code>) for this machine. If this parameter is not specified, the machine is assumed not to have a <code class="cCode">TLOG</code>. The maximum string value length is 64 characters.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022464"> </a>
<code class="cCode">TLOGSIZE </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022466"> </a>
The size of the <code class="cCode">TLOG</code> file in physical pages. Its value must be between 1 and 2048, and its default is 100. The value should be large enough to hold the number of outstanding transactions on the machine at a given time. One transaction is logged per page. The default should suffice for most applications.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022470"> </a>
<code class="cCode">TLOGOFFSET</code> 
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022472"> </a>
Specifies the offset in pages from the beginning of <code class="cCode">TLOGDEVICE</code> to the start of the <code class="cCode">VTOC</code> that contains the transaction log for this machine.The number must be greater than or equal to 0 and less than the number of pages on the device. The default is 0.
</div>
<div class="pCellBody"><a name="wp1022474"> </a>
<code class="cCode">TLOGOFFSET</code> is rarely necessary. However, if two <code class="cCode">VTOCs</code> share the same device or if a <code class="cCode">VTOC</code> is stored on a device (such as a file system) that is shared with another application, you can use <code class="cCode">TLOGOFFSET</code> to indicate a starting address relative to the address of the device.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1022478"> </a>
Creating the Domains Transaction Log (Oracle Tuxedo ATMI Servers Only) 
</h4>
<p class="pBody"><a name="wp1026879"> </a>
This section applies to the ATMI servers only.
</p>
<p class="pBody"><a name="wp1020305"> </a>
You can create the Domains transaction log before starting the Domains gateway group by using the following command:
</p>
<a name="wp1022547"> </a><div class="pPreformatted"><pre><code class="cCode">dmadmin</code>(1) <code class="cCode">crdmlog (crdlog) -d </code><code class="cCodeEmphasis">local_domain_name</code></pre></div><p class="pBody"><a name="wp1022554"> </a>
Create the Domains transaction log for the named local domain on the current machine (the machine on which <code class="cCode">dmadmin</code> is running). The command uses the parameters specified in the <code class="cCode">DMCONFIG</code> file. This command fails if the named local domain is active on the current machine or if the log already exists. If the transaction log has not been created, the Domains gateway group creates the log when it starts up.
</p>
<h3 class="pHeading2"><a name="wp1017354"> </a>
Step 3: Define Each Resource Manager (RM) and the Transaction Manager Server in the GROUPS Section 
</h3>
<p class="pBody"><a name="wp1015325"> </a>
Additions to the <code class="cCode">GROUPS</code> section fall into two categories:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1015326"> </a>Defining the Transaction Manager Servers that perform most of the work that controls global transactions:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1022875"> </a>The <code class="cCode">TMSNAME</code> parameter specifies the name of the server executable.</li>
<li><a name="wp1022879"> </a>The <code class="cCode">TMSCOUNT</code> parameter specifies the number of such servers to boot <br />(the minimum is 2, the maximum is 10, and the default is 3).</li>
<p class="pBodyRelative"><a name="wp1022812"> </a>
A NULL Transactional Manager Server does not communicate with any resource manager. It is used to exercise an application&#8217;s use of the transactional primitives before actually testing the application in a recoverable, <em class="cEmphasis">real</em> environment. This server is named <code class="cCode">TMS</code> and it simply begins, commits, or terminates without talking to any resource manager.
</p>
</ul></div>
<li><a name="wp1015327"> </a>Defining opening and closing information for each resource manager:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1022884"> </a><code class="cCode">OPENINFO</code> is a string with information used to open a resource manager.</li>
<li><a name="wp1022901"> </a><code class="cCode">CLOSEINFO</code> is used to close a resource manager.</li>
</ul></div>
</ul></div>
<h4 class="pHeading3"><a name="wp1015328"> </a>
Sample GROUPS Section 
</h4>
<p class="pBody"><a name="wp1015329"> </a>
The following sample <code class="cCode">GROUPS</code> section derives from the <code class="cCode">bankapp</code> banking application:
</p>
<a name="wp1015330"> </a><div class="pPreformatted"><pre><code class="cCode">BANKB1 GRPNO=1 TMSNAME=TMS_SQL TMSCOUNT=2<br />OPENINFO=&#8221;TUXEDO/SQL:&lt;APPDIR&gt;/bankdl1:bankdb:readwrite&#8221;</code></pre></div><p class="pBody"><a name="wp1023080"> </a>
<a href="admtrx.html#wp1026452">Table&#160;5-3</a> describes the transaction values specified in this sample GROUPS section.<span style="font-weight: bold"> </span>
</p>
<p class="pGraphic"><a name="wp1015358"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1026452table1015333"><caption><a name="wp1026452"> </a>
Table 5-3  Transaction Values in the GROUPS Section of a Sample UBBCONFIG File&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1015335"> </a>
Transaction Value
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1015337"> </a>
Meaning
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015339"> </a>
<code class="cCode">BANKB1 GRPNO=1 TMSNAME=TMS_SQL\ TMSCOUNT=2 </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015341"> </a>
Contains the name of the Transaction Manager Server (<code class="cCode">TMS_SQL</code>) and the number (<code class="cCode">2</code>) of these servers to be booted in the group <code class="cCode">BANKB1</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015343"> </a>
<code class="cCode">TUXEDO/SQL</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015345"> </a>
Published name of the resource manager
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015347"> </a>
<code class="cCode">&lt;APPDIR&gt;/bankdl1</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015349"> </a>
Includes a device name
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015351"> </a>
<code class="cCode">bankdb</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015353"> </a>
Database name
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015355"> </a>
<code class="cCode">readwrite</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015357"> </a>
Access mode
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1015359"> </a>
Characteristics of the TMSNAME, TMSCOUNT, OPENINFO, and CLOSEINFO Parameters
</h4>
<p class="pBody"><a name="wp1020939"> </a>
<a href="admtrx.html#wp1026457">Table&#160;5-4</a> lists the characteristics of the TMSNAME, TMSCOUNT, OPENINFO, and CLOSEINFO parameters.
</p>
<p class="pGraphic"><a name="wp1015383"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1026457table1015360"><caption><a name="wp1026457"> </a>
Table 5-4  Characteristics of the TMSNAME, TMSCOUNT, OPENINFO, and CLOSEINFO Parameters&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1015362"> </a>
Parameter
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1015364"> </a>
Characteristics
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015366"> </a>
<code class="cCode">TMSNAME </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1022944"> </a>
Name of the Transaction Manager Server executable.
</div>
<div class="pCellBody"><a name="wp1022945"> </a>
Required parameter for transactional configurations.
</div>
<div class="pCellBody"><a name="wp1015370"> </a>
<code class="cCode">TMS</code> is a NULL Transactional Manager Server.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015372"> </a>
<code class="cCode">TMSCOUNT </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015374"> </a>
Number of Transaction Manager Servers (must be between 2 and 10).
</div>
<div class="pCellBody"><a name="wp1015375"> </a>
Default is 3.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015377"> </a>
<code class="cCode">OPENINFO</code>
</div>
<div class="pCellBody"><a name="wp1031989"> </a>
<code class="cCode">CLOSEINFO </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015379"> </a>
Represents information to open or close a resource manager.
</div>
<div class="pCellBody"><a name="wp1015380"> </a>
Content depends on the specific resource manager.
</div>
<div class="pCellBody"><a name="wp1015381"> </a>
Starts with the name of the resource manager. 
</div>
<div class="pCellBody"><a name="wp1015382"> </a>
Omission means the resource manager needs no information to open.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1020485"> </a>
Step 4: Enable an Interface to Begin a Transaction
</h3>
<p class="pBody"><a name="wp1034865"> </a>
To enable an interface to begin a transaction, you change different sections in the <code class="cCode">UBBCONFIG</code> file, depending on whether you are configuring an Oracle Tuxedo CORBA server or Oracle Tuxedo ATMI server.
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1034884"> </a><a href="admtrx.html#wp1034868">Changing the INTERFACES Section (Oracle Tuxedo CORBA Servers)</a></li>
<li><a name="wp1034896"> </a><a href="admtrx.html#wp1020406">Changing the SERVICES Section (Oracle Tuxedo ATMI Servers)</a></li>
</ul></div>
<h4 class="pHeading3"><a name="wp1034868"> </a>
Changing the INTERFACES Section (Oracle Tuxedo CORBA Servers) 
</h4>
<p class="pBody"><a name="wp1020493"> </a>
The <code class="cCode">INTERFACES</code> section in the <code class="cCode">UBBCONFIG</code> file supports Oracle Tuxedo CORBA interfaces: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1020494"> </a>For each CORBA interface, set <code class="cCode">AUTOTRAN</code> to <code class="cCode">Y</code> if you want a transaction to start automatically when an operation invocation is received. <code class="cCode">AUTOTRAN=Y </code>has no effect if the interface is already in transaction mode. The default is <code class="cCode">N</code>. The effect of specifying a value for <code class="cCode">AUTOTRAN</code> depends on the transactional policy specified by the developer in the Implementation Configuration File (ICF) for the interface. This transactional policy will become the transactional policy attribute of the associated <code class="cCode">T_IFQUEUE</code> <code class="cCode">MIB</code> object at run time. The only time this value affects the behavior of the application is if the developer specified a transaction policy of <code class="cCode">optional</code>.</li>
<a name="wp1020495"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>To work properly, this feature depends on collaboration between the system designer and the administrator. If the administrator sets this value to <code class="cCode">Y</code> without prior knowledge of the transaction policy defined by the developer in the interface&#8217;s ICF, the actual run time effect of the parameter might be unknown.</td>
</tr>
</table>

<li><a name="wp1020496"> </a>If <code class="cCode">AUTOTRAN</code> is set to <code class="cCode">Y</code>, you must set the <code class="cCode">TRANTIME</code> parameter, which specifies the transaction timeout, in seconds, for the transactions to be created. The value must be greater than or equal to zero and must not exceed 2,147,483,647 <br /><span style="vertical-align: baseline">(2</span><span style="vertical-align: super">31</span> - 1, or about 70 years). A value of zero implies there is no timeout for the transaction. (The default is 30 seconds.)</li>
</ul></div>
<p class="pBody"><a name="wp1021414"> </a>
<a href="admtrx.html#wp1026513">Table&#160;5-5</a> describes the characteristics of the AUTOTRAN, TRANTIME, and FACTORYROUTING parameters.
</p>
<p class="pGraphic"><a name="wp1020528"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1026513table1020499"><caption><a name="wp1026513"> </a>
Table 5-5  Characteristics of the AUTOTRAN, TRANTIME, and FACTORYROUTING Parameters&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1020501"> </a>
Parameter
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1020503"> </a>
Characteristics
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1020506"> </a>
<code class="cCode">AUTOTRAN </code>
</div>
</td>
    <td class="table" scope="row"><div class="pSmartList1TableBullet"><ul class="SmartList1TableBullet">
<li><a name="wp1023155"> </a>Makes an interface the initiator of a transaction.</li>
<li><a name="wp1023156"> </a>To work properly, it is dependent on collaboration between the system designer and the system administrator. If the administrator sets this value to Y without prior knowledge of the ICF transaction policy set by the developer, the actual run-time effort of the parameter might be unknown.</li>
<li><a name="wp1021206"> </a>The only time this value affects the behavior of the application is if the developer specified a transaction policy of <code class="cCode">optional</code>.</li>
<li><a name="wp1020511"> </a>If a transaction already exists, a new one is not started. </li>
<li><a name="wp1020512"> </a>Default is <code class="cCode">N</code>.</li>
</ul></div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1020515"> </a>
<code class="cCode">TRANTIME </code>
</div>
</td>
    <td class="table" scope="row"><div class="pSmartList1TableBullet"><ul class="SmartList1TableBullet">
<li><a name="wp1020518"> </a>Represents the timeout for the <code class="cCode">AUTOTRAN</code> transactions.</li>
<li><a name="wp1020519"> </a>Valid values are between 0 and 2<span style="vertical-align: super">31</span> - 1, inclusive.</li>
<li><a name="wp1020520"> </a>Zero (0) represents no timeout.</li>
<li><a name="wp1020521"> </a>Default is 30 seconds.</li>
</ul></div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1027876"> </a>
<code class="cCode">FACTORYROUTING</code> 
</div>
</td>
    <td class="table" scope="row"><div class="pSmartList1TableBullet"><ul class="SmartList1TableBullet">
<li><a name="wp1027889"> </a>Specifies the name of the routing criteria to be used for factory-based routing for this CORBA interface.</li>
<li><a name="wp1027918"> </a>You must specify a <code class="cCode">FACTORYROUTING</code> parameter for interfaces requesting factory-based routing.</li>
</ul></div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1020406"> </a>
Changing the SERVICES Section (Oracle Tuxedo ATMI Servers) 
</h4>
<p class="pBody"><a name="wp1023405"> </a>
The following are three transaction-related features in the <code class="cCode">SERVICES</code> section:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1023406"> </a>If you want a service (instead of a client) to begin a transaction, you must set the <code class="cCode">AUTOTRAN</code> flag to <code class="cCode">Y</code>. This is useful if the service is not needed as part of any larger transaction, and if the application wants to relieve the client of making transaction decisions. If the service is called when there is already an existing transaction, this call becomes part of it. (The default is <code class="cCode">N</code>.)</li>
<a name="wp1015387"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Generally, clients are the best initiators of transactions because a service has the potential of participating in a larger transaction.</td>
</tr>
</table>

<li><a name="wp1015388"> </a>If <code class="cCode">AUTOTRAN</code> is set to <code class="cCode">Y</code>, you must set the <code class="cCode">TRANTIME</code> parameter, which is the transaction timeout, in seconds, for the transactions to be created. The value must be greater than or equal to 0 and must not exceed 2,147,483,647 <span style="vertical-align: baseline">(2</span><span style="vertical-align: super">31</span> - 1, or about 70 years). A value of zero implies there is no timeout for the transaction. (The default is 30 seconds.)</li>
<li><a name="wp1015389"> </a>You must specify a <code class="cCode">ROUTING</code> parameter for transactions that request data-dependent routing.</li>
</ul></div>
<p class="pBody"><a name="wp1026635"> </a>
<a href="admtrx.html#wp1026619">Table&#160;5-6</a> describes the characteristics of the AUTOTRAN, TRANTIME, and ROUTING parameters:
</p>
<p class="pGraphic"><a name="wp1015414"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1026619table1015391"><caption><a name="wp1026619"> </a>
Table 5-6  Characteristics of the AUTOTRAN, TRANTIME, and ROUTING Parameters&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1015393"> </a>
Parameter
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1015395"> </a>
Characteristics
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015397"> </a>
<code class="cCode">AUTOTRAN </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015399"> </a>
Makes a service the initiator of a transaction.
</div>
<div class="pCellBody"><a name="wp1015400"> </a>
Relieves the client of the transactional burden.
</div>
<div class="pCellBody"><a name="wp1015401"> </a>
If a transaction already exists, a new one is not started. 
</div>
<div class="pCellBody"><a name="wp1015402"> </a>
Default is <code class="cCode">N</code>.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015404"> </a>
<code class="cCode">TRANTIME </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015406"> </a>
Represents the timeout for the <code class="cCode">AUTOTRAN</code> transactions.
</div>
<div class="pCellBody"><a name="wp1015407"> </a>
Valid values are between 0 and 2<span style="vertical-align: super">31</span> - 1, inclusive.
</div>
<div class="pCellBody"><a name="wp1015408"> </a>
0 represents no timeout.
</div>
<div class="pCellBody"><a name="wp1015409"> </a>
Default is 30 seconds.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015411"> </a>
<code class="cCode">ROUTING </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015413"> </a>
Points to an entry in the <code class="cCode">ROUTING</code> section where data-dependent routing is specified for transactions that request this service. 
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1015416"> </a>
Modifying the Domain Configuration File to Support Transactions (Oracle Tuxedo CORBA Servers) 
</h2><p class="pBody"><a name="wp1028360"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1028354"> </a><a href="admtrx.html#wp1015418">Characteristics of the DMTLOGDEV, DMTLOGNAME, DMTLOGSIZE, MAXRDTRAN, and MAXTRAN Parameters</a></li>
<li><a name="wp1028385"> </a><a href="admtrx.html#wp1015447">Characteristics of the AUTOTRAN and TRANTIME Parameters (Oracle Tuxedo CORBA and ATMI Servers)</a></li>
</ul></div>
<p class="pBody"><a name="wp1028837"> </a>
To enable transactions across domains, you need to set parameters in both the <code class="cCode">DM_LOCAL_DOMAINS</code> and the <code class="cCode">DM_REMOTE_SERVICES</code> sections of the Domains configuration file (<code class="cCode">DMCONFIG</code>). Entries in the <code class="cCode">DM_LOCAL_DOMAINS</code> section define local domain characteristics. Entries in the <code class="cCode">DM_REMOTE_SERVICES</code> section define information on services that are <em class="cEmphasis">imported</em> and that are available on remote domains.
</p>
<h3 class="pHeading2"><a name="wp1015418"> </a>
Characteristics of the DMTLOGDEV, DMTLOGNAME, DMTLOGSIZE, MAXRDTRAN, and MAXTRAN Parameters 
</h3>
<p class="pBody"><a name="wp1036112"> </a>
The <code class="cCode">DM_LOCAL_DOMAINS</code> section of the Domains configuration file identifies local domains and their associated gateway groups. This section must have an entry for each gateway group (local domain). Each entry specifies the parameters required for the Domains gateway processes running in that group.
</p>
<p class="pBody"><a name="wp1019960"> </a>
<a href="admtrx.html#wp1026780">Table&#160;5-7</a> provides a description of the five transaction-related parameters in this section: <code class="cCode">DMTLOGDEV</code>, <code class="cCode">DMTLOGNAME</code>, <code class="cCode">DMTLOGSIZE</code>, <code class="cCode">MAXRDTRAN</code>, and <code class="cCode">MAXTRAN</code>.
</p>
<p class="pGraphic"><a name="wp1015446"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1026780table1015420"><caption><a name="wp1026780"> </a>
Table 5-7  <b class="cBold">Characteristics of the DMTLOGDEV, DMTLOGNAME, DMTLOGSIZE, MAXRDTRAN, and MAXTRAN Parameters&#160;</b>

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1015422"> </a>
Parameter
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1015424"> </a>
Characteristics
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015426"> </a>
<code class="cCode">DMTLOGDEV </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015428"> </a>
Specifies the Oracle Tuxedo file system that contains the Domains transaction log (<code class="cCode">DMTLOG</code>) for this machine. The <code class="cCode">DMTLOG</code> is stored as an Oracle Tuxedo <code class="cCode">VTOC</code> table on the device. If this parameter is not specified, the Domains gateway group is not allowed to process requests in transaction mode. Local domains running on the same machine can share the same <code class="cCode">DMTLOGDEV</code> file system, but each local domain must have its own log (a table in the <code class="cCode">DMTLOGDEV</code>) named as specified by the <code class="cCode">DMTLOGNAME</code> keyword. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015430"> </a>
<code class="cCode">DMTLOGNAME </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015432"> </a>
Specifies the name of the Domains transaction log for this domain. This name must be unique when the same <code class="cCode">DMTLOGDEV</code> is used for several local domains. If a value is not specified, the value defaults to the string <code class="cCode">DMTLOG</code>. The name must contain 30 characters or less.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015434"> </a>
<code class="cCode">DMTLOGSIZE </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015436"> </a>
Specifies the numeric size of the Domains transaction log for this machine (in pages). It must be greater than zero and less than the amount of available space on the Oracle Tuxedo file system. If a value is not specified, the value defaults to 100 pages.
</div>
<p class="pTableNote"><a name="wp1015437"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The number of domains in a transaction determine the number of pages you must specify in the <code class="cCode">DMTLOGSIZE</code> parameter. One transaction does not necessarily equal one log page.</td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015439"> </a>
<code class="cCode">MAXRDTRAN </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015441"> </a>
Specifies the maximum number of domains that can be involved in a transaction. It must be greater than zero and less than 32,768. If a value is not specified, the value defaults to 16.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015443"> </a>
<code class="cCode">MAXTRAN </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015445"> </a>
Specifies the maximum number of simultaneous global transactions allowed on this local domain. It must be greater than or equal to zero, and less than or equal to the <code class="cCode">MAXGTT</code> parameter specified in the <code class="cCode">TUXCONFIG</code> file. If not specified, the default is the value of <code class="cCode">MAXGTT</code>.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1015447"> </a>
Characteristics of the AUTOTRAN and TRANTIME Parameters (Oracle Tuxedo CORBA and ATMI Servers)
</h3>
<p class="pBody"><a name="wp1027994"> </a>
The <code class="cCode">DM_REMOTE_SERVICES</code> section of the Domains configuration file identifies information on services <em class="cEmphasis">imported</em> and available on remote domains. Remote services are associated with a particular remote domain. 
</p>
<p class="pBody"><a name="wp1027998"> </a>
<a href="admtrx.html#wp1026827">Table&#160;5-8</a> describes the two transaction-related parameters in this section: <code class="cCode">AUTOTRAN</code> and <code class="cCode">TRANTIME</code>.
</p>
<p class="pGraphic"><a name="wp1015462"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1026827table1015449"><caption><a name="wp1026827"> </a>
Table 5-8  Characteristics of the AUTOTRAN and TRANTIME Parameters&#160;

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1015451"> </a>
Parameter
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1015453"> </a>
Characteristics
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1017237"> </a>
<code class="cCode">AUTOTRAN </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1017239"> </a>
Used by gateways to automatically start/terminate transactions for remote services. This capability is required if you want to enforce reliable network communication with remote services. You specify this capability by setting the <code class="cCode">AUTOTRAN</code> parameter to <code class="cCode">Y</code> in the corresponding remote service definition.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015455"> </a>
<code class="cCode">TRANTIME </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1015457"> </a>
Specifies the default timeout value in seconds for a transaction automatically started for the associated service. The value must be greater than or equal to zero, and less than 2147483648. The default is 30 seconds. A value of zero implies the maximum timeout value for the machine.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1015463"> </a>
Sample Distributed Application Using Transactions 
</h2><p class="pBody"><a name="wp1021428"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1028442"> </a><a href="admtrx.html#wp1015465">RESOURCES Section</a></li>
<li><a name="wp1028486"> </a><a href="admtrx.html#wp1015489">MACHINES Section</a></li>
<li><a name="wp1028506"> </a><a href="admtrx.html#wp1016993">GROUPS and NETWORK Sections</a></li>
<li><a name="wp1028523"> </a><a href="admtrx.html#wp1017067">SERVERS, SERVICES, and ROUTING Sections</a></li>
</ul></div>
<p class="pBody"><a name="wp1028418"> </a>
This topic describes a sample configuration file for a sample CORBA application that enables transactions and distributes the application over three sites. The application includes the following features:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1021429"> </a>Data-dependent routing on <code class="cCode">ACCOUNT_ID</code>.</li>
<li><a name="wp1021430"> </a>Data distributed over three databases.</li>
<li><a name="wp1021431"> </a><code class="cCode">BRIDGE</code> processes communicating with the system via the <code class="cCode">ATMI</code> interface.</li>
<li><a name="wp1021432"> </a>System administration from one site.</li>
</ul></div>
<p class="pBody"><a name="wp1020963"> </a>
The configuration file includes seven sections: <code class="cCode">RESOURCES</code>, <code class="cCode">MACHINES</code>, <code class="cCode">GROUPS</code>, <code class="cCode">NETWORK</code>, <code class="cCode">SERVERS</code>, <code class="cCode">SERVICES</code>, and <code class="cCode">ROUTING</code>.
</p>
<h3 class="pHeading2"><a name="wp1015465"> </a>
RESOURCES Section
</h3>
<p class="pBody"><a name="wp1015466"> </a>
The <code class="cCode">RESOURCES</code> section shown in <a href="admtrx.html#wp1021021">Listing&#160;5-1</a> specifies the following parameters:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1015467"> </a><code class="cCode">MAXSERVERS</code>, <code class="cCode">MAXSERVICES</code>, and <code class="cCode">MAXGTT</code> are less than the defaults. This makes the Bulletin Board smaller.</li>
<li><a name="wp1015468"> </a><code class="cCode">MASTER</code> is <code class="cCode">SITE3</code> and the backup master is <code class="cCode">SITE1</code>.</li>
<li><a name="wp1015469"> </a><code class="cCode">MODEL</code> is set to <code class="cCode">MP</code> and <code class="cCode">OPTIONS</code> is set to <code class="cCode">LAN</code>, <code class="cCode">MIGRATE</code>. This allows a networked configuration with migration.</li>
<li><a name="wp1015470"> </a><code class="cCode">BBLQUERY</code> is set to 180 and <code class="cCode">SCANUNIT</code> is set to 10. This means that <code class="cCode">DBBL</code> checks of the remote <code class="cCode">BBLs</code> are done every 1800 seconds (one half hour).</li>
<div class="pCodeTitle"><a name="wp1021021"> </a>
Listing&#160;5-1	   Sample RESOURCES Section 
</div> <a name="wp1021000"> </a><div class="pPreformatted"><pre><code class="cCode">*RESOURCES<br />#<br />IPCKEY       99999<br />UID          1<br />GID          0<br />PERM         0660<br />MAXACCESSERS 25<br />MAXSERVERS   25<br />MAXSERVICES  40<br />MAXGTT       20<br />MASTER       SITE3, SITE1<br />SCANUNIT     10<br />SANITYSCAN   12<br />BBLQUERY     180<br />BLOCKTIME    30<br />DBBLWAIT     6<br />OPTIONS      LAN, MIGRATE<br />MODEL        MP<br />LDBAL         Y</code></pre></div></ul></div>
<h3 class="pHeading2"><a name="wp1015489"> </a>
MACHINES Section
</h3>
<p class="pBody"><a name="wp1015490"> </a>
The <code class="cCode">MACHINES</code> section shown in <a href="admtrx.html#wp1020012">Listing&#160;5-2</a> specifies the following parameters:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1015491"> </a><code class="cCode">TLOGDEVICE</code> and <code class="cCode">TLOGNAME</code> are specified, which indicate that transactions will be done.</li>
<li><a name="wp1015492"> </a>The <code class="cCode">TYPE</code> parameters are all different, which indicates that encode/decode will be done on all messages sent between machines.</li>
<div class="pCodeTitle"><a name="wp1020012"> </a>
Listing&#160;5-2	   Sample MACHINES Section 
</div> <a name="wp1020170"> </a><div class="pPreformatted"><pre>*MACHINES<br />Gisela&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXDIR=&#8221;/usr/tuxedo&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;APPDIR=&#8221;/usr/home&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ENVFILE=&#8221;/usr/home/ENVFILE&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGDEVICE=&#8221;/usr/home/TLOG&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGNAME=TLOG<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXCONFIG=&#8221;/usr/home/tuxconfig&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=&#8221;3B600&#8221;<br /><br />romeo&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXDIR=&#8221;/usr/tuxedo&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;APPDIR=&#8221;/usr/home&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ENVFILE=&#8221;/usr/home/ENVFILE&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGDEVICE=&#8221;/usr/home/TLOG&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGNAME=TLOG<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXCONFIG=&#8221;/usr/home/tuxconfig&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=&#8221;SEQUENT&#8221;<br /><br />juliet&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE3<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXDIR=&#8221;/usr/tuxedo&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;APPDIR=&#8217;/usr/home&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ENVFILE=&#8221;/usr/home/ENVFILE&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGDEVICE=&#8221;/usr/home/TLOG&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TLOGNAME=TLOG<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TUXCONFIG=&#8221;/usr/home/tuxconfig&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TYPE=&#8221;AMDAHL&#8221;<br /></pre></div></ul></div>
<h3 class="pHeading2"><a name="wp1016993"> </a>
GROUPS and NETWORK Sections
</h3>
<p class="pBody"><a name="wp1015521"> </a>
The <code class="cCode">GROUPS</code> and <code class="cCode">NETWORK</code> sections shown in <a href="admtrx.html#wp1020171">Listing&#160;5-3</a> specify the following parameters:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1015522"> </a>The <code class="cCode">TMSCOUNT</code> is set to 2, which means that only two <code class="cCode">TMS_SQL</code> transaction manager servers will be booted per group.</li>
<li><a name="wp1015523"> </a>The <code class="cCode">OPENINFO</code> string indicates that the application will perform database access.</li>
<div class="pCodeTitle"><a name="wp1020171"> </a>
Listing&#160;5-3	   Sample GROUPS and NETWORK Sections 
</div> <a name="wp1015524"> </a><div class="pPreformatted"><pre>*GROUPS<br />DEFAULT:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TMSNAME=TMS_SQL&#160;&#160;&#160;&#160;&#160;&#160;&#160;TMSCOUNT=2<br />BANKB1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRPNO=1<br /> OPENINFO=&#8221;TUXEDO/SQL:/usr/home/bankdl1:bankdb:readwrite&#8221;<br />BANKB2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRPNO=2<br /> OPENINFO=&#8221;TUXEDO/SQL:/usr/home/bankdl2:bankdb:readwrite&#8221;<br />BANKB3&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LMID=SITE3&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GRPNO=3<br /> OPENINFO=&#8221;TUXEDO/SQL:/usr/home/bankdl3:bankdb:readwrite&#8221;<br /><br />*NETWORK<br />SITE1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NADDR=&#8221;0X0002ab117B2D4359&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BRIDGE=&#8221;/dev/tcp&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NLSADDR=&#8221;0X0002ab127B2D4359&#8221;<br /><br />SITE2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NADDR=&#8221;0X0002ab117B2D4360&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BRIDGE=&#8221;/dev/tcp&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NLSADDR=&#8221;0X0002ab127B2D4360&#8221;<br /><br />SITE3&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NADDR=&#8221;0X0002ab117B2D4361&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;BRIDGE=&#8221;/dev/tcp&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NLSADDR=&#8221;0X0002ab127B2D4361&#8221;<br /></pre></div></ul></div>
<h3 class="pHeading2"><a name="wp1017067"> </a>
SERVERS, SERVICES, and ROUTING Sections
</h3>
<p class="pBody"><a name="wp1015546"> </a>
The <code class="cCode">SERVERS</code>, <code class="cCode">SERVICES</code>, and <code class="cCode">ROUTING </code>sections shown in <a href="admtrx.html#wp1020178">Listing&#160;5-4</a> specify the following parameters:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1015547"> </a>The <code class="cCode">TLR</code> servers have a <code class="cCode">-T number</code> passed to their <code class="cCodeEmphasis">tpsrvrinit() </code>functions.</li>
<li><a name="wp1015548"> </a>All requests for the services are routed on the <code class="cCode">ACCOUNT_ID</code> field.</li>
<li><a name="wp1015549"> </a>None of the services will be performed in <code class="cCode">AUTOTRAN</code> mode.</li>
<div class="pCodeTitle"><a name="wp1020178"> </a>
Listing&#160;5-4	   Sample SERVERS, SERVICES, and ROUTING Sections
</div> <a name="wp1015550"> </a><div class="pPreformatted"><pre>*SERVERS<br />DEFAULT: RESTART=Y MAXGEN=5 REPLYQ=N CLOPT=&#8221;-A&#8221;<br />TLR&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1    SRVID=1    CLOPT=&#8221;-A -- -T 100&quot;<br />TLR&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2    SRVID=3    CLOPT=&#8221;-A -- -T 400&quot;<br />TLR&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB3    SRVID=4    CLOPT=&#8221;-A -- -T 700&quot;<br />XFER&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB1    SRVID=5    REPLYQ=Y<br />XFER&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB2    SRVID=6    REPLYQ=Y<br />XFER&#160;&#160;&#160;&#160;&#160;SRVGRP=BANKB3    SRVID=7    REPLYQ=Y<br /><br />*SERVICES<br />DEFAULT:&#160;&#160;&#160;&#160;AUTOTRAN=N<br />WITHDRAW&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ROUTING=ACCOUNT_ID<br />DEPOSIT&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ROUTING=ACCOUNT_ID<br />TRANSFER&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ROUTING=ACCOUNT_ID<br />INQUIRY&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ROUTING=ACCOUNT_ID<br /><br />*ROUTING<br />ACCOUNT_ID      FIELD=ACCOUNT_ID     BUFTYPE=&#8221;FML&#8221;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RANGES=&#8221;MON - 9999:*,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;10000 - 39999:BANKB1<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;40000 - 69999:BANKB2<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;70000 - 100000:BANKB3<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#8220;&#8221;</pre></div></ul></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="admtrx.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="trxcrbcl.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<img id="LongDescNotReq10" src="/global_resources/images/nexttop_disabled.gif" border="0" alt="Next" />
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
