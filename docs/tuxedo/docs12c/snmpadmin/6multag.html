<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/snmpadmin/fm/6multag.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:43:07" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Using Multiple SNMP Agents</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">SNMP Agent Administration Guide
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="5agintg.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="7polling.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/snmpadmin.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp58919"> </a>
Using Multiple SNMP Agents
</h1>
<p class="pBody"><a name="wp57079"> </a>
The following sections describe how to use the Oracle SNMP Agent Integrator component with other SNMP agents:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp57082"> </a><a href="6multag.html#wp59050">Configuring the Oracle SNMP Agent Integrator for Use with Multiple SNMP Agents</a></li>
<li><a name="wp57087"> </a><a href="6multag.html#wp57108">Integrator Access to Managed Objects</a></li>
<li><a name="wp59048"> </a><a href="6multag.html#wp57136">SNMP Agents on Multiple Nodes</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp59050"> </a>
Configuring the Oracle SNMP Agent Integrator for Use with Multiple SNMP Agents
</h2><p class="pBody"><a name="wp57095"> </a>
An Oracle SNMP agent started as an SNMP agent&#8212;started with the <code class="cCode">-s</code> option&#8212;and running under the Oracle SNMP Agent Integrator is known as a <em class="cEmphasis">non-SMUX peer agent</em>. A non-SMUX peer agent must be started before starting the Oracle SNMP Agent Integrator.
</p>
<p class="pBody"><a name="wp57097"> </a>
Each non-SMUX peer agent running on the managed node must have one or more <code class="cCode">NON_SMUX_PEER</code> entries in the Oracle SNMP Agent <code class="cCode">beamgr.conf</code> configuration file. The syntax of <code class="cCode">NON_SMUX_PEER</code> entries is described in <a href="9cnfgfl.html">Configuration Files</a>.
</p>
<a name="wp57222"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>&#8220;Non-SMUX peer agent&#8221; and &#8220;peer SNMP agent&#8221; are identical terms. A non-SMUX peer agent, or a peer SNMP agent, is an SNMP agent running under the Oracle SNMP Agent Integrator.</td>
</tr>
</table>

<p class="pBody"><a name="wp57105"> </a>
Each <code class="cCode">NON_SMUX_PEER</code> entry lists the port that the Oracle SNMP Agent Integrator is to use in communicating with the non-SMUX peer agent. When the agent is started, it must be configured to listen on the port assigned to it in the <code class="cCode">NON_SMUX_PEER</code> entry (or entries) in the <code class="cCode">beamgr.conf</code> file.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp57108"> </a>
Integrator Access to Managed Objects
</h2><p class="pBody"><a name="wp57109"> </a>
Each <code class="cCode">NON_SMUX_PEER</code> entry for a non-SMUX peer agent lists a branch of the OID tree for which the agent is responsible. If agent A is listed as responsible for a certain branch of the OID tree, then management requests for objects within that branch will be passed on to agent A by the Oracle SNMP Agent Integrator.
</p>
<h3 class="pHeading2"><a name="wp57110"> </a>
Example
</h3>
<p class="pBody"><a name="wp57112"> </a>
For example:
</p>
<p class="pBody"><a name="wp57113"> </a>
<code class="cCode">NON_SMUX_PEER 2001 snmp .1.3.6.1.2.1.1,ro<br />NON_SMUX_PEER 2002 squid .1.3.6.1.4.1.141 .1.3.6.1.4.1.145<br />NON_SMUX_PEER 161 * .1.3.6.1.4.1.140 .1.3.6.1.4.1.145</code>
</p>
<p class="pBody"><a name="wp57114"> </a>
The first entry tells the Oracle SNMP Agent Integrator to look for an SNMP agent at port 2001. All the requests from the Oracle SNMP Agent Integrator to this SNMP agent will use <code class="cCode">snmp</code> as the community. The agent supports the subtree <code class="cCode">.1.3.6.1.2.1.1,</code> and is available for read-only commands.
</p>
<p class="pBody"><a name="wp57115"> </a>
The second entry tells the Oracle SNMP Agent Integrator to look for an SNMP agent at UDP port 2002. All the requests from the Oracle SNMP Agent Integrator to this SNMP agent will use<span style="font-style: italic"> </span><code class="cCode">squid</code> as the community. The agent supports the subtrees <code class="cCode">.1.3.6.1.4.1.141</code> and <code class="cCode">.1.3.6.1.4.1.145</code>. Because no access option is specified, both subtrees default to read-write.
</p>
<p class="pBody"><a name="wp57116"> </a>
The third entry lists an agent at UDP port 161. The asterisk means that the Oracle SNMP Agent Integrator uses the community string supplied by the management station. The agent supports two subtrees: <code class="cCode">.1.3.6.1.4.1.140</code> and <code class="cCode">.1.3.6.1.4.1.145</code>. The subtree entries list no access information, so access defaults to read-write.
</p>
<a name="wp57118"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The SMUX protocol provides that SMUX subagents automatically register the sections of the OID tree that they support with the master agent. Hence, it is not necessary to add specific configuration file entries to specify which sections of the OID tree are accessible from the SMUX subagents. However, this default behavior can be overridden using a configuration file <code class="cCode">OID_CLASS</code> entry. For more information about the <code class="cCode">OID_CLASS</code> entry, see <a href="9cnfgfl.html">Configuration Files</a>.</td>
</tr>
</table>

<h3 class="pHeading2"><a name="wp57125"> </a>
Assigning Priority for Conflicting Agents
</h3>
<p class="pBody"><a name="wp57126"> </a>
If two agents, A and B, conflict in the portions of the OID tree for which they are responsible, then the <code class="cCode">NON_SMUX_PEER</code> entries that define these responsibilities must assign a distinct priority to the two agents. The Oracle SNMP Agent Integrator thus refers requests for objects in the overlapping area to the agent with the lowest priority number. (The lower the priority number, the higher the priority.) For example:
</p>
<p class="pBody"><a name="wp57127"> </a>
<code class="cCode">NON_SMUX_PEER 2008 * .1.3.6.1.2.1.4,rw,8<br />NON_SMUX_PEER 2009 * .1.3.6.1.2.1.4,ro,5</code>
</p>
<p class="pBody"><a name="wp57129"> </a>
In this example, the agents on UDP port 2008 and UDP port 2009 both support the MIB-II <code class="cCode">ip</code> group. Thus, both agents support the <code class="cCode">ipAddrTable</code> (object <code class="cCode">.1.3.6.1.2.1.4.20</code>). Because the agent at port 2009 has a higher priority (5 is a higher priority than 8), the Oracle SNMP Agent Integrator calls it for management requests for the <code class="cCode">ipAddrTable</code>. Notice that this entry specifies read-only access. The other entry specifies read-write access, but because it has a lower priority, it is completely ignored for <code class="cCode">ipAddrTable</code> requests.
</p>
<p class="pBody"><a name="wp57130"> </a>
The syntax of the <code class="cCode">NON_SMUX_PEER</code> entry in the configuration file is described in detail, with examples, in <a href="9cnfgfl.html">Configuration Files</a>.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp57136"> </a>
SNMP Agents on Multiple Nodes
</h2><p class="pBody"><a name="wp57139"> </a>
The Oracle SNMP Agent Integrator can be used as a proxy agent for the management station, conducting polling of SNMP agents on a number of machines, and sending an enterprise-specific trap when a user-defined condition is encountered. This is useful when resources of a single distributed system are spread over a number of machines.
</p>
<p class="pBody"><a name="wp57141"> </a>
From the perspective of the Oracle SNMP Agent Integrator, the resources managed by these multiple agents are viewed as though they were on a single machine. The polling capability of Oracle SNMP Agent Integrator is described in <a href="7polling.html">Using the Oracle SNMP Agent Integrator for Polling</a>. Polling of agents on multiple machines assumes that <code class="cCode">NON_SMUX_PEER</code> entries have been defined for these SNMP agents in the Oracle SNMP Agent <code class="cCode">beamgr.conf</code> configuration file. The following is an example where the Oracle SNMP Agent Integrator is used as a proxy agent for communication with SNMP agents in a single subnet:
</p>
<p class="pBody"><a name="wp57148"> </a>
<code class="cCode">NON_SMUX_PEER 206.189.39.86.161 seahorse .1.3.6.1.2.1.4,rw,8<br />NON_SMUX_PEER 206.189.39.204.161 * \<br />.1.3.6.1.2.1.4.20,ro,5 .1.3.6.1.2.1.2</code>
</p>
<p class="pBody"><a name="wp57149"> </a>
In this example, the SNMP agent on machine <code class="cCode">206.189.39.86</code> communicates with the Oracle SNMP Agent Integrator on port 161, uses a community string of <code class="cCode">seahorse</code>, and is responsible for the MIB-II <code class="cCode">ip</code> group. The SNMP agent on machine <code class="cCode">206.189.39.204</code> also communicates with the Oracle SNMP Agent Integrator on port 161, using the community string passed from the SNMP manager.
</p>
<p class="pBody"><a name="wp57152"> </a>
The machine at IP address <code class="cCode">206.189.39.204</code> is responsible for the SNMP interfaces group (<code class="cCode">.1.3.6.1.2.1.2)</code> as well as the <code class="cCode">ipAddrTable</code> (<code class="cCode">.1.3.6.1.2.1.4.20</code>). The machine at IP address <code class="cCode">206.189.39.86</code> is responsible for the MIB-II <code class="cCode">ip</code> group that includes the <code class="cCode">ipAddrTable</code>. Even though these agents are on physically distinct network nodes, there is still a conflict in the responsibilities of these two agents, as far as the integrator is concerned, because the integrator views the resources managed by the agents specified in its configuration file as though they were all on a single machine. Thus, the Oracle SNMP Agent Integrator only consults the machine at <code class="cCode">206.189.39.204</code> for management requests for the <code class="cCode">ipAddrTable</code> because the priority number for this entry is lower than the priority number for the machine at <code class="cCode">206.189.39.86.</code> However, all other <code class="cCode">ip</code> group requests and requests for the interfaces group are sent to <code class="cCode">206.189.39.86</code>.
</p>
<p class="pBody"><a name="wp57153"> </a>
This feature of the Oracle SNMP Agent Integrator is particularly useful when different functions of a distributed system are located on different machines, each with its own SNMP agent. The limitation to non-overlapping OID tree branches should not be a significant problem when different managed resources are located on the distinct nodes. If the same type of managed resource is located on multiple machines, then multiple Oracle SNMP Agent Integrators can be used to manage those resources.
</p>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="6multag.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="5agintg.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="7polling.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
