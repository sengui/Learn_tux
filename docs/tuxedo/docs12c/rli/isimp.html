<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/rli/fm/isimp.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:36:18" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>InterceptorSimp Sample Interceptors</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Using CORBA Request-Level Interceptors
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="pquery.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="isec.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/rli.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1025306"> </a>
InterceptorSimp Sample Interceptors
</h1>
<p class="pBody"><a name="wp1024191"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1024194"> </a><a href="isimp.html#wp1024207">How the PersonQuery Sample Interceptors Work</a></li>
<li><a name="wp1024198"> </a><a href="isimp.html#wp1024217">Registering and Running the PersonQuery Interceptors</a></li>
<li><a name="wp1024435"> </a><a href="isimp.html#wp1024278">Examining the Output of the Interceptors</a></li>
<li><a name="wp1024440"> </a><a href="isimp.html#wp1024291">Unregistering the Interceptors</a></li>
</ul></div>
<p class="pBody"><a name="wp1024200"> </a>
Before trying out the steps described in this chapter, make sure you have completed all the steps described in <a href="pquery.html">PersonQuery Sample Application.</a>
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1024207"> </a>
How the PersonQuery Sample Interceptors Work
</h2><p class="pBody"><a name="wp1024209"> </a>
The InterceptorSimp sample interceptor shows how the operation in a request passed to an interceptor can be accessed via a RequestContext object. When the InterceptorSimp sample intercepts a request, the interceptor does the following:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1024210"> </a>Writes the operation name out to a data file, but does not interpret or modify the parameters in the request</li>
<li><a name="wp1024211"> </a>Returns appropriate status from the interceptor methods</li>
</ul></div>
<p class="pBody"><a name="wp1024212"> </a>
Assuming a successful call to the interceptor, the client invocation is passed onto the target object and serviced in the usual way. Thus the InterceptorSimp sample interceptor shows the following:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1024213"> </a>An implementation of a basic monitoring service, which simply tracks each operation on the target object that has been invoked.</li>
<li><a name="wp1024214"> </a>How an interceptor can identify the operation contained in the request by accessing the parameters passed by the ORB to the interceptor methods.</li>
</ul></div>
<p class="pBody"><a name="wp1024215"> </a>
The InterceptorSimp sample interceptor also shows two different interceptors being defined and registered, but implemented in a single source file. In this example, the client and target interceptors are registered separately, with the client interceptor initialized first.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1024217"> </a>
Registering and Running the PersonQuery Interceptors
</h2><p class="pBody"><a name="wp1024221"> </a>
When you run the makefile that builds the PersonQuery sample application in <a href="pquery.html">PersonQuery Sample Application,</a> the entire set of sample interceptors are built as well, including the InterceptorSimp interceptor. This section describes how to register the InterceptorSimp interceptor so that it works with PersonQuery application at run time.
</p>
<p class="pBody"><a name="wp1024227"> </a>
To register and run the InterceptorSimp client and server interceptors:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1024228"> </a>Change directory to the InterceptorSimp sample directory, where <code class="cCodeEmphasis">workdirectory</code> represents the name of the directory into which you copied the interceptor sample applications in <a href="pquery.html"><span class="cHyperlink">
PersonQuery Sample Application.</span></a></li>
<p class="pBodyRelative"><a name="wp1024232"> </a>
<b class="cBold">Windows 2003</b>
</p>
<a name="wp1024233"> </a><div class="pPreformatted"><pre>&gt; cd &lt;<code class="cCodeEmphasis">workdirectory</code>&gt;\cxx\simple_cxx</pre></div><p class="pBodyRelative"><a name="wp1024234"> </a>
<b class="cBold">UNIX</b>
</p>
<a name="wp1024235"> </a><div class="pPreformatted"><pre>$ cd &lt;<code class="cCodeEmphasis">workdirectory</code>&gt;/cxx/simple_cxx</pre></div><li><a name="wp1024236"> </a>Register the interceptor:</li>
<p class="pBodyRelative"><a name="wp1024237"> </a>
<b class="cBold">Windows 2003</b>
</p>
<a name="wp1024238"> </a><div class="pPreformattedRelative"><pre>&gt; nmake -f makefile.nt config</pre></div><p class="pBodyRelative"><a name="wp1024239"> </a>
<b class="cBold">UNIX</b>
</p>
<a name="wp1024240"> </a><div class="pPreformattedRelative"><pre>$ make -f makefile.mk config</pre></div><li><a name="wp1024241"> </a>Boot the CORBA server and run the client:</li>
<p class="pBodyRelative"><a name="wp1024242"> </a>
<b class="cBold">Windows 2003</b>
</p>
<a name="wp1024243"> </a><div class="pPreformatted"><pre>&gt; cd &lt;<code class="cCodeEmphasis">workdirectory</code>&gt;\cxx\app_cxx<br />&gt; tmboot -y<br />&gt; PersonQueryClient</pre></div><p class="pBodyRelative"><a name="wp1024244"> </a>
<b class="cBold">UNIX</b>
</p>
<a name="wp1024245"> </a><div class="pPreformatted"><pre>&gt; cd &lt;<code class="cCodeEmphasis">workdirectory</code>&gt;/cxx/app_cxx<br />&gt; tmboot -y<br />&gt; PersonQueryClient</pre></div><li><a name="wp1024246"> </a>Perform any number of invocations using the PersonQuery client application, using the command syntax described in <a href="pquery.html">PersonQuery Sample Application.</a></li>
<li><a name="wp1024250"> </a>Stop the PersonQuery application:</li>
<a name="wp1024251"> </a><div class="pPreformatted"><pre>&gt; tmshutdown -y</pre></div></ol></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1024278"> </a>
Examining the Output of the Interceptors
</h2><p class="pBody"><a name="wp1024281"> </a>
The output from the simple client interceptor is in files named with the following syntax:
</p>
<a name="wp1024282"> </a><div class="pPreformatted"><pre>InterceptorSimpClient<code class="cCodeEmphasis">xxxx</code>.out</pre></div><p class="pBody"><a name="wp1024283"> </a>
In the preceding syntax line, <code class="cCodeEmphasis">xxxx</code> represents the process ID of the executable within which the interceptor ran. For example, there are three <code class="cCode">InterceptorSimpClient</code><code class="cCodeEmphasis">xxx</code><code class="cCode">.out</code> files; one each for the following:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1024284"> </a>The FactoryFinder, TMFFNAME</li>
<li><a name="wp1024285"> </a>The PersonQueryServer</li>
<li><a name="wp1024286"> </a>The PersonQueryClient</li>
</ul></div>
<p class="pBody"><a name="wp1024287"> </a>
The content of each file varies according to how the ORB interacted with the executable.  For example, target interceptors run on servers and client interceptors run on clients, so the InterceptorSimpClient log files typically have very little output from the target interceptor, but it has more output from the client interceptor.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1024291"> </a>
Unregistering the Interceptors
</h2><p class="pBody"><a name="wp1024292"> </a>
After you have run the PersonQuery sample application with the InterceptorSimp sample interceptors, you can unregister those interceptors using the following steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1024293"> </a>Shut down all running CORBA applications by entering the following command:</li>
<a name="wp1024294"> </a><div class="pPreformattedRelative"><pre>&gt; tmshutdown -y</pre></div><li><a name="wp1024295"> </a>Unregister the interceptors.</li>
</ol></div>
<h3 class="pHeading2"><a name="wp1024296"> </a>
Unregistering the Interceptors
</h3>
<p class="pBody"><a name="wp1024297"> </a>
To unregister the InterceptorSimp client and server interceptors:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1024298"> </a>Change directory to the InterceptorSimp sample directory, where <code class="cCodeEmphasis">workdirectory</code> represents the name of the directory into which you copied the interceptor sample applications in <a href="pquery.html">Chapter&#160;, &quot;PersonQuery Sample Application:&quot;</a></li>
<p class="pBodyRelative"><a name="wp1024302"> </a>
<b class="cBold">Windows 2003</b>
</p>
<a name="wp1024303"> </a><div class="pPreformattedRelative"><pre>&gt; cd &lt;<code class="cCodeEmphasis">workdirectory</code>&gt;\cxx\simple_cxx</pre></div><p class="pBodyRelative"><a name="wp1024304"> </a>
<b class="cBold">UNIX</b>
</p>
<a name="wp1024305"> </a><div class="pPreformattedRelative"><pre>$ cd &lt;<code class="cCodeEmphasis">workdirectory</code>&gt;/cxx/simple_cxx</pre></div><li><a name="wp1024306"> </a>Unregister the interceptors:</li>
<p class="pBodyRelative"><a name="wp1024307"> </a>
<b class="cBold">Windows 2003</b>
</p>
<a name="wp1024308"> </a><div class="pPreformattedRelative"><pre>&gt; nmake -f makefile.nt unconfig</pre></div><p class="pBodyRelative"><a name="wp1024309"> </a>
<b class="cBold">UNIX</b>
</p>
<a name="wp1024310"> </a><div class="pPreformattedRelative"><pre>$ make -f makefile.mk unconfig</pre></div></ol></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="isimp.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="pquery.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="isec.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
