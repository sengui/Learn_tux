<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="41263" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux11gr1/rli/fm/cppimpl.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="11/28/11 08:36:19" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Starter Request-Level Interceptor Files</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Using CORBA Request-Level Interceptors
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="api.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next_grey1.gif" border="0" alt="Next" />&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/rli.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1006414"> </a>
Starter Request-Level Interceptor Files
</h1>
<p class="pBody"><a name="wp1006111"> </a>
This appendix contains the following code that you can use as a place to start implementing your  interceptors:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1006112"> </a><a href="cppimpl.html#wp1006115">Starter Implementation Code</a></li>
<li><a name="wp1006113"> </a><a href="cppimpl.html#wp1006117">Starter Header File Code</a></li>
</ul></div>
<p class="pBody"><a name="wp1006114"> </a>
If you use this code, replace the string <code class="cCodeEmphasis">YourInterceptor</code> with the name of the interceptor you are implementing.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1006115"> </a>
Starter Implementation Code
</h2><a name="wp1007559"> </a><div class="pPreformatted"><pre>#if defined(WIN32)<br />#include &lt;windows.h&gt;<br />#endif<br /><br />#include &lt;ctype.h&gt;<br /><br /><br />#include &quot;<code class="cCodeEmphasis">YourInterceptor</code>.h&quot;<br /><br />// Cleanup class -- suggested<br />class Cleanup<br />{<br />&#160;&#160;&#160;&#160;public:<br />&#160;&#160;&#160;&#160;Cleanup() {}<br />&#160;&#160;&#160;&#160;~Cleanup()<br />&#160;&#160;&#160;&#160;{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />&#160;&#160;&#160;&#160;}<br />};<br />static Cleanup CleanupOnImageExit;<br /><br />#define SECURITY_BUFFSIZE&#160;&#160;&#160;100<br /><br />#if defined(WIN32)<br />// suggestion for standard DLL processing<br /><br />BOOL WINAPI DllMain( HANDLE hDLL,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DWORD  dwReason,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LPVOID lpReserved )<br />{<br />&#160;&#160;&#160;&#160;switch( dwReason )<br />&#160;&#160;&#160;&#160;{<br />&#160;&#160;&#160;&#160;case DLL_PROCESS_ATTACH:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br />&#160;&#160;&#160;&#160;case DLL_PROCESS_DETACH:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br />&#160;&#160;&#160;&#160;case DLL_THREAD_ATTACH:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br />&#160;&#160;&#160;&#160;case DLL_THREAD_DETACH:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br />&#160;&#160;&#160;&#160;}<br /><br />&#160;&#160;&#160;&#160;// Return that the operation was successful<br />&#160;&#160;&#160;&#160;return( TRUE );<br />&#160;&#160;&#160;&#160;}<br />#endif  /* WIN32 */<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Init<br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /> <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Initialization routine called by the ORB during initialization.<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;This routine will create and return instances of the <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RequestLevelInterceptor classes that it supports.<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NOTE: An interceptor library can support more than one set of <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;interceptors by supplying multiple initialization entry points <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(each initialization entry must be separately registered with the <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ORB) Also, it is legal for only one kind of interceptor to be <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;supplied (i.e. only a client or only a target.)<br /><br />***************************************************************/<br />#ifdef  WIN32<br />extern &quot;C&quot; __declspec(dllexport) void __cdecl<br />#else<br />extern &quot;C&quot; void<br />#endif<br /><code class="cCodeEmphasis">YourInterceptor</code>Init(<br />&#160;&#160;&#160;&#160;CORBA::ORB_ptr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;TheORB,<br />&#160;&#160;&#160;&#160;RequestLevelInterceptor::ClientRequestInterceptor ** ClientPtr,<br />&#160;&#160;&#160;&#160;RequestLevelInterceptor::TargetRequestInterceptor ** TargetPtr,<br />&#160;&#160;&#160;&#160;CORBA::Boolean *&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RetStatus)<br />{<br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Client constructor<br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /> <br />***************************************************************/<br /><code class="cCodeEmphasis">YourInterceptor</code>Client::<code class="cCodeEmphasis">YourInterceptor</code>Client(CORBA::ORB_ptr TheOrb) <br />{<br />&#160;&#160;&#160;&#160;// This next line is useful, but not absolutely necessary.<br /><br />&#160;&#160;&#160;&#160;m_orb = TheOrb;<br /><br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt; <br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Client::shutdown<br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /> <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;The shutdown operation is used by the ORB to notify an <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;implementation of an interceptor that the interceptor <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;is being shutdown. The ORB will destroy the instance <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;of the interceptor once control is returned from the<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;operation back to the ORB.<br /><br />***************************************************************/<br /><br />Interceptors::ShutdownReturnStatus <code class="cCodeEmphasis">YourInterceptor</code>Client::shutdown(<br />&#160;&#160;&#160;&#160;Interceptors::ShutdownReason&#160;&#160;&#160;&#160;reason,<br />&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;excep_val)<br />{<br />&#160;&#160;&#160;&#160;// The following lines are a suggestion only. Replace them if you wish.<br /><br />&#160;&#160;&#160;&#160;Interceptors::ShutdownReturnStatus ret_status = Interceptors::SHUTDOWN_NO_EXCEPTION;<br />&#160;&#160;&#160;&#160;switch (reason)<br />&#160;&#160;&#160;&#160;{<br />&#160;&#160;&#160;&#160;case Interceptors::ORB_SHUTDOWN:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br />&#160;&#160;&#160;&#160;case Interceptors::CONNECTION_ABORTED:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br />&#160;&#160;&#160;&#160;case Interceptors::RESOURCES_EXCEEDED:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br />&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;return ret_status;<br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Client::id<br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;The id accessor operation is used by the ORB to obtain <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the vendor assigned identity of the interceptor as a string <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;value. This attribute is used primarily for debugging and <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tracing of operations on the interceptors called by the ORB.<br /> <br />***************************************************************/<br />CORBA::String <code class="cCodeEmphasis">YourInterceptor</code>Client::id()<br />{<br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />&#160;&#160;&#160;&#160;// The next line is a possible implementation that is useful<br />&#160;&#160;&#160;&#160;return CORBA::string_dup(&quot;<code class="cCodeEmphasis">YourInterceptor</code>Client&quot;);<br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Client::exception_occurred <br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;The exception_occurred operation is called on a request-level<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;interceptor implementation when an exception occurs.<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;It is called instead of the &lt;xxx&gt;_response <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;method of that interceptor. The ORB calls this operation to <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;allow the interceptor implementation to clean-up any state <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;that it might have been managing that is specific to a request.<br /> <br />***************************************************************/<br />void <code class="cCodeEmphasis">YourInterceptor</code>Client::exception_occurred (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::ReplyContext &amp;&#160;&#160;&#160;reply_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;excep_val)<br />{<br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Client::client_invoke<br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;This operation is called by the ORB anytime that an <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;invocation is being sent to a target object, regardless <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;of whether the target object is in a different address <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;space or the same address space as the target object.<br /><br />***************************************************************/<br />Interceptors::InvokeReturnStatus <code class="cCodeEmphasis">YourInterceptor</code>Client::client_invoke (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::RequestContext &amp;&#160;&#160;&#160;request_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RequestLevelInterceptor::ServiceContextList_ptr&#160;&#160;&#160;service_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataInputStream_ptr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;request_arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataOutputStream_ptr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reply_arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;excep_val)<br />{<br />&#160;&#160;&#160;&#160;// The next line is a suggestion that works in conjunction with the last line below<br /><br />&#160;&#160;&#160;&#160;Interceptors::InvokeReturnStatus ret_status = Interceptors::INVOKE_NO_EXCEPTION;<br />&#160;&#160;&#160;&#160;<br /><br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br />&#160;&#160;&#160;&#160;<br /><br />&#160;&#160;&#160;&#160;return ret_status;<br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Client::client_response <br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;The operation is called by the ORB anytime that a reply <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;to an invocation is being received by the initiator of <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the request, regardless of whether the initiator is in <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;a different address space or the same address space as <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the target object.<br />&#160;&#160;<br />***************************************************************/<br />Interceptors::ResponseReturnStatus <code class="cCodeEmphasis">YourInterceptor</code>Client::client_response (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::ReplyContext &amp;&#160;&#160;&#160;&#160;&#160;reply_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RequestLevelInterceptor::ServiceContextList_ptr&#160;&#160;&#160;service_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataInputStream_ptr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;excep_val)<br />{<br />&#160;&#160;&#160;&#160;// The next line is a suggestion that works in conjunction with the last line below<br /><br />&#160;&#160;&#160;&#160;// See the examples for other suggestions of general use<br /><br />&#160;&#160;&#160;&#160;Interceptors::ResponseReturnStatus ret_status = Interceptors::RESPONSE_NO_EXCEPTION;<br /><br />&#160;&#160;&#160;&#160;<br /><br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />&#160;&#160;&#160;&#160;<br /><br />&#160;&#160;&#160;&#160;return ret_status;<br /><br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Target constructor<br /> <br />&#160;&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:  <br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;This function constructs the target interceptor instance.<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;This example provides data members that could be used to<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;implement a security interceptor.<br />&#160;&#160;<br />***************************************************************/<br /><code class="cCodeEmphasis">YourInterceptor</code>Target::<code class="cCodeEmphasis">YourInterceptor</code>Target(CORBA::ORB_ptr TheOrb) :<br />&#160;&#160;&#160;&#160;m_orb(TheOrb),&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// suggestion<br />&#160;&#160;&#160;&#160;m_security_current(0),  // suggestion for security interceptors<br />&#160;&#160;&#160;&#160;m_attributes_to_get(0)  // suggestion for security interceptors<br />{<br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />}<br /><br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Target::shutdown<br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;The shutdown operation is used by the ORB to notify an <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;implementation of an interceptor that the interceptor <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;is being shutdown. The ORB will destroy the instance <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;of the interceptor once control is returned from the<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;operation back to the ORB.<br /> <br />***************************************************************/<br />Interceptors::ShutdownReturnStatus <code class="cCodeEmphasis">YourInterceptor</code>Target::shutdown(<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Interceptors::ShutdownReason&#160;&#160;&#160;&#160;reason,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;excep_val)<br />{<br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br /><br /><br />&#160;&#160;&#160;&#160;// The following lines are a suggestion only. Replace them if you wish.<br /><br />&#160;&#160;&#160;&#160;Interceptors::ShutdownReturnStatus ret_status = Interceptors::SHUTDOWN_NO_EXCEPTION;<br />&#160;&#160;&#160;&#160;switch (reason)<br />&#160;&#160;&#160;&#160;{<br />&#160;&#160;&#160;&#160;case Interceptors::ORB_SHUTDOWN:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br />&#160;&#160;&#160;&#160;case Interceptors::CONNECTION_ABORTED:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br />&#160;&#160;&#160;&#160;case Interceptors::RESOURCES_EXCEEDED:<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br />&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;return ret_status;<br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Target::id<br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;The id accessor operation is used by the ORB to obtain <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the vendor assigned identity of the interceptor as a string <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;value. This attribute is used primarily for debugging and <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tracing of operations on the interceptors called by the ORB.<br /> <br />***************************************************************/<br />CORBA::String <code class="cCodeEmphasis">YourInterceptor</code>Target::id()<br />{<br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />&#160;&#160;&#160;&#160;// The next line is a possible implementation that is useful<br /><br />&#160;&#160;&#160;&#160;return CORBA::string_dup(&quot;<code class="cCodeEmphasis">YourInterceptor</code>Target&quot;);<br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Target::exception_occurred<br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;The exception_occurred operation is called on a request-level<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;interceptor implementation when an exception occurs.<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;It is called instead of the &lt;xxx&gt;_response <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;method of that interceptor. The ORB calls this operation to <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;allow the interceptor implementation to clean-up any state <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;that it might have been managing that is specific to a request.<br /> <br />***************************************************************/<br />void <code class="cCodeEmphasis">YourInterceptor</code>Target::exception_occurred (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::ReplyContext &amp;&#160;&#160;&#160;reply_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;excep_val)<br />{<br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Target::target_invoke <br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;The operation is called by the ORB anytime that an <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;invocation is being received by a target object, <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;regardless of whether the target object is in a <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;different address space or the same address space <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;as the target object.<br /> <br />***************************************************************/<br />Interceptors::InvokeReturnStatus <code class="cCodeEmphasis">YourInterceptor</code>Target::target_invoke (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::RequestContext &amp;&#160;&#160;&#160;&#160;&#160;request_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RequestLevelInterceptor::ServiceContextList_ptr&#160;&#160;&#160;&#160;&#160;service_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataInputStream_ptr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;request_arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataOutputStream_ptr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reply_arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;excep_val)<br />{<br />&#160;&#160;&#160;// The next line is a suggestion that works in conjunction with the last line below<br /><br />&#160;&#160;&#160;&#160;Interceptors::InvokeReturnStatus ret_status = Interceptors::INVOKE_NO_EXCEPTION;<br /><br />&#160;&#160;&#160;&#160;<br /><br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />&#160;&#160;&#160;&#160;<br /><br />&#160;&#160;&#160;&#160;return ret_status;<br /><br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Target::target_response <br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;The operation is called by the ORB anytime that a reply <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;to an invocation is being sent to the initiator of the <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;request, regardless of whether the initiator is in a <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;different address space or the same address space as <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the target object.<br /> <br />***************************************************************/<br />Interceptors::ResponseReturnStatus <code class="cCodeEmphasis">YourInterceptor</code>Target::target_response (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::ReplyContext &amp;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reply_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RequestLevelInterceptor::ServiceContextList_ptr&#160;&#160;&#160;&#160;&#160;service_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataInputStream_ptr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;excep_val)<br />{<br />&#160;&#160;&#160;// The next line is a suggestion that works in conjunction with the last line below<br /><br />&#160;&#160;&#160;&#160;Interceptors::ResponseReturnStatus ret_status = Interceptors::RESPONSE_NO_EXCEPTION;<br /><br />    <br /><br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />&#160;&#160;&#160;&#160;<br /><br />&#160;&#160;&#160;&#160;return ret_status;<br /><br />}<br /><br />/*************************************************************<br /><br />&#160;&#160;&#160;FUNCTION NAME:&#160;&#160;&#160;&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Target destructor<br /> <br />&#160;&#160;&#160;FUNCTIONAL DESCRIPTION:<br /> <br />***************************************************************/<br /><code class="cCodeEmphasis">YourInterceptor</code>Target::~<code class="cCodeEmphasis">YourInterceptor</code>Target()<br />{<br />&#160;&#160;&#160;&#160;// &lt;&lt;&lt;Fill in your code here&gt;&gt;&gt;<br /><br />}</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1006117"> </a>
Starter Header File Code
</h2><a name="wp1006118"> </a><div class="pPreformatted"><pre>#include &lt;CORBA.h&gt;<br />#include &lt;RequestLevelInterceptor.h&gt;<br />#include &lt;security_c.h&gt;&#160;&#160;&#160;&#160;&#160;&#160;//used with security<br /><br />class <code class="cCodeEmphasis">YourInterceptor</code>Client : public virtual RequestLevelInterceptor::ClientRequestInterceptor<br />{<br />private:<br />&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Client() {}<br />&#160;&#160;&#160;&#160;CORBA::ORB_ptr  m_orb;<br />public:<br />&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Client(CORBA::ORB_ptr TheOrb);<br />&#160;&#160;&#160;&#160;~<code class="cCodeEmphasis">YourInterceptor</code>Client() {}<br />&#160;&#160;&#160;&#160;Interceptors::ShutdownReturnStatus shutdown(<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Interceptors::ShutdownReason reason,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp; excep_val);<br />&#160;&#160;&#160;&#160;CORBA::String id();<br />&#160;&#160;&#160;&#160;void exception_occurred (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::ReplyContext &amp; reply_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr excep_val);<br />&#160;&#160;&#160;&#160;Interceptors::InvokeReturnStatus client_invoke (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::RequestContext &amp; request_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RequestLevelInterceptor::ServiceContextList_ptr service_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataInputStream_ptr request_arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataOutputStream_ptr reply_arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp; excep_val);<br />&#160;&#160;&#160;&#160;Interceptors::ResponseReturnStatus client_response (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::ReplyContext &amp; reply_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RequestLevelInterceptor::ServiceContextList_ptr service_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataInputStream_ptr arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp; excep_val);<br />&#160;&#160;&#160;&#160;<br />};<br /><br />class <code class="cCodeEmphasis">YourInterceptor</code>Target : public virtual RequestLevelInterceptor::TargetRequestInterceptor<br />{<br />private:<br />&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Target() {}<br />&#160;&#160;&#160;&#160;CORBA::ORB_ptr  m_orb;<br />&#160;&#160;&#160;&#160;SecurityLevel1::Current_ptr m_security_current;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//used with security<br />&#160;&#160;&#160;&#160;Security::AttributeTypeList * m_attributes_to_get;&#160;&#160;&#160;&#160;//used with security<br />public:<br />&#160;&#160;&#160;&#160;<code class="cCodeEmphasis">YourInterceptor</code>Target(CORBA::ORB_ptr TheOrb);<br />&#160;&#160;&#160;&#160;~<code class="cCodeEmphasis">YourInterceptor</code>Target();<br />&#160;&#160;&#160;&#160;Interceptors::ShutdownReturnStatus shutdown(<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Interceptors::ShutdownReason reason,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp; excep_val);<br />&#160;&#160;&#160;&#160;CORBA::String id();<br />&#160;&#160;&#160;&#160;void exception_occurred (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::ReplyContext &amp; reply_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr excep_val);<br />&#160;&#160;&#160;&#160;Interceptors::InvokeReturnStatus target_invoke (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::RequestContext &amp; request_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RequestLevelInterceptor::ServiceContextList_ptr service_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataInputStream_ptr request_arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataOutputStream_ptr reply_arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp; excep_val);<br />&#160;&#160;&#160;&#160;Interceptors::ResponseReturnStatus target_response (<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const RequestLevelInterceptor::ReplyContext &amp; reply_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;RequestLevelInterceptor::ServiceContextList_ptr service_context,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::DataInputStream_ptr arg_stream,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CORBA::Exception_ptr &amp; excep_val);<br />&#160;&#160;&#160;&#160;<br />};</pre></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="cppimpl.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="api.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<img id="LongDescNotReq10" src="/global_resources/images/nexttop_disabled.gif" border="0" alt="Next" />
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
