<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="3" />
<meta name="LOC_US_CHANGE" content="41998" />
<meta name="LOC_US_SRCFILE" content="//depot/tuxedo/tux12c/ada/fm/adevnt.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="06/28/12 11:40:32" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>About the EventBroker</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Administering an Oracle Tuxedo Application at Run Time
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="adrnet.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="adsevt.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
&nbsp;
<a href="../pdf/ada.pdf" target="pdf"><img id="LongDescNotReq5" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq6" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1019540"> </a>
About the EventBroker
</h1>
<p class="pBody"><a name="wp1018681"> </a>
This topic includes the following sections:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1015514"> </a><a href="adevnt.html#wp1007706">What Is an Event?</a></li>
<li><a name="wp1015515"> </a><a href="adevnt.html#wp1016920">Differences Between Application-defined and System-defined Events</a></li>
<li><a name="wp1015519"> </a><a href="adevnt.html#wp1015305">What Is the EventBroker?</a></li>
<li><a name="wp1013322"> </a><a href="adevnt.html#wp1012981">How the EventBroker Works</a></li>
<li><a name="wp1013354"> </a><a href="adevnt.html#wp1009322">What Are the Benefits of Brokered Events?</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1007706"> </a>
What Is an Event?
</h2><p class="pBody"><a name="wp1013093"> </a>
An event is a state change or other occurrence in a running application (such as a network connection being dropped) that may require intervention by an operator, an administrator, or the software. The Oracle Tuxedo system reports two types of events:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1015668"> </a><span style="font-style: normal">System-defined events</span>&#8212;which are situations (primarily failures) defined by the Oracle Tuxedo system, such as the exceeding of certain system capacity limits, server terminations, security violations, and network failures.</li>
<li><a name="wp1019803"> </a><span style="font-style: normal">Application-defined events</span>&#8212;which are situations defined by a customer application, such as the ones listed in <a href="adevnt.html#wp1019973">Table&#160;5-1</a>.</li>
<p class="pGraphic"><a name="wp1019835"> </a>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1019973table1019804"><caption><a name="wp1019973"> </a>
Table 5-1  Application-defined Events

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1019806"> </a>
In an application for this type of business . . .
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1019808"> </a>
An occurrence of this situation may be defined as an &#8220;event&#8221; . . .
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1019810"> </a>
Stock brokerage
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1019812"> </a>
A stock is traded at or above a specified price.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="straddledcells" colspan="1" rowspan="2"><div class="pCellBody"><a name="wp1019814"> </a>
Banking
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1019816"> </a>
A withdrawal or deposit above a specified amount is made.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1019820"> </a>
The cash available in an ATM machine drops below a specified amount.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1019822"> </a>
Manufacturing
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1019824"> </a>
An item is out of stock.
</div>
</td>
</tr>
</table>
</div>

</p>
</ul></div>
<p class="pBody"><a name="wp1019825"> </a>
<em class="cEmphasis">Application events</em> are occurrences of application-defined events, and <em class="cEmphasis">system events</em> are occurrences of system-defined events. Both application and system events are received and distributed by the Oracle Tuxedo EventBroker component.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1016920"> </a>
Differences Between Application-defined and System-defined Events
</h2><p class="pBody"><a name="wp1016717"> </a>
Application-defined events are defined by application designers and are therefore application specific. Any of the events defined for an application may be tracked by the client and server processes running in the application.
</p>
<p class="pBody"><a name="wp1018034"> </a>
System-defined events are defined by the Oracle Tuxedo system code and are generally associated with objects defined in <a href="../rf5/rf5.html">TM_MIB(5)</a>. A complete list of system-defined events is published on the <a href="../rf5/rf5.html">EVENTS(5)</a> reference page. Any of these events may be tracked by users of the Oracle Tuxedo system.
</p>
<p class="pBody"><a name="wp1016258"> </a>
The Oracle Tuxedo EventBroker posts both application-defined and system-defined events, and an application can subscribe to events of both types. The two types of events can be distinguished by their names: the names of system-defined events begin with a dot (&#160;.&#160;); the names of application-specific events cannot begin with a dot ( . ).
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1015305"> </a>
What Is the EventBroker?
</h2><p class="pBody"><a name="wp1018123"> </a>
The Oracle Tuxedo EventBroker is a tool that provides asynchronous routing of application events among the processes running in a Oracle Tuxedo application. It also distributes system events to whichever application processes want to receive them.
</p>
<p class="pBody"><a name="wp1017782"> </a>
The EventBroker performs the following tasks:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1010970"> </a>Monitors events and notifies subscribers when events are posted via <a href="../rf3c/rf3c.html">tppost(3c)</a>.</li>
<li><a name="wp1010971"> </a>Keeps an administrator informed of changes in an application.</li>
<li><a name="wp1010972"> </a>Provides a system-wide summary of events.</li>
<li><a name="wp1010961"> </a>Provides a tool through which an event can trigger a variety of notification activities.</li>
<li><a name="wp1013448"> </a>Provides a filtering capability, providing additional conditions to the posted event&#8217;s buffer.</li>
</ul></div>
<a name="wp1011266"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>For a sample application that you can copy and run as a demo, see <span class="cHyperlink">
&#8220;Tutorial for </span><a href="../tutor/tutba.html"></a>bankapp, a Full C Application&#8221; in <em class="cEmphasis">Tutorials for Developing  Oracle Tuxedo ATMI Applications</em>.</td>
</tr>
</table>

<p class="pBody"><a name="wp1015214"> </a>
The EventBroker recognizes over 100 meaningful state transitions to a MIB object as system events. A posting for a system event includes the current MIB representation of the object on which the event occurred and some event-specific fields that identify the event that occurred. For example, if a machine is partitioned, an event is posted with the following:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1015215"> </a>The name of the affected machine, as specified in the <code class="cCode">T_MACHINE class</code>, with all the attributes of that machine</li>
<li><a name="wp1015216"> </a>Some event attributes that identify the event as <em class="cEmphasis">machine partitioned</em></li>
</ul></div>
<p class="pBody"><a name="wp1015204"> </a>
You can use the EventBroker simply by subscribing to system events. Then, instead of having to query for MIB records, you can be informed automatically when events occur in the MIB by receiving <code class="cCode">FML</code> data buffers representing MIB objects.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1012981"> </a>
How the EventBroker Works
</h2><p class="pBody"><a name="wp1012982"> </a>
The Oracle Tuxedo EventBroker is a tool through which an arbitrary number of <em class="cEmphasis">suppliers</em> <b class="cBold">of event notifications </b>can post messages for an arbitrary number of <em class="cEmphasis">subscribers</em>. The suppliers of such notifications may be application or system processes operating as clients or servers. The subscribers of such notifications may be administrators or application processes operating as clients or servers.
</p>
<p class="pBody"><a name="wp1017546"> </a>
Client and server processes using the EventBroker communicate with one another based on a set of <em class="cEmphasis">subscriptions</em>. Each process sends one or more subscription requests to the EventBroker, identifying the event types that the process wants to receive. The EventBroker, in turn, acts like a newspaper delivery person who delivers newspapers only to customers who have paid for a subscription. For these reasons, the paradigm on which the EventBroker is based is described as <em class="cEmphasis">publish-and-subscribe</em> communication.
</p>
<p class="pBody"><a name="wp1017547"> </a>
Event suppliers (either clients or servers) notify the EventBroker of events as they occur. We refer to this type of notification as <em class="cEmphasis">posting</em> an event. Once an event supplier posts an event, the EventBroker matches the posted event with the subscribers that have subscribed for that event type. Subscribers may be administrators or application processes. When the EventBroker finds a match, it takes the action specified for each subscription; subscribers are notified and any other actions specified by subscribers are initiated.
</p>
<p class="pBody"><a name="wp1014593"> </a>
<a href="adevnt.html#wp1012984">Figure&#160;5-1</a> shows how the EventBroker handles event subscriptions and postings.
</p>
<div class="pFigureTitle"><a name="wp1012984"> </a>
Figure&#160;5-1  Posting and Subscribing to an Event
</div>

 
 <p class="pGraphic"><a name="wp1012988"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/event1_1.gif" alt="Posting and Subscribing to an Event" id="wp1012986"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1012989"> </a>
As the administrator for your Oracle Tuxedo application, you can enter subscription requests on behalf of client and server processes through calls to the <code class="cCode">T_EVENT_COMMAND</code> class of the <a href="../rf5/rf5.html">EVENT_MIB(5)</a>. You can also invoke the <a href="../rf3c/rf3c.html">tpsubscribe(3c)</a> function to subscribe, programmatically, to an event by using the EventBroker.
</p>
<h3 class="pHeading2"><a name="wp1012990"> </a>
Event Notification Methods
</h3>
<p class="pBody"><a name="wp1012991"> </a>
The EventBroker subscription specifies one of the notification methods shown in <a href="adevnt.html#wp1013743">Figure&#160;5-2</a>.
</p>
<div class="pFigureTitle"><a name="wp1013743"> </a>
Figure&#160;5-2  Supported Notification Methods
</div>

 
 <p class="pGraphic"><a name="wp1013854"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/event.gif" alt="Supported Notification Methods" id="wp1013859"/></div><p class="pGraphic">

</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1013745"> </a><span style="font-style: normal">Notify a client</span>&#8212;the EventBroker keeps track of a client&#8217;s interest in particular events and notifies the client, without being prompted, when such an event occurs. For this reason, this method is called <em class="cEmphasis">unsolicited notification</em>.</li>
<li><a name="wp1012999"> </a><span style="font-style: normal">Invoke a service</span>&#8212;if a subscriber wants event notifications to be passed to service calls, the subscriber process should invoke the <code class="cCode">tpsubscribe()</code> function to provide the name of the service to be called.</li>
<li><a name="wp1013000"> </a><span style="font-style: normal">Enqueue message to stable-storage queues</span>&#8212;for subscriptions with requests to send event notifications to stable-storage queues, the EventBroker will obtain a queue space, queue name, and correlation identifier. A subscriber specifies a queue name when subscribing to an event. The correlation identifier can be used to differentiate among multiple subscriptions for the same event expression and filter rule, that are destined for the same queue.</li>
<li><a name="wp1013001"> </a><span style="font-style: normal">Execute a command</span>&#8212;when an event is posted, the buffer associated with it is transformed into a system command that is then executed. For example, the buffer may be changed to a system command that sends an e-mail message. This process must be executed through the MIB.</li>
<li><a name="wp1013533"> </a><span style="font-style: normal">Write messages to the user log</span>&#8212;when events are detected and matched by the EventBroker, the specified messages are written to the user log, or <code class="cCode">ULOG</code>. This process must be executed through the MIB.</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1014119"> </a>
Severity Levels of System Events
</h3>
<p class="pBody"><a name="wp1014120"> </a>
The EventBroker assigns one of three levels of severity to system events such as server terminations or network failure.
</p>
<p class="pBody"><a name="wp1020007"> </a>
<a href="adevnt.html#wp1019997">Table&#160;5-2</a> shows the severity levels of system events.
</p>
<p class="pGraphic"><a name="wp1019847"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1019997table1014936"><caption><a name="wp1019997"> </a>
Table 5-2  <span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">Severity Levels of System Events</span>

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1014942"> </a>
The level of severity is . . .
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1014944"> </a>
<br />When the EventBroker is informed of . . .
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1014946"> </a>
<code class="cCode">ERROR</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1014948"> </a>
An abnormal occurrence, such as a server being terminated or a network connection being dropped.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1014950"> </a>
<code class="cCode">INFO</code> (short for &#8220;Information&#8221;)
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1014952"> </a>
A state change resulting from a process or a change in the configuration.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1014954"> </a>
<code class="cCode">WARN</code> (short for &#8220;Warning&#8221;)
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1014956"> </a>
The fact that a client has not been allowed to join the application because it failed authentication. A configuration change that threatens the performance of the application has occurred.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1009322"> </a>
What Are the Benefits of Brokered Events?
</h2><div class="pSmartList1Bullet"><ul>
<li><a name="wp1009323"> </a><span style="font-style: normal">Anonymous communication</span>&#8212;the Event Broker enables Oracle Tuxedo programs to subscribe to events in which they are interested and it keeps track of all subscriptions. Therefore, a subscriber to one event does not need to know which programs subscribe to the same event, and a poster of an event does not need to know which other programs subscribe to that event. This anonymity allows subscribers to come and go without synchronizing with posters.</li>
<li><a name="wp1011526"> </a><span style="font-style: normal">Decoupling of exception conditions</span>&#8212;a publish-and-subscribe communication model allows the software detecting an exception condition to be decoupled from the software handling the exception condition.</li>
<li><a name="wp1011489"> </a><span style="font-style: normal">Tight integration with the Oracle Tuxedo system</span>&#8212;the EventBroker retains functionality such as message buffers, messaging paradigms, distributed transactions, and ACL permission checks for event postings.</li>
<li><a name="wp1011494"> </a><span style="font-style: normal">Variety of notification methods</span>&#8212;when a client or server subscribes to a system event (such as the termination of a server) or an application event (such as an ATM machine running out of money), it specifies an action that the EventBroker should take when it is notified that the target event has occurred.</li>
<p class="pBodyRelative"><a name="wp1015048"> </a>
If the subscriber is an Oracle Tuxedo client, it can do one of the following at the time it subscribes:
</p>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1015052"> </a>Request unsolicited notification</li>
<li><a name="wp1015055"> </a>Name a service routine that should be invoked</li>
<li><a name="wp1015058"> </a>Name an application queue in which the EventBroker should store the data for later processing</li>
<p class="pBodyRelative"><a name="wp1015061"> </a>
If the subscriber is an Oracle Tuxedo server, it can do one of the following at the time it subscribes:
</p>
<li><a name="wp1015073"> </a>Specify a service request</li>
<li><a name="wp1015096"> </a>Name an application queue in which the EventBroker should store the data</li>
</ul></div>
</ul></div>
<h3 class="pHeading2"><a name="wp1009588"> </a>
See Also
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1009596"> </a><a href="adsevt.html"><span class="cHyperlink">
&#8220;Subscribing to Events&#8221; on page&#160;6-1</span></a></li>
<li><a name="wp1019938"> </a><a href="adsevt.html#wp1010594"><span class="cHyperlink">
&#8220;Subscribing, Posting, and Unsubscribing to Events with the ATMI and the EVENT_MIB&#8221; on page&#160;6-3</span></a> in <em class="cEmphasis">Introducing Oracle Tuxedo ATMI</em></li>
<li><a name="wp1019946"> </a><a href="../rf5/rf5.html">EVENT_MIB(5)</a> in the <em class="cEmphasis">File Formats, Data Descriptions, MIBs, and System Processes Reference</em></li>
<li><a name="wp1019952"> </a><a href="../rf3c/rf3c.html">tpsubscribe(3c)</a> in the <em class="cEmphasis">Oracle Tuxedo ATMI C Function Reference</em></li>
<li><a name="wp1010824"> </a><a href="../rf3c/rf3c.html">tpunsubscribe(3c)</a> in the <em class="cEmphasis">Oracle Tuxedo ATMI C Function Reference</em></li>
</ul></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="adevnt.html"><img id="LongDescNotReq7" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="adrnet.html"><img id="LongDescNotReq8" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="adsevt.html"><img id="LongDescNotReq9" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
