<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="40264" />
<meta name="LOC_US_SRCFILE" content="//depot/ecs/eam/v11gr1/crm/fm/chap2.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="08/24/10 04:13:14" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Administering the SNA Components</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">CRM Administration Guide
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="chap1.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="appa.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/crm.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp55542"> </a>
Administering the SNA Components
</h1>
<p class="pBody"><a name="wp28517"> </a>
The topics in this section cover activities an administrator performs with the Communications Resource Manager (CRM) to maintain Oracle Tuxedo Mainframe Adapter for SNA applications. 
</p>
<p class="pBody"><a name="wp28524"> </a>
The interface to the stack administration and configuration is dependent on the stack provider and is not covered in this guide. Refer to vendor publications for the stack(s) used in your environment.
</p>
<p class="pBody"><a name="wp28399"> </a>
This section discusses the following topics:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp54607"> </a><a href="chap2.html#wp51711"><span class="cHyperlink">
Starting the CRM</span></a></li>
<li><a name="wp54611"> </a><a href="chap2.html#wp41329"><span class="cHyperlink">
Using the CRM Monitor</span></a></li>
<li><a name="wp54615"> </a><a href="chap2.html#wp41806"><span class="cHyperlink">
Activating and De-Activating Links</span></a></li>
<li><a name="wp19870"> </a><a href="chap2.html#wp53999">Reviewing CRM Log Files</a></li>
<li><a name="wp41297"> </a><a href="chap2.html#wp53660">Stopping the CRM</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp51711"> </a>
Starting the CRM
</h2><p class="pBody"><a name="wp51715"> </a>
The CRM is a server that communicates directly with the PU 2.1 server to provide SNA connectivity. These servers can be started manually. The PU 2.1 server must always be started before the CRM. Both servers must be started before starting the associated Oracle Tuxedo Mainframe Adapter for SNA Gateway. 
</p>
<p class="pBody"><a name="wp51719"> </a>
You can start the CRM by:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp51720"> </a>Entering the <code class="cCode">CRM</code> command on the command line for UNIX. </li>
<li><a name="wp51721"> </a>Running a <code class="cCode">CRM</code> job using JCL written explicitly for your z/OS MVS system. </li>
<li><a name="wp54346"> </a>Using the Tuxedo startup command, <code class="cCode">tmboot</code> if you have a local configuration. </li>
</ul></div>
<h3 class="pHeading2"><a name="wp51727"> </a>
Starting the CRM on UNIX
</h3>
<p class="pBody"><a name="wp51728"> </a>
To ensure proper startup of the CRM, complete the following tasks. Use this method for starting the CRM only when you have a distributed configuration with the CRM on HP-UX 11.23 or the mainframe.
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp51729"> </a>Set <code class="cCode">APPDIR </code>to the application directory </li>
<li><a name="wp51730"> </a>Start the PU2.1 Server.</li>
<p class="pBodyRelative"><a name="wp51731"> </a>
Refer to the operational documentation provided by your SNA stack vendor for information about starting the PU2.1 server. The SNA stack must be running and active before you start the CRM.
</p>
<li><a name="wp51735"> </a>Start the CRM.</li>
<p class="pBodyRelative"><a name="wp51736"> </a>
Enter the <code class="cCode">CRM</code> command on the command line. 
</p>
</ol></div>
<h4 class="pHeading3"><a name="wp51744"> </a>
CRM Command
</h4>
<p class="pBody"><a name="wp51746"> </a>
The <code class="cCode">CRM</code> command launches the Communications Resource Manager. When you start the CRM from the UNIX command line, the CRM command line console puts its prompt in a window, and if exited, shuts down all of the active links. 
</p>
<p class="pBody"><a name="wp51754"> </a>
You must configure one CRM for each Oracle Tuxedo Mainframe Adapter for SNA Gateway, as well as configure one stack for each CRM definition. Each stack can manage one or more SNA links.
</p>
<p class="pBody"><a name="wp51758"> </a>
<code class="cCode">CRM</code> has two types of log files stored in <code class="cCode">$APPDIR</code>, <code class="cCode">RSTRTLOG</code>, and<code class="cCode"> BLOBLOG</code>. <code class="cCode">RSTRTLOG</code> is the transaction state log used during the recovery process, while the <code class="cCode">BLOBLOG</code> log stores session and link information. Deleting the log files requires a cold start for each link involved. You can use the <code class="cCode">CRMLOGS</code> command to display the contents and state of the <code class="cCode">CRM</code> log files.
</p>
<p class="pBody"><a name="wp51759"> </a>
Example of the <code class="cCode">CRM</code> command line:
</p>
<a name="wp51760"> </a><div class="pPreformatted"><pre><code class="cCode">CRM</code> [ -t 0|1|2|3 ] [-p&lt;nbr&gt;] [-s] [-n &lt;type&gt;:#:#] [-u &lt;keyfile&gt;] &lt;addr&gt; &lt;group&gt;</pre></div><h4 class="pHeading3"><a name="wp51761"> </a>
Command Line Options
</h4>
<p class="pBody"><a name="wp51762"> </a>
The following table provides descriptions of the valid options for the <code class="cCode">CRM</code> command:
</p>
<p class="pGraphic"><a name="wp51833"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp774796table51763"><caption><a name="wp774796"> </a>
Table 3-1  CRM Command Options

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp51765"> </a>
Keyword 
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp51767"> </a>
Default
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp51769"> </a>
Required/<br />Optional
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp51771"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp51773"> </a>
<code class="cCode">-t [0|1|2|3] </code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51775"> </a>
0
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51777"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51779"> </a>
Turns tracing on and indicates the level of tracing.
</div>
<div class="pCellBody"><a name="wp51780"> </a>
<b class="cBold">0=No tracing. </b>
</div>
<div class="pCellBody"><a name="wp51781"> </a>
Setting this level effectively disables CRM tracing and closes the trace file, if there is one. If tracing is subsequently restarted, a new file is created with an incremental numerical suffix. 0 is the default trace level.
</div>
<div class="pCellBody"><a name="wp51782"> </a>
<b class="cBold">1=Minimum tracing. </b>
</div>
<div class="pCellBody"><a name="wp51783"> </a>
At this level, the CRM traces only major events and is sufficient only to determine the sequence of application conversations.
</div>
<div class="pCellBody"><a name="wp51784"> </a>
<b class="cBold">2=Medium tracing. </b>
</div>
<div class="pCellBody"><a name="wp51785"> </a>
At this level, the CRM also traces all I/O buffers.
</div>
<div class="pCellBody"><a name="wp51786"> </a>
<b class="cBold">3=Maximum tracing. </b>
</div>
<div class="pCellBody"><a name="wp51787"> </a>
At this level, the CRM also traces all APPC verbs.
</div>
<p class="pTableNote"><a name="wp51791"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Trace options for the CRM may also be set from the CRM Monitor. </td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp51793"> </a>
<code class="cCode">-s</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51795"> </a>
Off (if parameter is not used)
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51797"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51799"> </a>
Indicates APPC Stack API trace is turned on
</div>
<div class="pCellBody"><a name="wp51801"> </a>
If the APPC Protocol Stack API trace is enabled, it generally shows the parameters and results of all API calls. Depending on the stack being used, other options (such as vendor-specified environment variables) may have to be activated for the CRM to enable the trace.
</div>
<p class="pTableNote"><a name="wp51802"> </a><table>
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Trace options for the APPC Stack API trace may also be set from the CRM Monitor. </td></tr>
</table>
</p>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp51804"> </a>
<code class="cCode">-p &lt;nbr&gt;</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51806"> </a>
100 threads
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51808"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51810"> </a>
Turns on the performance option and indicates the number of threads to start. 
</div>
<div class="pCellBody"><a name="wp51811"> </a>
This value should correspond to the load of SNA requests that will be made concurrently. If the number of requests exceeds the number of threads, the request is still executed; however, the completion time could be affected. Do not exceed 200 threads. The CRM is tuned for a maximum of 200 threads. Lower the threads value if you have a restriction on the number of threads that can be active in your system.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp51813"> </a>
<code class="cCode">&lt;addr&gt;</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51815"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51817"> </a>
Required
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51819"> </a>
Specifies a TCP/IP address using <code class="cCode">//hostname:port_addr </code>or the <code class="cCode">sockaddr_in</code> format of family, port, address:
</div>
<div class="pCellBody"><a name="wp51820"> </a>
<code class="cCode">&lt;0xFFFFPPPPAAAAAAAA&gt;</code> 
</div>
<div class="pCellBody"><a name="wp51821"> </a>
In this entry, arguments and options are defined in the following way:
</div>
<div class="pCellBody"><a name="wp51822"> </a>
<code class="cCode">FFFF</code> is the hex value of the protocol family, always <code class="cCode">0x0002</code> for the INET family. 
</div>
<div class="pCellBody"><a name="wp51823"> </a>
<code class="cCode">PPPP </code>is the hex value of an unused TCP/IP port.
</div>
<div class="pCellBody"><a name="wp51824"> </a>
<code class="cCode">AAAAAAAA</code> is the hex value of the IP address for the machine running the CRM.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp51826"> </a>
<code class="cCode">&lt;group&gt;</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51828"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51830"> </a>
Required
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp51832"> </a>
Indicates the Oracle Tuxedo Mainframe Adapter for SNA Gateway Group Name.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp51834"> </a>
Examples
</h4>
<p class="pBody"><a name="wp51835"> </a>
The following sections show three examples of different options for starting the CRM.
</p>
<h5 class="pHeading4"><a name="wp54757"> </a>
Starting the CRM and CRM Command Line Console
</h5>
<p class="pBody"><a name="wp54769"> </a>
To start a <code class="cCode">CRM</code> from a UNIX command line, use a command similar to the following one:
</p>
<a name="wp51836"> </a><div class="pPreformatted"><pre>CRM -t 0 //myhost:5587 GROUP2 /dev/null&gt;std.out 2&gt;std.err &amp;</pre></div><p class="pBody"><a name="wp51840"> </a>
When you start CRM from the UNIX command line, the following CRM command line console appears:
</p>
<a name="wp51841"> </a><div class="pPreformatted"><pre>$ CRM -t 0 //myhost:5587 GROUP2<br />    A Oracle Tuxedo Mainframe Adapter for SNA Resource Manager started Thu Dec 11<br />       18:40:49.098 1997<br />       [CRM]<br /> <br />       Console active. Enter commands<br />       ?&gt;<br />        da =&gt; Display active tasks<br />        dl =&gt; Display remote links<br />        ds =&gt; Display link statistics<br />        dt =&gt; Display trace status<br />        st =&gt; Start all links<br />        sh =&gt; Stop all links and terminate<br />        si =&gt; Terminate immediately (no quiesce)</pre></div><h5 class="pHeading4"><a name="wp54794"> </a>
Starting the CRM with CRM Command Line Console Running in Background
</h5>
<p class="pBody"><a name="wp51842"> </a>
To launch the CRM with the console running in the background, use a command similar to the following one:
</p>
<a name="wp54817"> </a><div class="pPreformatted"><pre>$ CRM -t 0 //myhost:5587 GROUP2 &lt;dev/null&gt;std.out 2&gt;std.err &amp;</pre></div><h5 class="pHeading4"><a name="wp54822"> </a>
Starting the CRM with Detailed Tracing and APPC Stack API Tracing
</h5>
<p class="pBody"><a name="wp54818"> </a>
To launch the CRM with detailed tracing and APPC Stack API tracing turned on from the command line using the host/port address, use a command similar to the following one:
</p>
<a name="wp51845"> </a><div class="pPreformatted"><pre>CRM -t 2 -s //myhost:5587</pre></div><h4 class="pHeading3"><a name="wp51846"> </a>
Diagnostics
</h4>
<p class="pBody"><a name="wp51847"> </a>
<code class="cCode">CRM</code> exits with a return code of 0 upon successful completion.
</p>
<h3 class="pHeading2"><a name="wp51853"> </a>
Starting the CRM on z/OS MVS
</h3>
<p class="pBody"><a name="wp53121"> </a>
The z/OS MVS platform sets the environment and invokes the CRM through Job Control Language (JCL).
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp51858"> </a>Set the following environment variables in the environment where the CRM is started. A sample file is delivered (ENV) in the data library.</li>
<p class="pBodyRelative"><a name="wp51859"> </a>
<code class="cCode">APPDIR=&lt;High level qualifier for datasets to be created in APPDIR&gt;</code>
</p>
<li><a name="wp51860"> </a>Run a <code class="cCode">CRM</code> job using JCL written for your system.</li>
</ol></div>
<a name="wp51861"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>If the CRM is installed on a z/OS MVS platform, it does not have to be restarted if the Oracle Tuxedo Mainframe Adapter for SNA Gateway goes down abnormally. A <code class="cCode">tmshutdown</code> will not cause the CRM to shut down. You must run the <code class="cCode">crmdown</code> utility to shut down the CRM. Only the z/OS MVS version and the z/OS UNIX version of the CRM have this persistent feature.</td>
</tr>
</table>

<h4 class="pHeading3"><a name="wp52932"> </a>
Sample JCL for the CRM Command
</h4>
<p class="pBody"><a name="wp52933"> </a>
This section provides an explanation of the <code class="cCode">SET</code> commands and an example of JCL that can be used when you run the <code class="cCode">CRM </code>command. 
</p>
<h4 class="pDefTerm"><a name="wp52937"> </a>
<code class="cCodeBold">SET STARTCMD</code>
</h4><div class="pDefPara"><a name="wp52938"> </a>
Sets the <code class="cCode">CRM </code>command line parameters. 
</div>
<h4 class="pDefTerm"><a name="wp52941"> </a>
<code class="cCodeBold">SET OBJLIB</code>
</h4><div class="pDefPara"><a name="wp52942"> </a>
Indicates the name of the PDSE library where the <code class="cCode">CRM</code> executable is installed.
</div>
<h4 class="pDefTerm"><a name="wp52944"> </a>
<code class="cCodeBold">SET DATA</code>
</h4><div class="pDefPara"><a name="wp52945"> </a>
Indicates the dataset containing the <code class="cCode">ENVFILE</code>.
</div>
<h4 class="pDefTerm"><a name="wp52947"> </a>
<code class="cCodeBold">SET ENVFILE</code>
</h4><div class="pDefPara"><a name="wp52948"> </a>
Indicates the name of the PDS member that contains the environment variables for the CRM. A sample member, <code class="cCode">ENV</code>, is delivered with your product.
</div>
<h4 class="pDefTerm"><a name="wp52950"> </a>
<code class="cCodeBold">SET SIZE</code>
</h4><div class="pDefPara"><a name="wp52951"> </a>
Defines the region size for the running <code class="cCode">CRM</code> task. The recommended setting for this option is <code class="cCode">0M</code> to allow the <code class="cCode">CRM</code> to start up and level out to the size it requires.
</div>
<h4 class="pDefTerm"><a name="wp52953"> </a>
<code class="cCodeBold">SET ENV</code>
</h4><div class="pDefPara"><a name="wp52954"> </a>
Indicates the <code class="cCode">ENVFILE</code> DD name. This value is pre-set and should not be changed.
</div>
<h4 class="pDefTerm"><a name="wp52956"> </a>
<code class="cCodeBold">SET CEE</code>
</h4><div class="pDefPara"><a name="wp52957"> </a>
Specifies the high-level qualifier for the LE runtime library. <code class="cCode">CEE</code> should be set to the prefix of the IBM Language Environment data sets. Language Environment is required to run the CRM.
</div>
<a name="wp52958"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Uncomment the <code class="cCode">SET CEE</code> line and tailor the <code class="cCode">STEPLIB</code> concatenation if these libraries are not in your system link library concatenation.</td>
</tr>
</table>

<h4 class="pDefTerm"><a name="wp52960"> </a>
<code class="cCodeBold">SET CBC</code>
</h4><div class="pDefPara"><a name="wp52961"> </a>
Specifies the high-level qualifier for the C/C++ runtime library. CBC should be set to the prefix of the IBM C++ data sets. 
<div class="pCodeTitle"><a name="wp52965"> </a>
Listing&#160;3-1	   Sample crmstart.jcl for CRM Command
</div> <a name="wp52966"> </a><div class="pPreformatted"><pre>//***************************************************************<br />//*  THIS JOB IS USED TO RUN THE CRM PROCESS.                   *<br />//*                                                             *<br />//* @(#)$Id: crmstart.jcl,v 1.3 2001/05/07 23:41:27 crount Exp $*<br />//* Copyright (c)2000 BEA Systems, Inc., all rights reserved.   *<br />//***************************************************************<br />//*  YOU MUST SET THE ENVIRONMENT VARIABLES NEEDED BY SNACRM    *<br />//***************************************************************<br />//***************************************************************<br />//*  USE THE SET STATEMENTS TO SET THE APPROPRIATE VALUES         *<br />//*  STARTCMD IS THE CRM COMMAND LINE                             *<br />//*  OBJLIB IS THE LOAD LIBRARY CONTAINING THE PROGRAM EXECUTABLES*<br />//*  DATA IS THE DATASET THAT CONTAINS THE ENVIRONMENT VARIABLES  *<br />//*  ENVFILE NAMES THE MEMBER THAT CONTAINS THE ENVIRONMENT VARS  *<br />//*  RUNOPTS SETS ANY DESIRED LE RUNTIME OPTIONS (OPTIONAL)       *<br />//*  SIZE SETS THE REGION SIZE FOR THE SNACRM PROCESS. 0M SETS NO *<br />//*       LIMITS ON THE REGION SIZE                               *<br />//*  TAILOR YOUR JCL FOR THE BELOW IF THESE LIBRARIES ARE NOT     *<br />//*  IN YOUR SYSTEM LINK LOAD LIBRARY CONCATENATION               *<br />//*  CEE IS THE HLQ FOR THE LE RUNTIME LIBRARY                    *<br />//*  CBC IS THE HLQ FOR THE C/C++ RUNTIME LIBRARY                 *<br />//***************************************************************<br />//  SET STARTCMD=&#39;&quot;//&lt;address&gt;:&lt;port&gt;&quot; &lt;group&gt;&#39;<br />//  SET OBJLIB=<br />//  SET DATA=<br />//  SET ENVFILE=ENV<br />//  SET RUNOPTS=<br />//  SET SIZE=0M<br />//  SET ENV=&#39;ENVAR(&quot;_CEE_ENVFILE=DD:ENV&quot;)&#39;<br />//* SET CEE=CEE,CBC=CBC<br />//CRM      EXEC  PGM=CRM,REGION=&amp;SIZE,<br />//  PARM=&#39;POSIX(ON) &amp;ENV &amp;RUNOPTS/&amp;STARTCMD&#39;<br />//STEPLIB  DD  DSN=&amp;OBJLIB,DISP=SHR<br />//*        DD  DSN=&amp;CEE..SCEERUN,DISP=SHR<br />//*        DD  DSN=&amp;CBC..SCLBDLL,DISP=SHR<br />//MSGFILE  DD  SYSOUT=*<br />//TRACE    DD  SYSOUT=*<br />//SYSPRINT DD  SYSOUT=*<br />//ENV      DD  DSN=&amp;DATA(&amp;ENVFILE),DISP=SHR<br />//                                           </pre></div></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp41329"> </a>
Using the CRM Monitor
</h2><p class="pBody"><a name="wp41330"> </a>
The CRM Monitor is a Java application that allows you to connect to and monitor the CRM server through a graphical user interface (GUI). You can use the CRM Monitor to monitor link status and activity and start or stop diagnostic tracing of the CRM server. The CRM Monitor makes a network connection to the remote CRM server through a TCP/IP network connection. The CRM Monitor is installed with the Gateway, not on the mainframe. 
</p>
<h3 class="pHeading2"><a name="wp41332"> </a>
Launching the CRM Monitor from the Windows Desktop
</h3>
<p class="pBody"><a name="wp41335"> </a>
If the CRM Monitor is installed on Windows, a short cut is created in the Start menu of the Desktop when you install Oracle Tuxedo Mainframe Adapter for SNA. 
</p>
<p class="pBody"><a name="wp41336"> </a>
To launch the CRM Monitor from the Desktop:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp41337"> </a>Choose <code class="cCode">Programs|BEA Weblogic E-Business Platform|</code>Oracle Tuxedo Mainframe Adapter for SNA<code class="cCode"> </code>10<em class="cEmphasis">g </em>R3<code class="cCode">|CRM Monitor</code> from the Start menu.</li>
</ul></div>
<h3 class="pHeading2"><a name="wp41339"> </a>
Launching the CRM Monitor from the Command Line
</h3>
<p class="pBody"><a name="wp41340"> </a>
The CRM Monitor can also be started from the command line on UNIX
</p>
<p class="pBody"><a name="wp54424"> </a>
 platforms. 
</p>
<p class="pBody"><a name="wp41341"> </a>
To launch the CRM Monitor from the command line:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp41342"> </a>Enter the following command for the JRE or JDK interpreter:</li>
<p class="pBodyRelative"><a name="wp41343"> </a>
<code class="cCode">java -jar crmmon.jar</code> 
</p>
</ul></div>
<h3 class="pHeading2"><a name="wp41345"> </a>
Setting CRM Monitor Options
</h3>
<p class="pBody"><a name="wp41350"> </a>
<a href="chap2.html#wp41352"><span class="cHyperlink">
Figure&#160;3-1</span></a> shows an example of the CRM Monitor display.
</p>
<div class="pFigureTitle"><a name="wp41352"> </a>
Figure&#160;3-1  CRM Monitor Display
</div>

 
 <p class="pGraphic"><a name="wp41400"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/crmmon.gif" height="502" width="552" alt="CRM Monitor Display" id="wp41354"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp41401"> </a>
After you launch the CRM Monitor, use the following instructions to set CRM Monitor options:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp41408"> </a>To monitor a CRM, type the CRM address in the <span style="font-weight: bold">Enter </span>CRM <span style="font-weight: bold">Address</span> text box using the following format:</li>
<a name="wp41409"> </a><div class="pPreformattedRelative"><pre><span style="font-style: italic">//</span>host<span style="font-style: italic">:port</span></pre></div><p class="pBodyRelative"><a name="wp41410"> </a>
where <code class="cCode">host </code>explicitly specifies the CRM host machine and <code class="cCode">port </code>specifies the port number of the CRM on the CRM host machine.
</p>
<p class="pBodyRelative"><a name="wp41414"> </a>
This value may only be entered once per started instance of a CRM Monitor.
</p>
<li><a name="wp41415"> </a>Select one of the following trace options for the CRM:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp41419"> </a><b class="cBold">Stop CRM Trace</b> disables CRM tracing and closes the trace file, if it exists. This option is trace level <code class="cCode">0</code> as described in the Trace Options section for the <a href="appa.html#wp142579"><span class="cHyperlink">
CRM</span></a> command.</li>
<li><a name="wp41423"> </a><b class="cBold">Set Minimum CRM Trace</b> establishes tracing of only major events. This level is sufficient only to determine the sequence of application conversations. This option is trace level <code class="cCode">1</code> as described in the Trace Options section for the <a href="appa.html#wp142579"><span class="cHyperlink">
CRM</span></a> command.</li>
<li><a name="wp41427"> </a><b class="cBold">Set Medium CRM Trace</b> establishes tracing of major events plus tracing of all I/O buffers. This option is trace level <code class="cCodeBold">2</code> as described in the Trace Options section for the <a href="appa.html#wp142579"><span class="cHyperlink">
CRM</span></a> command.</li>
<li><a name="wp41431"> </a><b class="cBold">Set Maximum CRM Trace</b> establishes tracing of major events and all I/O buffers, plus tracing of all APPC verbs. This option is trace level <code class="cCode">3</code> as described in the Trace Options section for the <a href="appa.html#wp142579"><span class="cHyperlink">
CRM</span></a> command.</li>
<a name="wp41605"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The CRM Monitor does not show trace data. This data is captured in a file under the <code class="cCode">APPDIR</code> directory of the CRM server (<code class="cCode">APPDIR</code> is the variable name associated with the CRM directory). Please contact Oracle Customer Support for help in locating the trace file(s) and interpreting them.</td>
</tr>
</table>

<a name="wp41662"> </a><table class="ListNote">
<tr>
<td valign="top"><b class="texthide">Note:</b></td>
<td>The time tag information in the CRM trace should reflect the current system time. In order to make use of the correct time zone information on UNIX and MVS systems, it is important that the TZ environment variable be set correctly. If this variable is not set correctly on your system, refer to your system documentation for further information.</td>
</tr>
</table>
</ul></div>
<li><a name="wp41436"> </a>Select one of the following APPC stack trace options:</li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp41437"> </a><b class="cBold">Start APPC Stack Trace</b> establishes tracing of the APPC stack. This option generally shows the parameters and results of all API calls. Depending on the stack being used, other options such as vendor-specified environment variables also may have to be activated. This option may be selected along with any of the previous Trace Options. This option corresponds to the <code class="cCode">-s</code> option as described in the <a href="appa.html#wp142579"><span class="cHyperlink">
CRM</span></a> section.</li>
<li><a name="wp41441"> </a><b class="cBold">Stop APPC Stack Trace</b> disables APPC stack trace, if established. </li>
<a name="wp41445"> </a><table class="ListNote">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Trace options for the CRM and APPC Stack API trace options may also be set from the CRM command. Refer to the <a href="appa.html#wp142579"><span class="cHyperlink">
CRM</span></a> section for more information about trace options.</td>
</tr>
</table>

</ul></div>
<li><a name="wp41449"> </a>After you enter a CRM address and select trace options, the following fields display information about the CRM you are monitoring:</li>
<p class="pGraphic"><a name="wp41487"> </a>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp41452table41450">
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp41452"> </a>
Display Field
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp41454"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41459"> </a>
Selected CRM
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41464"> </a>
Displays the name of the CRM at the address entered in the address field.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41466"> </a>
Trace Status
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41468"> </a>
Displays the currently selected trace options.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41470"> </a>
Link Status
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41472"> </a>
Displays the current status of all remote links for the selected CRM. (Text may be scrolled.)
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41477"> </a>
Link Statistics
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41479"> </a>
Displays the current statistics for all remote links for the selected CRM. (Text may be scrolled.)
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41484"> </a>
Message Line
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41486"> </a>
Displays messages showing either the results of automatic connection attempts or commands issued to change the trace options. 
</div>
</td>
</tr>
</table>
</div>

</p>
</ol></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp41806"> </a>
Activating and De-Activating Links
</h2><p class="pBody"><a name="wp42383"> </a>
You can activate and de-activate CRM links that have been defined in the <code class="cCode">DM_SNALINKS</code> section of the <code class="cCode">DMCONFIG</code> file by executing one of the link commands from the command line. There are two commands used to activate and de-activate links: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp41811"> </a><a href="chap2.html#wp41820"><span class="cHyperlink">
crmlkon Command</span></a> </li>
<li><a name="wp41815"> </a><a href="chap2.html#wp41925"><span class="cHyperlink">
crmlkoff Command</span></a> </li>
</ul></div>
<p class="pBody"><a name="wp41816"> </a>
You may also use Job Control Language (JCL) on a z/OS Multiple Virtual Storage (MVS) platform to set the environment and invoke link commands. The following sections provide descriptions of the link commands and samples of JCL that may be used for your MVS operating system.
</p>
<h3 class="pHeading2"><a name="wp41820"> </a>
crmlkon Command
</h3>
<p class="pBody"><a name="wp41823"> </a>
The <code class="cCode">crmlkon</code> command starts one or more named CRM links.
</p>
<p class="pBody"><a name="wp41825"> </a>
<code class="cCode">crmlkon</code> starts all of the CRM links named on the command line. This command is useful if one or more individual links failed to start when the CRM server booted. It can be used from any machine located on the same TCP/IP network as the machine running the CRM server. It can be used in a script and returns <code class="cCode">0</code> if the command could be sent to the target CRM. It returns <code class="cCode">1</code> if the command could not be sent to the target CRM. 
</p>
<p class="pBody"><a name="wp41826"> </a>
Example of the <code class="cCode">crmlkon</code> command line follows:
</p>
<a name="wp41828"> </a><div class="pPreformatted"><pre><code class="cCode">crmlkon -n&lt;hostname:port&gt; [-v -i -h -u&lt;keyfile&gt;] &lt;linkname&gt; ... </code></pre></div><p class="pBody"><a name="wp41829"> </a>
Descriptions of the command line options follow.
</p>
<h4 class="pHeading3"><a name="wp41830"> </a>
Command Line Options
</h4>
<p class="pBody"><a name="wp41831"> </a>
The following table provides descriptions of the valid options for the <code class="cCode">crmlkon</code> command:
</p>
<p class="pGraphic"><a name="wp41876"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp773678table41832"><caption><a name="wp773678"> </a>
Table 3-2  <span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">crmlkon Command Options</span>

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp41834"> </a>
Keyword 
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp41836"> </a>
Default
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp41838"> </a>
Required/<br />Optional
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp41840"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41842"> </a>
-n&lt;hostname:port&gt;
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41844"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41846"> </a>
Required
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41851"> </a>
Names the machine and port running the CRM server. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41853"> </a>
-v
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41855"> </a>
Off
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41857"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41859"> </a>
Specifies verbose. Normally the command will not produce any messages, facilitating use in a script.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41861"> </a>
-i
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41863"> </a>
Off
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41865"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41867"> </a>
Ignores errors. When specifying multiple links, any error encountered when issuing CRM commands causes <code class="cCode">crmlkon</code> to stop processing links and return. Errors can be ignored for individual links and processing continues with the next named link
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41869"> </a>
<code class="cCode">&lt;linkname&gt;</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41871"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41873"> </a>
Required
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41875"> </a>
Names the link to be started. This is the <code class="cCode">DM_SNALINKS</code> entry in the <code class="cCode">gwsnax.cfg</code> that defines this link. Multiple link names can be specified.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp46438"> </a>
-u<code class="cCode">&lt;keyfile&gt;</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp46440"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp46442"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp46444"> </a>
Specify a key file containing the authentication name to be used with the CRM.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp41878"> </a>
Example
</h4>
<p class="pBody"><a name="wp41879"> </a>
To start links, <code class="cCode">link2</code> and <code class="cCode">cicstest,</code> owned by the CRM running on <code class="cCode">mach1</code> at port 5000, use the following command: 
</p>
<a name="wp41880"> </a><div class="pPreformatted"><pre><code class="cCode">crmlkon -n mach1:5000 link2 cicstest</code></pre></div><h4 class="pHeading3"><a name="wp41881"> </a>
Diagnostics
</h4>
<p class="pBody"><a name="wp41882"> </a>
<code class="cCode">crmlkon</code> only checks the syntax of the command. Use the CRM Monitor to determine if the link actually became active. Refer to <a href="chap2.html#wp41345"><span class="cHyperlink">
Setting CRM Monitor Options</span></a> for more information. If the command could not be successfully sent to the CRM, <code class="cCode">crmlkon</code> prints an error message if in verbose mode and exits with error code <code class="cCode">1</code>. Upon successful completion, crmlkon exits with exit code <code class="cCode">0</code>. 
</p>
<h4 class="pHeading3"><a name="wp41887"> </a>
Sample JCL for the crmlkon Command
</h4>
<p class="pBody"><a name="wp46473"> </a>
This section provides an explanation of the <code class="cCode">SET</code> commands and an example of JCL that can be used when you run the <code class="cCode">crmlkon </code>command. The sample <code class="cCode">SET</code> commands may not reflect the configuration of your system. You must customize the <code class="cCode">SET</code> commands for your environment. Refer to your System Administrator for more information about your particular setup. 
</p>
<h4 class="pHeading3"><a name="wp46475"> </a>
SET LINKCMD
</h4>
<p class="pBody"><a name="wp46479"> </a>
Sets the <code class="cCode">crmlkon </code>command line parameters. Refer to <a href="chap2.html#wp41820"><span class="cHyperlink">
crmlkon Command</span></a> for more information about the command line parameters.
</p>
<h4 class="pHeading3"><a name="wp46481"> </a>
SET OBJLIB
</h4>
<p class="pBody"><a name="wp46482"> </a>
Indicates the name of the PDSE library where the <code class="cCode">crmlkon</code> executable is installed.
</p>
<h4 class="pHeading3"><a name="wp46487"> </a>
SET DATA
</h4>
<p class="pBody"><a name="wp46488"> </a>
Indicates the dataset containing the <code class="cCode">ENVFILE</code>.
</p>
<h4 class="pHeading3"><a name="wp46490"> </a>
SET ENVFILE
</h4>
<p class="pBody"><a name="wp46491"> </a>
Indicates the name of the PDS member that contains the environment variables for the <code class="cCode">CRMLKON</code>. A sample member, <code class="cCode">ENV</code>, is delivered with your product.
</p>
<h4 class="pHeading3"><a name="wp46493"> </a>
SET SIZE
</h4>
<p class="pBody"><a name="wp46494"> </a>
Defines the region size for the running <code class="cCode">crmlkon</code> task.
</p>
<h4 class="pHeading3"><a name="wp46496"> </a>
SET ENV
</h4>
<p class="pBody"><a name="wp46497"> </a>
Indicates the <code class="cCode">ENVFILE</code> DD name. This value is pre-set.
</p>
<h4 class="pHeading3"><a name="wp46499"> </a>
SET CEE
</h4>
<p class="pBody"><a name="wp46500"> </a>
Specifies the high-level qualifier for the LE runtime library. CEE should be set to the prefix of the IBM Language Environment data sets. Language Environment is required to run <code class="cCode">crmlkon</code>.
</p>
<h4 class="pHeading3"><a name="wp46502"> </a>
SET CBC
</h4>
<p class="pBody"><a name="wp46503"> </a>
Specifies the high-level qualifier for the C/C++ runtime library. <code class="cCode">CBC</code> should be set to the prefix of the IBM C++ data sets. 
</p>
<a name="wp46504"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Uncomment the <code class="cCode">SET CBC</code> line and tailor the <code class="cCode">STEPLIB</code> concatenation if these libraries are not in your system link library concatenation.</td>
</tr>
</table>

<div class="pCodeTitle"><a name="wp46505"> </a>
Listing&#160;3-2	   Sample JCL for crmlkon Command
</div> <a name="wp46506"> </a><div class="pPreformatted"><pre>//***************************************************************<br />//*  THIS JOB IS USED FOR THE STAND-ALONE LINK COMMAND            *<br />//*  TO ACTIVATE A REMOTE LINK. SEE USER GUIDE FOR MORE INFO      *<br />//*                                                               *<br />//* @(#)$Id: crmlkon.jcl,v 1.10 2001/05/07 23:41:27 crount Exp $ *<br />//* Copyright (c)2000 BEA Systems, Inc., all rights reserved.     *<br />//***************************************************************<br />//*  YOU MUST SET THE ENVIRONMENT VARIABLES NEEDED BY CRMLKON     *<br />//***************************************************************<br />//***************************************************************<br />//*  LINKCMD INDICATES THE DISTRIBUTED SNACRM ADDRESS AND LINKNAME*<br />//*  OBJLIB IS THE LOAD LIBRARY CONTAINING THE TUXEDO MAINFRAME *<br />//*  ADAPTER FOR SNA PROGRAM OBJECTS									 *<br />//*  RUNOPTS SETS ANY DESIRED LE RUNTIME OPTIONS                  *<br />//*  DATA IS THE DATASET THAT CONTAINS THE ENVIRONMENT VARIABLES  *<br />//*  ENVFILE NAMES THE MEMBER THAT CONTAINS THE ENVIRONMENT VARS  *<br />//*  SIZE SETS THE REGION SIZE FOR THE SNACRM PROCESS             *<br />//*  TAILOR YOUR JCL FOR THE BELOW IF THESE LIBRARIES ARE NOT     *<br />//*  IN YOUR SYSTEM LINK LOAD LIBRARY CONCATENATION               *<br />//*  CEE IS THE HLQ FOR THE LE RUNTIME LIBRARY                    *<br />//*  CBC IS THE HLQ FOR THE C/C++ RUNTIME LIBRARY                 *<br />//***************************************************************<br />//  SET LINKCMD=&#39;-n&lt;host name&gt;:&lt;port&gt; &lt;linkname&gt;&#39;<br />//  SET OBJLIB=<br />//  SET RUNOPTS=<br />//  SET DATA=<br />//  SET ENVFILE=ENV<br />//  SET SIZE=1M<br />//  SET ENV=&#39;ENVAR(&quot;_CEE_ENVFILE=DD:ENV&quot;)&#39;<br />//* SET CEE=CEE,CBC=CBC<br />//CRMLKON  EXEC  PGM=CRMLKON,REGION=&amp;SIZE,<br />//  PARM=&#39;POSIX(ON) &amp;ENV &amp;RUNOPTS/&amp;LINKCMD&#39;<br />//STEPLIB  DD  DSN=&amp;OBJLIB,DISP=SHR<br />//*        DD  DSN=&amp;CEE..SCEERUN,DISP=SHR<br />//*        DD  DSN=&amp;CBC..SCLBDLL,DISP=SHR<br />//ENV      DD  DSN=&amp;DATA(&amp;ENVFILE),DISP=SHR<br />//MSGFILE  DD  SYSOUT=*<br />//SYSPRINT DD  SYSOUT=*</pre></div><a name="wp46507"> </a><div class="pPreformatted"><pre>//</pre></div><h3 class="pHeading2"><a name="wp41925"> </a>
crmlkoff Command
</h3>
<p class="pBody"><a name="wp41928"> </a>
The <code class="cCode">crmlkoff</code> command stops one or more named CRM links. 
</p>
<p class="pBody"><a name="wp41930"> </a>
<code class="cCode">crmlkoff</code> stops all of the CRM links named on the command line. This is useful if one or more individual links need to be stopped after the CRM server booted. It can be used from any machine located on the same TCP/IP network as the machine running the CRM server. It can be used in a script and returns <code class="cCode">0</code> if the command could be sent to the target CRM. It returns <code class="cCode">1</code> if the command could not be sent to the target CRM. 
</p>
<p class="pBody"><a name="wp41931"> </a>
Example of the <code class="cCode">crmlkoff</code> command line follows:
</p>
<p class="pBody"><a name="wp41933"> </a>
<code class="cCode">crmlkoff -n&lt;hostname:port&gt; [-v -i -h -u&lt;keyfile&gt;] &lt;linkname&gt; ... </code>
</p>
<h4 class="pHeading3"><a name="wp41934"> </a>
Command Line Options
</h4>
<p class="pBody"><a name="wp41935"> </a>
The following table provides descriptions of the valid options for the <code class="cCode">crmlkoff</code> command:
</p>
<p class="pGraphic"><a name="wp41980"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp774609table41936"><caption><a name="wp774609"> </a>
Table 3-3  crmlkoff Command Options

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp41938"> </a>
Keyword 
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp41940"> </a>
Default
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp41942"> </a>
Required/<br />Optional
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp41944"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41946"> </a>
-n&lt;hostname:<br />port&gt;
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41948"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41950"> </a>
Required
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41955"> </a>
Names the machine and port running the CRM server. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41957"> </a>
-v
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41959"> </a>
Off
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41961"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41963"> </a>
Specifies verbose. Normally the command will not produce any messages, facilitating use in a script.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp41965"> </a>
-i
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41967"> </a>
Off
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41969"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp41971"> </a>
Ignores errors. When specifying multiple links, any error encountered when issuing CRM commands causes <code class="cCode">crmlkon</code> to stop processing links and return. Errors can be ignored for individual links and processing continues with the next named link
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp46609"> </a>
-h
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp46611"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp46613"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp46615"> </a>
Displays help for the command.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp47230"> </a>
-u&lt;keyfile&gt;
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp47232"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp47234"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp47236"> </a>
Specifies a key file containing the authentication name to be used with the CRM.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp47209"> </a>
&lt;linkname&gt;
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp47211"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp47213"> </a>
Required
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp47215"> </a>
Names the link to be stopped. This is the <code class="cCode">DM_SNALINKS</code> entry in the <code class="cCode">DMCONFIG</code> that defines this link. Multiple link names can be specified.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp41981"> </a>
Example
</h4>
<p class="pBody"><a name="wp41982"> </a>
To stop links <code class="cCode">link1</code> and <code class="cCode">cicstest</code> owned by the CRM running on <code class="cCode">mach</code> at port 5000, use the following command: 
</p>
<a name="wp41983"> </a><div class="pPreformatted"><pre>crmlkoff -n mach:5000 link1 cicstest</pre></div><h4 class="pHeading3"><a name="wp41984"> </a>
Diagnostics
</h4>
<p class="pBody"><a name="wp41985"> </a>
<code class="cCode">crmlkoff</code> only checks the syntax of the command. Use the CRM Monitor to determine if the link actually became active. Refer to <a href="chap2.html#wp41345"><span class="cHyperlink">
Setting CRM Monitor Options</span></a> for more information. If the command could not be successfully sent to the CRM, <code class="cCode">crmlkoff</code> prints an error message if in verbose mode and exits with error code 1. Upon successful completion, crmlkoff exits with exit code 0. 
</p>
<h4 class="pHeading3"><a name="wp41992"> </a>
Sample JCL for the crmlkoff Command 
</h4>
<p class="pBody"><a name="wp41993"> </a>
This section provides an explanation of the <code class="cCode">SET</code> commands and an example of JCL that can be used when you run the <code class="cCode">crmlkoff </code>command. The sample <code class="cCode">SET</code> commands may not reflect the configuration of your system. You must customize the <code class="cCode">SET</code> commands for your environment. Refer to your System Administrator for more information about your particular setup. 
</p>
<h4 class="pHeading3"><a name="wp41995"> </a>
SET LINKCMD
</h4>
<p class="pBody"><a name="wp41998"> </a>
Sets the <code class="cCode">crmlkoff </code>command line parameters. Refer to <a href="chap2.html#wp41887"><span class="cHyperlink">
Sample JCL for the crmlkon Command</span></a> for more information about the command line parameters.
</p>
<h4 class="pHeading3"><a name="wp42001"> </a>
SET OBJLIB
</h4>
<p class="pBody"><a name="wp42002"> </a>
Indicates the name of the PDSE library where the <code class="cCode">crmlkoff</code> executable is installed.
</p>
<h4 class="pHeading3"><a name="wp42004"> </a>
SET DATA
</h4>
<p class="pBody"><a name="wp42005"> </a>
Indicates the dataset containing the <code class="cCode">ENVFILE</code>.
</p>
<h4 class="pHeading3"><a name="wp42007"> </a>
SET ENVFILE
</h4>
<p class="pBody"><a name="wp42008"> </a>
Indicates the name of the PDS member that contains the environment variables for the <code class="cCode">crmlkoff</code>. A sample member, <code class="cCode">ENV</code>, is delivered with your product.
</p>
<h4 class="pHeading3"><a name="wp42010"> </a>
SET SIZE
</h4>
<p class="pBody"><a name="wp42011"> </a>
Defines the region size for the running <code class="cCode">crmlkoff</code> task. 
</p>
<h4 class="pHeading3"><a name="wp42013"> </a>
SET ENV
</h4>
<p class="pBody"><a name="wp42014"> </a>
Indicates the <code class="cCode">ENVFILE</code> DD name.
</p>
<h4 class="pHeading3"><a name="wp42016"> </a>
 SET CEE
</h4>
<p class="pBody"><a name="wp42017"> </a>
Specifies the high-level qualifier for the Language Environment (LE) runtime library. CEE should be set to the prefix of the IBM LE data sets. Language Environment is required to run <code class="cCode">crmlkoff</code>.
</p>
<h4 class="pHeading3"><a name="wp42019"> </a>
SET CBC
</h4>
<p class="pBody"><a name="wp42020"> </a>
Specifies the high-level qualifier for the C/C++ runtime library. CBC should be set to the prefix of the IBM C++ data sets. 
</p>
<a name="wp42021"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Uncomment the SET CBC line and tailor the STEPLIB concatenation if these libraries are not in your system link library concatenation.</td>
</tr>
</table>

<div class="pCodeTitle"><a name="wp42022"> </a>
Listing&#160;3-3	   Sample JCL for crmlkoff Command
</div> <a name="wp42023"> </a><div class="pPreformatted"><pre>//***************************************************************<br />//*  THIS JOB IS USED FOR THE STAND-ALONE LINK COMMAND            *<br />//*  TO DEACTIVATE A REMOTE LINK. SEE USER GUIDE FOR MORE INFO    *<br />//*                                                               *<br />//* @(#)$Id: crmlkoff.jcl,v 1.10 2001/05/07 23:41:27 crount Exp $*<br />//* Copyright (c)2000 BEA Systems, Inc., all rights reserved.     *<br />//***************************************************************<br />//*  YOU MUST SET THE ENVIRONMENT VARIABLES NEEDED BY CRMLKOFF    *<br />//***************************************************************<br />//***************************************************************<br />//*  LINKCMD INDICATES THE DISTRIBUTED SNACRM ADDRESS AND LINKNAME*<br />//*  OBJLIB IS THE LOAD LIBRARY CONTAINING THE TUXEDO MAINFRAME *<br />//*  ADAPTER FOR SNA PROGRAM OBJECTS                                   *<br />//*  RUNOPTS SETS ANY DESIRED LE RUNTIME OPTIONS                  *<br />//*  DATA IS THE DATASET THAT CONTAINS THE ENVIRONMENT VARIABLES  *<br />//*  ENVFILE NAMES THE MEMBER THAT CONTAINS THE ENVIRONMENT VARS  *<br />//*  SIZE SETS THE REGION SIZE FOR THE SNACRM PROCESS             *<br />//*  TAILOR YOUR JCL FOR THE BELOW IF THESE LIBRARIES ARE NOT     *<br />//*  IN YOUR SYSTEM LINK LOAD LIBRARY CONCATENATION               *<br />//*  CEE IS THE HLQ FOR THE LE RUNTIME LIBRARY                    *<br />//*  CBC IS THE HLQ FOR THE C/C++ RUNTIME LIBRARY                 *<br />//***************************************************************<br />//  SET LINKCMD=&#39;-n&lt;host name&gt;:&lt;port&gt; &lt;linkname&gt;&#39;<br />//  SET OBJLIB=<br />//  SET RUNOPTS=<br />//  SET DATA=<br />//  SET ENVFILE=ENV<br />//  SET SIZE=1M<br />//  SET ENV=&#39;ENVAR(&quot;_CEE_ENVFILE=DD:ENV&quot;)&#39;<br />//* SET CEE=CEE,CBC=CBC<br />//CRMLKOFF EXEC  PGM=CRMLKOFF,REGION=&amp;SIZE,<br />//  PARM=&#39;POSIX(ON) &amp;ENV &amp;RUNOPTS/&amp;LINKCMD&#39;<br />//STEPLIB  DD  DSN=&amp;OBJLIB,DISP=SHR<br />//*        DD  DSN=&amp;CEE..SCEERUN,DISP=SHR<br />//*        DD  DSN=&amp;CBC..SCLBDLL,DISP=SHR<br />//ENV      DD  DSN=&amp;DATA(&amp;ENVFILE),DISP=SHR<br />//MSGFILE  DD  SYSOUT=*<br />//SYSPRINT DD  SYSOUT=*<br />//</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp53999"> </a>
Reviewing CRM Log Files
</h2><p class="pBody"><a name="wp54003"> </a>
You can display the content and state of the CRM log files by using the <code class="cCode">CRMLOGS</code> command or CRMLOGS JCL.
</p>
<h3 class="pHeading2"><a name="wp53687"> </a>
CRMLOGS Command
</h3>
<p class="pBody"><a name="wp54073"> </a>
Use the <code class="cCode">CRMLOGS</code> command to display the contents and state of the two <code class="cCode">CRM</code> log files. <code class="cCode">RSTRTLOG</code> is the transaction state log used during the recovery process and the <code class="cCode">BLOBLOG</code> log stores session and link information. Deleting the log files requires a cold start for each link involved.
</p>
<h4 class="pHeading3"><a name="wp53742"> </a>
Command Line Options
</h4>
<p class="pBody"><a name="wp53743"> </a>
The following table provides descriptions of the valid options for the <code class="cCode">CRMLOGS</code> command:
</p>
<p class="pGraphic"><a name="wp53804"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp774840table53744"><caption><a name="wp774840"> </a>
Table 3-4  CRMLOGS Command Options

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp53746"> </a>
Keyword 
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp53748"> </a>
Default
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp53750"> </a>
Required/<br />Optional
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp53752"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp53754"> </a>
group
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp53756"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp54117"> </a>
Required
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp53763"> </a>
SNA domain group name.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp53765"> </a>
crm name
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp53767"> </a>
Default CRM
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp53769"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp53771"> </a>
Name of CRM.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp53870"> </a>
Example
</h4>
<p class="pBody"><a name="wp54899"> </a>
To display the contents and state of the <code class="cCode">CRM</code> log file for dalvs5:8002 and GROUP2, use the following command: 
</p>
<p class="pBody"><a name="wp53877"> </a>
CRMLOGS GROUP2 dalvs5:8002
</p>
<h4 class="pHeading3"><a name="wp53889"> </a>
Diagnostics
</h4>
<p class="pBody"><a name="wp53701"> </a>
CRMLOGS exits with a return code of 0 upon successful completion.
</p>
<h4 class="pHeading3"><a name="wp53921"> </a>
Sample JCL for the CRMLOGS Command 
</h4>
<p class="pBody"><a name="wp54236"> </a>
The following section is an explanation of the <code class="cCode">SET</code> commands and an example of JCL that can be used when you run the <code class="cCode">CRMLOGS </code>command.
</p>
<h4 class="pHeading3"><a name="wp54238"> </a>
SET LNKCMD
</h4>
<p class="pBody"><a name="wp54242"> </a>
Sets the <code class="cCode">CRMLOGS </code>command line parameters. 
</p>
<h4 class="pHeading3"><a name="wp54244"> </a>
SET OBJLIB
</h4>
<p class="pBody"><a name="wp54245"> </a>
Indicates the name of the PDSE library where the <code class="cCode">CRMLOGS</code> executable is installed.
</p>
<h4 class="pHeading3"><a name="wp54247"> </a>
SET DATA1
</h4>
<p class="pBody"><a name="wp54248"> </a>
Indicates the name of the PDS library where the <code class="cCode">CRMLOGS</code> required parameter file FMB was installed. 
</p>
<h4 class="pHeading3"><a name="wp54250"> </a>
SET DATA2
</h4>
<p class="pBody"><a name="wp54251"> </a>
Indicates the dataset containing the <code class="cCode">ENVFILE</code>.
</p>
<h4 class="pHeading3"><a name="wp54253"> </a>
SET ENVFILE
</h4>
<p class="pBody"><a name="wp54254"> </a>
Indicates the name of the PDS member that contains the environment variables for the <code class="cCode">CRMLOGS</code>. A sample member, <code class="cCode">ENV</code>, is delivered with your product.
</p>
<h4 class="pHeading3"><a name="wp54256"> </a>
SET SIZE
</h4>
<p class="pBody"><a name="wp54257"> </a>
Defines the region size for the running <code class="cCode">CRMLOGS</code> task. 
</p>
<h4 class="pHeading3"><a name="wp54259"> </a>
SET ENV
</h4>
<p class="pBody"><a name="wp54260"> </a>
Indicates the <code class="cCode">ENVFILE</code> DD name.
</p>
<h4 class="pHeading3"><a name="wp54262"> </a>
 SET CEE
</h4>
<p class="pBody"><a name="wp54263"> </a>
Specifies the high-level qualifier for the LE runtime library. CEE should be set to the prefix of the IBM Language Environment data sets. Language Environment is required to run <code class="cCode">CRMLOGS</code>.
</p>
<h4 class="pHeading3"><a name="wp54265"> </a>
SET CBC
</h4>
<p class="pBody"><a name="wp54652"> </a>
Specifies the high-level qualifier for the C/C++ runtime library. CBC should be set to the prefix of the IBM C++ data sets. 
</p>
<div class="pCodeTitle"><a name="wp54653"> </a>
Listing&#160;3-4	   Sample JCL for CRMLOGS Command
</div> <a name="wp54654"> </a><div class="pPreformatted"><pre>//***************************************************************<br />//*  THIS JOB IS USED TO CHECK THE RECOVERY LOGS FOR              *<br />//*  OUTSTANDING TRANSACTION DATA. SEE USER GUIDE FOR MORE INFO   *<br />//*                                                               *<br />//* @(#)$Id: crmlogs.jcl,v 1.6 2001/05/07 23:41:27 crount Exp $  *<br />//* Copyright (c)2000 BEA Systems, Inc., all rights reserved.     *<br />//***************************************************************<br />//*  YOU MUST SET THE ENVIRONMENT VARIABLES NEEDED BY CRMLOGS     *<br />//***************************************************************<br />//***************************************************************<br />//*  SNACMD IS USED TO SET THE DESIRED SNACRM GROUP NAME          *<br />//*  OBJLIB IS THE LOAD LIBRARY CONTAINING THE TMA SNA PROGRAM *<br />//*  OBJECTS RUNOPTS SETS ANY DESIRED LE RUNTIME OPTIONS (OPTIONAL)*<br />//*  DATA IS THE DATASET THAT CONTAINS THE ENVIRONMENT VARIABLES  *<br />//*  ENVFILE NAMES THE MEMBER THAT CONTAINS THE ENVIRONMENT VARS  *<br />//*  SIZE SETS THE REGION SIZE FOR THE SNACRM PROCESS             *<br />//*  ENV SETS THE ENVIRONMENT VARIABLES DD NAME                  *<br />//*  TAILOR YOUR JCL FOR THE BELOW IF THESE LIBRARIES ARE NOT     *<br />//*  IN YOUR SYSTEM LINK LOAD LIBRARY CONCATENATION               *<br />//*  CEE IS THE HLQ FOR THE LE RUNTIME LIBRARY                    *<br />//*  CBC IS THE HLQ FOR THE C/C++ RUNTIME LIBRARY                 *<br />//***************************************************************<br />//  SET LOGSCMD=&lt;group&gt;<br />//  SET OBJLIB=<br />//  SET DATA=<br />//  SET ENVFILE=ENV<br />//  SET RUNOPTS=<br />//  SET SIZE=10M<br />//  SET ENV=&#39;ENVAR(&quot;_CEE_ENVFILE=DD:ENV&quot;)&#39;<br />//* SET CEE=CEE,CBC=CBC<br />//CRMLOGS  EXEC  PGM=CRMLOGS,REGION=&amp;SIZE,<br />//  PARM=&#39;POSIX(ON) &amp;ENV &amp;RUNOPTS/&amp;LOGSCMD&#39;<br />//STEPLIB  DD  DSN=&amp;OBJLIB,DISP=SHR<br />//*        DD  DSN=&amp;CEE..SCEERUN,DISP=SHR<br />//*        DD  DSN=&amp;CBC..SCLBDLL,DISP=SHR<br />//MSGFILE  DD  SYSOUT=*<br />//SYSPRINT DD  SYSOUT=*<br />//ENV      DD  DSN=&amp;DATA(&amp;ENVFILE),DISP=SHR<br />//</pre></div><p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp53660"> </a>
Stopping the CRM
</h2><p class="pBody"><a name="wp53655"> </a>
The z/OS CRM will persist through termination of the Gateway, regardless of whether the Gateway was terminated by abnormal conditions or a <code class="cCode">tmshutdown</code> command.
</p>
<p class="pBody"><a name="wp52658"> </a>
You can stop the CRM by:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp52659"> </a>Entering the <code class="cCode">crmdown</code> command on the command line for UNIX. </li>
<li><a name="wp52660"> </a>Running a <code class="cCode">CRMDOWN</code> job using JCL written explicitly for your z/OS MVS system. </li>
</ul></div>
<h3 class="pHeading2"><a name="wp52661"> </a>
crmdown Command
</h3>
<p class="pBody"><a name="wp52666"> </a>
The <code class="cCode">crmdown</code> command shuts down the CRM specified on the command line. 
</p>
<p class="pBody"><a name="wp52668"> </a>
<code class="cCode">crmdown</code> can be used from any machine located on the same TCP/IP network as the machine running the CRM server. It can be used in a script and it returns <code class="cCode">0</code> if the command could be sent to the target CRM. It returns <code class="cCode">1</code> if the command could not be sent to the target CRM.
</p>
<p class="pBody"><a name="wp52678"> </a>
Example of the <code class="cCode">crmdown</code> command line follows:
</p>
<p class="pBody"><a name="wp52680"> </a>
<code class="cCode">crmdown -n&lt;hostname:port&gt; [-v -i -h -u&lt;keyfile&gt;]</code>
</p>
<h4 class="pHeading3"><a name="wp52681"> </a>
Command Line Options
</h4>
<p class="pBody"><a name="wp52682"> </a>
The following table provides descriptions of the valid options for the <code class="cCode">crmdown</code> command:
</p>
<p class="pGraphic"><a name="wp52735"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp774692table52683"><caption><a name="wp774692"> </a>
Table 3-5  crmdown Command Options

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp52685"> </a>
Keyword 
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp52687"> </a>
Default
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp52689"> </a>
Required/<br />Optional
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp52691"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp52693"> </a>
-n&lt;hostname:port&gt;
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52695"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52697"> </a>
Required
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52702"> </a>
Names the machine and port running the CRM server. 
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp52704"> </a>
-v
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52706"> </a>
Off
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52708"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52710"> </a>
Specifies verbose. Normally the command will not produce any messages, facilitating use in a script.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp52712"> </a>
-i
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52714"> </a>
Off
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52716"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52718"> </a>
Ignores errors. When specifying multiple links, any error encountered when issuing CRM commands causes <code class="cCode">crmlkon</code> to stop processing links and return. Errors can be ignored for individual links and processing continues with the next named link
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp52720"> </a>
-h
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52722"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52724"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52726"> </a>
Displays help for the command.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp52728"> </a>
-u&lt;keyfile&gt;
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52730"> </a>
None
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52732"> </a>
Optional
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp52734"> </a>
Specifies a key file containing the authentication name to be used with the CRM.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp52736"> </a>
Example
</h4>
<p class="pBody"><a name="wp52740"> </a>
To stop the CRM running on <code class="cCode">mach1</code> at port 5000, use the following command: 
</p>
<a name="wp52741"> </a><div class="pPreformatted"><pre><code class="cCode">crmdown -n mach1:5000</code></pre></div><h4 class="pHeading3"><a name="wp52742"> </a>
Diagnostics
</h4>
<p class="pBody"><a name="wp52743"> </a>
<code class="cCode">crmdown</code> only checks the syntax of the command. If the command could not be successfully sent to the CRM, <code class="cCode">crmdown</code> prints an error message if in verbose mode and exits with error code <code class="cCode">1</code>. Upon successful completion, <code class="cCode">crmdown</code> exits with exit code <code class="cCode">0</code>. 
</p>
<h3 class="pHeading2"><a name="wp53507"> </a>
Sample JCL for the CRMDOWN Command
</h3>
<p class="pBody"><a name="wp53509"> </a>
This section provides an explanation of the <code class="cCode">SET</code> commands and an example of JCL that can be used when you run the <code class="cCode">crmdown </code>command.
</p>
<h4 class="pDefTerm"><a name="wp53511"> </a>
<code class="cCodeBold">SET STOPCMD</code>
</h4><div class="pDefPara"><a name="wp53512"> </a>
Sets the <code class="cCode">crmdown </code>command line parameters. 
</div>
<h4 class="pDefTerm"><a name="wp53514"> </a>
<code class="cCodeBold">SET OBJLIB</code>
</h4><div class="pDefPara"><a name="wp53515"> </a>
Indicates the name of the PDSE library where the <code class="cCode">crmdown</code> executable is installed.
</div>
<h4 class="pDefTerm"><a name="wp53517"> </a>
<code class="cCodeBold">SET DATA</code>
</h4><div class="pDefPara"><a name="wp53518"> </a>
Indicates the dataset containing the <code class="cCode">ENVFILE</code>.
</div>
<h4 class="pDefTerm"><a name="wp53520"> </a>
<code class="cCodeBold">SET ENVFILE</code>
</h4><div class="pDefPara"><a name="wp53521"> </a>
Indicates the name of the PDS member that contains the environment variables for the <code class="cCode">crmdown</code>. A sample member, <code class="cCode">ENV</code>, is delivered with your product.
</div>
<h4 class="pDefTerm"><a name="wp53523"> </a>
<code class="cCodeBold">SET SIZE</code>
</h4><div class="pDefPara"><a name="wp53524"> </a>
Defines the region size for the running <code class="cCode">crmdown</code> task. 
</div>
<h4 class="pDefTerm"><a name="wp53526"> </a>
<code class="cCodeBold">SET ENV</code>
</h4><div class="pDefPara"><a name="wp53527"> </a>
Indicates the <code class="cCode">ENVFILE</code> DD name.
</div>
<h4 class="pDefTerm"><a name="wp53529"> </a>
<code class="cCodeBold">SET CEE</code>
</h4><div class="pDefPara"><a name="wp53530"> </a>
Specifies the high-level qualifier for the LE runtime library. CEE should be set to the prefix of the IBM Language Environment data sets. Language Environment is required to run <code class="cCode">crmdown</code>.
</div>
<h4 class="pDefTerm"><a name="wp53532"> </a>
<code class="cCodeBold">SET CBC</code>
</h4><div class="pDefPara"><a name="wp53533"> </a>
Specifies the high-level qualifier for the C/C++ runtime library. CBC should be set to the prefix of the IBM C++ data sets. 
</div>
<a name="wp53534"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Uncomment the <code class="cCode">SET CBC</code> line and tailor the <code class="cCode">STEPLIB</code> concatenation if these libraries are not in your system link library concatenation.</td>
</tr>
</table>

<div class="pCodeTitle"><a name="wp53535"> </a>
Listing&#160;3-5	   Sample JCL for crmdown Command
</div> <a name="wp53536"> </a><div class="pPreformatted"><pre>//***************************************************************<br />//*  THIS JOB IS USED FOR THE STAND-ALONE COMMAND USED            *<br />//*  TO SHUTDOWN THE SNACRM PROCESS. SEE USER GUIDE FOR MORE INFO *<br />//*                                                               *<br />//* @(#)$Id: crmdown.jcl,v 1.5 2001/05/07 23:41:27 crount Exp $  *<br />//* Copyright (c)2000 BEA Systems, Inc., all rights reserved.     *<br />//***************************************************************<br />//*  YOU MUST SET THE ENVIRONMENT VARIABLES NEEDED BY CRMDOWN     *<br />//***************************************************************<br />//***************************************************************<br />//*  STOPCMD INDICATES THE COMMAND LINE FOR CRMDOWN               *<br />//*  OBJLIB IS THE LOAD LIBRARY CONTAINING THE PROGRAM EXECUTABLES*<br />//*  RUNOPTS SETS ANY DESIRED LE RUNTIME OPTIONS (OPTIONAL)       *<br />//*  DATA IS THE DATASET THAT CONTAINS THE ENVIRONMENT VARIABLES  *<br />//*  ENVFILE NAMES THE MEMBER THAT CONTAINS THE ENVIRONMENT VARS  *<br />//*  SIZE SETS THE REGION SIZE FOR THE SNACRM PROCESS             *<br />//*                                                               *<br />//*  TAILOR YOUR JCL FOR THE BELOW IF THESE LIBRARIES ARE NOT     *<br />//*  IN YOUR SYSTEM LINK LOAD LIBRARY CONCATENATION               *<br />//*  CEE IS THE HLQ FOR THE LE RUNTIME LIBRARY                    *<br />//*  CBC IS THE HLQ FOR THE C/C++ RUNTIME LIBRARY                 *<br />//***************************************************************<br />//  SET STOPCMD=&#39;-n&lt;host name&gt;:&lt;port&gt;&#39;<br />//  SET OBJLIB=<br />//  SET RUNOPTS=<br />//  SET DATA=<br />//  SET ENVFILE=ENV<br />//  SET SIZE=1M<br />//  SET ENV=&#39;ENVAR(&quot;_CEE_ENVFILE=DD:ENV&quot;)&#39;<br />//* SET CEE=CEE,CBC=CBC<br />//CRMDOWN  EXEC  PGM=CRMDOWN,REGION=&amp;SIZE,<br />//  PARM=&#39;POSIX(ON) &amp;ENV &amp;RUNOPTS/&amp;STOPCMD&#39;<br />//STEPLIB  DD  DSN=&amp;OBJLIB,DISP=SHR<br />//*        DD  DSN=&amp;CEE..SCEERUN,DISP=SHR<br />//*        DD  DSN=&amp;CBC..SCLBDLL,DISP=SHR<br />//ENV      DD  DSN=&amp;DATA(&amp;ENVFILE),DISP=SHR<br />//MSGFILE  DD  SYSOUT=*<br />//SYSPRINT DD  SYSOUT=*</pre></div><a name="wp53537"> </a><div class="pPreformatted"><pre>//</pre></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="chap2.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="chap1.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="appa.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
