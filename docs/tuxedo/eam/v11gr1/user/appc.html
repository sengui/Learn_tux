<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="40264" />
<meta name="LOC_US_SRCFILE" content="//depot/ecs/eam/v11gr1/user/fm/appc.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="08/24/10 04:22:07" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>APPC/IMS Programming Considerations</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">User Guide
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="data.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="aparef.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/user.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1029150"> </a>
APPC/IMS Programming Considerations
</h1>
<p class="pBody"><a name="wp1026398"> </a>
This section is intended for application programmers who implement and integrate ATMI platform and host enterprise applications using Application Program-to-Program Communication/Information Management System (APPC/IMS) programs. The application programmer in the <span style="font-style: normal">IMS</span> environment can use implicit or explicit IMS programming techniques.
</p>
<a name="wp1026400"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>All references to ATMI files, functions, and documentation apply to Tuxedo files, functions, and documentation.</td>
</tr>
</table>

<p class="pBody"><a name="wp1026401"> </a>
This section discusses the following topics:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1026408"> </a><a href="appc.html#wp1026434"></a><a href="appc.html#wp1026434"><span class="cHyperlink">
APPC/IMS Overview</span></a> </li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1026412"> </a><a href="appc.html#wp1026438"><span class="cHyperlink">
Implicit API</span></a> </li>
<li><a name="wp1026416"> </a><a href="appc.html#wp1026446"><span class="cHyperlink">
Explicit API</span></a> </li>
</ul></div>
<li><a name="wp1026420"> </a><a href="appc.html#wp1026453"><span class="cHyperlink">
APPC/IMS Programming</span></a> </li>
<div class="pSmartList2Bullet"><ul>
<li><a name="wp1026424"> </a><a href="appc.html#wp1026457"><span class="cHyperlink">
Non-Transactional Application Programming</span></a> </li>
<li><a name="wp1026428"> </a><a href="appc.html#wp1026477"><span class="cHyperlink">
Transactional Application Programming</span></a> </li>
<li><a name="wp1026432"> </a><a href="appc.html#wp1026489"><span class="cHyperlink">
Sample Transaction Programs</span></a> </li>
</ul></div>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1026434"> </a>
APPC/IMS Overview
</h2><p class="pBody"><a name="wp1026435"> </a>
APPC/IMS allows application programs using APPC protocols to enter IMS transactions from LU 6.2 devices supporting APPC. APPC/IMS also provides an environment that enables remote LU 6.2 devices to enter IMS local and remote transactions. In this environment, IMS application programs can insert transaction output to LU 6.2 devices without requiring coding changes to existing application programs and new application programs can make full use of existing LU 6.2 facilities. Applications enter transactions using an implicit or explicit Application Programming Interface (API).
</p>
<h3 class="pHeading2"><a name="wp1026438"> </a>
Implicit API
</h3>
<p class="pBody"><a name="wp1026440"> </a>
The implicit API can be a useful simplification for many applications. While it does not provide all the existing LU6.2 capabilities, this API provides additional functions, such as message queueing and automatic asynchronous message delivery.
</p>
<p class="pBody"><a name="wp1026441"> </a>
Using the IMS application programming base with the implicit API, you can write transactional applications that do not have Common Programming Interface for Communications (CPI-C) calls. IMS generates all the CPI-C calls for you. The application interaction is strictly with the IMS message queue.
</p>
<p class="pBody"><a name="wp1026442"> </a>
The implicit API accesses an APPC conversation indirectly. It uses the standard DL/I calls (GU, ISRT, PURG) to send and receive data. The implicit API allows non-LU 6.2 specific applications to use LU 6.2 transactional protocols, using new and changed DL/I calls (CHNG, INQY, SETO). 
</p>
<p class="pBody"><a name="wp1026443"> </a>
The implicit API creates asynchronous LU 6.2 output by using alternate PCBs referencing LU 6.2 destinations. The DL/I CHNG call can supply parameters to specify an LU 6.2 destination. Default values substitute for omitted parameters.
</p>
<p class="pBody"><a name="wp1026444"> </a>
An application program can use the implicit API to retrieve the current conversation attributes, such as the conversation type (basic or mapped), the sync_level, and whether it is asynchronous or synchronous.
</p>
<h3 class="pHeading2"><a name="wp1026446"> </a>
Explicit API
</h3>
<p class="pBody"><a name="wp1026448"> </a>
An IMS application program can use the explicit API to issue the CPI-C calls directly. The explicit API is useful with remote LU 6.2 systems that have incomplete LU 6.2 implementations, or that are incompatible with the IMS implicit API support. 
</p>
<p class="pBody"><a name="wp1026449"> </a>
The explicit API can be used by any IMS application program to access an APPC conversation directly. IMS resources are available to the CPI-C driven application program only if the application issues the APSB (Allocate_ PSB) call. The CPI-C driven application program must use the CPI-RR <code class="cCode">SRRCMIT</code> and <code class="cCode">SRRBACK</code> verbs to initiate an IMS sync point or backout. 
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1026453"> </a>
APPC/IMS Programming
</h2><p class="pBody"><a name="wp1026454"> </a>
The Oracle Tuxedo Mainframe Adapter for SNA system supports non-transactional and transactional IMS servers using either the implicit APPC support for IMS or the explicit APPC interface using APPC/MVS calls from a user application. Any IMS program that gets messages from, and puts messages into, the IMS message queue can be used without change as either a client or server.
</p>
<p class="pBody"><a name="wp1026455"> </a>
To use the implicit APPC capabilities of IMS, you must modify the <code class="cCode">APPCMxx</code> file in the <code class="cCode">SYS1.PARMLIB</code> library provided with your Oracle Tuxedo Mainframe Adapter for SNA software. The configuration parameters in this file associate the LU with the IMS scheduler. You must identify the LU representing the application name used by Oracle Tuxedo Mainframe Adapter for SNA to access the IMS region and the IMS system ID which provides scheduling for inbound requests. Be sure to discuss with mainframe support personnel the changes you make to the APPCMxx file. 
</p>
<h3 class="pHeading2"><a name="wp1026457"> </a>
Non-Transactional Application Programming
</h3>
<p class="pBody"><a name="wp1026462"> </a>
<a href="appc.html#wp1026464"><span class="cHyperlink">
Listing&#160;6-1</span></a> is an example of a non-transactional program. In this example, the VTAM application major node is designated to be MVSLUO1 and the scheduling facility is designated to be the IMS control region IVP4.
</p>
<div class="pCodeTitle"><a name="wp1026464"> </a>
Listing&#160;6-1	   APPCM File in SYS1.PARMLIB Library (Example Only)
</div> <a name="wp1026465"> </a><div class="pPreformatted"><pre>SYS1.PARMLIB(APPCMxx)<br /> <br />LUADD ACBNAME(MVSLU01) BASE TPDATA(SYS1.APPCTP),                  <br />SCHED(IVP4),                                                      <br />SIDEINFO DATASET(SYS1.APPCSI)<br /> <br />SYS1.VTAMLST(MVSLU01)<br /> <br />MVSLU01 APPL	 ACBNAME=MVSLU01,				ACBNAME FOR APPC				C<br />               APPC=YES,									C<br />               AUTOSES=0,									C<br />               DDRAINL=NALOW,									C<br />               DLOGMOD=APPCHOST,									C<br />               DMINWNL=3,									C<br />               DMINWNR=3,									C<br />               DRESPL=NALLOW,									C<br />               DSESLIM=6,									C<br />               LMDENT=19,									C<br />               MODETAB=APPCTAB,									C<br />               PARSESS=YES,									C<br />               SECACPT=CONV,									C<br />               SRBEXIT=YES,									C<br />               VPACING=1			</pre></div><p class="pBody"><a name="wp1026468"> </a>
The job that starts the IMS subsystem should have the APPC parameter set to <code class="cCode">Y</code>. The example in <a href="appc.html#wp1026473"><span class="cHyperlink">
Listing&#160;6-2</span></a> illustrates such a job, but is not intended to be used under actual conditions. Use your own custom job for starting IMS.
</p>
<div class="pCodeTitle"><a name="wp1026473"> </a>
Listing&#160;6-2	   IMS Subsystem Start Job (Example Only)
</div> <a name="wp1026474"> </a><div class="pPreformatted"><pre>PROC RGN=2000K,SOUT=A,DPTY=&#39;(14,15)&#39;,<br />          SYS=,SYS1=,SYS2=,<br />          RGSUF=IV1,PARM1=APPC=Y,PARM2=,APPLID1=IMS61CR1,AOIS=R IEFPROC EXEC PGM=DFSMVRC0,DPRTY=&amp;DPTY,<br />          REGION=&amp;RGN,<br />          PARM=&#39;CTL,&amp;RGSUF,&amp;PARM1,&amp;PARM2,&amp;APPLID1,&amp;AOIS&#39;<br />*<br />*<br />* THE MEANING AND MAXIMUM SIZE OF EACH PARAMETER<br />* IS AS FOLLOWS:<br />*<br />********** CONTROL REGION SPECIFICATIONS ***********<br />****************************************************<br />*   RGSUF   XXX   EXEC PARM DEFAULT BLOCK SUFFIX FOR<br />*                 MEMBER DFSPBXXX.<br />****************************************************<br />*<br />*  PARM1 , PARM2 PARAMETERS BOTH ARE USED TO SPECIFY<br />*  CHARACTER STRINGS THAT CONTAIN IMS KEYWORD<br />*<br />*  PARAMETERS. I.E. PARM1=&#39;AUTO=Y,PST=222,RES=Y&#39;<br />*<br />*<br />*   APPC    X     Y = ACTIVATE APPC/IMS<br />*                 N = DO NOT ACTIVATE APPC/IMS<br /></pre></div><h3 class="pHeading2"><a name="wp1026477"> </a>
Transactional Application Programming
</h3>
<p class="pBody"><a name="wp1026482"> </a>
<a href="appc.html#wp1026485"><span class="cHyperlink">
Listing&#160;6-3</span></a> is an example of a transactional VTAM program. The inclusion of the LU definition <code class="cCode">SYNCLVL=SYNCPT</code> (shown in bold) makes the program transactional. 
</p>
<a name="wp1026483"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>You should include the <code class="cCode">ATNLOSS=ALL</code> parameter value whenever you use the <code class="cCode">SYNCLVL=SYNCPT</code> definition.</td>
</tr>
</table>

<div class="pCodeTitle"><a name="wp1026485"> </a>
Listing&#160;6-3	   Sample VTAM LU Definition
</div> <a name="wp1026486"> </a><div class="pPreformatted"><pre>MVSLU01 APPL   ACBNAME=MVSLU01,        ACBNAME FOR APPC	 								C<br />               APPC=YES,									C<br />               AUTOSES=0,		 							C<br />               DDRAINL=NALOW,									C<br />               DLMOD=APPCHOST,									C<br />               DMWNL=5,									C<br />               DMINWNR=5,									C<br />               DRESPL=NALLOW,									C<br />               DSESLIM=10,									C<br />               LMDENT=19,									C<br />               MODETAB=APPCTAB,									C<br />               PARSESS=YES,									C<br />               SECACPT=CONV,									C<br />               SRBEXIT=YES,									C<br /><span style="font-weight: normal"> </span><span style="font-weight: bold">              </span><code class="cCodeBold">SYNCLVL=SYNCPT,									C<br /></code>               ATNLOSS=ALL,									C<br />               VPACING=1	</pre></div><h3 class="pHeading2"><a name="wp1026489"> </a>
Sample Transaction Programs
</h3>
<p class="pBody"><a name="wp1026491"> </a>
The following Oracle Tuxedo Mainframe Adapter for SNA transactional test programs are installed in the ATMI platform installation in the subdirectory <code class="cCode">TMA/sna/simpapp</code>: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1026492"> </a><code class="cCode">simpims.c</code> is a simple ATMI client used to invoke both the sample IMS server programs. It takes a data string and service name as inputs. It invokes the service and passes the input data string.</li>
<li><a name="wp1026493"> </a><code class="cCode">IMPIMSSV.cbl</code> is a simple IMS echo server. It reads data from the IMS message queue and writes the same data in response. It is intended to be used as an implicit SNA example.</li>
<li><a name="wp1026494"> </a><code class="cCode">EXPIMSSV.c is</code> an IMS server transaction using explicit CPI-C calls. It is written for sync level 2 use. The program uses an IBM sample database, <code class="cCode">IVPDB2</code>. The program displays, adds, and deletes records from the database, based on an input string. Sample input strings are documented in the source.</li>
<li><a name="wp1026495"> </a><code class="cCode">BEAWTOR.asm </code>is an assembler subroutine used by <code class="cCode">EXPIMSSV.c</code> to write messages to the MVS console log.</li>
</ul></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="appc.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="data.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="aparef.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
