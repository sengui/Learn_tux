<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="1" />
<meta name="LOC_US_CHANGE" content="40264" />
<meta name="LOC_US_SRCFILE" content="//depot/ecs/tcp/v11gr1/imsug/fm/imsprog.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="08/24/10 07:24:39" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Programming Oracle TMA TCP for IMS</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">IMS User Guide
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="imsmont.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="imsapssr.html"><img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next.gif" border="0" alt="Next" /></a>&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
<a accesskey="2" href="javascript:OpenWindowIndex();" onmouseover="window.status='Index'; return true" onfocus="window.status='Index'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open Index in new window">     <img id="LongDescNotReq5" src="/global_resources//images/doc_nav_index.gif" border="0" alt="Open Index in new window" /></a>&nbsp;
<a href="../pdf/imsug.pdf" target="pdf"><img id="LongDescNotReq6" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq7" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1025391"> </a>
Programming Oracle TMA TCP for IMS
</h1>
<p class="pBody"><a name="wp1023860"> </a>
Oracle Tuxedo Mainframe Adapter for TCP (IMS) (hereafter referenced as TMA TCP for IMS) allows user-written IMS application transactions to service requests received from remote systems (server requests) and to initiate requests for services provided by remote systems (client requests).
</p>
<p class="pBody"><a name="wp1023861"> </a>
The following topics are programming considerations:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1023865"> </a><a href="imsprog.html#wp1023887"><span class="cHyperlink">
Programming Your Application</span></a> </li>
<li><a name="wp1023869"> </a><a href="imsprog.html#wp1023891"><span class="cHyperlink">
Programming Interface</span></a> </li>
<li><a name="wp1023873"> </a><a href="imsprog.html#wp1023981"><span class="cHyperlink">
Returning a Response</span></a> </li>
<li><a name="wp1024712"> </a><a href="imsprog.html#wp1024009"><span class="cHyperlink">
IMS Client Requests</span></a> </li>
<li><a name="wp1024716"> </a><a href="imsprog.html#wp1024169"><span class="cHyperlink">
Error Handling</span></a> </li>
<li><a name="wp1024720"> </a><a href="imsprog.html#wp1024208"><span class="cHyperlink">
How Oracle TMA TCP Gateway Translates Data</span></a> </li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1023887"> </a>
Programming Your Application
</h2><p class="pBody"><a name="wp1023888"> </a>
IMS client and server transactions are ordinary IMS message processing programs (MPPs) and with the use of OTMA, server transactions can also be FastPath programs. These programs may be written in any programming language supported by IMS. Because COBOL is the traditional language used for this purpose, the examples in this document are written in COBOL. However, these examples may be translated easily to other supported programming languages such as C.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1023891"> </a>
Programming Interface
</h2><p class="pBody"><a name="wp1023895"> </a>
The TMA TCP for IMS product and user-written IMS client and server transactions communicate by exchanging standard IMS messages (using the IMS message queue directly or through OTMA). 
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1023898"> </a>
IMS Server Requests
</h2><p class="pBody"><a name="wp1023899"> </a>
An IMS server transaction is one that services requests originated by a remote system. The request message is inserted directly into the IMS message queue or indirectly through OTMA as a single segment. The IMS server transaction retrieves the request message from the IMS message queue and processes the request as required.
</p>
<h3 class="pHeading2"><a name="wp1023900"> </a>
Message Format
</h3>
<p class="pBody"><a name="wp1023912"> </a>
When running the TMA TCP gateway as an OTMA client, the request or response message is in the standard IMS message format. The following message is a sample when using OTMA.
</p>
<div class="pCodeTitle"><a name="wp1023913"> </a>
Listing&#160;6-1	   Sample Message using OTMA
</div> <a name="wp1025876"> </a><div class="pPreformatted"><pre>01 BEA-SERVER-REQUEST-RESPONSE-MESSAGE.<br />05 BEA-SERVER-HEADER<br />   10 LL             PIC 9(4) COMP VALUE 0.<br />   10 ZZ             PIC 9(4) COMP VALUE 0.<br />   10 TRAN-CODE      PIC X(8) VALUE SPACES.<br />   REQUEST-DATA.</pre></div><h3 class="pHeading2"><a name="wp1023916"> </a>
Field Descriptions
</h3>
<p class="pBody"><a name="wp1023917"> </a>
The request messages contain the following fields.
</p>
<p class="pGraphic"><a name="wp1023961"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1023920table1023918">
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1023920"> </a>
<span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">Field</span>
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1023922"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023924"> </a>
<code class="cCode">LL</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023926"> </a>
The length of the complete request or response message (including this field).
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023928"> </a>
<code class="cCode">ZZ</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023930"> </a>
Reserved for use by IMS; normally zero.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023932"> </a>
<code class="cCode">TRAN-CODE</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023934"> </a>
For a request message, the transaction code of the IMS server transaction. For a response message, the transaction code of the TMA TCP for IMS gateway.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023939"> </a>
<code class="cCode">FILL-CHAR</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023941"> </a>
Message fill character (space).
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1023962"> </a>
Header Files and Copybooks
</h3>
<p class="pBody"><a name="wp1023964"> </a>
The <code class="cCode">INCLUDE</code> distribution library contains the following header files and copybooks for use by IMS server transactions.
</p>
<p class="pGraphic"><a name="wp1023979"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1023967table1023965">
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1023967"> </a>
Member Name
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1023969"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023971"> </a>
<code class="cCode">BEATCPI</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023973"> </a>
C Header file
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023975"> </a>
<code class="cCode">SERVER</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1023978"> </a>
COBOL copybook
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1023981"> </a>
Returning a Response
</h2><p class="pBody"><a name="wp1023982"> </a>
If a response is required, the server transaction formats a client response message. 
</p>
<h3 class="pHeading2"><a name="wp1024001"> </a>
OTMA Client Gateway
</h3>
<p class="pBody"><a name="wp1024002"> </a>
The request message presented to the server transaction contains the name of the transaction pipe (<code class="cCode">tpipe</code>) in the <code class="cCode">LTERM</code> field of the I/O PCB. If the security feature is in use, the <code class="cCode">USERID</code> and <code class="cCode">GROUPID</code> fields of I/O PCB also contain relevant data.
</p>
<p class="pBody"><a name="wp1024003"> </a>
If a response is required, the response message is inserted into the IMS message queue and routed back to the gateway by OTMA. The response message is inserted either as a single segment, or as multiple segments. The TMA TCP for IMS gateway can handle either format.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1024009"> </a>
IMS Client Requests
</h2><p class="pBody"><a name="wp1024010"> </a>
An IMS client transaction is one that issues a request for a service provided by a remote system. You must install the <code class="cCode">DFSYPRX0</code> and <code class="cCode">DFSYDRU0</code> IMS user exits prior to using an IMS client transaction with the OTMA client gateway. Refer to the IBM document, <em class="cEmphasis">Open Transaction Manager Access Guide</em> for additional information on these user exits. Basic samples of these exits are in the <a href="imsapjcl.html"><span class="cHyperlink">
Sample JCL and User Exits</span></a> section.
</p>
<h3 class="pHeading2"><a name="wp1024014"> </a>
Message Format
</h3>
<p class="pBody"><a name="wp1024018"> </a>
An TMA TCP for IMS client request or response message consists of three contiguous &#8220;sections&#8221;: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1024847"> </a>BEA-defined request/response header</li>
<li><a name="wp1024848"> </a>User-defined context data</li>
<li><a name="wp1024849"> </a>User-defined request or response data</li>
</ul></div>
<p class="pBody"><a name="wp1024022"> </a>
An TMA TCP for IMS client request or response has the following message format.
</p>
<div class="pCodeTitle"><a name="wp1024023"> </a>
Listing&#160;6-2	   Client Request/Response Message Format
</div> <a name="wp1024024"> </a><div class="pPreformatted"><pre>01 BEA-CLIENT-REQUEST-RESPONSE-MESSAGE.<br />   05 BEA-CLIENT-HEADER.<br />      10 LL                    PIC 9(04) COMP VALUE 0.<br />      10 ZZ                    PIC 9(04) COMP VALUE 0.<br />      10 TRAN-CODE             PIC  X(08) VALUE SPACES.<br />      10 FILL-CHAR             PIC  X     VALUE SPACES.<br />      10 BEA-RESERVED-1        PIC  X(03) VALUE LOW-VALUES.<br />      10 HEADER-LENGTH         PIC 9(08) COMP VALUE 0. .<br />      10 CONTEXT-LENGTH        PIC 9(08) COMP VALUE 0.<br />      10 DATA-LENGTH           PIC 9(08) COMP VALUE 0.<br />      10 MAX-RESPONSE-LENGTH   PIC 9(08) COMP VALUE 0.<br />      10 REQUEST-TYPE          PIC 9(08) COMP VALUE 0.<br />         88 REQUEST-RESPONSE-REQUIRED          VALUE 1.<br />         88 REQUEST-NO-RESPONSE                VALUE 2.<br />      10 RESPONSE-FORMAT       PIC 9(08) COMP VALUE 0.<br />         88 RESPONSE-SINGLE-SEGMENT            VALUE 0.<br />         88 RESPONSE-MULTI-SEGMENT             VALUE 1.<br />      10 ERROR-CODE            PIC S9(08) COMP VALUE +0.<br />         88 ERR_NO_ERROR                       VALUE +0.<br />         88 ERR_RESPONSE_TRUNCATED             VALUE +4.<br />         88 ERR_HOST_NOT_AVAILABLE             VALUE +8.<br />         88 ERR_HOST_BUSY                      VALUE 12.<br />         88 ERR_TIMEOUT                        VALUE 16.<br />         88 ERR_SERVICE_NAME                   VALUE 20.<br />         88 ERR_NO_STORAGE                     VALUE 24.<br />         88 ERR_REQUEST_FORMAT                 VALUE 28.<br />         88 ERR_HOST_ERROR                     VALUE 32.<br />         88 ERR_TP_ERROR                       VALUE 36.<br />         88 ERR_INTERNAL_ERROR                 VALUE 40.<br />      10 REASON-CODE           PIC S9(08) COMP VALUE +0.<br />         88 RSN_NO_REASON                      VALUE  0.<br />         88 RSN_HEADER_LENGTH                  VALUE  4.<br />         88 RSN_HEADER_LENGTHS                 VALUE  8.<br />         88 RSN_REQUEST_TYPE                   VALUE 12.<br />         88 RSN_NO_RESPONSE_TRAN               VALUE 16.<br />         88 RSN_CONTEXT_LENGTH                 VALUE 20.<br />         88 RSN_DATA_LENGTH                    VALUE 24.<br />         88 RSN_MAX_DATA_LENGTH                VALUE 28.<br />         88 RSN_NO_SERVICE_NAME                VALUE 32.<br />         88 RSN_SERVICE_NAME_UNDEFINED         VALUE 36.<br />      10 SERVICE-NAME          PIC  X(16) VALUE SPACES.<br />      10 RESPONSE-TRAN         PIC  X(08) VALUE SPACES.<br />      10 ORIGIN-TERMINAL       PIC  X(08) VALUE SPACES.<br />      10 BEA-RESERVED-2        PIC  X(16) VALUE LOW-VALUES.<br />   05 USER-CONTEXT-DATA.<br />      10 (<span style="font-style: italic">user-defined...</span>)|<br />   05 USER-REQUEST-DATA.<br />      10 (<span style="font-style: italic">user-defined...</span>)<br />   05 USER-RESPONSE-DATA REDEFINES USER-REQUEST-DATA.<br />      10 (<span style="font-style: italic">user-defined...</span>)</pre></div><h3 class="pHeading2"><a name="wp1024026"> </a>
Field Descriptions
</h3>
<p class="pBody"><a name="wp1024027"> </a>
The client request or response messages contain the following fields.
</p>
<p class="pGraphic"><a name="wp1024149"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1024030table1024028">
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1024030"> </a>
Field
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1024032"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024034"> </a>
<code class="cCode">LL</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024036"> </a>
The length of the complete request or response message (including this field).
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024038"> </a>
<code class="cCode">ZZ</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024040"> </a>
Reserved for use by IMS; normally zero.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024042"> </a>
<code class="cCode">TRAN-CODE</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024046"> </a>
For a request message, the transaction code of the TMA TCP for IMS gateway. For a response message, the transaction code of the IMS client response transaction.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024049"> </a>
<code class="cCode">FILL-CHAR</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024051"> </a>
Message fill character (space).
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024053"> </a>
<code class="cCode">BEA-RESERVED-1</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024058"> </a>
Reserved for use by TMA TCP for IMS. For a request message, this field <em class="cEmphasis">must</em> be initialized to binary zero (low values).
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024060"> </a>
<code class="cCode">HEADER-LENGTH</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024062"> </a>
The length of the BEA request/response header.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024064"> </a>
<code class="cCode">CONTEXT-LENGTH</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024066"> </a>
The length of user context data, if any. If there is no context data, the length is set to zero.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024068"> </a>
<code class="cCode">DATA-LENGTH</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024070"> </a>
The length of user request or response data, if any. If there is no request or response data, the length is set to zero.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024072"> </a>
<code class="cCode">MAX-RESPONSE-LENGTH</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024074"> </a>
For a request, the maximum length of user response data that can be accepted. If the response data exceeds this length, it is truncated as necessary and appropriate return codes are set.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024076"> </a>
<code class="cCode">REQUEST-TYPE</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024078"> </a>
For a request, indicates whether or not a response is required.
</div>
<div class="pCellBody"><a name="wp1024082"> </a>
If no response is required, TMA TCP for IMS schedules the specified response transaction as soon as the request has been sent to the remote system.
</div>
<div class="pCellBody"><a name="wp1024083"> </a>
Otherwise, the response transaction is scheduled when the required response has been received from the remote system.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024085"> </a>
<code class="cCode">RESPONSE-FORMAT</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024087"> </a>
For a request, specifies the type or response message format desired.
</div>
<div class="pCellBody"><a name="wp1024090"> </a>
If the single segment option is specified (the default), TMA TCP for IMS inserts the complete response message into the IMS message queue as a single message segment.
</div>
<div class="pCellBody"><a name="wp1024092"> </a>
If the multi-segment option is requested, the response message is inserted into the IMS message queue in three separate segments. 
</div>
<div class="pSmartList1Table"><ol type="1" class="pSmartList1Table">
<li value="1"><a name="wp1024093"> </a>response header</li>
<li value="2"><a name="wp1024094"> </a>user context data</li>
<li value="3"><a name="wp1024095"> </a>user response data</li>
</ol></div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024097"> </a>
<code class="cCode">ERROR-CODE</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024099"> </a>
This field is set in the response message to indicate that an error occurred. If this field is zero, the request successfully processed. Otherwise, the error code indicates the nature of the error that occurred.
</div>
<div class="pCellBody"><a name="wp1025171"> </a>
Error codes are documented in the <a href="imsaprsn.html"><span class="cHyperlink">
Error and Reason Codes</span></a> section.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024105"> </a>
<code class="cCode">REASON-CODE</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024107"> </a>
For certain kinds of errors, this field may be set to provide additional information about the error. If this field is zero, no additional information is available.
</div>
<div class="pCellBody"><a name="wp1024110"> </a>
Reason Codes are documented in the <a href="imsaprsn.html"><span class="cHyperlink">
Error and Reason Codes</span></a> section.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024113"> </a>
<code class="cCode">SERVICE-NAME</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024115"> </a>
Specifies the name of the service (as locally defined to TMA TCP for IMS) that processes the request. Note that the local service name may not be the same as the remote system name.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024120"> </a>
<code class="cCode">RESPONSE-TRAN</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024122"> </a>
The name of the transaction (IMS transaction code) that is to be scheduled to process the response to a request. A response transaction <span style="font-style: italic">must</span> be specified for <span style="font-style: italic">all requests</span>, even if an application-level response is not required.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024124"> </a>
<code class="cCode">ORIGIN-TERMINAL</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024126"> </a>
The name of the terminal (<code class="cCode">IMS</code> <code class="cCode">LTERM</code>) associated with this request. For example, if the request is issued by a transaction processing a terminal message, this name is the name of the associated terminal.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024128"> </a>
<code class="cCode">BEA-RESERVED-2</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024133"> </a>
Reserved for use by TMA TCP for IMS. For a request message, this field <em class="cEmphasis">must</em> be initialized to binary zero (low values).
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024135"> </a>
<code class="cCode">USER-CONTEXT-DATA</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024137"> </a>
This user-defined data area is preserved by TMA TCP for IMS and returned in the response message. This data can be used for any purpose; for example, the response transaction can use this data to correlate the response with the original request. The context data, if present, must immediately follow the BEA request header with no intervening (slack) bytes.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024142"> </a>
<code class="cCode">USER-REQUEST-DATA</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024144"> </a>
For a request message, user-defined data specific to the request. The request data, if present, must immediately follow the context data (if any), with no intervening (slack) bytes.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024146"> </a>
<code class="cCode">USER-RESPONSE-DATA</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024148"> </a>
For a response message, the user-defined data specific to the response. The response data, if any, must immediately follow the context data (if any) with no intervening (slack) bytes.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1024150"> </a>
Header Files and Copybooks
</h3>
<p class="pBody"><a name="wp1024151"> </a>
The <code class="cCode">INCLUDE</code> distribution library contains the following header files and copybooks for use by IMS client transactions.
</p>
<p class="pGraphic"><a name="wp1024165"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1024154table1024152">
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1024154"> </a>
Member Name
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1024156"> </a>
Description
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024158"> </a>
<code class="cCode">BEATCPI</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024160"> </a>
C Header file
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024162"> </a>
<code class="cCode">SERVER</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024164"> </a>
COBOL copybook
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1024169"> </a>
Error Handling
</h2><p class="pBody"><a name="wp1024170"> </a>
Every client request <span style="font-style: italic">must</span> designate a response transaction (even though the request itself may not require an application-level response). The TMA TCP for IMS product schedules the response transaction if an error is encountered that prevents processing of the request (for example, the request may be improperly formatted, or the specified service may be unavailable).
</p>
<p class="pBody"><a name="wp1024174"> </a>
The response transaction should always check the error code to determine whether the request was successfully processed.
</p>
<h3 class="pHeading2"><a name="wp1024175"> </a>
Types of Errors
</h3>
<p class="pBody"><a name="wp1024179"> </a>
The TMA TCP for IMS product recognizes a wide variety of error conditions that may prevent successful processing of a client request. These are briefly summarized in the following sections.
</p>
<h4 class="pDefTerm"><a name="wp1024180"> </a>
Invalid Request Format
</h4><div class="pDefPara"><a name="wp1024184"> </a>
The TMA TCP for IMS gateway validates a client request prior to sending it to a remote system for processing. Types of validation errors include invalid service name, invalid length values, etc.
</div>
<h4 class="pDefTerm"><a name="wp1024185"> </a>
Remote System Not Available
</h4><div class="pDefPara"><a name="wp1024189"> </a>
The TMA TCP for IMS gateway may be unable to process a request because the required remote system is either inaccessible or currently busy processing other requests.
</div>
<h4 class="pDefTerm"><a name="wp1024191"> </a>
Request Timeout
</h4><div class="pDefPara"><a name="wp1024195"> </a>
The TMA TCP for IMS gateway monitors each request sent to a remote system for processing. If a response is required and is not received within a prescribed period of time, the request <span style="font-style: italic">times out</span>.
</div>
<h4 class="pDefTerm"><a name="wp1024197"> </a>
Remote System Errors
</h4><div class="pDefPara"><a name="wp1024198"> </a>
The request may fail due to an error that occurs on the remote system. For example, the requested service may detect an application-level error, a security authorization failure, or the remote gateway may be unable to invoke the requested service.
</div>
<h3 class="pHeading2"><a name="wp1024199"> </a>
Other Errors
</h3>
<p class="pBody"><a name="wp1024203"> </a>
Although unlikely, it is possible that TMA TCP for IMS may be unable to process a request due to an internal or system error, such as a temporary storage shortage.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1024208"> </a>
How Oracle TMA TCP Gateway Translates Data
</h2><p class="pBody"><a name="wp1024209"> </a>
When a client program on the remote Oracle Tuxedo system sends data to (or receives data from) a service routine on a different model of computer, TMA TCP Gateway automatically translates data as required. Translation involves changing the representation of intrinsic data types by changing attributes such as the following:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1024213"> </a>Word length</li>
<li><a name="wp1024214"> </a>Byte order</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1024215"> </a>
Oracle Tuxedo Buffer Types
</h3>
<p class="pBody"><a name="wp1024216"> </a>
The following table contains definitions for buffer types.
</p>
<p class="pGraphic"><a name="wp1024242"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1024219table1024217">
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1024219"> </a>
Term
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1024221"> </a>
Definition
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024224"> </a>
<code class="cCode">STRING</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024226"> </a>
A buffer of character data that is terminated by the first null character in the buffer. Typically these character string buffers undergo translation when sent to a system that is dissimilar from the sending system.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024229"> </a>
<code class="cCode">CARRAY</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024231"> </a>
A <code class="cCode">CARRAY</code> is a buffer of raw data that contains no terminating character. The data in the array undergoes no conversion or translation; it is sent from one system to another without modification. (A <code class="cCode">CARRAY</code> is an exemplary buffer type for a graphics file.)
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024234"> </a>
<code class="cCode">VIEW</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024236"> </a>
A <code class="cCode">VIEW</code> buffer is a collection of field definitions that can be treated as a single entity. It is comparable to a record layout in COBOL or a structure in C.
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024239"> </a>
<code class="cCode">FML</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024241"> </a>
Fielded manipulation language (FML) buffers are variable length, dynamic, self-describing buffers. Each field in the buffer has its own descriptive header. In the Oracle Tuxedo product, FML buffers can be tied closely to <code class="cCode">VIEW</code> buffers so that conversion from one to the other is direct.
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1024243"> </a>
Data Translation Rules
</h3>
<p class="pBody"><a name="wp1024247"> </a>
The TMA TCP Gateway adheres to the following data translation rules:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1024248"> </a><code class="cCode">CARRAY</code> fields are passed untranslated as sequences of bytes.</li>
<li><a name="wp1024249"> </a><code class="cCode">STRING</code> and <code class="cCode">CHAR</code> fields undergo ASCII to EBCDIC translation (if needed).</li>
<li><a name="wp1024250"> </a><code class="cCode">SHORT</code> and <code class="cCode">LONG</code> fields are translated to <code class="cCode">S9(4) COMP</code> and <code class="cCode">S9(9) COMP</code>, respectively.</li>
<li><a name="wp1024251"> </a><code class="cCode">FLOAT</code> and <code class="cCode">DOUBLE</code> fields are translated to COMP-1 and COMP-2, respectively.</li>
</ul></div>
<a name="wp1024252"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The Oracle Tuxedo product provides a field type named <code class="cCode">dec_t</code> that supports decimal values within <code class="cCode">VIEW</code>s. The&#160;TMA TCP for IMS gateway translates these fields into machine independent representations of packed decimals. For example, <code class="cCode">dec_t(m,n)</code> becomes <code class="cCode">S9(2*m-(n+1))V9(n) COMP-3</code>. Therefore, a decimal field with a size of 8,5 corresponds to <code class="cCode">S9(10)V9(5) COMP-3</code>. </td>
</tr>
</table>

<p class="pBody"><a name="wp1024256"> </a>
The following table summarizes the rules for translating between C and IBM 370 data types.
</p>
<p class="pGraphic"><a name="wp1024320"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1024259table1024257">
  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1024259"> </a>
Remote Data Type
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1024261"> </a>
Description
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1024263"> </a>
View Field <br />Type/Length
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024265"> </a>
<code class="cCode">PIC X(n)</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024267"> </a>
Alphanumeric characters
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024269"> </a>
<code class="cCode">string / n</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024271"> </a>
<code class="cCode">PIC X</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024273"> </a>
Single alphanumeric character
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024275"> </a>
<code class="cCode">char</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024277"> </a>
<code class="cCode">PIC X(n)</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024279"> </a>
Raw bytes
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024281"> </a>
<code class="cCode">carray / n</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024283"> </a>
<code class="cCode">PIC 9</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024285"> </a>
Single numeric byte
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024287"> </a>
<code class="cCode">carray / 1</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024289"> </a>
<code class="cCode">PIC S9(4) COMP</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024291"> </a>
32-bit integer
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024293"> </a>
<code class="cCode">short</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024295"> </a>
<code class="cCode">PIC S9(9) COMP</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024297"> </a>
64-bit integer
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024299"> </a>
<code class="cCode">long</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024301"> </a>
<code class="cCode">COMP-1</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024303"> </a>
Single-precision floating point
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024305"> </a>
<code class="cCode">float</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024307"> </a>
<code class="cCode">COMP-2</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024309"> </a>
Double-precision floating point
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024311"> </a>
<code class="cCode">double</code>
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024313"> </a>
<code class="cCode">PIC</code>
</div>
<div class="pCellBody"><a name="wp1024314"> </a>
<code class="cCode">S9((m+(n+1))/2)V9(n)</code>
</div>
<div class="pCellBody"><a name="wp1024315"> </a>
<code class="cCode">COMP-3</code>
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024317"> </a>
Packed decimal
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1024319"> </a>
<code class="cCode">dec_t / m,n</code>
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1024322"> </a>
Strings and Numeric Data: A Closer Look
</h4>
<p class="pBody"><a name="wp1024323"> </a>
This section provides the following information:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1024324"> </a>Suggestions that help you develop <code class="cCode">VIEW</code> definitions for input and output buffers and records</li>
<li><a name="wp1024329"> </a>Explanations of how TMA TCP Gateway treats string data and numeric data</li>
</ul></div>
<h4 class="pHeading3"><a name="wp1024331"> </a>
Including NULL Characters in String Length Calculations 
</h4>
<p class="pBody"><a name="wp1024333"> </a>
When you create <code class="cCode">VIEW</code> definitions for input and output buffers that are used by IMS applications, do not specify extra characters for terminating NULL characters that are used in string fields.
</p>
<p class="pBody"><a name="wp1024334"> </a>
For example, when a remote IMS application program expects 10 characters in an input record, specify <em class="cEmphasis">10</em> for that field, not 10 plus 1 (for the terminating NULL character).
</p>
<a name="wp1024338"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>Although TMA TCP Gateway does not require strings to be NULL-terminated, it respects NULL termination. Therefore, when TMA TCP Gateway detects a NULL (zero) character within a string, it does not process any subsequent characters. To pass full 8-bit data that contains embedded NULL values, use a <code class="cCode">CARRAY</code> type field or buffer.</td>
</tr>
</table>

<p class="pBody"><a name="wp1024345"> </a>
The character set translations performed by TMA TCP Gateway are fully localizable, in accordance with the <span style="font-style: italic">X/Open XPG Portability Guides</span>. ASCII and EBCDIC translations are loadable from message files. The&#160;TMA TCP Gateway product contains default behaviors that should meet the requirements of most English-language applications. However, you may find it necessary to customize tables. For complete instructions, see the <span style="font-style: italic">Oracle </span><em style="font-style: italic" class="cEmphasis">Tuxedo Mainframe Adapter for TCP Gateway </em><span style="font-style: italic">User Guide</span>.
</p>
<h4 class="pHeading3"><a name="wp1024353"> </a>
Converting Numeric Data
</h4>
<p class="pBody"><a name="wp1024354"> </a>
You can convert numeric data easily into different data types, provided that you have enough range in the intermediate and destination types to handle the maximum value you need to represent.
</p>
<p class="pBody"><a name="wp1024355"> </a>
For example, you can convert an FML field of double into a packed decimal field on the remote target system by specifying an appropriate <code class="cCode">dec_t type VIEW</code> element.
</p>
<p class="pBody"><a name="wp1024356"> </a>
In addition, you can convert numeric values into strings (and the reverse). For example, while FML buffers do not directly support the <code class="cCode">dec_t</code> type, you can place decimal values in string fields and map these to <code class="cCode">dec_t</code> fields within <code class="cCode">VIEW</code> definitions.
</p>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="imsprog.html"><img id="LongDescNotReq8" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="imsmont.html"><img id="LongDescNotReq9" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<a accesskey="5" href="imsapssr.html"><img id="LongDescNotReq10" src="/global_resources/images/nexttop.gif" border="0" alt="Next" /></a>
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
