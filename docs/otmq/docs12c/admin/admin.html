<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="" />
<meta name="LOC_US_CHANGE" content="" />
<meta name="LOC_US_SRCFILE" content="" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WFP_Template_V1.04" />
    <meta name="LASTUPDATED" content="06/27/12 02:44:03" />
    <link rel="StyleSheet" href="/global_resources/edocs.css" type="text/css" media="all" />

<title>Oracle Tuxedo Message Queue Administration Guide</title>

<!-- BEA scripts begin -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the banner required for edocs documentation. -->

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="Javascript1.1" src="/global_resources/js/footer.js" type="text/javascript"></script>
<!-- This script outputs the footer with the correct copyright date and link to copyright page.-->

<script language="Javascript1.1" src="/global_resources/js/googlesearch4.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="/global_resources/js/note.js" type="text/javascript"></script>
<!-- This script outputs a note such as a BETA note. -->

<script language="JavaScript1.1" src="/global_resources/js/search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<!-- BEA scripts end -->

  </head>

  <body>


<script language="Javascript1.1" type="text/javascript">
GoogleURL();
</script><noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
Banner();
</script><noscript>This script outputs the banner required for edocs documentation.</noscript>

<script language="Javascript1.1" type="text/javascript">
GoogleSearchCollection();
</script><noscript>This script outputs the google search parameters required for search on edocs documentation.</noscript>

<!-- page title -->
<h1 class="booktitle">Administration Guide
</h1>
<!-- page title end -->

    <table id="SummaryNotReq1" width="100%" border="0" align="left" cellpadding="2%" cellspacing="0">
      <tr> 
        <td>
&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="index.html"><img id="LongDescNotReq1" src="/global_resources/images/doc_nav_prev.gif" border="0" alt="Previous" /></a>&nbsp;
<img id="LongDescNotReq2" src="/global_resources/images/doc_nav_next_grey1.gif" border="0" alt="Next" />&nbsp;
<img id="LongDescNotReq3" src="/global_resources/images/doc_nav_dots.gif" border="0" alt="" />&nbsp;
<a accesskey="1" href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window">      <img id="LongDescNotReq4" src="/global_resources/images/doc_nav_contents.gif" alt="Open TOC in new window" border="0" /></a>&nbsp;
&nbsp;
<a href="../pdf/admin.pdf" target="pdf"><img id="LongDescNotReq5" src="/global_resources/images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF - New Window" title="View as PDF - New Window" border="0" /></a>&nbsp;
<a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img id="LongDescNotReq6" src="/global_resources/images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader - New Window" title="Get Adobe Reader - New Window" border="0" /></a>
<a name="link_group_0"></a>
	</td>
      </tr>
    </table>

<a name="skipnav" title="Content starts here"><img src="/global_resources/images/_.gif" alt="Content starts here" border="0" height="1" width="1" /></a>



<h1 class="pChapHead"><a name="wp1043185"> </a>
Oracle Tuxedo Message Queue Administration Guide
</h1>
<p class="pBody"><a name="wp1058867"> </a>
This chapter contains the following topics:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058876"> </a><a href="admin.html#wp1061080">OTMQ and Oracle Tuxedo</a></li>
<li><a name="wp1061067"> </a><a href="admin.html#wp1062754">Administrator Tasks</a></li>
<li><a name="wp1060510"> </a><a href="admin.html#wp1060514">Interoperability</a></li>
<li><a name="wp1060089"> </a><a href="admin.html#wp1058512">Configuring for OTMQ Application</a></li>
<li><a name="wp1058881"> </a><a href="admin.html#wp1058558">Creating OTMQ Queue Space and Queues</a></li>
<li><a name="wp1058882"> </a><a href="admin.html#wp1058633">Configuration for Communication crossing OTMQ Queue Spaces</a></li>
<li><a name="wp1058883"> </a><a href="admin.html#wp1058682">Configuration for /WS Clients</a></li>
<li><a name="wp1059729"> </a><a href="admin.html#wp1058691">Configuration for Communication with Oracle Tuxedo /Q</a></li>
<li><a name="wp1059730"> </a><a href="admin.html#wp1058706">Configuration for Communication with Oracle Message Queue</a></li>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1061080"> </a>
OTMQ and Oracle Tuxedo
</h2><a name="wp1061093"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>This section provides a high-level overview of how OTMQ works with Oracle Tuxedo. If you are already familiar with how these products work with each other, you can skip this section.</td>
</tr>
</table>

<p class="pBody"><a name="wp1061124"> </a>
OTMQ is implemented based on the Oracle Tuxedo infrastructure, which is a typical client-server mode. The basic queuing features are provided by the central OTMQ server <code class="cCode">TuxMsgQ(5)</code>. For more information, see the Oracle Tuxedo Message Queue Reference Guide. 
</p>
<p class="pBody"><a name="wp1061125"> </a>
As the foundation and physical storage of OTMQ, the QSpace is the actual physical device that the messages reside in. The QSpace contains one or more message queues. A message is stored in a message queue.
</p>
<p class="pBody"><a name="wp1061126"> </a>
When a client calls the queuing service to enqueue/dequeue messages to/from one message queue, the request will be handled by the TuxMsgQ server. The server will write or retrieve messages from the queue defines in the specific QSpace as the client request.
</p>
<p class="pBody"><a name="wp1061412"> </a>
User processes cannot access the QSpace directly. All requests to operating the QSpace should go through the OTMQ server. <a href="admin.html#wp1061413">Figure&#160;1</a> show the OTMQ and Tuxedo Architecture.
</p>
<div class="pFigureTitle"><a name="wp1061413"> </a>
Figure&#160;1   OTMQ and Oracle Tuxedo Architecture.
</div>

 
 <p class="pGraphic"><a name="wp1061359"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/otmq_tux.png" alt="OTMQ and Oracle Tuxedo Architecture." id="wp1061357" border="0" hspace="0" vspace="0"/></div><p class="pGraphic">

</p>
<p class="pBody"><a name="wp1061309"> </a>
There are several more components that enrich the queuing features of OTMQ, such as naming server TMQ_NA, etc. For more detail description about these components, please refer to the OTMQ E-doc &quot;OTMQ system components&quot;. 
</p>
<p class="pBody"><a name="wp1063953"> </a>
This section contains the following topics:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1063614"> </a><a href="admin.html#wp1061310">OTMQ Based on Oracle Tuxedo</a></li>
<li><a name="wp1063620"> </a><a href="admin.html#wp1061690">Using Oracle Tuxedo Domains</a></li>
<li><a name="wp1063625"> </a><a href="admin.html#wp1061698">Oracle Tuxedo Configuration</a></li>
<li><a name="wp1063630"> </a><a href="admin.html#wp1061868">Using Oracle Tuxedo Workstation Component</a></li>
<li><a name="wp1063697"> </a><a href="admin.html#wp1062067">Deploying OTMQ on OracleTuxedo Domain(s)</a></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1061310"> </a>
OTMQ Based on Oracle Tuxedo
</h3>
<p class="pBody"><a name="wp1061571"> </a>
As the foundation of OTMQ, Oracle Tuxedo provides the framework for building scalable multi-tier client-to-server applications in heterogeneous, distributed environment. 
</p>
<p class="pBody"><a name="wp1061572"> </a>
First, some important concept for Oracle Tuxedo:
</p>
<p class="pBody"><a name="wp1061573"> </a>
An Oracle Tuxedo domain, also known as an Oracle Tuxedo application, is a set of Tuxedo system, client, and server processes administered as a single unit from a single Tuxedo configuration file. An Oracle Tuxedo domain consists of many system processes, one or more application client processes, one or more application server processes, and one or more computer machines connected over a network. 
</p>
<p class="pBody"><a name="wp1061575"> </a>
For one Oracle Tuxedo domain, the architecture can be a single machine (SHM) or multiple machines (MP) connected though networks.
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1061638"> </a>SHM</li>
<p class="pBodyRelative"><a name="wp1061639"> </a>
A SHM domain is a single node Oracle Tuxedo domain where all Oracle Tuxedo processes have access to the same share memory.
</p>
<li><a name="wp1061640"> </a>MP</li>
<p class="pBodyRelative"><a name="wp1061641"> </a>
A MP domain is a clustered environment where the application can be spread across multiple machines/nodes, but all these nodes of the cluster are managed as a single entity. 
</p>
<li><a name="wp1061642"> </a>Multiple Domains</li>
<p class="pBodyRelative"><a name="wp1061643"> </a>
An Oracle Tuxedo application can consist with multiple domains. Each domain is a separately administered unit. Oracle Tuxedo allows the application to separate into multiple domains and still allow applications in one domain to access services in other domains
</p>
</ul></div>
<h3 class="pHeading2"><a name="wp1061690"> </a>
Using Oracle Tuxedo Domains
</h3>
<p class="pBody"><a name="wp1061704"> </a>
As a company&#39;s business grows, application engineers may need to organize the business information management into distinct applications, each having administrative autonomy, based on functionality, geographical location, or confidentiality. These distinct business applications, can be configured as several domains. The Oracle Tuxedo Domains component provides the infrastructure for interoperability among the domains of a business, thereby extending the Oracle Tuxedo client/server model to multiple domains. 
</p>
<p class="pBody"><a name="wp1061705"> </a>
The inter-domain communication between Oracle Tuxedo domains is using the domain gateway. Domain gateway is highly asynchronous, multitasking server processes that handle outgoing and incoming services requests to or from remote domains. They make access to services across domains transparent to both the application programmer and the application user.
</p>
<p class="pBody"><a name="wp1061706"> </a>
<a href="http://docs.oracle.com/cd/E18050_01/tuxedo/docs11gr1/add/">For more information, see &quot;</a><span class="cHyperlink">
Using the Oracle Tuxedo Domains Component.</span>&quot;
</p>
<h3 class="pHeading2"><a name="wp1061698"> </a>
Oracle Tuxedo Configuration
</h3>
<p class="pBody"><a name="wp1061768"> </a>
Oracle Tuxedo configuration files are used to describe the Oracle Tuxedo applications. The configuration file is a repository that contains all the information necessary to boot and run an application, such as specifications for application resources, machines, machine groups, servers, available services, interfaces, and so on.
</p>
<p class="pBody"><a name="wp1061769"> </a>
For SHM/MP domains, the UBBCONFIG is the configuration file. It is a text version of the configuration file, which can be created and edited with any text editor. Before booting the application using the configuration file, a binary version of the configuration file TUXCONFIG should be created from the text version by tmloadcf(1) command.
</p>
<p class="pBody"><a name="wp1061770"> </a>
For applications consist of multiple domains, additional configuration file for domain connections. Like UBBCONFIG, configuration file DMCONFIG is the text version, which describe how multiple domains are connected and which services they make accessible to each other. Use the dmloadcf(1) utility to get the binary version of domain configuration file BDMCONFIG.
</p>
<p class="pBody"><a name="wp1061753"> </a>
<a href="http://docs.oracle.com/cd/E18050_01/tuxedo/docs11gr1/ads/adconf.html">For more information, see &quot;</a><span class="cHyperlink">
About the Configuration File</span><a href="http://docs.oracle.com/cd/E18050_01/tuxedo/docs11gr1/ads/adfig.html">&quot; and &quot;</a><span class="cHyperlink">
Creating the Configuration File</span>.&quot; 
</p>
<h4 class="pHeading3"><a name="wp1061807"> </a>
UBBCONFIG
</h4>
<p class="pBody"><a name="wp1061831"> </a>
A UBBCONFIG file is made up of nine possible specification sections: 
</p>
<p class="pBody"><a name="wp1063833"> </a>
<code class="cCode">*RESOURCES</code>, <code class="cCode">*MACHINES</code>, <code class="cCode">*GROUPS</code>, <code class="cCode">*SERVERS</code>,<code class="cCode"> *SERVICES</code>, <code class="cCode">*INTERFACES</code>, <code class="cCode">*NETWORK</code>, <code class="cCode">*NETGROUPS</code>, <code class="cCode">*ROUTING</code>.
</p>
<p class="pBody"><a name="wp1061832"> </a>
The <code class="cCode">*RESOURCES</code> section defines parameters that control the application as a whole and server as system-wise defaults.
</p>
<p class="pBody"><a name="wp1061833"> </a>
The <code class="cCode">*MACHINES</code> section defines parameters for each machine in an application.
</p>
<p class="pBody"><a name="wp1061834"> </a>
The <code class="cCode">*GROUPS</code> section designate logically grouped sets of servers. At least one server group for a machine should be defined.
</p>
<p class="pBody"><a name="wp1061835"> </a>
The <code class="cCode">*SERVERS</code> section contains information specific to a server process. Each entry in this section represents a server process to be booted in the application.
</p>
<p class="pBody"><a name="wp1061836"> </a>
The <code class="cCode">*SERVICES</code> section provides information on services that advertised by server processes.
</p>
<p class="pBody"><a name="wp1063822"> </a>
For more information, see UBBCONFIG(5) in <span class="cHyperlink">
<a href="http://docs.oracle.com/cd/E18050_01/tuxedo/docs11gr1/rf5/rf5.html#wp1023246">&#8220;Section 5 - File Formats, Data Descriptions, MIBs, and System Processes Reference</a></span>&#8221; in the Oracle Tuxedo Reference Guide.
</p>
<h4 class="pHeading3"><a name="wp1061815"> </a>
DMCONFIG
</h4>
<p class="pBody"><a name="wp1061870"> </a>
The domains configuration file DMCONFIG defines the local/remote domain access points, and local/remote available services through each access point. Application clients can access services through these access points. Also it map the local access points and remote access points to specific domain gateway groups and network address defined in the UBBCONFIG.
</p>
<p class="pBody"><a name="wp1061871"> </a>
The DMCONFIG file is made up of the following specification sections: <code class="cCode">*DM_LOCAL</code>, <code class="cCode">*DM_REMOTE</code>, <code class="cCode">*DM_EXPORT</code>, <code class="cCode">*DM_IMPORT</code>, <code class="cCode">*DM_RESOURCES</code>, <code class="cCode">*DM_ROUTING</code>, <code class="cCode">*DM_ACCESS_CONTROL</code>, <code class="cCode">*DM_TDOMAIN</code>.
</p>
<p class="pBody"><a name="wp1061872"> </a>
The <code class="cCode">*DM_LOCAL</code> section defines one or more local domain access point identifiers and their associated gateway groups. Correspondingly, the <code class="cCode">*DM_REMOTE</code> section defines one or more remote domain access point identifiers and their characteristics.
</p>
<p class="pBody"><a name="wp1063799"> </a>
The <code class="cCode">*DM_EXPORT</code> section provides information on the services exported by each individual local domain access point. And the <code class="cCode">*DM_IMPORT</code> section provides information on services imported and available to the local domain through remote domain access points defined in the <code class="cCode">*DM_REMOTE</code> section.
</p>
<p class="pBody"><a name="wp1063800"> </a>
For more information, see DMCONFIG(5) in <span class="cHyperlink">
<a href="http://docs.oracle.com/cd/E18050_01/tuxedo/docs11gr1/rf5/rf5.html#wp1023246">&#8220;Section 5 - File Formats, Data Descriptions, MIBs, and System Processes Reference</a></span>&#8221; in the Oracle Tuxedo Reference Guide.
</p>
<h3 class="pHeading2"><a name="wp1061868"> </a>
Using Oracle Tuxedo Workstation Component
</h3>
<p class="pBody"><a name="wp1061916"> </a>
The Workstation component of the Oracle Tuxedo system allows application clients to reside on a machine that does not have a full server-side installation, that is, a machine that does not support any administration or application servers. All communication between a Workstation client-an application client running on a Workstation component-and the server application takes place over the network. For more information, see<span class="cHyperlink">
 Using The Oracle Tuxedo ATMI Workstation Component</span> .
</p>
<h4 class="pHeading3"><a name="wp1061937"> </a>
Advanced Oracle Tuxedo features
</h4>
<p class="pBody"><a name="wp1061947"> </a>
Besides being the basic framework for client-to-server applications, Oracle Tuxedo can also provide a serials of advanced features, such as:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1061948"> </a>Scalability</li>
<p class="pBodyRelative"><a name="wp1061949"> </a>
Application built on Oracle Tuxedo can support a single client on a single server, or they can support tens of thousands of clients and thousands of servers without changing application code. As an application scales, the Oracle Tuxedo system continues to provide end users with consistently high performance and good responsiveness.
</p>
<li><a name="wp1061950"> </a>High availability and fault management</li>
<p class="pBodyRelative"><a name="wp1061951"> </a>
In a distributed client-to-server environment with thousands of independent processors and processes, Oracle Tuxedo can ensure no single point of failure by providing replicated server groups, and restores the running application to good condition after failures occur.
</p>
<li><a name="wp1061952"> </a>Security</li>
<p class="pBodyRelative"><a name="wp1061953"> </a>
Oracle Tuxedo security includes authentication, authorization, and encryption to ensure data privacy when deploying Oracle Tuxedo application across networks. Network level and application level encryption are supported.
</p>
</ul></div>
<h3 class="pHeading2"><a name="wp1062067"> </a>
Deploying OTMQ on OracleTuxedo Domain(s)
</h3>
<p class="pBody"><a name="wp1062109"> </a>
OTMQ can utilize the flexible and scalable Oracle Tuxedo domain configurations, to deploy the QSpace and queues according to the requirements of the application.
</p>
<p class="pBody"><a name="wp1063782"> </a>
To deploy and run a basic OTMQ application, you must do the following steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1063783"> </a>Create QSpace and queues on disk (refer to OTMQ E-doc &quot;Creating OTMQ Queue Space and Queues&quot;).</li>
<li><a name="wp1062112"> </a>Create Oracle Tuxedo UBBCONFIG (and DMCONFIG if using multiple domains) to configure TuxMsgQ server(s) that associate with the QSpaces.</li>
<li><a name="wp1062113"> </a>Create application that calls OTMQ API <code class="cCode">tpenqplus</code>/<code class="cCode">tpdeqplus</code> for queuing.</li>
<li><a name="wp1062114"> </a>Build the application.</li>
<li><a name="wp1062115"> </a>Boot Oracle Tuxedo and run the application.</li>
</ol></div>
<h4 class="pHeading3"><a name="wp1062099"> </a>
OTMQ on Oracle Tuxedo SHM Domain
</h4>
<p class="pBody"><a name="wp1062147"> </a>
OTMQ application on an Oracle Tuxedo SHM domain can create one or multiple QSpace. Each QSpace maps to a service provided by OTMQ server TuxMsgQ. Application clients calls OTMQ API <code class="cCode">tpqattach()</code> first to attach to a queue to get access to specific QSpace, then calls <code class="cCode">tpenqplus()</code> to enqueue message, or dequeue message from attached queue.
</p>
<p class="pBody"><a name="wp1062148"> </a>
Also the client can enqueue message to the queue that belongs to another QSpace that it does not attached to, as shown in <a href="admin.html#wp1062145">Figure&#160;2</a>.
</p>
<div class="pFigureTitle"><a name="wp1062145"> </a>
Figure&#160;2   OTMQ Application on Oracle Tuxedo SHM Domain
</div>

 
 <p class="pGraphic"><a name="wp1062160"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/shm_domain.png" alt="OTMQ Application on Oracle Tuxedo SHM Domain" id="wp1062181" border="0" hspace="0" vspace="0"/></div><p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1062161"> </a>
OTMQ on Oracle Tuxedo MP Domain
</h4>
<p class="pBody"><a name="wp1062266"> </a>
OTMQ application on an Oracle Tuxedo MP domain can create one or multiple QSpace on its master and slave node respectively. Each QSpace maps to a service provided by OTMQ server TuxMsgQ. Application clients on master or slave node can call OTMQ API <code class="cCode">tpqattach()</code> first to attach to a queue to get access to specific QSpace on its own node, then calls <code class="cCode">tpenqplus()</code> to enqueue message, or dequeue message from attached queue. 
</p>
<p class="pBody"><a name="wp1062267"> </a>
Also the client on node B can enqueue message to the queue that belongs to another QSpace on node A that it doesn&#39;t attached to, as shown in <a href="admin.html#wp1062342">Figure&#160;3</a>.
</p>
<div class="pFigureTitle"><a name="wp1062342"> </a>
Figure&#160;3   OTMQ Application on Oracle Tuxedo MP Domain
</div>

 
 <p class="pGraphic"><a name="wp1062162"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/mp_domain.png" alt="OTMQ Application on Oracle Tuxedo MP Domain" id="wp1062291" border="0" hspace="0" vspace="0"/></div><p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1062439"> </a>
OTMQ on Multiple Oracle Tuxedo Domains
</h4>
<p class="pBody"><a name="wp1062490"> </a>
OTMQ application can be deployed across multiple Oracle Tuxedo domains. Each domain can have one or multiple QSpace. Each QSpace maps to a service provided by OTMQ server TuxMsgQ. Application clients of one domain A can call OTMQ API tpqattach(3c) first to attach to a queue to get access to specific QSpace in its domain, then calls tpenqplus(3c) to enqueue message to queues that belong to the attached QSpace, or dequeue message from attached queue. 
</p>
<p class="pBody"><a name="wp1062491"> </a>
Also the client of domain B can also enqueue message to the queue that belongs to the QSpace of domain A as long as domain A has exported its service for its own QSpace, as shown in <a href="admin.html#wp1062522">Figure&#160;4</a>.
</p>
<div class="pFigureTitle"><a name="wp1062522"> </a>
Figure&#160;4   OTMQ Application on Multiple Oracle Tuxedo Domains
</div>

 
 <p class="pGraphic"><a name="wp1062163"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/multiple_domain.png" alt="OTMQ Application on Multiple Oracle Tuxedo Domains" id="wp1062540" border="0" hspace="0" vspace="0"/></div><p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1062164"> </a>
OTMQ Workstation Client Support
</h4>
<p class="pBody"><a name="wp1062678"> </a>
OTMQ application can also have workstation clients by utilizing Oracle Tuxedo workstation component, as shown in <a href="admin.html#wp1062718">Figure&#160;5</a>.
</p>
<div class="pFigureTitle"><a name="wp1062718"> </a>
Figure&#160;5   OTMQ Application Workstation Client Support
</div>

 
 <p class="pGraphic"><a name="wp1062796"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/otmq_workclient.png" alt="OTMQ Application Workstation Client Support" id="wp1062812" border="0" hspace="0" vspace="0"/></div><p class="pGraphic">

</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1062754"> </a>
Administrator Tasks
</h2><p class="pBody"><a name="wp1062722"> </a>
The Oracle Tuxedo administrator is responsible for defining servers and creating queue spaces and queues for the Oracle Tuxedo Message Queue (OTMQ) component.
</p>
<p class="pBody"><a name="wp1060037"> </a>
The administrator must define at least one queue server group with TMS_TMQM as the transaction manager server for the group.
</p>
<p class="pBody"><a name="wp1060038"> </a>
The administrator also must create a queue space using the queue administration program, tmqadmin(1), or the <code class="cCode">OTMQ_MIB() </code>Management Information Base (MIB) that includes extended classes for OTMQ. There is a one-to-one mapping of queue space to queue server group since each queue space is a resource manager (RM) instance and only a single RM can exist in a group.
</p>
<p class="pBody"><a name="wp1060039"> </a>
The administrator can define a single server group in the application configuration for the queue space by specifying the group in UBBCONFIG or by using <code class="cCode">tmconfig</code> to add the group dynamically.
</p>
<p class="pBody"><a name="wp1060040"> </a>
Part of the task of defining a queue is specifying the order for messages on the queue. Queue ordering can be determined by message availability time, expiration time, priority, FIFO and LIFO. Refer to <code class="cCode">qcreate</code> sub-command of <code class="cCode">tmqadmin(1)</code> for detail information.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1060514"> </a>
Interoperability 
</h2><div class="pSmartList1Bullet"><ul>
<li><a name="wp1064973"> </a><a href="admin.html#wp1064904">Interoperability with Traditional Oracle Tuxedo /Q client</a></li>
<li><a name="wp1064980"> </a><a href="admin.html#wp1060519">Interoperability with Traditional Tuxedo /Q server</a></li>
<li><a name="wp1064984"> </a><a href="admin.html#wp1063457">Interoperability with Oracle Message Queue (OMQ)</a></li>
<li><a name="wp1064992"> </a><a href="admin.html#wp1065005">Interoperability with MQSeries Using MQAdapter</a></li>
</ul></div>
<h3 class="pHeading2"><a name="wp1064904"> </a>
Interoperability with Traditional Oracle Tuxedo /Q client
</h3>
<p class="pBody"><a name="wp1060517"> </a>
Traditional Oracle Tuxedo /Q clients can communicate with OTMQ with only configuration change, as shown in <a href="admin.html#wp1063405">Figure&#160;6</a>
</p>
<p class="pBody"><a name="wp1060518"> </a>
Of course, to take advantage of the new features introduced in OTMQ, application code need be changed. Traditional Tuxedo /Q <code class="cCode">tpenqueue(3c)</code>/<code class="cCode">tpdequeue(3c)</code> functions need be replaced with OTMQ counterparts <code class="cCode">tpenqplus(3c)</code>/<code class="cCode">tpdeqplus(3c)</code>. Traditional Tuxedo /Q clients including <code class="cCode">APPQ_MIB</code> classes (<code class="cCode">T_APPQ, T_APPQMSG, T_APPQSPACE</code> and <code class="cCode">T_APPQTRANS</code>) need replace them with corresponding <code class="cCode">OTMQ_MIB(5)</code> classes (<code class="cCode">T_OTMQ, T_OTMQMSG, T_OTMQSPACE and T_OTMQTRANS</code>).
</p>
<div class="pFigureTitle"><a name="wp1063405"> </a>
Figure&#160;6   Interoperability with Traditional Oracle Tuxedo /Q client
</div>

 
 <p class="pGraphic"><a name="wp1063409"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/otmq_workclient.png" alt="Interoperability with Traditional Oracle Tuxedo /Q client" id="wp1063407" border="0" hspace="0" vspace="0"/></div><p class="pGraphic">

</p>
<h3 class="pHeading2"><a name="wp1060519"> </a>
Interoperability with Traditional Tuxedo /Q server
</h3>
<p class="pBody"><a name="wp1060520"> </a>
Tuxedo /Q server cannot boot on the new OTMQ QSpace, and cannot process queuing requests from the new OTMQ clients.
</p>
<h3 class="pHeading2"><a name="wp1063457"> </a>
Interoperability with Oracle Message Queue (OMQ)
</h3>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1064405"> </a><a href="admin.html#wp1064407">Cross-group connection with OMQ</a></li>
<li><a name="wp1064425"> </a><a href="admin.html#wp1060536">Interoperability with OMQ client</a></li>
<li><a name="wp1064959"> </a><a href="admin.html#wp1065073">Interoperability with OMQ Naming</a></li>
</ul></div>
<h4 class="pHeading3"><a name="wp1064407"> </a>
Cross-group connection with OMQ
</h4>
<p class="pBody"><a name="wp1064408"> </a>
To support cross-group connection with OMQ, OTMQ provides Link Driver Server <code class="cCode">TuxMsgQLD(5)</code>, as shown in <a href="admin.html#wp1063535">Figure&#160;7</a>. With this server deployed, OTMQ and OMQ can have message-level compatibilities, with following limitations:
</p>
<h5 class="pHeading4"><a name="wp1060524"> </a>
Direct connection
</h5>
<p class="pBody"><a name="wp1060525"> </a>
Only support DISC and RTS UMA.
</p>
<h5 class="pHeading4"><a name="wp1060526"> </a>
Routing
</h5>
<p class="pBody"><a name="wp1060527"> </a>
Only support AK and NN modes.
</p>
<p class="pBody"><a name="wp1060528"> </a>
Only support DISC UMA.
</p>
<p class="pBody"><a name="wp1060529"> </a>
Only support MEM, DEQ and ACK DIPs when protocol exchange is involved more than once, such as sending message from OMQ to OMQ through OTMQ or from OTMQ to OTMQ through OMQ.
</p>
<h5 class="pHeading4"><a name="wp1060530"> </a>
Qspace and queue name
</h5>
<p class="pBody"><a name="wp1060531"> </a>
In OTMQ, Qspace and queue name are string characters. In OMQ, the counterparts group and queue number are integer numbers. So, to communicate with OMQ, OTMQ must have numerical Qspace and queue name.
</p>
<p class="pBody"><a name="wp1060532"> </a>
Message Based Service
</p>
<p class="pBody"><a name="wp1060533"> </a>
OTMQ does not support Message Based Service (MBS).
</p>
<h5 class="pHeading4"><a name="wp1060534"> </a>
Buffer type
</h5>
<p class="pBody"><a name="wp1060535"> </a>
OMQ only supports CARRAY and FML32 buffer types.
</p>
<div class="pFigureTitle"><a name="wp1063535"> </a>
Figure&#160;7   Interoperability with Oracle Message Queue (OMQ)
</div>

 
 <p class="pGraphic"><a name="wp1063539"> </a>
</p>
<div class="figure" align="left"><img src="wwimages/omq_interop.png" alt="Interoperability with Oracle Message Queue (OMQ)" id="wp1063537" border="0" hspace="0" vspace="0"/></div><p class="pGraphic">

</p>
<h4 class="pHeading3"><a name="wp1060536"> </a>
Interoperability with OMQ client
</h4>
<p class="pBody"><a name="wp1060883"> </a>
To support interoperability between OMQ client application and OTMQ, OTMQ provides Client Library Server <code class="cCode">TuxCls(5)</code>. With this server deployed, OTMQ and OMQ client can have message-level compatibilities. The traditional OMQ client can work with OTMQ server without any code change, compile and link, and any configuration change, except for below limitations:.
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1060884"> </a>OMQ security is not supported.</li>
<li><a name="wp1060885"> </a>OMQ UMA PDEL_UMA_DISCL is not supported.</li>
</ul></div>
<h4 class="pHeading3"><a name="wp1065073"> </a>
Interoperability with OMQ Naming
</h4>
<p class="pBody"><a name="wp1064842"> </a>
To integrate the OTMQ global naming service with OMQ naming, the global naming file, which indicated by enviorment variables DMQNS_DEFAULTPATH and DMQNS_DEVICE, should have the read and write permissions for OTMQ and OMQ naming services.
</p>
<h3 class="pHeading2"><a name="wp1065005"> </a>
Interoperability with MQSeries Using MQAdapter
</h3>
<p class="pBody"><a name="wp1065026"> </a>
To integrate with MQSeries, OTMQ can still utilize MQ Adapter. must do as follow:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1065027"> </a>Using tpenqueue/tpdequeue or tpenqplus/tpdeqplus.</li>
<li><a name="wp1065028"> </a>If using tpenqplus/tpdeqplus, need add tpqattach before invoking tpenqplus/tpdeqplus, and the attached qspace/qname is a OTMQ&#39;s qspace/qname .</li>
<li><a name="wp1065029"> </a>Using buildqclient to re-compile codes.</li>
</ul></div>
<a name="wp1065143"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>OTMQ server can only booted on an OTMQ formatted QSPACE, it cannot booted on a /Q formatted QSAPCE.</td>
</tr>
</table>

<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058512"> </a>
Configuring for OTMQ Application
</h2><p class="pBody"><a name="wp1059826"> </a>
The configuration and the queue attributes must reflect the requirements of the application.
</p>
<h3 class="pHeading2"><a name="wp1058513"> </a>
Configuring OTMQ System Resources
</h3>
<p class="pBody"><a name="wp1058514"> </a>
Core servers <code class="cCode">TMS_TMQM(5)</code>, <code class="cCode">TuxMsgQ(5)</code>, <code class="cCode">TuxMQFWD(5)</code> and <code class="cCode">TMQEVT(5)</code> are provided by the OTMQ. <code class="cCode">TMS_TMQM(5)</code> manages global transactions for the queued message facility. It must be defined in the <code class="cCode">*GROUPS</code> section of the configuration file.<code class="cCode">TuxMsgQ(5)</code> and <code class="cCode">TuxMQFWD(5)</code> provide message queuing services to users. They must be defined in the <code class="cCode">*SERVERS</code> section of the configuration file. <code class="cCode">TMQEVT(5)</code> provides publish/subscribe services to users. It must be defined in <code class="cCode">*SERVERS</code> section of the configuration file.
</p>
<p class="pBody"><a name="wp1058515"> </a>
Supplemental servers <code class="cCode">TMQ_NA(5)</code>, <code class="cCode">TuxMsgQLD(5)</code> and <code class="cCode">TuxCls(5)</code> can be configured at machine level for one or more OTMQ queue space.
</p>
<h3 class="pHeading2"><a name="wp1058516"> </a>
Specifying the OTMQ Message Queue Manager Server Group
</h3>
<p class="pBody"><a name="wp1058517"> </a>
In addition to the standard requirements of a group name tag and a value for <code class="cCode">GRPNO</code>, there must be a server group defined for each OTMQ queue space the application will use. The <code class="cCode">TMSNAME</code> and <code class="cCode">OPENINFO </code>parameters need to be set. Here are examples:
</p>
<p class="pBody"><a name="wp1058518"> </a>
<code class="cCode">TMSNAME= TMS_TMQM</code>
</p>
<p class="pBody"><a name="wp1058519"> </a>
and
</p>
<p class="pBody"><a name="wp1058520"> </a>
<code class="cCode">OPENINFO=&quot; TUXEDO/TMQM:&lt;device_name&gt;:&lt;queue_space_name&gt;&quot;</code>
</p>
<p class="pBody"><a name="wp1058521"> </a>
TMS_TMQM is the name for the transaction manager server for OTMQ. In OPENINFO parameter, TUXEDO/TMQM is the literal name for the resource manager as it appears in <code class="cCode">$TUXDIR/udataobj/RM</code>. The values for <code class="cCode">&lt;device_name&gt; </code>and <code class="cCode">&lt;queue_space_name&gt;</code> are instance-specific and must be set to the pathname for the universal device list and the name associated with the queue space, respectively. These values are specified by the administrator using<code class="cCode"> tmqadmin(1)</code>.
</p>
<a name="wp1058522"> </a><table class="Note">
<tr>
<td valign="top"><strong>Note:</strong></td>
<td>The chronological order of these specifications is not critical. The configuration file can be created either before or after the queue space is defined. The important thing is that the configuration must be defined and queue space and queues created before the facility can be used.</td>
</tr>
</table>

<p class="pBody"><a name="wp1058523"> </a>
There can be only one queue space per <code class="cCode">*GROUPS</code> section entry. The <code class="cCode">CLOSEINFO</code> parameter is not used.
</p>
<p class="pBody"><a name="wp1058524"> </a>
The following example shows the configuration of server group for OTMQ.
</p>
<div class="pCodeTitle"><a name="wp1058525"> </a>
Listing&#160;1	   OTMQ Server Group Configuration
</div> <a name="wp1058940"> </a><div class="pPreformatted"><pre>*GROUPS<br />QGRP1 GRPNO=1 TMSNAME=TMS_TMQM<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&quot;TUXEDO/TMQM:/dev/device1: queuespace1&quot;<br />QGRP2 GRPNO=2 TMSNAME=TMS_TMQM<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&quot;TUXEDO/TMQM:/dev/device2: queuespace2&quot;</pre></div><h3 class="pHeading2"><a name="wp1058941"> </a>
Specifying the OTMQ Message Queue Manager Server
</h3>
<p class="pBody"><a name="wp1058942"> </a>
The <code class="cCode">TuxMsgQ(5)</code> takes the same CLOPT as TMQUEUE server of Oracle Tuxedo /Q. The <code class="cCode">TuxMsgQ(5)</code> reference page gives a full description of the SERVERS section of the configuration file. But still the <code class="cCode">TuxMsgQ(5)</code> has several unique properties can be specified:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058532"> </a>Attach Timeout</li>
<p class="pBodyRelative"><a name="wp1058533"> </a>
Attach is the mandatory operation for an OTMQ application to access the OTMQ queue space. The attach operation can be configured with a default timeout value per queue space. To configure the default attach timeout for the queue space, add a service named <code class="cCode">TuxMQATH&lt;qspace_name&gt;</code> in the SERVICES section, and set the BLOCKTIME property of this service as the default attach timeout value.
</p>
<li><a name="wp1058534"> </a>Sanity Check Interval</li>
<p class="pBodyRelative"><a name="wp1058535"> </a>
<code class="cCode">TuxMsgQ(5)</code> provides the sanity check function to remove invalid queue owners. To configure the sanity check interval for the <code class="cCode">TuxMsgQ(5)</code> server, set &quot;<code class="cCode">-i &lt;interval&gt;</code>&quot; in <code class="cCode">CLOPT</code>. The <code class="cCode">&lt;interval&gt;</code> value means the <code class="cCode">TuxMsgQ(5)</code> server will do sanity check per receiving this number of messages.
</p>
</ul></div>
<h3 class="pHeading2"><a name="wp1058536"> </a>
Specifying the OTMQ Offline Trade Driver Server
</h3>
<p class="pBody"><a name="wp1058537"> </a>
OTMQ Offline Trade Driver Server <code class="cCode">TuxMQFWD(5)</code> is part of the OTMQ Reliable Message Delivery feature. It is responsible for resending the recoverable messages to the target if the OTMQ Message Queue Manager Server <code class="cCode">TuxMsgQ(5)</code> fails to deliver the message to target at the first time.
</p>
<p class="pBody"><a name="wp1058538"> </a>
Refer to the <code class="cCode">TuxMQFWD(5)</code> reference page for a full description of the <code class="cCode">*SERVERS</code> section of the configuration file for this server. 
</p>
<p class="pBody"><a name="wp1058539"> </a>
Any improper configuration that prevents the <code class="cCode">TuxMQFWD(5)</code> server from dequeuing or forwarding messages will cause the server booting failure. Some important items should be emphasized:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058540"> </a><code class="cCode">*SRVGRP</code> of <code class="cCode">TuxMQFWD(5)</code> server must have <code class="cCode">TMSNAME</code> set to <code class="cCode">TMS_TMQM</code>, and the OPENINFO must be set to associate with the proper device and queue space.</li>
<li><a name="wp1058541"> </a>The entry of <code class="cCode">TuxMQFWD(5)</code> server in <code class="cCode">*SERVERS</code> section should not be part of an MSSQ set.</li>
<li><a name="wp1058542"> </a>REPLYQ of TuxMQFWD(5) server should be set to N.</li>
<li><a name="wp1058543"> </a>TuxMQFWD(5) server does not advertise any service.</li>
<li><a name="wp1058544"> </a>Only one <code class="cCode">TuxMQFWD(5)</code> server process can be configured for one OTMQ queue space.</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1058545"> </a>
Specifying the OTMQ Event Broker
</h3>
<p class="pBody"><a name="wp1058546"> </a>
OTMQ Event Broker <code class="cCode">TMQEVT(5)</code> is required for publish/subscribe feature. It is responsible for notifying subscribers when topics are published. It must be configured in a separate server group from <code class="cCode">TuxMsgQ(5</code>) and <code class="cCode">TuxMQFWD(5)</code>.
</p>
<p class="pBody"><a name="wp1058547"> </a>
Refer to the <code class="cCode">TMQEVT(5)</code> reference page for a full description of the <code class="cCode">*SERVERS</code> section of the configuration file for this server.
</p>
<h3 class="pHeading2"><a name="wp1058548"> </a>
Specifying the OTMQ Naming Server
</h3>
<p class="pBody"><a name="wp1058549"> </a>
OTMQ Naming Server <code class="cCode">TMQ_NA(5)</code> can be configured to provide the naming feature. It allows the application to bind the queue alias to an actual queue name, and also supports lookup the actual queue name through provided queue alias.
</p>
<p class="pBody"><a name="wp1058550"> </a>
Refer to the reference page of <code class="cCode">TMQ_NA(5)</code> for a full description of the <code class="cCode">*SERVERS</code> section of the configuration file for this server. 
</p>
<p class="pBody"><a name="wp1058551"> </a>
One limitation for the naming server is only one <code class="cCode">TMQ_NA(5)</code> server process can be configured for one OTMQ queue space.
</p>
<p class="pBody"><a name="wp1059079"> </a>
The <code class="cCode">TMQ_NA(5)</code> may boot with a pre-defined name space file, which is specified when creating or updating the queue space. The following example shows the content of one static name space file, which defines the association between the user defined queue alias and the actual queue name.
</p>
<p class="pGraphic"><a name="wp1059172"> </a>
</p>
<div align="left">
<table class="table" cellpadding="3" cellspacing="0" id="wp1059852table1059091"><caption><a name="wp1059852"> </a>
Table&#160;1  <span style="font-style: normal; font-weight: bold; text-decoration: none; vertical-align: baseline">Static Name Space File Content</span>

</caption>

  <tr bgcolor="#CCCCCC" align="center" valign="top">    <th scope="col"><div class="pCellHeading"><a name="wp1059858"> </a>
# Queue Alias
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1059860"> </a>
Queue Name
</div>
</th>
    <th scope="col"><div class="pCellHeading"><a name="wp1059862"> </a>
Name Scope
</div>
</th>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1059864"> </a>
Queue_Alias_1
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1059866"> </a>
queue1
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1059868"> </a>
L
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1059870"> </a>
Queue_Alias_2
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1059872"> </a>
queue1
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1059874"> </a>
G
</div>
</td>
</tr>
  <tr align="left" valign="top">    <td class="table" scope="row"><div class="pCellBody"><a name="wp1059876"> </a>
MyQueue
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1059878"> </a>
queue2
</div>
</td>
    <td class="table" scope="row"><div class="pCellBody"><a name="wp1059880"> </a>
L
</div>
</td>
</tr>
</table>
</div>
<p class="pGraphic">

</p>
<p class="pBody"><a name="wp1059084"> </a>
Refer to <code class="cCode">qspacecreate</code> or <code class="cCode">qspacechange</code> command of <code class="cCode">tmqadmin(1) </code>for specifying the static name space file.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058558"> </a>
Creating OTMQ Queue Space and Queues
</h2><p class="pBody"><a name="wp1058559"> </a>
OTMQ command <code class="cCode">tmqadmin(1)</code> is used to establish the resources of the OTMQ. The OTMQ_MIB Management Information Base also provides an alternative method of administering OTMQ programmatically. See the Using MIB for more information on the MIB operation.
</p>
<h3 class="pHeading2"><a name="wp1058560"> </a>
Working with tmqadmin Commands
</h3>
<p class="pBody"><a name="wp1058561"> </a>
Most of the key commands of<code class="cCode"> tmqadmin</code> have positional parameters. If the positional parameters (those not specified with a dash (-) preceding the option) are not specified on the command line when the command is invoked, <code class="cCode">tmqadmin</code> prompts you for the required information.
</p>
<h3 class="pHeading2"><a name="wp1058562"> </a>
Creating an Entry in the Universal Device List: crdl
</h3>
<p class="pBody"><a name="wp1058563"> </a>
The universal device list (UDL) is a VTOC file under the control of the Oracle Tuxedo system. It maps the physical storage space on a machine where the Oracle Tuxedo system is run. An entry in the UDL points to the disk space where the queues and messages of a queue space are stored; the Oracle Tuxedo system manages the input and output for that space. If the queued message facility is installed as part of a new Oracle Tuxedo installation, the UDL is created by tmloadcf(1) when the configuration file is first loaded. 
</p>
<p class="pBody"><a name="wp1058564"> </a>
Before you create a queue space, you must create an entry for it in the UDL. The following is an example of the commands: 
</p>
<p class="pBody"><a name="wp1058565"> </a>
# First invoke the OTMQ administrative interface, <code class="cCode">tmqadmin</code>
</p>
<p class="pBody"><a name="wp1058566"> </a>
# The QMCONFIG variable points to an existing device where the UDL
</p>
<p class="pBody"><a name="wp1058567"> </a>
# either resides or will reside.
</p>
<p class="pBody"><a name="wp1059891"> </a>
<code class="cCode">QMCONFIG=/dev/QUE_TMQ</code>
</p>
<p class="pBody"><a name="wp1059892"> </a>
# Next create the device list entry
</p>
<p class="pBody"><a name="wp1059893"> </a>
<code class="cCode">crdl /dev/QUE_TMQ 0 5000</code>
</p>
<p class="pBody"><a name="wp1058571"> </a>
# The above command sets aside 5000 physical pages beginning at block number 0
</p>
<p class="pBody"><a name="wp1058572"> </a>
If you are going to add an entry to an existing Oracle Tuxedo UDL, the value for the QMCONFIG variable must be the same pathname specified in TUXCONFIG. Once you have invoked <code class="cCode">tmqadmin(1)</code>, it is recommend that you run a <code class="cCode">lidl </code>command to see where space is available before creating your new entry.
</p>
<h3 class="pHeading2"><a name="wp1058573"> </a>
Creating a Queue Space: qspacecreate
</h3>
<p class="pBody"><a name="wp1058574"> </a>
A queue space makes use of IPC resources; when you define a queue space you are allocating a shared memory segment and a semaphore. As noted above, the easiest way to use the command is to let it prompt you. (You can also use the T_OTMQSPACE class of the OTMQ_MIB to create a queue space.) The sequence looks like this: 
</p>
<div class="pCodeTitle"><a name="wp1059309"> </a>
Listing&#160;2	   qsspacecreate
</div> <a name="wp1059317"> </a><div class="pPreformatted"><pre>&gt; qspacecreate<br />Queue space name: 1<br />IPC Key for queue space: 123567<br />Size of queue space in disk pages: 2048<br />Number of queues in queue space: 15<br />Number of concurrent transactions in queue space: 100<br />Number of concurrent processes in queue space: 100<br />Number of messages in queue space: 100<br />Error queue name: errque<br />Initialize extents (y, n [default=n]): y<br />Blocking factor [default=16]:<br />Create SAF and DQF queue by default: (y, n [default=y]):<br />Enables PCJ journaling by default: (y, n [default=n]): y<br />Enable Dead Letter Journal by default: (y, n [default=y]): y</pre></div><p class="pBody"><a name="wp1059310"> </a>
The program does not prompt you to specify the size of the area to reserve in shared memory for storing non-persistent messages for all queues in the queue space. When you require non-persistent (memory-based) messages, you must specify the size of the memory area on the <code class="cCode">qspacecreate</code> command line with the -n option.
</p>
<p class="pBody"><a name="wp1058590"> </a>
The value for the IPC key should be picked so as not to conflict with your other requirements for IPC resources. It should be a value greater than 32,768 and less than 262,143. 
</p>
<p class="pBody"><a name="wp1058591"> </a>
The size of the queue space, the number of queues, and the number of messages that can be queued at one time all depend on the needs of your application. Of course, you cannot specify a size greater than the number of pages specified in your UDL entry. In connection with these parameters, you also need to look ahead to the queue capacity parameters for an individual queue within the queue space. Those parameters allow you to (a) set a limit on the number of messages that can be put on a queue, and (b) name a command to be executed when the number of enqueued messages on the queue reaches the threshold. If you specify a low number of concurrent messages for the queue space, you may create a situation where your threshold on a queue will never be reached. 
</p>
<p class="pBody"><a name="wp1058592"> </a>
To calculate the number of concurrent transactions, count each of the following as one transaction: 
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058593"> </a>Each TMS_TMQM server in the group that uses this queue space</li>
<li><a name="wp1058594"> </a>Each TuxMsgQ or TuxMQFWD server in the group that uses this queue space</li>
<li><a name="wp1058595"> </a><code class="cCode">tmqadmin</code></li>
</ul></div>
<p class="pBody"><a name="wp1058596"> </a>
If your client programs begin transactions before they join the OTMQ queue space, increase the count by the number of clients that might access the queue space concurrently. The worst case is that all clients access the queue space at the same time. 
</p>
<p class="pBody"><a name="wp1058597"> </a>
For the number of concurrent processes count one for each TMS_TMQM, TuxMsgQ or TuxMQFWD server in the group that uses this queue space and one for a fudge factor. 
</p>
<p class="pBody"><a name="wp1058598"> </a>
Most of these prompts are the same as the <code class="cCode">qspacecreate</code> of <code class="cCode">qmadmin</code> command of Oracle Tuxedo /Q component. The last three prompts are specific for OTMQ.
</p>
<p class="pBody"><a name="wp1058599"> </a>
If SAF and DQF queues are created by default, the recoverable delivery feature using SAF and DQF are enabled. Otherwise they cannot be used until the user create these two queues manually by <code class="cCode">qcreate</code> command and enable them by OTMQ_MIB.
</p>
<p class="pBody"><a name="wp1058600"> </a>
PCJ and DLJ are created by default as permanent active queues. If they are not enabled by default, they cannot be used until the user enables them by OTMQ_MIB.
</p>
<p class="pBody"><a name="wp1058601"> </a>
You can choose to initialize the queue space as you use the <code class="cCode">qspacecreate</code> command, or you can let it be done by the <code class="cCode">qopen</code> command when you first open the queue space.
</p>
<h3 class="pHeading2"><a name="wp1058602"> </a>
Creating a Queue: qcreate
</h3>
<p class="pBody"><a name="wp1058603"> </a>
Each queue that you intend to use must be created with the <code class="cCode">tmqadmin(1) qcreate</code> command. First you have to open the queue space with the <code class="cCode">qopen</code> command. If you do not provides a queue space name, <code class="cCode">qopen</code> will prompt for it. (You can also use the T_OTMQ class of the OTMQ_MIB to create a queue.)
</p>
<p class="pBody"><a name="wp1060219"> </a>
The prompt sequence for <code class="cCode">qcreate</code> looks like the following:
</p>
<div class="pCodeTitle"><a name="wp1060220"> </a>
Listing&#160;3	   qcreate Prompt Sequence
</div> <a name="wp1060221"> </a><div class="pPreformatted"><pre>&gt; qcreate -t PQ -a Y<br />Queue name: my_que<br />Queue order (priority, time, expiration, fifo, lifo): fifo<br />Out-of-ordering enqueuing (top, msgid, [default=none]):<br />Retries [default=0]: 0<br />Retry delay in seconds [default=0]: 30<br />High limit for queue capacity warning (b for bytes used, B for blocks used,<br />% for percent used, m for messages [default=100%]):<br />Default high threshold: 100%<br />Reset (low) limit for queue capacity warning [default=0%]:<br />Default low threshold: 0%<br />Queue capacity command:<br />No default queue capacity command<br />Queue &#39;my_que&#39; created</pre></div><p class="pBody"><a name="wp1058619"> </a>
The program does not prompt you for a default delivery policy and memory threshold options. The default delivery policy option allows you to specify whether messages with no specified delivery mode are delivered to persistent (disk-based) or non-persistent (memory-based) storage. The memory threshold option allows you to specify values used to trigger command execution when a non-persistent memory threshold is reached. To use these options, you must specify them on the <code class="cCode">qcreate</code> command line with -d and -n, respectively. When the delivery policy is specified as persistent, using -q option can specify the storage threshold.
</p>
<p class="pBody"><a name="wp1058620"> </a>
Most of these prompts and options are the same as the <code class="cCode">qcreate</code> of <code class="cCode">qmadmin</code> command of Oracle Tuxedo /Q component. Still OTMQ provides more specific options:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058621"> </a>Specifying queue type</li>
<p class="pBodyRelative"><a name="wp1058622"> </a>
<code class="cCode">-t [qtype]</code>
</p>
<p class="pBodyRelative"><a name="wp1058623"> </a>
OTMQ queue can has following types: PQ (Primary Queue), SQ (Secondary Queue), MRQ (Multi-Reader Queue), and UNLIMITQ (Unlimited Queue). When not specified, the default type is UNLIMITQ.
</p>
<li><a name="wp1058624"> </a>Specifying queue owner </li>
<p class="pBodyRelative"><a name="wp1058625"> </a>
<code class="cCode">-o [queue_name]</code>
</p>
<p class="pBodyRelative"><a name="wp1058626"> </a>
If the queue type is specified as &quot;SQ&quot;, you can define the controlling queue of this SQ using the option &quot;-o&quot;. Only the PQ can be defined as the owner of one SQ. When not specified, there is no owner by default.
</p>
<li><a name="wp1058627"> </a>Specifying queue active property</li>
<p class="pBodyRelative"><a name="wp1058628"> </a>
<code class="cCode">-a [active]</code>
</p>
<p class="pBodyRelative"><a name="wp1058629"> </a>
The queue can be specified as permanent active or temporary active. A permanent active queue can always receive and store messages even there is no application attaching to it, while a temporary active queue can only receive and store messages when it is attached by application. Setting the value of the option &quot;-a&quot; to &quot;Y&quot; or &quot;N&quot; to specify the active property. When not specified, the default property is temporary active.
</p>
<li><a name="wp1058630"> </a>Specifying the confirm style</li>
<p class="pBodyRelative"><a name="wp1058631"> </a>
<code class="cCode">-c [confirm_style]</code>
</p>
<p class="pBodyRelative"><a name="wp1058632"> </a>
The confirm style of the queue determines the behavior of how the recoverable messages are confirmed by the receiving application that attaches to this queue. Using option &quot;-c&quot; to specify. The allowed values of this option are: EO (Explicit, out-of-order confirmations); EI (Explicit, in-order confirmations); II (Implicit, in-order confirmations). When not specified, the default confirm style is EO.
</p>
</ul></div>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058633"> </a>
Configuration for Communication crossing OTMQ Queue Spaces
</h2><p class="pBody"><a name="wp1058634"> </a>
Applications that belong to different OTMQ queue spaces can communicate with each other, which is called the cross queue space communication. The most common scenario is the sender application that attaches to one OTMQ queue space A can enqueue messages to a remote receiver application that attaches to another OTMQ queue space B. 
</p>
<p class="pBody"><a name="wp1058635"> </a>
These OTMQ queue spaces can reside in the same Oracle Tuxedo domain or in different Oracle Tuxedo domains.
</p>
<h3 class="pHeading2"><a name="wp1058636"> </a>
Configuration for Communication crossing OTMQ Queue Spaces in One Oracle Tuxedo Domain
</h3>
<p class="pBody"><a name="wp1058637"> </a>
Multiple OTMQ queue spaces can be configured in one Oracle Tuxedo Domain. Different OTMQ queue spaces should belong to different server groups in the UBBCONFIG. Accordingly the TMS and OPENINFO should be defined for each OTMQ queue space.
</p>
<p class="pBody"><a name="wp1058638"> </a>
The following example shows the configuration of two OTMQ queue spaces that reside in the same Oracle Tuxedo Domain.
</p>
<div class="pCodeTitle"><a name="wp1058639"> </a>
Listing&#160;4	   Two OTMQ Queue Spaces in Same Oracle Tuxedo Domain
</div> <a name="wp1059409"> </a><div class="pPreformatted"><pre>*GROUPS</pre></div><a name="wp1058640"> </a><div class="pPreformatted"><pre>QGRP1&#160;&#160;&#160;GRPNO=1 TMSNAME=TMS_TMQM<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&quot;TUXEDO/TMQM:/dev/device1: queuespace1&quot;<br />QGRP2&#160;&#160;&#160;GRPNO=2 TMSNAME=TMS_TMQM<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&quot;TUXEDO/TMQM:/dev/device2: queuespace2&quot;<br /><br />*SERVERS<br />TuxMsgQ<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=QGRP1  SRVID=11  RESTART=Y  CONV=N  MAXGEN=10<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT = &quot;-s queuespace1:TuxMsgQ -- -i 60 &quot;</pre></div><a name="wp1058649"> </a><div class="pPreformatted"><pre>TuxMsgQ<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=QGRP2  SRVID=12  RESTART=Y  CONV=N  MAXGEN=10<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT = &quot;-s queuespace2:TuxMsgQ -- -i 30 &quot;</pre></div><h3 class="pHeading2"><a name="wp1058652"> </a>
Configuration for Communication crossing OTMQ Queue Spaces in Multiple Oracle Tuxedo Domains
</h3>
<p class="pBody"><a name="wp1058653"> </a>
OTMQ queue spaces can be configured on different Oracle Tuxedo Domains. Applications belong to these queue spaces can communicate with each other once the DMCONFIG is configured properly.
</p>
<p class="pBody"><a name="wp1058654"> </a>
Just like the normal DMCONFIG configuration for Oracle Tuxedo cross domain service invoking, to enable one application to access the OTMQ queue space on a remote domain, the OTMQ queue space should export itself to the peers as a service. The local domain should import this service accordingly for local OTMQ applications.
</p>
<p class="pBody"><a name="wp1058655"> </a>
The following example shows the configuration of two OTMQ queue spaces that reside in the different Oracle Tuxedo Domains.
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058656"> </a>Configure OTMQ queue space &quot;QS1&quot; in UBBCONFIG for Domain &quot;DomA&quot;:</li>
<p class="pBodyRelative"><a name="wp1059504"> </a>
<code class="cCode">*GROUPS<br />QGRP1  GRPNO=1 TMSNAME=TMS_TMQM<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&quot;TUXEDO/TMQM:/dev/device1: QS1&quot;<br /><br />*SERVERS<br />TuxMsgQ<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=QGRP1  SRVID=11  RESTART=Y  CONV=N  MAXGEN=10<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT = &quot;-s QS1:TuxMsgQ -- -i 60 &quot;</code>
</p>
<li><a name="wp1058665"> </a>Configure OTMQ queue space &quot;QS2&quot; in UBBCONFIG for Domain &quot;DomB&quot;</li>
<p class="pBodyRelative"><a name="wp1059553"> </a>
<code class="cCode">*GROUPS<br />QGRP1  GRPNO=1 TMSNAME=TMS_TMQM<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OPENINFO=&quot;TUXEDO/TMQM:/dev/device2: QS2&quot;<br /><br />*SERVERS<br />TuxMsgQ<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;SRVGRP=QGRP1  SRVID=11  RESTART=Y  CONV=N  MAXGEN=10<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CLOPT = &quot;-s QS2:TuxMsgQ -- -i 30 &quot;</code>
</p>
<li><a name="wp1058674"> </a>Export OTMQ queue space &quot;QS2&quot; of &quot;DomB &quot; to remote domain &quot;DomA&quot; in DMCONFIG of &quot;DomB&quot;</li>
<p class="pBodyRelative"><a name="wp1058675"> </a>
<code class="cCode">*DM_EXPORT<br />QS2  LDOM=DomB  RDOM=DomA</code>
</p>
<li><a name="wp1058677"> </a> 	Import OTMQ queue space &quot;QS2&quot; of &quot;DomB&quot; in DMCONFIG of &quot;DomA&quot;</li>
<p class="pBodyRelative"><a name="wp1058679"> </a>
<code class="cCode">*DM_IMPORT<br />QS2  LDOM=DomA  RDOM=DomB</code>
</p>
</ul></div>
<p class="pBody"><a name="wp1058681"> </a>
After properly configuration, an application that attaches to the queue space QS1 then can directly enqueue messages, via standard enqueue APIs to a remote queue of queue space QS2 that resides in a remote domain.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058682"> </a>
Configuration for /WS Clients
</h2><p class="pBody"><a name="wp1058683"> </a>
This section describes how to configure the OTMQ WS Client. OTMQ WS client must set some environments to take advantage of WS SAF feature. The following configuration options can be set using script, WSENVFILE or default value. WSENVFILE is name of a file containing environment variable settings to be set in the client&#39;s environment. The description of its format can be seen on TUXEDO edoc.
</p>
<p class="pBody"><a name="wp1058684"> </a>
<code class="cCode">WSC_JOURNAL_ENABLE</code>: If set to 1, WS SAF is enabled. If set to 0, WS SAF is disabled. The default value is 0.
</p>
<p class="pBody"><a name="wp1058685"> </a>
<code class="cCode">WSC_JOURNAL_PATH</code>: Specifies the journal file path. The default value is &quot;./&quot; on UNIX and &quot;.\\&quot; on Windows.
</p>
<p class="pBody"><a name="wp1058686"> </a>
<code class="cCode">WSC_JOURNAL_SIZE</code>: Initial size of the journal file. The default value is 49150.
</p>
<p class="pBody"><a name="wp1058687"> </a>
<code class="cCode">WSC_JOURNAL_CYCLE_BLOCKS</code>: the journal cycles (reuses) disk blocks when full and overwrites previous messages. The default value is 0.
</p>
<p class="pBody"><a name="wp1058688"> </a>
<code class="cCode">WSC_JOURNAL_FIXED_SIZE</code>: Determines if the journal size is fixed or allowed to grow. The default value is 0.
</p>
<p class="pBody"><a name="wp1058689"> </a>
<code class="cCode">WSC_JOURNAL_PREALLOC</code>: the journal file disk blocks are pre-allocated when the journal is initially opened. The default value is 1.
</p>
<p class="pBody"><a name="wp1058690"> </a>
<code class="cCode">WSC_JOURNAL_MSG_BLOCK_SIZE</code>: Defines the file I/O block size, in bytes. The default value is 0.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058691"> </a>
Configuration for Communication with Oracle Tuxedo /Q
</h2><h3 class="pHeading2"><a name="wp1058692"> </a>
Upgrade from Oracle Tuxedo /Q
</h3>
<p class="pBody"><a name="wp1058693"> </a>
OTMQ provides a utility <code class="cCode">ConvertQSPACE()</code> to upgrade Oracle Tuxedo /Q Qspace to OTMQ Qspace, so that the customers who already deployed Oracle Tuxedo /Q applications can benefit from OTMQ new features without data lost.
</p>
<p class="pBody"><a name="wp1058694"> </a>
Refer to the <code class="cCode">ConvertQSPACE(1)</code> reference page for a full description of usage.
</p>
<p class="pBody"><a name="wp1058695"> </a>
You must do the following steps::
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<li><a name="wp1059642"> </a>Shutdown existed /Q servers and applications.</li>
<li><a name="wp1059643"> </a>ipcrm /Q Qspace ipckey.</li>
<li><a name="wp1059644"> </a>Make sure the QMCONFIG environment variable is configured as /Q device.</li>
<li><a name="wp1058699"> </a>Run the utility with a) OTMQ device name, b) Qspace to be migrated and c) OTMQ Qspace ipckey:<br /><code class="cCode">ConvertQSPACE -d [Q++ device name] -s [Qspace name] -i [Q++ ipckey]</code></li>
<li><a name="wp1058701"> </a>ipcrm OTMQ Qspace ipckey.</li>
<li><a name="wp1058702"> </a>Configure the OTMQ servers in Tuxedo UBB according to OTMQ device and Qspace name.</li>
<li><a name="wp1058703"> </a>Boot up the OTMQ servers.</li>
</ol></div>
<h3 class="pHeading2"><a name="wp1058704"> </a>
Communication with Oracle Tuxedo /Q client
</h3>
<p class="pBody"><a name="wp1058705"> </a>
After Tuxedo /Q Qspace is upgraded to OTMQ Qspace, and OTMQ servers are booted, Tuxedo /Q clients can communicate with OTMQ without any change. Alternatively Tuxedo /Q clients can be re-compiled and re-linked with OTMQ libraries to use /Q compatible APIs tpenqueue(3c) and tpdequeue(3c) provided by OTMQ. To take advantage of OTMQ new features, application code need be changed with OTMQ APIs. In one application or applications communicating with each other, /Q compatible APIs <code class="cCode">tpenqueue()</code>/ <code class="cCode">tpdequeue</code> ( should not be mixed with other OTMQ APIs such as <code class="cCode">tpenqplus()</code>/ <code class="cCode">tpdeqplus()</code>/ <code class="cCode">tpqconfirmmsg()</code>, otherwise the result is undefined.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1058706"> </a>
Configuration for Communication with Oracle Message Queue
</h2><h3 class="pHeading2"><a name="wp1058707"> </a>
Link Driver Server
</h3>
<p class="pBody"><a name="wp1058708"> </a>
OTMQ provides Link Driver Server <code class="cCode">TuxMsgQLD(5)</code> as counterpart of OMQ Link Driver to achieve message level compatibilities for cross-group communication between OTMQ and OMQ applications.
</p>
<p class="pBody"><a name="wp1058709"> </a>
Also <code class="cCode">TuxMsgQLD(5)</code> provides the routing functionality like traditional OMQ Link Driver but with limitations. For more information, see <a href="admin.html#wp1060514">Interoperability</a>
</p>
<h4 class="pHeading3"><a name="wp1058710"> </a>
Create Link Table and Routing Table in Queue Space
</h4>
<p class="pBody"><a name="wp1058711"> </a>
<code class="cCode">TuxMsgQLD(5)</code> requires pre-created link table and routing table in corresponding OTMQ Qspace. Link table consists of entries that each stands for one remote OMQ group. Routing table consists of entries that each stands for one combination of target group and routing through group. Link table and routing table are created by <code class="cCode">tmqadmin(1</code>) qspacecreate command. The default size of link table is 200, or a different size can be specified with -L option. The default size of routing table is 200, or a different size can be specified with -R option.
</p>
<p class="pBody"><a name="wp1058712"> </a>
Refer to qspacecreate command of <code class="cCode">tmqadmin(1)</code> for specifying link table and routing table size.
</p>
<h4 class="pHeading3"><a name="wp1058713"> </a>
Configure Environment
</h4>
<p class="pBody"><a name="wp1058714"> </a>
To notify remote OMQ that we are in the same bus, environment variable DMQ_BUS_ID should be defined before booting up <code class="cCode">TuxMsgQLD(5)</code>.
</p>
<h4 class="pHeading3"><a name="wp1058715"> </a>
Configuration File
</h4>
<p class="pBody"><a name="wp1058716"> </a>
<code class="cCode">TuxMsgQLD(5)</code> requires a configuration file placed under APPDIR. The configuration file name is specified by CLOPT-f parameter. Refer to the <code class="cCode">TuxMsgQLD(5)</code> reference page for a full description of the SERVERS section of the configuration file for this server.
</p>
<p class="pBody"><a name="wp1058717"> </a>
Following is an example of the Link Driver Server&#39;s configuration file:
</p>
<div class="pCodeTitle"><a name="wp1058718"> </a>
Listing&#160;5	   Link Driver Server Configuration File
</div> <p class="pBody"><a name="wp1059681"> </a>
<code class="cCode">#  Define cross-group connections with remote OMQ, </code>
</p>
<p class="pBody"><a name="wp1058719"> </a>
<code class="cCode">#  only the remove OMQ group info should be list here</code>
</p>
<p class="pBody"><a name="wp1058720"> </a>
<code class="cCode">%XGROUP</code>
</p>
<p class="pBody"><a name="wp1058721"> </a>
#Group&#160;&#160;Group&#160;&#160;&#160;Node/&#160;&#160;Init-&#160;&#160;Thresh&#160;&#160;Buffer&#160;&#160;Recon-&#160;&#160;Window&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Trans-&#160;&#160;End-
</p>
<p class="pBody"><a name="wp1058722"> </a>
#Name&#160;&#160;&#160;Number&#160;&#160;Host&#160;&#160;&#160;&#160;&#160;&#160;&#160;iate&#160;&#160;&#160;&#160;old&#160;&#160;&#160;&#160;&#160;Pool&#160;&#160;&#160;nect&#160;&#160;Delay&#160;&#160;Size(Kb)&#160;&#160;port&#160;&#160;point
</p>
<p class="pBody"><a name="wp1058723"> </a>
GRP_11&#160;&#160;&#160;11&#160;&#160;&#160;host1.abc.com&#160;&#160;Y &#160;&#160;&#160;&#160;&#160;- &#160;&#160;&#160;&#160;&#160;&#160;- &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;30 &#160;&#160;10 &#160;&#160;&#160;250 &#160;&#160;&#160;&#160;TCPIP&#160;&#160;10001
</p>
<p class="pBody"><a name="wp1058724"> </a>
GRP_12&#160;&#160;&#160;12&#160;&#160;&#160;host2.abc.com&#160;&#160;Y&#160;&#160;&#160;&#160;&#160;&#160;-&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;- &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;30&#160;&#160;10&#160;&#160;&#160;&#160;&#160;&#160;250&#160;&#160;&#160;TCPIP&#160;&#160;10002
</p>
<p class="pBody"><a name="wp1058725"> </a>
<code class="cCode">%EOS</code>
</p>
<p class="pBody"><a name="wp1058727"> </a>
<code class="cCode">%ROUTE</code>
</p>
<p class="pBody"><a name="wp1058728"> </a>
<code class="cCode">#----------------------------------</code>
</p>
<p class="pBody"><a name="wp1058729"> </a>
<code class="cCode">#  Target    Route-through</code>
</p>
<p class="pBody"><a name="wp1058730"> </a>
<code class="cCode">#  Group     Group</code>
</p>
<p class="pBody"><a name="wp1058731"> </a>
<code class="cCode">#----------------------------------</code>
</p>
<p class="pBody"><a name="wp1058732"> </a>
<code class="cCode">     2           11</code>
</p>
<p class="pBody"><a name="wp1058733"> </a>
<code class="cCode">     3           12</code>
</p>
<p class="pBody"><a name="wp1058734"> </a>
<code class="cCode">%EOS</code>
</p>
<p class="pBody"><a name="wp1058735"> </a>
<code class="cCode">%END</code>
</p>
<h4 class="pHeading3"><a name="wp1058737"> </a>
%XGROUP Section
</h4>
<p class="pBody"><a name="wp1058738"> </a>
Following attributes are mandatory for OTMQ to setup XGROUP connection to the remote OMQ group:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058739"> </a>Group Name -- Remote OMQ group name by which the remote OMQ group is known to the local OTMQ Qspace</li>
<li><a name="wp1058740"> </a>Group Number -- Remote OMQ group number</li>
<li><a name="wp1058741"> </a>Node/Host -- Network name of remote OMQ group</li>
<li><a name="wp1058742"> </a>Endpoint -- The internet port number of the remote OMQ link listener process</li>
</ul></div>
<p class="pBody"><a name="wp1058743"> </a>
Following attributes are optional. If not set, default values will be used:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058744"> </a>Initiate -- &quot;Y&quot;, &quot;N&quot; or &quot;D&quot;.  Indicating whether connections to this node should be initiated (connect when local group startup) or whether connections to this node is enabled. Default is &quot;N&quot;.</li>
<li><a name="wp1058745"> </a>Reconnect -- Interval in seconds, between reconnect attempts when this cross-group link is not connected. Default is 60.</li>
<li><a name="wp1058746"> </a>Window Delay -- Delay in seconds, that a sender must wait before using a new window when the receiver is congested. Default is 10.</li>
<li><a name="wp1058747"> </a>Windows Size -- Maximum number of messages a group can send to another group before requesting permission to send more. Default is 250.</li>
<li><a name="wp1058748"> </a>Transport: Network protocol stack used. Only &quot;TCPIP&quot; is supported.</li>
</ul></div>
<p class="pBody"><a name="wp1058749"> </a>
Following attributes are not supported by OTMQ Link Driver Server, just to keep align with traditional OMQ XGROUP settings:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058750"> </a>Buffer Pool -- Not supported by OTMQ for now.</li>
<li><a name="wp1058751"> </a>Threshold -- Not supported by OTMQ for now.</li>
</ul></div>
<h4 class="pHeading3"><a name="wp1058752"> </a>
%ROUTE
</h4>
<p class="pBody"><a name="wp1058753"> </a>
Following attributes are mandatory for OTMQ to setup ROUTE info for the remote OMQ/OTMQ groups that can&#39;t be connected directly:
</p>
<div class="pSmartList1Bullet"><ul>
<li><a name="wp1058754"> </a>Target Group -- OMQ/OTMQ group for which traffic is being routed to.</li>
<li><a name="wp1058755"> </a>Route-through Group -- OMQ group to which traffic for the target group will be routed through.</li>
</ul></div>
<a name="wp1058757"> </a><table class="Note">
<tr>
<td valign="top"><strong>Notes:</strong></td>
<td></td></tr>
</table>

<div class="pSmartList1NoteBullet"><ul>
<li><a name="wp1058758"> </a>Route-through Groups should be the directly connected OMQ groups defined in the <code class="cCode">%XGROUP</code> section</li>
<li><a name="wp1058759"> </a>Cannot define multiple routing entries for the same Target Group.</li>
</ul></div>
<h3 class="pHeading2"><a name="wp1060254"> </a>
Client Library Server
</h3>
<p class="pBody"><a name="wp1060255"> </a>
OTMQ provides Client Library Server <code class="cCode">TuxCls(5)</code> as counterpart of OMQ Client Library Server to achieve message-level compatibilities with OMQ workstation clients. With <code class="cCode">TuxCls(5)</code> deployed, OMQ workstation clients can work with OTMQ servers without any change.
</p>
<p class="pBody"><a name="wp1058761"> </a>
<code class="cCode">TuxCls(5) </code>works as proxy of OTMQ clients, so the max count of supported OMQ clients is configured by <code class="cCode">MIN </code>and <code class="cCode">MAX </code>parameters of <code class="cCode">TuxCls(5)</code> in the UBBCONFIG <code class="cCode">*SERVERS</code> section.
</p>
<p class="pBody"><a name="wp1058762"> </a>
On windows, MIN must be set to 1 or not configured, MAX must be set in the range 2-512. The max OMQ clients count connected to OTMQ is limited to 511.
</p>
<p class="pBody"><a name="wp1058763"> </a>
On UNIX, MIN must be set to 1 or not configured, MAX has no limitation. The max OMQ clients count connected to OTMQ depends on the operating system and Oracle Tuxedo limitations.
</p>
<p>&nbsp;</p>
<hr noshade="noshade"/>
<h2 class="pHeading1"><a name="wp1059913"> </a>
See Also
</h2><div class="pSmartList1Bullet"><ul>
<li><a name="wp1059918"> </a><span class="cHyperlink">
<a href="../ref/index.html">Oracle Tuxedo Message Queue Reference Guide</a></span></li>
</ul></div>
 
<br/>
    <table id="SummaryNotReq2" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
&nbsp;
<a href="admin.html"><img id="LongDescNotReq7" src="/global_resources/images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a accesskey="4" href="index.html"><img id="LongDescNotReq8" src="/global_resources/images/prevtop.gif" border="0" alt="Previous" /></a>&nbsp;
<img id="LongDescNotReq9" src="/global_resources/images/nexttop_disabled.gif" border="0" alt="Next" />
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://edocs.bea.com/copyright.html">&copy; BEA Systems</a></noscript>
        </td>
      </tr>
    </table>

<!-- WebAnalytics BEGIN -->

<!--#include virtual="/global_resources/edocs_wt.html"-->
      
<!-- WebAnalytics END -->

  </body>
</html>
